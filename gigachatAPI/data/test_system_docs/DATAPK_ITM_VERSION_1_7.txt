
    Основные функции
        CL ITM осуществляет оперативное получение и автоматический анализ данных о
            производительности компонентов АИС, агрегацию данных мониторинга в масштабах
            предприятия, предоставление сводных данных пользователям системы и смежным системам.
        Отличительными особенностями системы CL ITM являются:
            Трехуровневая иерархическая структура комплекса, оптимизированная для использования
                в территориально распределенных промышленных предприятиях.
                Включена в единый реестр российских программ для ЭВМ и БД.
            Сертифицирована ФСТЭК России по требованиям безопасности информации.
        Параметры функционирования и наборы шаблонов мониторинга адаптированы для использования в
            отечественных АСУ ТП в соответствии с требованиями ИБ КИИ.
        Основными функциями CL ITM являются:
            Мониторинг параметров функционирования компонентов защищаемых АИС, формирование
                оповещений при обнаружении отклонений от нормы.
            Автоматическое получение списков объектов защиты из комплексов DATAPK и
                автоматизированная постановка объектов защиты на мониторинг.
            Консолидация и визуализация на уровне администрации предприятия:
                    Списка объектов защиты в филиалах и технологических объектах, состояния их
                        функционирования, свойств и инвентарных данных.
                    Списка событий нарушений функционирования объектов защиты.
            Предоставление смежным системам ИБ сводных данных о составе и свойствах объектов
                защиты и параметров их функционирования: системам обнаружения компьютерных
                инцидентов, системам автоматизации процессов ИБ, SIEM, SOAR и т.п.
|*|*|*|
    Лицензионная политика
        Система зонтичного мониторинга автоматизированных и информационных систем «Cyberlympha
            ITM» (Cyberlympha ITM, CL ITM)
                        Код лицензии p/n
                        Наименование
                        Порядок применения
                        UDV-DPK-ITM-VM-LIC
                            Сервер визуализации и управления
                            Лицензия на использование программного обеспечения CL ITM, модуль «CL
                                ITM Визуализация и управление»
                            Требуется 1 лицензия для сервера CL ITM-VM уровня администрации.
                            Лицензируется весь основной функционал ITM-VM.
                        UDV-DPK-ITM-VMH1-LIC
                            Лицензия на подключение объектов для контроля
                            Лицензия на использование программного обеспечения CL ITM, контроль
                                500 объектов
                            Пакеты лицензий для контроля объектов, мониторинг которых
                                осуществляется другими системами мониторинга, не ITM-M или ITM-RM
                                (Zabbix и др.).
                            Для ОМ, которые подключены по лицензии ITM-H, лицензии VMH не
                                требуются.
                        UDV-DPK-ITM-VMH2-LIC
                        Лицензия на использование программного обеспечения CL ITM,
                            контроль1000 объектов
                        UDV-DPK-ITM-VMH3-LIC
                        Лицензия на использование программного обеспечения CL ITM, контроль
                            10000 объектов
                        UDV-DPK-ITM-M-LIC
                            Сервер мониторинга
                            Лицензия на использование программного обеспечения CL ITM, модуль «CL
                                ITM Мониторинг»
                        Требуется 1 лицензия для каждого сервера CL ITM-M уровня
                            филиала
                        UDV-DPK-ITM-RM-LIC
                            Сервер удаленного мониторинга
                            Лицензия на использование программного обеспечения CL ITM, модуль «CL
                                ITM Удаленный мониторинг»
                        Требуется 1 лицензия для каждого сервера CL ITM-RM уровня
                            технологического объекта
                        UDV-DPK-ITM-H-LIC
                            Лицензия на подключение объектов для комплексного
                                мониторинга
                            Лицензия на использование программного обеспечения CL ITM, мониторинг
                                50 узлов
                            Пакет лицензий комплексного мониторинга 50 объектов мониторинга.
                            Требуется для серверов CL ITM-M или CL ITM-RM.
                            Лицензируется функционал агентного или безагентного мониторинга и
                                контроля. ОМ, которые подключены по данной лицензии не требуют
                                дополнительных лицензий ни на каком уровне иерархии решения, т.е. в
                                рамках этой лицензии ОМ может быть подключен для мониторинга к
                                серверу ITM-M или ITM-RM и контролироваться на уровне сервера
                                ITM-VM.
                            Количество узлов в пакетах лицензий должно соответствовать или быть
                                больше количества фактически подключаемых объектов мониторинга.
                            Объектами мониторинга считаются:
                                любые ИТ-ресурсы, которые подключаются в качестве узлов сети
                                    (раздел Мониторинг → Узлы сети)
                                ИТ-услуги (раздел Мониторинг → Услуги)
                        UDV-DPK-ITM-DVD
                        Комплект дистрибутива «программный комплекс «Cyberlympha ITM»
                            на DVD-носителе
                        Поддержка
                        Каждая указанная позиция имеет лицензии на разные пакеты
                            тех.поддержки.
|*|*|*|
    Архитектура
        Архитектура ПК CL ITM разработана для создания комплексных корпоративных система
            мониторинга распределенных ИТ-ресурсов и включает в свой состав готовые тиражируемые
            решения для трех уровней иерархии:
            Сервер визуализации и управления (предприятие) – для консолидации данных
                мониторинга в масштабах предприятия.
            Сервер мониторинга (филиал) – для осуществления непосредственно мониторинга
                отдельных компонент защищаемых систем на уровне филиала или отдельного сетевого
                сегмента.
            Сервер удаленного мониторинга (технологический объект) – для осуществления
                необслуживаемого мониторинга компонент АИС в удаленных сетевых сегментах или
                производственных площадках.
            Сервер визуализации и управления (уровень администрации)
            Сервер визуализации и управления реализует следующие функции:
                Консолидация данных мониторинга из распределенного множества локальных систем
                        мониторинга:
                        Серверов мониторинга ITM,
                        Серверов мониторинга Zabbix.
                Предоставление пользователям системы обобщенной информации о функционировании
                    ИТ-ресурсов предприятия.
                Оповещение пользователей системы о проблемах функционирования ИТ-ресурсов.
                Предоставление корпоративным ИС информации о состоянии и свойствах ИТ-ресурсов
                        предприятия:
                        Системе мониторинга компьютерных инцидентов (СМКИ) / SIEM о событиях и
                            проблемах функционирования;
                        Системам автоматизации процессов ИТ или ИБ об ИТ-ресурсах и их
                            свойствах.
            Сервер визуализации и управления консолидирует следующие данные из серверов
                мониторинга:
                Перечень ИТ-ресурсов (объектов мониторинга, узлов сети), их свойства и
                    инвентарные данные;
                Состояние работоспособности ИТ-ресурсов, проблемы и предупреждения о нарушении
                    их функционирования;
                Перечень ИТ-сервисов (услуг) и их состояние функционирования.
            Сервер мониторинга (уровень филиала)
            Предназначен для осуществления мониторинга отдельных ИТ-ресурсов (узлов сети,
                объектов мониторинга) в сетевом сегменте или на уровне филиала.
            Является самодостаточным сервером мониторинга, может использоваться службой
                эксплуатации филиала для оперативного мониторинга ИТ-ресурсов и рассылки
                оповещений.
            Взаимодействие пользователя с сервером осуществляется с помощью Web-интерфейса.
            Сервер мониторинга в автоматическом режиме получает список объектов защиты и их
                свойств из комплексов DATAPK для автоматизированного подключения их к системе для
                мониторинга.
            Типовой состав параметров функционирования компонент АИС, мониторинг которых
                осуществляется CL ITM
            Автоматизированные рабочие места (АРМ) и серверы на базе ОС Windows и
                Linux:
            Сбор параметров функционирования осуществляется агентным или безагентным способом с
                использованием протоколов SNMP, IPMI, WMI,
            Периодичность получения параметров функционирования является настраиваемой,
            В стандартный комплект поставки включены шаблоны для мониторинга следующих параметров
                АРМ и серверов:
                Состояние сетевой доступности устройства,
                Загрузка ЦП;
                Загрузка оперативной памяти;
                Загрузка HDD: объем свободного и занятого пространства; скорость записи и чтения
                    информации с диска;
                Загрузка сетевых интерфейсов: объем отправленных и полученных данных.
            Состав контролируемых параметров может быть дополнен.
            Cетевое оборудование и сетевые устройства:
            Сбор параметров функционирования осуществляется безагентным способом с использованием
                протокола SNMP.
            Периодичность получения параметров функционирования является настраиваемой,
            В стандартный комплект поставки включены шаблоны для мониторинга следующих
                параметров:
                Состояние сетевой доступности устройства,
                Загрузка ЦП*;
                Загрузка оперативной памяти*;
                Загрузка сетевых интерфейсов: объем отправленных и полученных данных*;
            * Мониторинг параметров, по умолчанию, осуществляется с использованием стандартных
                библиотек MIB. Существует возможность загрузки специализированных библиотек MIB от
                производителя.
            Состав контролируемых параметров может быть дополнен.
            Сервер удаленного мониторинга
            Сервер удаленного мониторинга предназначен для осуществления необслуживаемого
                мониторинга ИТ-ресурсов на удаленных или изолированных производственных площадках и
                предоставления данных о состоянии их функционирования серверу мониторинга.
            Использование сервера удаленного мониторинга позволяет осуществить оптимизацию
                трафика и потоков сетевого взаимодействия с объектами находящимися на промышленных
                площадках с ограниченным сетевым доступом.
            Сервер удаленного мониторинга работает только совместно с сервером мониторинга.
            Сервер удаленного мониторинга рекомендуется использовать в следующих случаях:
                Для мониторинга ИТ-ресурсов на удалённых объектах с каналами связи с низкой
                    пропускной способностью и/или низкой стабильностью.
                Для оптимизации межсетевого взаимодействия при мониторинге ИТ-ресурсов
                    расположенных в разных сегментах корпоративных АИС.
                Для снижения нагрузки на сервер мониторинга.
|*|*|*|
    Обслуживание узлов сети
            Во время обслуживания администратор может выполнять с узлом сети действия,
                    которые могут повлиять на сбор данных. В  можно указать периоды обслуживания для
                    узлов сети или групп узлов сети. В этот период в узел сети в интерфейсе будет
                    отмечен иконкой .Чтобы периоды обслуживания на разных
                компонентах  совпадали, используйте общий часовой
                пояс для всех компонентов .
            Сервер  должен работать во
                    время обслуживания. Включение и выключение режима обслуживания происходит в
                    нулевую секунду каждой минуты. Когда узел сети переходит в режим
                обслуживания,  перечитывает все открытые проблемы для
                проверки того, требуется ли их подавить. Такое поведение может повлиять на
                производительность, если открытых проблем много. Если к узлу сети, который
                    находится в обслуживании, добавить элемент данных для сбора логов, то этот
                    элемент будет собирать только те данные, которые попадут в логи уже после
                    завершения обслуживания.Если пользователь меняет период обслуживания, узлы
                сети, группы или теги, эти изменения вначале попадают в кэш конфигурации и
                применяются только после обновления кэша. Период обновления кэша конфигурации
                задается в секундах и хранится в переменной . Пример: если =60, то обновления вступят
                    в силу через 60 секунд.
        Имеется два типа обслуживания: со сбором данных и без сбора данных.
            Режим «со сбором данных»
            В режиме «со сбором данных» данные с узла сети передаются на сервер . Триггеры обрабатываются как обычно.
            Режим «без сбора данных»
            В режиме «без сбора данных» данные с узла сети не передаются на сервер  в течение всего периода обслуживания. Триггеры
                этого узла сети не будут срабатывать в течение периода обслуживания, так как
                обновления данных не происходит.
            Данные, которые передаются на узел сети, могут содержать временную метку. Временная
                метка — набор символов, показывающий дату и время. Если данные с временной меткой
                передаются на узел сети в режиме обслуживания «без сбора данных», то будут ли
                приняты данные, зависит от метки:
                    если временная метка входит в период обслуживания, то данные не будут
                        приняты;
                    если временная метка входит в период, который был до начала обслуживания, то
                        данные будут приняты. 
            После завершения обслуживания «без сбора данных» триггеры узла сети, которые
                используют функцию nodata(time), не активируются до момента
                следующей проверки, который зависит от параметра time.
                    nodata(time) — это функция, которая проверяет, были ли получены
                    данные за указанный период времени time. 
        В этом разделе:
                Настройка периода
                        обслуживания
                Просмотр состояния
                    обслуживания
|*|*|*|
    Полный список изменений в новой версии DATAPK ITM-VM
        На странице представлен полный список изменений  версии 1.7.0.0 (по задачам, для внутреннего использования).
                        Раздел
                        Тип
                        Описание изменений
                        ИТ-услуги
                        Ошибка
                        Серверы мониторинга
                        Ошибка
                        Серверы мониторинга
                        Ошибка
                        Скрипты, переменные
                        Задача
                        Внешний вид
                        Ошибка
                        Отчет о проблемах
                        Задача
                            Изменен шаблон письма с отчетом о проблемах:
                                    Добавлены столбцы с нумерацией строк и состоянием
                                        проблемы.
                                    Добавлена строка с информацией об общем количестве событий и
                                        о количестве нерешенных проблем
                        Отчет о проблемах
                        Задача
                            Добавлено наименование оповещения в текст письма с отчетом о
                                проблемах
                        Роли пользователей
                        Задача
                        Роли пользователей
                        Задача
                        Email-оповещения, внешний вид
                        Задача
                        Переменные, основные настройки
                        Задача
                        Серверы мониторинга
                        Задача
                        Серверы мониторинга
                        Задача
                            Добавлено автоматическое обновление до новой версии сервера ,
                                подключенного к . После обновления сбор данных с  продолжится
                        Серверы мониторинга
                        Задача
                            Добавлено автоматическое обновление до новой версии сервера Zabbix,
                                подключенного к . После обновления сбор данных с Zabbix продолжится
                        Серверы мониторинга
                        Задача
                        Проблемы, серверы мониторинга, объекты мониторинга
                        Задача
                        Объекты мониторинга
                        Задача
                        Объекты мониторинга
                        Задача
                            На странице :
                                    исключено дерево филиалов и ,
                                        теперь по умолчанию в списке отображаются все
                                            ;
                                    добавлена возможность фильтрации  по филиалу и
                        Объекты мониторинга
                        Задача
                            Добавлен столбец «Тип » в таблицу на странице 
                        Объекты мониторинга
                        Задача
                        Добавлен столбец «Ссылки» в таблицу на странице 
                        Объекты мониторинга
                        Задача
                            Добавлен счетчик количества  на странице 
                        Объекты мониторинга
                        Задача
                            Добавлена возможность просмотра всех проблем выбранного
                                     при нажатии на
                                значение в столбце «Проблемы» на странице 
                        Проблемы
                        Задача
                            Изменен счетчик записей на странице 
                        Проблемы
                        Задача
                            Добавлена возможность сортировки по длительности проблем на
                                странице 
                        Проблемы
                        Задача
                        Добавлена возможность фильтрации списка по состоянию проблем на
                            странице 
                        Проблемы
                        Задача
                            Добавлена возможность фильтрации списка по объектам мониторинга на
                                странице 
                        Проблемы
                        Задача
                            Добавлена возможность поиска   в фильтре «Объект» на странице
                        Оповещения
                        Задача
                        Администрирование, журнал событий
                        Задача
                        Объекты мониторинга, внешний вид
                        Ошибка
|*|*|*|
    Полный список изменений в новой версии UDV-ITM-M
        На странице представлен полный список изменений  версии 1.7.0.0 (по
            задачам, для внутреннего использования).
                        Раздел
                        Тип
                        Описание изменений
                        Шаблоны
                        Задача
                        Шаблоны
                        Задача
                        Изменены следующие шаблоны:
                            Агент.yaml — добавлены инвентарные поля к
                                некоторым из собираемых данных.
                            Windows агентный сбор.yaml — изменена панель
                                        «Производительность системы», добавлен график для
                                        оперативной памяти, добавлены инвентарные поля к некоторым
                                        из собираемых данных, название элемента данных «Описание
                                        системы» изменено на «Системная информация».
                            Linux агентный сбор.yaml — изменена панель
                                        «Производительность системы», добавлены инвентарные поля к
                                        некоторым из собираемых данных, деактивирован элемент данных
                                        «Список установленных пакетов», название элемента данных
                                        «Описание системы» изменено на «Системная информация». 
                            Сетевое универсальное устройство SNMP.yaml
                                — отредактированы правила предобработки.
                            Windows SNMP.yaml — добавлены инвентарные поля к
                                        некоторым из собираемых данных, исправлено имя макроса в
                                        присоединенном к Windows SNMP.yaml шаблоне
                                            SNMP MIB. Ресурсы узла, деактивирован
                                        элемент данных «Идентификатор системного объекта».
                            Linux SNMP.yaml — добавлены инвентарные поля к
                                        некоторым из собираемых данных, деактивирован элемент данных
                                        «Идентификатор системного объекта».
                            Общий ПЛК.yaml — добавлены элементы данных
                                для мониторинга узлов с помощью ICMP. 
                            APC Smart-UPS.yaml — отредактированы
                                правила предобработки. 
                            Eltex MES Общий.yaml — отредактированы правила
                                        предобработки. Исправлен мониторинг коммутаторов в
                                        стеке
                        Шаблоны, Элементы данных, Графики
                        Задача
                        Шаблоны
                        Задача
                        Шаблоны
                        Задача
                        Исправлена опечатка  в описании элемента данных в шаблоне ИБП
                                Парус Электро.yaml
                        Шаблоны
                        Задача
                        Шаблоны
                        Задача
                        Шаблоны
                        Задача
                        Шаблоны
                        Задача
                        Добавлен шаблон Eltex MES5448.yaml
                        Шаблоны
                        Задача
                        Изменен шаблон Управляемый блок розеток Rem-MC.yaml. Добавлены триггеры для внутренних датчиков блока розеток. Исправлено получение SNMP-ловушек. Исправлены названия элементов данных и групп элементов данных
                        Шаблоны
                        Задача
                        Добавлен шаблон Коммутатор MOXA серии
                            EDS.yaml
|*|*|*|
    Полный список изменений в новой версии DATAPK ITM-K
        На странице представлен полный список изменений  версии
            1.7.0.0 (по задачам, для внутреннего использования).
                        Раздел
                        Тип
                        Описание изменений
                        Шаблоны
                        Задача
                        Шаблоны
                        Задача
                        Изменены следующие шаблоны:
                                    Агент.yaml — добавлены инвентарные поля к
                                        некоторым из собираемых данных.
                                    Windows агентный сбор.yaml — изменена
                                        панель «Производительность системы», добавлен график для
                                        оперативной памяти.
                                    Linux агентный сбор.yaml — изменена панель
                                        «Производительность системы». 
                                    Сетевое универсальное устройство SNMP.yaml
                                        — отредактированы правила предобработки.
                                    Windows SNMP.yaml — добавлены инвентарные
                                        поля к некоторым из собираемых данных.
                                    Linux SNMP.yaml — добавлены инвентарные
                                        поля к некоторым из собираемых данных.
                                    Общий ПЛК.yaml — добавлены элементы данных
                                        для мониторинга узлов с помощью ICMP. 
                                    APC Smart-UPS.yaml — отредактированы
                                        правила предобработки. 
                                    Eltex MES SNMPv2.yaml — отредактированы
                                        правила предобработки. Исправлен мониторинг коммутаторов в
                                        стеке
                        Шаблоны, Элементы данных, Графики
                        Задача
                        Шаблоны
                        Задача
|*|*|*|
    Нештатные ситуации и способы их устранения
        Дополнительно может потребоваться следующая информация:
                полная техническая информация о системе и логи (используйте скрипт сбора
                    детальной информации о системе, подробнее см. в разделе );
                свободное место на корневом разделе диска; Используйте команду
                            df -h /.
                свободная оперативная память, текущий список процессов; Используйте команду htop.
                значение Load Average;
                загрузка диска. Используйте команду
                        iotop.
            В этом разделе:
|*|*|*|
    Ошибка интеграции с SIEM
            Происходит перезапуск контейнера itm_m_siem_connector. В логах текст «Для интеграции
                с SIEM не переданы обязательные переменные окружения  и ».
                Причина
                Отсутствие переменных  и  в файле .env при включенной
                    интеграции с SIEM.
                Способ устранения
                        vi /opt/itm-vm/.env
                        Проверьте наличие в файле переменных  и .
                        В случае отсутствия переменных  и
                                 добавьте их в файл.
                            =127.0.0.1
=10.51.30.99                          
                        Cохраните файл и выйдите из режима редактирования: 
                            :wq
|*|*|*|
    Конфликт подсети контейнеров
            Причина 1
                Адрес подсети контейнеров уже используется в вашей инфраструктуре.
                Способ устранения 
                Для устранения проблемы измените подсеть контейнеров
                    Docker:
                        Проверьте и при необходимости отредактируйте файл :
                                Если в файле  не заданы переменные  и
                                        , добавьте в файл
                                    строки:
                                =XXX.XXX.XXX.XXX/XX
=XXX.XXX.XXX.XXX
                                    Где XXX.XXX.XXX.XXX/XX — новая подсеть, XXX.XXX.XXX.XXX — новый
                                    сетевой шлюз. 
                                Если в файле  уже указаны значения переменных  и , задайте им новые
                                    значения.
            Причина 2Адрес подсети docker0 используется в вашей инфраструктуре.
                Способ устранения 1
                        Остановите и удалите все контейнеры, которые не указаны в
                                docker-compose файлах:
                            docker-compose down --remove-orphans
                        Просмотрите список маршрутов одной из команд:
                                    route -n
                                        Результат работы команды route -n
                                    ip r
                                        Результат работы команды ip r
                        Убедитесь, что в списке маршрутов отсутствуют контейнерные подсети,
                            кроме docker0. Для этого просмотрите список контейнерных подсетей
                            командой: 
                            docker network ls
                        При наличии в списке других подсетей найдите их идентификаторы сети в
                            столбце NETWORK ID.
                                Список контейнерных подсетей
                             В приведенном выше списке идентификатор сети c именем bridge —
                            bf34584f056d.
                        При необходимости удалите контейнерные подсети, кроме docker0: 
                            docker network rm [идентификатор подсети]
                            Рекомендуется удалять контейнерную подсеть только
                                в случае проблем с инициализацией.
                        Создайте файл /etc/docker/daemon.json.
                        Добавьте в файл адрес узла сети и маску сети.
                            {
"bip": "172.17.77.1/24"
}
                        Перезапустите службу docker:
                            systemctl restart docker
                        Отредактируйте файл pg_hba.conf. Для этого:
                                Перейдите в режим редактирования файла
                                        pg_hba.conf с помощью команды:
                                    vi /var/lib/jatoba/1/data/pg_hba.conf
                                Измените IP-адрес и маску подсети контейнеров Docker в разделе
                                    «# IPv4 local connections:» в строке вида:
                                    host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        Отредактируйте файл postgresql.conf. Для этого: 
                                Измените значение переменной listen_addresses
                                    в разделе «CONNECTIONS AND AUTHENTICATION», чтобы оно
                                    соответствовало представленному ниже: 
                                listen_addresses = '127.0.0.1,172.17.77.1'Где:
                                        127.0.0.1 — локальный IP-адрес сервера ;
                                        172.17.77.1 — IP-адрес подсети docker0, заданный на шаге
                                                .
                Способ устранения 2
                        Удалите все Docker-контейнеры, включая запущенные контейнеры:
                            docker rm -f $(docker ps -a -q)
                            При использовании  версии старше 1.3.1.0 эта
                                команда приведет к удалению базы данных.
|*|*|*|
    Не удается зайти в веб-интерфейс UDV-ITM-VM с корректными учетными данными
            В качестве причин недоступности веб-интерфейса  рассмотрены следующие:
                            не задано значение переменной  в
                                файле .itmm_password_secret_key либо переменная  закомментирована;
                                в файле pg_hba.conf указано значение только для одной
                                    базы данных, а не для нескольких.
                            модуль управления парольными политиками «securityprofile» не был повторно
                                инициализирован после перезагрузки сервера СУБД или перезапуска службы
                                jatoba-1.
                Причина 1
                Не задано значение переменной  в
                    файле .itmm_password_secret_key либо переменная  закомментирована.
                Описание проблемы
                Не удается зайти в веб-интерфейс  с корректными учетными данными. При
                    запуске контейнеров  командой
                        docker-compose up -d происходит одно из следующих
                        действий:
                        в консоли выводится сообщение: «The  variable is not set. Defaulting
                            to a blank string.». 
                        перезапускаются контейнеры itm_m_zabbix_connector,
                            itm_m_notifier_service, itm_m_user_service. В логах
                            itm_m_zabbix_connector содержится запись вида: «Значение поля "key"
                            (Ключ для шифрования паролей) из переменной окружения  не прошло валидацию: Значение
                            должно равняться 32 байтам. Текущая длина — <...> байт».
                Способ устранения
                        Сгенерируйте новый ключ для шифрования и дешифрования паролей:
                            LC_ALL=C tr -dc 'A-Za-z0-9!$%^*' </dev/urandom | head -c 32 ; echo ''
                        Откройте для редактирования файл
                            .itmm_password_secret_key. 
                        Удалите старый ключ.
                            При повторном изменении или утере значения
                                переменной  локальные
                                пользователи не смогут войти в веб-интерфейс ,
                                перестанет работать синхронизация с , LDAP и SMTP.
                        Вставьте новый ключ.
                        Сохраните изменения и закройте файл
                            .itmm_password_secret_key. 
                        Обратитесь в техподдержку по адресу itm@ussc.ru и запросите
                            скрипт для удаления баз данных.
                Причина 2
                В файле pg_hba.conf указано следующее значение для подключения:
                    host itmm itmm_user 172.15.0.1/24 md5
                Это значение подходит только для одной базы данных, нужно разрешить подключение
                    для нескольких баз данных.
                Описание проблемы
                При попытке зайти в веб-интерфейс  выводится сообщение «Внутренняя ошибка
                    сервера». При вызове окна «инструменты разработчика» через F12 выводятся
                    сообщения о некорректном шлюзе. 
                При этом контейнеры не перезапускаются, в контейнере itm_m_user_service ошибка
                    вида: 
                "Не удалось подключиться к БД postgresql+asyncpg//postgres:**********@host.docker.internal:10265/user_service - в pg_hba.conf нет записи для компьютера "172.15.0.6", пользователя "itmm_user", базы "user_service", SSL выкл."
                Способ устранения
                        Отредактируйте файл :
                                перейдите в режим редактирования файла:
                                    vi /var/lib/jatoba/1/data/pg_hba.conf
                                найдите строку, вызывающую ошибку:
                                    host itmm [имя пользователя БД] 172.15.0.1/24 md5
                                для пользователя itmm_user строка будет иметь вид:
                                    host itmm itmm_user 172.15.0.1/24 md5
                                отредактируйте строку, чтобы установить подключение к
                                    нескольким БД:
                                    host all [имя пользователя БД] 172.15.0.1/24 md5
                Причина 3
                Модуль управления парольными политиками «securityprofile» не был повторно
                    инициализирован после перезагрузки сервера СУБД или перезапуска службы
                    jatoba-1.
                Описание проблемы
                После перезагрузки сервера СУБД или перезапуска службы jatoba-1 не удается зайти
                    в веб-интерфейс  с корректными
                    учетными данными. При попытке авторизации в веб-интерфейсе появляется сообщение
                    «Внутренняя ошибка сервера», а в логах СУБД, расположенных в директории
                    /var/lib/jatoba/1/data/log, содержится ошибка «FATAL:
                    Extension securityprofile need to be initialized by superuser.».
                Способ устранения
                Повторно инициализируйте модуль управления парольными политиками
                    пользователей СУБД «securityprofile». Для этого:
                        Войдите в интерактивный терминал для работы с postgresql под
                            пользователем postgres:
                            sudo -u postgres psql -p 10265 -h 127.0.0.1 -U [имя пользователя] [имя базы]
                            Где:
                                -u postgres — пользователь ОС;
                                -p 10265 — порт, через который будет
                                    произведено подключение к базе данных;
                                -h 127.0.0.1 — подключение к хосту
                                    127.0.0.1;
                                -U [имя пользователя] — подключение от имени
                                    указанного пользователя.
                        Инициализируйте модуль «securityprofile» c помощью команды:
                            SELECT SECURITYPROFILE.SYNCHRONIZE();
                        Покиньте терминал:
                            \q
|*|*|*|
    Нештатные ситуации и способы их устранения
        Дополнительно может потребоваться следующая информация:
                полная техническая информация о системе и логи (используйте скрипт сбора
                    детальной информации о системе, подробнее см. в разделе );
                свободное место на корневом разделе диска; используйте команду
                            df -h /.
                свободная оперативная память, текущий список процессов; используйте команду htop.
                значение Load Average;
                загрузка диска. используйте команду
                        iotop.
            В этом разделе:
|*|*|*|
    Не запускаются контейнеры docker
            В командной строке при попытке запуска контейнеров docker появляются сообщения об
                ошибке вида: «for <имя сервиса> cannot create container for service <имя
                сервиса>: invalid IP address <...>».
                Причина
                Устаревшая версия docker.
                Способ устранения
                        Обновите docker до версии 20. Для этого выполните действия, описанные в
                            разделе .
|*|*|*|
    Ошибка вида «WARNING overcommit_memory is set to 0! Background save may fail under low
        memory condition.<...>»
            В логах контейнера itm_m_redis содержится сообщение об ошибке «WARNING
                overcommit_memory is set to 0! Background save may fail under low memory condition.
                To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot
                or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.».
                Причина
                Значение vm.overcommit_memory=0, из-за чего при недостатке
                    памяти может не работать автосохранение в фоновом режиме.
                Способ устранения
                                Перезагрузите сервер для применения изменений.
|*|*|*|
    Не удается зайти в веб-интерфейс DATAPK ITM-VM с корректными учетными данными
            В качестве причин недоступности веб-интерфейса  рассмотрены следующие:
                    Не задано значение переменной  в
                        файле .itmm_password_secret_key либо переменная  закомментирована.
                        В файле pg_hba.conf указано значение только для одной
                            базы данных, а не для нескольких.
                    Модуль управления парольными политиками «securityprofile» не был повторно
                        инициализирован после перезагрузки сервера СУБД или перезапуска службы
                        jatoba-1.
                Причина 1
                Не задано значение переменной  в
                    файле .itmm_password_secret_key либо переменная  закомментирована.
                Описание проблемы
                Не удается зайти в веб-интерфейс  с
                    корректными учетными данными. При запуске контейнеров  командой docker-compose up -d
                    происходит одно из следующих действий:
                        В консоли выводится сообщение: «The  variable is not set. Defaulting
                            to a blank string.». 
                        Перезапускаются контейнеры itm_m_zabbix_connector,
                            itm_m_notifier_service, itm_m_user_service. В логах
                            itm_m_zabbix_connector содержится запись вида: «Значение поля "key"
                            (Ключ для шифрования паролей) из переменной окружения  не прошло валидацию: Значение
                            должно равняться 32 байтам. Текущая длина — <...> байт».
                Способ устранения
                        Сгенерируйте новый ключ для шифрования и дешифрования паролей:
                            LC_ALL=C tr -dc 'A-Za-z0-9!$%^*' </dev/urandom | head -c 32 ; echo ''
                        Откройте для редактирования файл
                                .itmm_password_secret_key. 
                        Удалите старый ключ.
                            При повторном изменении или утере значения
                                переменной  локальные
                                пользователи не смогут войти в веб-интерфейс ,
                                перестанет работать синхронизация с ,  и .
                        Вставьте новый ключ.
                        Сохраните изменения и закройте файл
                                .itmm_password_secret_key. 
                        Обратитесь в техподдержку по адресу itm@ussc.ru и запросите
                            скрипт для удаления баз данных.
                Причина 2
                В файле pg_hba.conf указано следующее значение для подключения:
                    host itmm itmm_user 172.15.0.1/24 md5
                Это значение подходит только для одной базы данных, нужно разрешить подключение
                    для нескольких баз данных.
                Описание проблемы
                При попытке зайти в веб-интерфейс 
                    выводится сообщение «Внутренняя ошибка сервера». При вызове окна «инструменты
                    разработчика» через F12 выводятся сообщения о некорректном шлюзе. 
                При этом контейнеры не перезапускаются, в контейнере itm_m_user_service ошибка
                    вида: 
                "Не удалось подключиться к БД postgresql+asyncpg//postgres:**********@host.docker.internal:10265/user_service - 
в pg_hba.conf нет записи для компьютера "172.15.0.6", пользователя "itmm_user", базы "user_service", SSL выкл."
                Способ устранения
                        Отредактируйте файл :
                                Перейдите в режим редактирования файла:
                                    vi /var/lib/jatoba/1/data/pg_hba.conf
                                Найдите строку, вызывающую ошибку:
                                    host itmm [имя пользователя БД] 172.15.0.1/24 md5
                                для пользователя itmm_user строка будет иметь вид:
                                    host itmm itmm_user 172.15.0.1/24 md5
                                Отредактируйте строку, чтобы установить подключение к
                                    нескольким БД:
                                    host all [имя пользователя БД] 172.15.0.1/24 md5
                Причина 3
                Модуль управления парольными политиками «securityprofile» не был повторно
                    инициализирован после перезагрузки сервера СУБД или перезапуска службы
                    jatoba-1.
                Описание проблемы
                После перезагрузки сервера СУБД или перезапуска службы jatoba-1 не удается зайти
                    в веб-интерфейс  с корректными
                    учетными данными. При попытке авторизации в веб-интерфейсе появляется сообщение
                    «Внутренняя ошибка сервера», а в логах СУБД, расположенных в директории
                        /var/lib/jatoba/1/data/log, содержится ошибка «FATAL:
                    Extension securityprofile need to be initialized by superuser.».
                Способ устранения
                Повторно инициализируйте модуль управления парольными политиками
                    пользователей СУБД «securityprofile». Для этого:
                        Войдите в интерактивный терминал для работы с postgresql под
                            пользователем postgres:
                            sudo -u postgres psql -p 10265 -h 127.0.0.1 -U [имя пользователя] [имя базы]
                            Где:
                                -u postgres — пользователь ОС;
                                -p 10265 — порт, через который будет
                                    произведено подключение к базе данных;
                                -h 127.0.0.1 — подключение к хосту
                                    127.0.0.1;
                                -U [имя пользователя] — подключение от имени
                                    указанного пользователя.
                        Инициализируйте модуль «securityprofile» c помощью команды:
                            SELECT SECURITYPROFILE.SYNCHRONIZE();
                        Покиньте терминал:
                            \q
|*|*|*|
    Изменение имени сервера
        Переменная окружения , даже если она задана, не
            передается автоматически как переменная окружения в контейнер. Если переменная не
            передана, то в качестве имени сервера (hostname)  будет
            отображаться имя контейнера в виде случайного набора символов. Имя сервера
                присваивается при установке ОС и хранится в файле
                /etc/hostname.Чтобы имя сервера было присвоено контейнерам,
                нужно, чтобы выполнялся экспорт переменной окружения ,
                значение которой берется из файла /etc/hostname.По
                умолчанию, экспорт переменной  уже настроен, убедиться в
                этом можно, выполнив команду export . В выводе результата команды должна быть
                переменная  и ее актуальное значение.
                Изменение имени сервера (hostname)  
                        Перейдите в режим командной строки.
                        Перейдите в директорию с
                            контейнерами:cd /opt/itm-vm
                        Остановите контейнеры:docker-compose down
                        Измените имя
                            сервера:hostnamectl set-hostname <новое имя сервера>
                        Перезагрузите ОС.
                        Запустите контейнеры:docker-compose up -d
                Экспорт переменной окружения HOSTNAME
                Выполняется в случае отсутствия переменной  в выводе
                    команды export. Для экспорта переменной:
                        Откройте файл
                            /etc/profile:vi /etc/profile
                        В конце открывшегося файла добавьте
                            строку:export HOSTNAME
                        Сохраните файл и выйдите из режима
                            редактирования::wq
                        Выйдите из режима командной строки ОС и зайдите заново. Результат
                            шага:
                             добавится в экспортируемые переменные.
|*|*|*|
    Веб-интерфейс UDV-ITM-VM не загружается
            В качестве причин недоступности веб-интерфейса  рассмотрены следующие:
                            запуск службы docker после службы СУБД;
                            изменение переменных при включенных контейнерах.
                Причина 1
                Запуск службы docker после службы СУБД.
                Описание проблемы
                Веб-интерфейс  недоступен, в логах
                    содержится ошибка «**** PostgreSQL server is not available. Waiting 5
                    seconds…».
                Способ устранения
                        Убедитесь, что причина проблемы в запуске службы docker после службы
                            СУБД. На это указывают следующие признаки: 
                                При проверке статуса службы СУБД командой systemctl
                                    status jatoba-1 выясняется, что служба не запущена.
                                Появляется сообщение «СООБЩЕНИЕ: не удалось привязаться к
                                    адресу IPv4 "172.16.239.1": Cannot assign requested address
                                    ПРЕДУПРЕЖДЕНИЕ: не удалось создать принимающий сокет для
                                    "172.16.239.1"».
                                При запуске команды lsof -i -P -n в выводе нет
                                    сокета для 172.16.239.1. 
                        Настройте запуск службы СУБД после службы docker. Для этого:
                                Перейдите в режим редактирования службы СУБД:
                                    systemctl edit jatoba-1.service
                                Добавьте блок [Unit]:
                                    [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
                                Если база данных хранится на отдельном томе, добавьте после
                                    блока [Unit] блок [Service]:
                                    [Service]
Environment=PGDATA=/storage/base
                                    Где /storage/base — путь к базе данных,
                                        который был настроен на шаге  раздела .
                                Для применения изменений в настройках службы СУБД выполните
                                    команду:
                                    systemctl daemon-reload
                        Проверьте состояние службы jatoba-1
                            systemctl status jatoba-1
                Причина 2
                Изменение переменных при включенных контейнерах.
                Описание проблемы
                Веб-интерфейс не загружается либо при загрузке при вызове окна «инструменты
                    разработчика» через F12 в браузере отображаются ошибки 502. При этом не все
                    контейнеры запущены.
                Способ устранения
                        Перейдите в режим командной строки операционной системы, на которой
                            установлен . 
                        Перейдите в рабочую директорию :
                            cd /opt/itm-vm
                        Перезапустите контейнеры:
                            docker-compose down && docker-compose up -d
|*|*|*|
    Веб-интерфейс DATAPK ITM-VM не загружается
            В качестве причин недоступности веб-интерфейса  рассмотрены следующие:
                    Запуск службы docker после службы СУБД.
                    Изменение переменных при включенных контейнерах.
                Причина 1
                Запуск службы docker после службы СУБД.
                Описание проблемы
                Веб-интерфейс  недоступен, в логах
                    содержится ошибка «**** PostgreSQL server is not available. Waiting 5
                    seconds…».
                Способ устранения
                        Убедитесь, что причина проблемы в запуске службы docker после службы
                            СУБД. На это указывают следующие признаки: 
                                При проверке статуса службы СУБД командой systemctl
                                        status jatoba-1 выясняется, что служба не запущена.
                                Появляется сообщение «СООБЩЕНИЕ: не удалось привязаться к
                                    адресу IPv4 "172.16.239.1": Cannot assign requested address
                                    ПРЕДУПРЕЖДЕНИЕ: не удалось создать принимающий сокет для
                                    "172.16.239.1"».
                                При запуске команды lsof -i -P -n в выводе нет
                                    сокета для 172.16.239.1. 
                        Настройте запуск службы СУБД после службы docker. Для этого:
                                Перейдите в режим редактирования службы СУБД:
                                    systemctl edit jatoba-1.service
                                Добавьте блок [Unit]:
                                    [Unit]
 After=docker.service
 BindsTo=docker.service
 ReloadPropagatedFrom=docker.service
                                Если база данных хранится на отдельном томе, добавьте после
                                    блока [Unit] блок [Service]:
                                    [Service]
Environment=PGDATA=/storage/base
                                    Где /storage/base — путь к базе данных,
                                        который был настроен на шаге  раздела .
                                Для применения изменений в настройках службы СУБД выполните
                                    команду:
                                    systemctl daemon-reload
                        Проверьте состояние службы jatoba-1
                            systemctl status jatoba-1
                Причина 2
                Изменение переменных при включенных контейнерах.
                Описание проблемы
                Веб-интерфейс не загружается либо при загрузке при вызове окна «инструменты
                    разработчика» через F12 в браузере отображаются ошибки 502. При этом не все
                    контейнеры запущены.
                Способ устранения
                        Перейдите в режим командной строки операционной системы, на которой
                            установлен . 
                        Перейдите в рабочую директорию :
                            cd /opt/itm-vm
                        Перезапустите контейнеры:
                            docker-compose down && docker-compose up -d
|*|*|*|
    Установка сервера визуализации и управления UDV-ITM-VM на ОС РЕД ОС
             Для установки :
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер визуализации и управления.
                Создайте директорию для установки :
                    mkdir /opt/itm-vm
                Скопируйте следующие файлы из комплекта поставки в директорию
                        /opt/itm-vm:
                        env_generator.sh;
                        ;
                        udv_itm-vm_1.7.0.0.tar.gzussc_itm-vm_1.7.0.0.tar.gzussc_itm-vm_1.7.0.0.tar.gz.
                Перейдите в директорию /opt/itm-vm:
                    cd /opt/itm-vm
                Загрузите образы в операционную систему, на которой установлен сервер
                    визуализации и управления:
                    docker load -i udv_itm-vm_1.7.0.0.tar.gz
                Подготовьте сертификаты для входа в веб-интерфейс. Подробнее см. в разделе
                        .
                        перезагрузите сервер для применения изменений.
                            Вы можете перезагрузить сервер сразу либо после
                                выполнения пункта .
                        в логах контейнера itm_m_redis нет ошибки «WARNING overcommit_memory is
                            set to 0!»;
                        в файле /etc/sysctl.conf установлено значение
                                vm.overcommit_memory=1;
                        в файле /proc/sys/vm/overcommit_memory установлено
                            значение 1.
                Перейдите в каталог, содержащий compose-файлы:
                    cd /opt/itm-vm
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                Для первичной настройки в окне авторизации введите логин и пароль учетной
                    записи по умолчанию:
                        логин: itm;
                        пароль: P@ssw0rd1234. 
                        Окно авторизации ITM-VM
                    При первой настройке комплекса необходимо изменить пароль
                        встроенной учетной записи.
|*|*|*|
    Установка сервера визуализации и управления UDV-ITM-VM на ОС Centos 8
        Для установки :
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер визуализации и управления.
                Создайте директорию для установки :
                    mkdir /opt/itm-vm
                Скопируйте следующие файлы в директорию /opt/itm-vm:
                        env_generator.sh;
                        ;;
                        udv_itm-vm_1.7.0.0.tar.gzussc_itm-vm_1.7.0.0.tar.gzussc_itm-vm_1.7.0.0.tar.gz.
                Перейдите в директорию /opt/itm-vm:
                    cd /opt/itm-vm
                Загрузите образы в операционную систему, на которой установлен сервер
                    визуализации и управления:
                    docker load -i udv_itm-vm_1.7.0.0.tar.gz
                 Подготовьте сертификаты для входа в веб-интерфейс. Подробнее см. в разделе
                        .
                        перезагрузите сервер для применения изменений.
                            Вы можете перезагрузить сервер сразу либо после
                                выполнения пункта .
                        в логах контейнера itm_m_redis нет ошибки «WARNING overcommit_memory is
                            set to 0!»;
                        в файле /etc/sysctl.conf установлено значение
                                vm.overcommit_memory=1;
                                Содержимое файла sysctl.conf
                        в файле /proc/sys/vm/overcommit_memory установлено
                            значение 1.
                Перейдите в каталог, содержащий compose-файлы:
                    cd /opt/itm-vm
                Запустите контейнеры:
                    docker-compose up -d
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                Для первичной настройки в окне авторизации введите логин и пароль учетной
                    записи по умолчанию:
                        логин: itm;
                        пароль: P@ssw0rd1234. 
                        Окно авторизации ITM-VM
                    При первой настройке комплекса необходимо изменить пароль
                        встроенной учетной записи.
|*|*|*|
    Обновление UDV-ITM-VM с версии 1.4.0.0 до версии 1.7.0.0
            Для обновления сервера  с версии 1.4.0.0 до версии 1.7.0.0:
                Перейдите в рабочую директорию :
                    cd /opt/datapkitm
                Остановите работу сервера:
                    docker-compose down
                Если на данном сервере также запущен , выключите его. Для этого:
                        перейдите в рабочую директорию : 
                            cd /opt/itm-k
                        остановите работу сервера:
                            docker-compose down
                Создайте директорию для новой версии : 
                    mkdir /opt/itm-vm
                Загрузите в директорию/opt/itm-vm на сервере  следующие файлы из
                    каталога с обновленным дистрибутивом:
                        ussc_itm-vm_1.7.0.0.tar.gzudv_itm-vm_1.7.0.0.tar.gzudv_itm-vm_1.7.0.0.tar.gz;
                        docker-compose.release.yaml;
                        iptables;
                        upgrade_from_1.4.sh.
                Перейдите в директорию, куда были перемещены файлы с обновленным дистрибутивом
                    : 
                    cd /opt/itm-vm
                Установите обновленные образы командой:
                    docker load -i udv_itm-vm_1.7.0.0.tar.gz
                Скопируйте данные из рабочей директории /opt/datapkitm в новую
                    директорию /opt/itm-vm:
                    cp -r /opt/datapkitm/.env /opt/datapkitm/env /opt/itm-vm
                Подготовьте скрипт для миграции данных между версиями к запуску, дав ему
                    необходимые права:
                    chmod +x ./upgrade_from_1.4.sh
                Убедитесь, что служба СУБД запущена:
                    systemctl status jatoba-1
                Cлужба запущена корректно, выводится статус active running.
                        Результат работы команды systemctl status jatoba-1
                Убедитесь, что база данных принимает подключение под суперпользователем
                        postgres. Для этого: 
                        Введите команды:
                            su postgres
psql -U postgres -h 127.0.0.1 -p [порт, указанный в .env]
                        Покиньте терминал:
                            \q
                        Для выхода из пользователя postgres введите
                                exit.
                Убедитесь, что в файле pg_hba.conf разрешено подключение для
                    пользователя postgres из подсети контейнеров docker. Подсеть контейнеров docker
                    указана в файле .env как значение переменной . Для данной проверки выполните команды:
                    cat .env | grep ITMM_NETWORK
cat /var/lib/jatoba/1/data/pg_hba.conf | grep [значение переменной ITMM_NETWORK_GATEWAY]
                    при использовании двух томов замените директорию файла на
                            /storage/base.
                Если в выводе команды cat /var/lib/jatoba/1/data/pg_hba.conf | grep
                        [значение переменной ITMM_NETWORK_GATEWAY] отсутствует упоминание
                    пользователя postgres, то необходимо добавить доступ. Для этого:
                        Откройте файл pg_hba.conf для редактирования: 
                            vi /var/lib/jatoba/1/data/pg_hba.conf
                        Добавьте в файл строку:
                            host all postgres [значение переменной ITMM_NETWORK_GATEWAY]/24  md5
                        Сохраните и закройте файл:
                            :wq
                        Перезапустите службу СУБД с помощью команды:
                            systemctl restart jatoba-1
                Запустите скрипт upgrade_from_1.4.sh одним из способов: 
                bash upgrade_from_1.4.shили./upgrade_from_1.4.sh
                В директории /opt/itm-vm появится файл
                        .env с настроенными переменными и файл
                        .itmm_password_secret_key c ключом для шифрования и
                    дешифрования паролей, хранящихся в базе данных. 
                        Содержимое директории /opt/itm-vm
                Закройте доступ для пользователя postgres, который был выдан ранее, и
                    предоставьте доступ для вновь созданного пользователя itmm_user. Для
                    этого:
                        Откройте файл pg_hba.conf для редактирования:
                            vi /var/lib/jatoba/1/data/pg_hba.conf
                        Удалите строку:
                            host all postgres 172.15.0.1/24 md5
                        Приведите строки с указанием подсети контейнеров и подсети docker0 к следующему виду:
                            host all itmm_user 172.15.0.1/24 md5
host all itmm_user 172.17.0.1/24 md5                            
                            Если есть необходимость не указывать значение
                                all, то перечислите все имена баз данных через
                                запятую без использования пробела — itmm,
                                    user_service, notifier_service
                                и event_sender.
                        Сохраните и закройте файл:
                            :wq
                        Перезапустите службу СУБД с помощью команды:
                            systemctl restart jatoba-1
                Удалите из файла .env переменные, которые теперь будут
                    настраиваться в веб-интерфейсе. 
                    Если вы изменяли значения переменных на отличные от значений по
                        умолчанию, зафиксируйте их перед изменением файла
                        .env.
                        Откройте файл для редактирования:
                            vi .env
                        Удалите переменные для настройки Redis: 
                            #----------Настройка Redis----------
#REDIS_PORT=6379
#REDIS_ADDRESS=redis-server
                        Удалите неиспользуемую переменную
                                ITMM_JWT_EXPIRATION_MINUTES=720.
                        Удалите переменную «Срок хранения проблем»: 
                        ITMM_PROBLEM_AGE_IN_DAYS=180
                        Удалите переменную для обозначения часового пояса
                            TZ=.
                        Удалите переменные для настройки интеграции с SIEM:
                            SIEM_INTEGRATION=true
SIEM_SYSLOG_HOST=127.0.0.1
SIEM_SYSLOG_PORT=514
SIEM_SYSLOG_PROTOCOL=TCP
ITMM_IP_ADDRESS=
                        Сохраните и закройте файл:
                            :wq
                Настройте запуск службы СУБД после службы docker. Для этого:
                        Перейдите в режим редактирования службы СУБД:
                            systemctl edit jatoba-1.service
                        Ес|*|*|*|ли файл не пуст, перейдите к пункту .
                        Добавьте блок [Unit]:
                            [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
                        Если база данных хранится на отдельном томе, добавьте после блока [Unit] блок [Service]:
                        [Service]
Environment=PGDATA=/storage/baseГде
                                /storage/base — путь к базе данных, который был
                            настроен на шаге  раздела .
                        Для применения изменений в настройках службы СУБД выполните команду:
                            systemctl daemon-reload
                Если вы используете ОС Centos, установите пакет iptables-services: 
                    yum install iptables-services
                Убедитесь, что контейнеры выключены:
                    docker ps
                Остановите службу docker:
                    systemctl stop docker 
                    Сообщение «Warning: Stopping docker.service, but it can still be activated
                        by: docker.socket» не является ошибкой и на дальнейшую работу не
                        влияет.
                Отредактируйте файл iptables: 
                        Откройте файл для редактирования с помощью команды:
                            vi /etc/sysconfig/iptables
                        Закройте доступ из неиспользуемых подсетей, применяемых в
                            docker-контейнерах других компонентов. Для этого закомментируйте
                            следующие строки в зависимости от компонента.
                                ITM-VM: -A INPUT -s 172.15.0.0/24 -j ACCEPT
                                    (строка номер 15);
                                ITM-K: -A INPUT -s 172.16.239.0/24 -j ACCEPT
                                    (строка номер 18);
                                ITM-A: -A INPUT -s 172.16.240.0/24 -j ACCEPT
                                    (строка номер 21).
                            Включить отображение номеров строк в файле можно с помощью
                                следующих действий: 
                                    Нажмите клавишу «Esc», чтобы перейти в командный режим. 
                                    Введите :set number или :set
                                            nu и нажмите «Enter».
                                    Нажмите клавишу «i», чтобы перевести редактор в режим ввода
                                        текста.
                                    После закрытия файла нумерация строк отключится
                                        автоматически. Чтобы отключить абсолютные номера строк на
                                        время редактирования файла, перейдите в командный режим и
                                        выполните команду :set nonumber или
                                            :set nonu.
                        При установке  и 
                             на одну машину откройте дополнительные
                            порты web-интерфейса. Для этого раскомментируйте строки #-A
                                INPUT -p tcp -m tcp --dport 8080 -j ACCEPT (номер 38) и
                                #-A INPUT -p tcp -m tcp --dport 8443 -j ACCEPT
                            (номер 39).
                        Закомментируйте строки -A INPUT -p tcp -m tcp --dport 10051 -j
                                ACCEPT (номер 42) и -A INPUT -p udp -m udp --dport
                                162 -j ACCEPT (номер 45) (порты для приема
                            zabbix-соединений и snmp traps).
                        Если требуется мониторинг сервера с помощью  или по протоколу snmp, раскомментируйте строки #-A INPUT -p
                                tcp -m tcp --dport 10050 -j ACCEPT (номер 51) и #-A
                                INPUT -p udp -m udp --dport 161 -j ACCEPT (номер 48)
                            соответственно.
                        Сохраните файл и выйдите из режима редактирования:
                            :wq
                Проверьте настройку выделения памяти vm.overcommit.memory. Для
                    этого: 
                        Откройте для редактирования файл /etc/sysctl.conf: 
                            vi /etc/sysctl.conf
                            В случае отсутствия файла /etc/sysctl.conf используйте эту же команду для создания файла и перехода в режим редактирования.
                        Добавьте в содержимое файла следующее значение:
                            vm.overcommit_memory=1
                        Сохраните файл и выйдите из режима редактирования:
                            :wq
                        Перезагрузите сервер для применения изменений.
                            Вы можете перезагрузить сервер сразу либо после
                                выполнения команды запуска контейнеров docker-compose up
                                    -d.
                Убедитесь, что имя сервера и переменная 
                    соответствуют нужным вам значениям.
                Актуальное имя сервера отображается в приглашении командной строки. Посмотреть
                    переменную окружения  можно с помощью команды
                        echo . При необходимости
                    изменения имени сервера см. раздел .
                Перезапустите службу СУБД с помощью команды:
                    systemctl restart jatoba-1
                Запустите контейнеры:
                    docker-compose up -d
                Проверьте результат обновления. Для этого перейдите в веб-интерфейс  по ранее
                    использовавшемуся адресу.
                В случае установки  и 
                     на один сервер: 
                        перейдите в рабочую директорию :
                            cd /opt/itm-k
                        Запустите контейнеры:
                            docker-compose up -d
                Если обновление прошло успешно, удалите директорию с предыдущей версией  1.4: 
                    rm -rf /opt/datapkitm/
                Настройте в веб-интерфейсе следующие параметры, если в  версии 1.4.0.0 меняли их значения в файле
                        .env:
                        Настройка интеграции с SIEM. Подробнее см. в Руководстве по эксплуатации
                                 в разделе
                            «Настройка интеграции с SIEM».
                        Период хранения истории проблем. Подробнее см. в Руководстве по
                            эксплуатации  в
                            разделе «Изменение основных свойств сервера».
                        Период хранения истории синхронизаций. Подробнее см. в Руководстве по
                            эксплуатации  в
                            разделе «Изменение основных свойств сервера».
|*|*|*|
    Выпуск сертификата и ключа для доступа к веб-интерфейсу DATAPK ITM-VM
                Задайте локальную переменную hn, равную сетевому имени :
                    hn=$(cat /etc/hostname)
                Создайте файл формата .pem, который будет содержать в себе
                    local_ca.key:
                openssl req -x509 -new -nodes -key /opt/itm-vm/env/nginx/certs/local_ca.key -sha256 \
-days 3650 -subj "/C=RU/L=UDV/O=[CompanyName]/OU=CLITM/CN=$hn" \
-out /opt/itm-vm/env/nginx/certs/local_ca.pemВ
                    этой команде параметр [CompanyName] — название эксплуатирующей
                    организации.
                Для эксплуатирующей организации CyberLympha команда будет выглядеть
                    следующим образом:
                    openssl req -key /opt/itm-vm/env/nginx/certs/local_ca.key -new -x509 -days 3650 \
-subj "/C=RU/L=UDV/O=CyberLympha/OU=CLITM/CN=clitm-ca" -sha256 \
-out /opt/itm-vm/env/nginx/certs/local_ca.crt
                Введите пароль ключа local_ca.key.
                Сгенерируйте ключ для сертификата доступа к веб-интерфейсу :
                    openssl genrsa -out /opt/itm-vm/env/nginx/certs/nginx.key 2048
                Создайте файл запроса на генерацию сертификата командой:
                openssl req -new -key /opt/itm-vm/env/nginx/certs/nginx.key \
-subj "/C=RU/L=UDV/O=[CompanyName]/OU=CLITM/CN=$hn" -out /opt/itm-vm/env/nginx/certs/local.csrВ
                    этой команде параметр [CompanyName] — название эксплуатирующей
                    организации.
                Для эксплуатирующей организации CyberLympha команда будет выглядеть
                    следующим образом:
                    openssl req -new -key /opt/itm-vm/env/nginx/certs/nginx.key \
-subj "/C=RU/L=UDV/O=CyberLympha/OU=CLITM/CN=$hn" -out /opt/itm-vm/env/nginx/certs/local.csr
                Создайте файл с параметрами, которые будут использоваться при генерации
                    сертификата:
                    echo -e "basicConstraints=CA:FALSE\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = $hn" > /opt/itm-vm/env/nginx/certs/local.ext
                Сгенерируйте сертификат для доступа к веб-интерфейсу :
                    openssl x509 -req -in /opt/itm-vm/env/nginx/certs/local.csr -CA /opt/itm-vm/env/nginx/certs/local_ca.crt \
-CAkey /opt/itm-vm/env/nginx/certs/local_ca.key -CAcreateserial -out /opt/itm-vm/env/nginx/certs/nginx.crt \
-days 3650 -sha256 -extfile /opt/itm-vm/env/nginx/certs/local.ext
                Введите пароль ключа local_ca.key.
                Удалите лишние файлы:
                    cd /opt/itm-vm/env/nginx/certs && rm -f local.csr local.ext local_ca.pem local_ca.srl
                Если вы устанавливаете сервер  с нуля, пропустите этот шаг.
                Запустите :
                    cd /opt/itm-vm && docker-compose up -d
|*|*|*|
    Настройка АРМ Администратора
                Добавьте в файл C:\Windows\System32\drivers\etc\hosts
                    следующую запись:
                    <ip_addr>    <hostname>
                    В этой записи <ip_addr> — IP-адрес сетевого интерфейса
                        управления ,
                            <hostname> — сетевое имя .
                    Если на АРМ Администратора установлена Unix-like ОС, то запись в таком же
                        формате добавьте в файл /etc/hosts.
                Импортируйте выпущенный корневой сертификат local_ca.crt в
                    веб-браузер, в котором будете подключаться к . Для этого:
                        Загрузите с сервера 
                            файл local_ca.crt на АРМ Администратора.
                        Если используется веб-браузер Google Chrome:
                                Перейдите на страницу настроек «Настройка и управление Google
                                    Chrome» → «Настройки» → «Конфиденциальность и безопасность» →
                                    «Безопасность» → «Управление сертификатами устройства».
                                В новом окне откройте вкладку «Доверенные корневые центры
                                    сертификации». Нажмите «Импорт».
                                В открывшемся окне нажмите «Далее». В поле «Имя файла:» нажмите
                                    «Обзор». Выберите файл local_ca.crt,
                                    загруженный с сервера .
                                    Нажмите «Далее».
                                Убедитесь, что выбран вариант «Поместить все сертификаты в
                                    следующее хранилище» и в поле «Хранилище сертификатов:» выбрано
                                    «Доверенные корневые центры сертификации». Нажмите «Далее» и
                                    «Готово».
                                В окне предупреждения безопасности импорта сертификата нажмите
                                    «Да» для подтверждения импорта. Закройте окно управления
                                    сертификатами.
                        Если используется веб-браузер Mozilla Firefox:
                                Перейдите на страницу настроек «Открыть меню приложения» →
                                    «Настройки» → «Приватность и защита» → «Просмотр
                                    сертификатов...».
                                Откройте вкладку «Центры сертификации», нажмите «Импортировать».
                                    Выберите файл local_ca.crt, загруженный с
                                    сервера .
                                В окне «Загрузка сертификата» установите чекбокс в поле
                                    «Доверять при идентификации веб-сайтов», нажмите «ОК» два
                                    раза.
                Откройте веб-интерфейс сервера , введя в адресной строке браузера адрес
                        https://<hostname>, где <hostname> —
                    сетевое имя сервера . 
                    Проверка будет возможна после перезапуска сервера .
|*|*|*|
    Выпуск корневых сертификатов
            Корневой сертификат, выпущенный на сервере , можно также использовать для настройки
                доступа по сетевому имени к серверам . Для этого нужно поместить выпущенные на
                сервере  ключ local_ca.key и
                сертификат local_ca.crt в директорию
                    /opt/itm-k/env/nginx/certs/ настраиваемого сервера , пропустить в
                    документации  раздел «Выпуск
                    корневых сертификатов» и перейти к разделу «Выпуск сертификата и ключа для
                    доступа к веб-интерфейсу » .
            Если на предприятии имеется корневой сертификат, то можно использовать его вместо
                    local_ca.key и local_ca.crt, но необходимо
                знать пароль ключа.
                Перейдите в режим командной строки операционной системы, на которой установлен
                    сервер .
                Выпустите ключ для корневого сертификата командой:
                    openssl genrsa -aes256 -out /opt/itm-vm/env/nginx/certs/local_ca.key 2048
                Дважды введите пароль для генерируемого ключа.
                Сгенерируйте корневой сертификат командой:
                openssl req -key /opt/itm-vm/env/nginx/certs/local_ca.key -new -x509 -days 3650 \
-subj "/C=RU/L=UDV/O=[CompanyName]/OU=CLITM/CN=clitm-ca" -sha256 \
-out /opt/itm-vm/env/nginx/certs/local_ca.crtВ
                    этой команде параметр [CompanyName] — название эксплуатирующей
                    организации.
                Для эксплуатирующей организации CyberLympha команда будет выглядеть
                    следующим образом:
                    openssl req -key /opt/itm-vm/env/nginx/certs/local_ca.key -new -x509 -days 3650 \
-subj "/C=RU/L=UDV/O=CyberLympha/OU=CLITM/CN=clitm-ca" -sha256 \
-out /opt/itm-vm/env/nginx/certs/local_ca.crt
                Введите пароль ключа local_ca.key.
|*|*|*|
    Установка UDV-ITM-VM на ОС РЕД ОС
            Установите ОС РЕД ОС 7.3 по инструкции от производителя. В процессе установки ОС:
        В этом разделе:
|*|*|*|
    Выпуск сертификата и ключа для доступа к веб-интерфейсу UDV-ITM-VM
                Задайте локальную переменную hn, равную сетевому имени
                        :
                    hn=$(cat /etc/hostname)
                Создайте файл формата .pem, который будет содержать в себе
                        local_ca.key:
                openssl req -x509 -new -nodes -key /opt/itm-vm/env/nginx/certs/local_ca.key -sha256 \
-days 3650 -subj "/C=RU/L=UDV/O=[CompanyName]/OU=CLITM/CN=$hn" \
-out /opt/itm-vm/env/nginx/certs/local_ca.pemВ
                    этой команде параметр [CompanyName] — название эксплуатирующей
                    организации.
                Для эксплуатирующей организации CyberLympha команда будет выглядеть
                    следующим образом:
                    openssl req -key /opt/itm-vm/env/nginx/certs/local_ca.key -new -x509 -days 3650 \
-subj "/C=RU/L=UDV/O=CyberLympha/OU=CLITM/CN=clitm-ca" -sha256 \
-out /opt/itm-vm/env/nginx/certs/local_ca.crt
                Введите пароль ключа local_ca.key.
                Сгенерируйте ключ для сертификата доступа к веб-интерфейсу :
                    openssl genrsa -out /opt/itm-vm/env/nginx/certs/nginx.key 2048
                Создайте файл запроса на генерацию сертификата командой:
                openssl req -new -key /opt/itm-vm/env/nginx/certs/nginx.key \
-subj "/C=RU/L=UDV/O=[CompanyName]/OU=CLITM/CN=$hn" -out /opt/itm-vm/env/nginx/certs/local.csrВ
                    этой команде параметр [CompanyName] — название эксплуатирующей
                    организации.
                Для эксплуатирующей организации CyberLympha команда будет выглядеть
                    следующим образом:
                    openssl req -new -key /opt/itm-vm/env/nginx/certs/nginx.key \
-subj "/C=RU/L=UDV/O=CyberLympha/OU=CLITM/CN=$hn" -out /opt/itm-vm/env/nginx/certs/local.csr
                Создайте файл с параметрами, которые будут использоваться при генерации
                    сертификата:
                    echo -e "basicConstraints=CA:FALSE\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = $hn" > /opt/itm-vm/env/nginx/certs/local.ext
                Сгенерируйте сертификат для доступа к веб-интерфейсу :
                    openssl x509 -req -in /opt/itm-vm/env/nginx/certs/local.csr -CA /opt/itm-vm/env/nginx/certs/local_ca.crt \
-CAkey /opt/itm-vm/env/nginx/certs/local_ca.key -CAcreateserial -out /opt/itm-vm/env/nginx/certs/nginx.crt \
-days 3650 -sha256 -extfile /opt/itm-vm/env/nginx/certs/local.ext
                Введите пароль ключа local_ca.key.
                Удалите лишние файлы:
                    cd /opt/itm-vm/env/nginx/certs && rm -f local.csr local.ext local_ca.pem local_ca.srl
                Если вы устанавливаете сервер  с нуля, пропустите этот шаг.
                Запустите :
                    cd /opt/itm-vm && docker-compose up -d
|*|*|*|
    Подготовка к работе
        В этом разделе:
|*|*|*|
    Состав и содержание дистрибутивного носителя данных
                В состав дистрибутивного носителя данных входят следующие компоненты:
                    1.4_to_1.5.sh — скрипт для обновления версии ; 
                    архив с дистрибутивом ;
                    конфигурационный файл  — содержит список docker-контейнеров с сервисами и их настройками;
                    env_prod_generator.sh  — скрипт для генерации и настройки
                        env-файлов;
                    iptables — файл с предварительно настроенными правилами
                        межсетевого экрана iptables.
        Дистрибутивный носитель также может содержать следующие компоненты:
            dependencies.zip — архив c дополнительными пакетами.
|*|*|*|
    Установка сервера визуализации и управления UDV-ITM-VM на ОС Astra Linux 1.7
        Для установки :
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер визуализации и управления.
                Создайте директорию для установки :
                    mkdir /opt/itm-vm
                Скопируйте следующие файлы в директорию /opt/itm-vm:
                        udv_itm-vm_1.7.0.0.tar.gz
                        docker-compose.release.yaml
                        env_generator.sh
                Перейдите в директорию /opt/itm-vm:
                    cd /opt/itm-vm
                Загрузите образы в операционную систему, на которой установлен сервер визуализации и управления:
                    docker load i udv_itm-vm_1.7.0.0.tar.gz
                Создайте env-файлы и настройте значения переменных:
                        Запустите скрипт env_generator.sh
                            bash env_generator.sh
                        Откроется всплывающее окно для настройки переменных.
                        Выполните настройку переменных:
                                Чтобы изменить переменную, введите новое значение и нажмите клавишу
                                    «Enter».
                                Чтобы оставить значение переменной по умолчанию, которое указано в
                                    квадратных скобках, нажмите клавишу «Enter».
                                Чтобы ответить на вопрос «да», нажмите клавишу «y».
                                Чтобы ответить на вопрос «нет», нажмите клавишу «n».
                                Вместо пользователя БД itmm_user укажите datapkitm.
                                    Если IP-адрес подсети контейнеров уже используется в вашей
                                        инфраструктуре, его нужно изменить. Подробнее см. в разделе
                                        .
                                    При установке  и
                                         на один сервер
                                        для  рекомендуется
                                        указать порт для подключения к веб-интерфейсу 8080 и SSL
                                        порт для подключения к веб-интерфейсу 8443.
                        В директории /opt/itm-vm появятся файлы
                            .env и .itmm_password_secret_key с
                            настроенными переменными.
                        Для более подробной настройки переменных файла .env или для правки ранее введенных переменных:
                                Войдите в режим редактирования файла .env:
                                    vi .env
                                Настройте переменные.
                                    Рекомендуемые и возможные значения переменных приведены в разделе .
                                Сохраните изменения и выйдите из режима редактирования файла:
                                    :wq
                Создайте сертификаты:
                        Создайте директорию для сертификатов:
                            mkdir -p /opt/itm-vm/env/nginx/certs
                        Назначьте права созданной директории:
                            chmod -R 755 /opt/itm-vm/env/nginx/certs
                        Задайте системные переменные по очереди:
                            HOST_FQDN='<сетевое имя Комплекса>'
OWNER='<Название организации, эксплуатирующей ITM>'
                        В директории /opt/itm-vm/env/nginx/certs создайте файл config.txt:
                            cd /opt/itm-vm/env/nginx/certs
                            > config.txt
                        Запишите данные для создания сертификатов в файл config.txt с помощью команды:
                            printf "[dn]\nCN=${HOST_FQDN}\n[req]\ndistinguished_name = dn\n[EXT]\nsubjectAltName=DNS:${HOST_FQDN}\nkeyUsage=digitalSignature\nextendedKeyUsage=serverAuth" > /opt/itm-vm/env/nginx/certs/config.txt
                        Создайте сертификат по команде:
                            openssl req -x509 -out /opt/itm-vm/env/nginx/certs/nginx.crt \
-keyout /opt/itm-vm/env/nginx/certs/nginx.key -days 3650 \
-newkey rsa:2048 -nodes -sha256 -subj "/CN=${HOST_FQDN}/O=${OWNER}" \
-extensions EXT -config /opt/itm-vm/env/nginx/certs/config.txt
                        Удалите файл config.txt:
                            rm -f /opt/itm-vm/env/nginx/certs/config.txt
                        Поменяйте права на сертификаты:
                            chmod 644 /opt/itm-vm/env/nginx/certs/nginx.*
                Запустите контейнеры из директории /opt/itm-vm:
                    docker-compose up -d
                     Если после развертывания контейнеров в них появляется ошибка: error
                        obtaining MAC configuration for user, то решить ее можно изменив параметр
                        ac_ignore_maclabel в файле postgresql.conf:
                            Остановите контейнеры:
                                docker-compose down
                            Войдите в режим редактирования файла postgresql.conf:
                                nano /etc/postgresql/[версия субд]/main/postgresql.conf
                            Найдите параметр ac_ignore_maclabel и измените значение на true.
                            Сохраните изменения и выйдите из режима редактирования файла.
                            Перезагрузите сервис postgresql:
                                systemctl restart postgresql
                            Запустите контейнеры:
                                docker-compose up -d
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                    Для первичной настройки в окне авторизации введите логин и пароль учетной
                    записи по умолчанию:
                        логин: datapkitm;
                        пароль: datapkitm. 
                        Окно авторизации ITM-VM
                    При первой настройке комплекса необходимо изменить пароль
                        встроенной учетной записи.
|*|*|*|
    Установка Docker
                Установите docker:
                    apt install docker.io curl docker-compose
                Предоставьте пользователю право работать с контейнерами без sudo:
                    sudo usermod -aG docker $USER
                Запустите docker и добавьте службу в автозагрузку:
                    systemctl enable --now docker
                Проверьте состояние службы docker
                    systemctl status docker
|*|*|*|
    Установка СУБД PostgreSQL v11
                Проверьте доступные версии СУБД PostgreSQL:
                    apt policy postgresql-11
                Установите СУБД PostgreSQL v11:
                    apt install postgresql-11
                Проверьте статус сервиса postgresql:
                    systemctl status postgresql
                        Проверка статуса сервиса postgresql
|*|*|*|
    Настройка репозиториев
            Для настройки репозиториев отредактируйте конфигурационный файл со списком репозиториев:
                Откройте для редактирования файл /etc/apt/sources.list:
                    nano /etc/apt/sources.list
                Закоментируйте все строки в файле.
                В конце файла укажите:
                    deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-main/ 1.7_x86-64 main contrib non-free
deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-update/ 1.7_x86-64 main contrib non-free
deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-base/ 1.7_x86-64 main contrib non-free
deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-extended/ 1.7_x86-64 main contrib non-free
                Сохраните изменения и выйдите из режима редактирования файла.
                Обновите список пакетов в репозитории:
                    sudo apt update
                Установите пакеты для возможности использовать репозитории с подключением по HTTPS:
                    sudo apt install apt-transport-https ca-certificates
                Обновите установленные пакеты:
                    sudo apt upgrade
|*|*|*|
    Настройка межсетевого экрана iptables
            Настройте межсетевой экран iptables для корректной работы :
                Из комплекта поставки перенесите файл iptables в каталог /etc.
                Загрузите правила из файла iptables:
                    sudo iptables-restore < /etc/iptables
                Перезагрузите сервис docker:
                    sudo systemctl restart docker
                Выгрузите все текущие правила межсетевого экрана в файл /etc/iptables.rules:
                    sudo iptables-save > /etc/iptables.rules
                Ограничьте права на чтение файла iptables.rules:
                    sudo chmod 640 /etc/iptables.rules
                Настройте автоматическое восстановление правил межсетевого экрана при запуске сетевого интерфейса:
                        Создайте файл /etc/network/if-pre-up.d/iptables и войдите в его режим редактирования:
                            sudo nano /etc/network/if-pre-up.d/iptables
                        Добавьте следующие строки:
                            #!/bin/sh
iptables-restore < /etc/iptables.rules
exit 0
                        Сохраните изменения и выйдите из режима редактирования файла.
                        Установите разрешение на запуск файла /etc/network/if-pre-up.d/iptables при включении сетевого интерфейса:
                            sudo chmod +x /etc/network/if-pre-up.d/iptables
                Посмотрите настройки сетевого интерфейса одной из следующих команд:
                    ifconfig [название интерфейса]
                    или
                    ip -s -s link show [название интерфейса]
                    Если счетчик входящих пакетов растет, значит интерфейс подключен.
|*|*|*|
    Настройка СУБД PostgreSQL
            Настройте СУБД PostgreSQL для работы с сервером визуализации и управления :
                Создайте базу данных, пользователя и пароль для него:
                        Войдите в интерактивный терминал СУБД PostgreSQL:
                            sudo su - postgres
                        Измените пароль пользователя postgres в базе данных:
                            psql -c "alter user postgres with password '[пароль]'"
                             При создании пароля к учетной записи рекомендуется
                                следовать требованиям парольной политики:
                                    длина — не менее 16 символов;
                                    символы — буквы в нижнем и верхнем регистрах, цифры и
                                        специальные символы;
                                    минимальное количество цифр — 2.
                        Подключитесь к PostgreSQL:
                            psql -U postgres
                        Создайте пользователя с именем datapkitm и
                            паролем datapkitm:
                            create user datapkitm with createdb password 'datapkitm';
                        Создайте БД datapkitm, владельцем которой будет пользователь datapkitm:
                            create database datapkitm owner datapkitm ENCODING 'UTF-8 LC_COLLATE = 'ru_RU.UTF-8' LC_CTYPE = 'ru_RU.UTF-8' TEMPLATE template0;
                        Покиньте терминал:
                            \q
                Завершите работу в сессии служебного пользователя postgres:
                    exit
                Убедитесь в корректных значениях переменных в файле postgresql.conf:
                        Войдите в режим редактирования файла postgresql.conf:
                            nano /etc/postgresql/11/main/postgresql.conf
                        Исправьте значения переменных, чтобы они соответствовали представленным ниже:
                            listen_addresses = '*'
port = 10265
shared_buffers = 8 GB
                            Где 8GB — 25% от общего объема оперативной памяти сервера.
                        Сохраните изменения и выйдите из режима редактирования файла.
                Настройте разрешения по подключению docker-контейнера и пользователей к базам данных:
                        Войдите в режим редактирования файла pg_hba.conf:
                            nano /etc/postgresql/11/main/pg_hba.conf
                        Найдите раздел # IPv4 local connections.
                        Добавьте следующие строки в этот раздел для изменения настройки
                            ограничений на подключение локальных и удаленных пользователей к базам
                            данных:
                            host all [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
host all [имя пользователя БД] [IP-адрес подсети docker0/маска в формате CIDR] [метод аутентификации]
                            Где:
                                all — значение, позволяющее подключиться к
                                    нескольким БД;
                                [имя пользователя БД] — ранее созданный пользователь БД,
                                    которому разрешен доступ к БД;
                                [IP-адрес docker-сети/маска в формате CIDR] — IP-адрес для
                                    удаленного подключения, зависит от переменной  в файле
                                        /opt/itm-vm/.env;
                                [IP-адрес подсети docker0/маска в формате CIDR] — IP-адрес
                                    подсети docker0 для удаленного подключения, по умолчанию имеет
                                    значение 172.17.0.1/24.
                        для пользователя БД datapkitm, IP-адреса подсети
                            контейнера сервера визуализации и управления по умолчанию
                                172.15.0.1/24, IP-адреса подсети docker
                                172.16.239.1/23, IP-адреса подсети docker0 по
                            умолчанию 172.17.0.1/24 и метода аутентификации
                                md5 строки будет выглядеть следующим образом:
                            host    all             all             127.0.0.1/32            md5
host    all             datapkitm       172.16.239.1/23         md5
host    all             datapkitm       172.17.0.0/16           md5
host    all             datapkitm       172.15.0.0/16           md5
                        Сохраните изменения и выйдите из режима редактирования файла.
                Перезапустите сервис PostgreSQL:
                    sudo systemctl restart postgresql
                    Настройка запуска PostgreSQL производится после установки Docker (см. раздел ).
                Настройте конфигурационный файл postgresql.conf:
                        Войдите в режим редактирования файла postgresql.conf:
                            sudo systemctl edit postgresql
                        Добавьте следующие строки
                            [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
[Service]
Environment=PGDATA=/main
Environment=PGPORT=10265
                        Сохраните изменения и выйдите из режима редактирования файла.
                        Для применения изменений в настройках службы СУБД выполните команду:
                            sudo systemctl daemon-reload
|*|*|*|
    Переменная HOSTNAME
            Убедитесь в корректном значении переменной $HOSTNAME:
                Войдите в режим редактирования файла /etc/profile:
                    sudo nano /etc/profile
                Добавьте в файл строку:
                    export HOSTNAME
                Сохраните изменения и выйдите из режима редактирования файла.
                Выйдите из режима командной строки ОС и зайдите заново.
                Убедитесь, что значение переменной $HOSTNAME совпадает с сетевым именем ОС:
                    echo $HOSTNAME
|*|*|*|
    Подключение к веб-интерфейсу
            Для подключения к веб-интерфейсу :
                В браузере в адресной строке введите IP-адрес . 
                отобразится окно входа в веб-интерфейс . 
                        Окно авторизации
                В окне входа введите логин и пароль учетной записи.
                Для встроенной учетной записи по умолчанию заданы логин itm и пароль
                        P@ssw0rd1234. При первой настройке комплекса необходимо изменить
                    логин и пароль встроенной учетной записи.
                    При вводе неправильного логина или пароля 5 раз IP-адрес,
                        с которого пользователь пытается авторизоваться, блокируется на 5
                        минут.
                Нажмите на кнопку «Войти».
                выполнен вход на главную страницу веб-интерфейса .
            Чтобы завершить сеанс работы в веб-интерфейсе , нажмите на кнопку  («Выйти») в нижней части главного меню.
|*|*|*|
    Настройка межсетевого экрана iptables
            Настройте межсетевой экран iptables для корректной работы . Для этого:
|*|*|*|
    Обновление DATAPK ITM-VM с версии 1.6.0.0 до версии 1.7.0.0
            Для обновления сервера  с версии 1.6.0.0 до версии 1.7.0.0:
                Перейдите в рабочую директорию :
                    cd /opt/itm-vm
                Остановите работу сервера:
                    docker-compose down
                Переименуйте старую рабочую директорию : 
                    mv /opt/itm-vm /opt/itm-vm-bkp
                Создайте директорию для новой версии : 
                    mkdir /opt/itm-vm
                Загрузите в директорию/opt/itm-vm на сервере  следующие файлы из
                    каталога с обновленным дистрибутивом:
                        ussc_itm-vm_1.7.0.0.tar.gzudv_itm-vm_1.7.0.0.tar.gzudv_itm-vm_1.7.0.0.tar.gz;
                        docker-compose.release.yaml.
                Перейдите в директорию, куда были перемещены файлы с обновленным дистрибутивом
                        : 
                    cd /opt/itm-vm
                Установите обновленные образы командой:
                    docker load -i ussc_itm-vm_1.7.0.0.tar.gz
                Скопируйте данные из старой рабочей директории /opt/itm-vm-bkp
                    в новую директорию /opt/itm-vm:
                    cp -r /opt/itm-vm-bkp/.env /opt/itm-vm-bkp/env /opt/itm-vm-bkp/.itmm_password_secret_key /opt/itm-vm
                Удалите из файла .env переменные, которые теперь будут
                    настраиваться в веб-интерфейсе. 
                    Если вы изменяли значения переменных на отличные от значений по
                        умолчанию, зафиксируйте их перед изменением файла .env и
                        потом укажите эти значения в интерфейсе.
                        Откройте файл .env для редактирования: 
                            vi .env
                        Удалите переменную «Срок хранения проблем»: 
                            ITMM_PROBLEM_AGE_IN_DAYS=180
                        Удалите переменную для обозначения часового пояса
                            TZ=.
                            Значение часового пояса устанавливается автоматически на основе
                                данных из ОС.
                        Удалите переменную «Срок хранения истории задач синхронизации»:
                            ITMM_SYNC_HISTORY_LIFETIME_IN_DAYS=4
                        Удалите переменные для настройки интеграции с SIEM:
                            #----------Настройка интеграции с SIEM----------
SIEM_INTEGRATION=true
SIEM_SYSLOG_HOST=127.0.0.1
SIEM_SYSLOG_PORT=514
SIEM_SYSLOG_PROTOCOL=TCP
ITMM_IP_ADDRESS=
                        Сохраните и закройте файл:
                            :wq
                Запустите контейнеры:
                    docker-compose up -d
                Проверьте результат обновления. Для этого перейдите в веб-интерфейс  по ранее
                    использовавшемуся адресу.
                Если обновление прошло успешно, удалите директорию с предыдущей версией  1.6.0.0: 
                    rm -rf /opt/itm-vm-bkp/
                Настройте в веб-интерфейсе следующие параметры, если в  версии 1.6.0.0 меняли их значения в файле
                        .env:
                        Настройка интеграции с SIEM. Подробнее см. в Руководстве по эксплуатации
                                 в разделе
                            «Настройка интеграции с SIEM».
                        Период хранения истории проблем. Подробнее см. в Руководстве по
                            эксплуатации  в
                            разделе «Изменение основных свойств сервера».
                        Период хранения истории синхронизаций. Подробнее см. в Руководстве по
                            эксплуатации  в
                            разделе «Изменение основных свойств сервера».
|*|*|*|
    Установка ОС Centos 8
                    Включите сетевой интерфейс.
                            Включение сетевого интерфейса
                    В «Выбор программ» выберите базовое окружение «Минимальная установка» и
                        дополнительное ПО:
                            Выбор базового окружения и дополнительного ПО
                В окне «Место установки» выберите конфигурацию устройств хранения «По-своему» и
                    нажмите на кнопку «Готово». 
                        Выбор конфигурации устройств хранения
                Установите пароль для учетной записи root:
                        Установка пароля для учетной записи root
                    Создайте пользователя и пароль для него:
                            Создание пользователя
                    Нажмите «Начать установку».
|*|*|*|
    Обновление DATAPK ITM-VM с версии 1.4.0.0 до версии 1.7.0.0
            Для обновления сервера  с версии 1.4.0.0 до версии 1.7.0.0:
                Перейдите в рабочую директорию :
                    cd /opt/datapkitm
                Остановите работу сервера:
                    docker-compose down
                Если на данном сервере также запущен , выключите его. Для этого:
                        перейдите в рабочую директорию : 
                            cd /opt/itm-k
                        остановите работу сервера:
                            docker-compose down
                Создайте директорию для новой версии : 
                    mkdir /opt/itm-vm
                Загрузите в директорию/opt/itm-vm на сервере  следующие файлы из
                    каталога с обновленным дистрибутивом:
                        ussc_itm-vm_1.7.0.0.tar.gzudv_itm-vm_1.7.0.0.tar.gzudv_itm-vm_1.7.0.0.tar.gz;
                        docker-compose.release.yaml;
                        iptables;
                        upgrade_from_1.4.sh.
                Перейдите в директорию, куда были перемещены файлы с обновленным дистрибутивом
                    : 
                    cd /opt/itm-vm
                Установите обновленные образы командой:
                    docker load -i ussc_itm-vm_1.7.0.0.tar.gz
                Скопируйте данные из рабочей директории /opt/datapkitm в новую
                    директорию /opt/itm-vm:
                    cp -r /opt/datapkitm/.env /opt/datapkitm/env /opt/itm-vm
                Подготовьте скрипт для миграции данных между версиями к запуску, дав ему
                    необходимые права:
                    chmod +x ./upgrade_from_1.4.sh
                Убедитесь, что служба СУБД запущена:
                    systemctl status jatoba-1
                Cлужба запущена корректно, выводится статус active running.
                        Результат работы команды systemctl status jatoba-1
                Убедитесь, что база данных принимает подключение под суперпользователем
                    postgres. Для этого: 
                        Введите команды:
                            su postgres
psql -U postgres -h 127.0.0.1 -p [порт, указанный в .env]
                        Покиньте терминал:
                            \q
                Убедитесь, что в файле pg_hba.conf разрешено подключение для
                    пользователя postgres из подсети контейнеров docker. Подсеть контейнеров docker
                    указана в файле .env как значение переменной . Для данной проверки выполните команды:
                    cat .env | grep ITMM_NETWORK
cat /var/lib/jatoba/1/data/pg_hba.conf | grep [значение переменной ITMM_NETWORK_GATEWAY]
                    При использовании двух томов замените директорию файла на
                            /storage/base.
                Если в выводе команды cat /var/lib/jatoba/1/data/pg_hba.conf | grep
                        [значение переменной ITMM_NETWORK_GATEWAY] отсутствует упоминание
                    пользователя postgres, то необходимо добавить доступ. Для этого:
                        Откройте файл pg_hba.conf для редактирования: 
                            vi /var/lib/jatoba/1/data/pg_hba.conf
                        Добавьте в файл строку:
                            host all postgres [значение переменной ITMM_NETWORK_GATEWAY]/24  md5
                        Сохраните и закройте файл:
                            :wq
                        Перезапустите службу СУБД с помощью команды:
                            systemctl restart jatoba-1
                Запустите скрипт upgrade_from_1.4.sh одним из способов: 
                bash upgrade_from_1.4.shили./upgrade_from_1.4.sh
                В директории /opt/itm-vm появится файл
                        .env с настроенными переменными и файл
                        .itmm_password_secret_key c ключом для шифрования и
                    дешифрования паролей, хранящихся в базе данных. 
                        Содержимое директории /opt/itm-vm
                Закройте доступ для пользователя postgres, который был выдан ранее, и
                    предоставьте доступ для вновь созданного пользователя itmm_user. Для
                    этого:
                        Откройте файл pg_hba.conf для редактирования:
                            vi /var/lib/jatoba/1/data/pg_hba.conf
                        Удалите строку:
                            host all postgres 172.15.0.1/24 md5
                        Приведите строки с указанием подсети контейнеров и подсети docker0 к следующему виду:
                            host all itmm_user 172.15.0.1/24 md5
host all itmm_user 172.17.0.1/24 md5                            
                            Если есть необходимость не указывать значение
                                all, то перечислите все имена баз данных через
                                запятую без использования пробела — itmm,
                                    user_service, notifier_service
                                и event_sender.
                        Сохраните и закройте файл:
                            :wq
                        Перезапустите службу СУБД с помощью команды:
                            systemctl restart jatoba-1
                Удалите из файла .env переменные, которые теперь будут
                    настраиваться в веб-интерфейсе. 
                    Если вы изменяли значения переменных на отличные от значений по
                        умолчанию, зафиксируйте их перед изменением файла
                        .env.
                        Откройте файл для редактирования:
                            vi .env
                        Удалите переменные для настройки Redis: 
                            #----------Настройка Redis----------
#REDIS_PORT=6379
#REDIS_ADDRESS=redis-server
                        Удалите неиспользуемую переменную
                                ITMM_JWT_EXPIRATION_MINUTES=720.
                        Удалите переменную «Срок хранения проблем»: 
                        ITMM_PROBLEM_AGE_IN_DAYS=180
                        Удалите переменную для обозначения часового пояса
                            TZ=.
                        Удалите переменные для настройки интеграции с SIEM:
                            SIEM_INTEGRATION=true
SIEM_SYSLOG_HOST=127.0.0.1
SIEM_SYSLOG_PORT=514
SIEM_SYSLOG_PROTOCOL=TCP
ITMM_IP_ADDRESS=
                        Сохраните и закройте файл:
                            :wq
                Настройте запуск службы СУБД после службы docker. Для этого:
                        Пе|*|*|*|рейдите в режим редактирования службы СУБД:
                            systemctl edit jatoba-1.service
                        Если файл не пуст, перейдите к пункту .
                        Добавьте блок [Unit]:
                            [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
                        Если база данных хранится на отдельном томе, добавьте после блока [Unit] блок [Service]:
                        [Service]
Environment=PGDATA=/storage/baseГде
                                /storage/base — путь к базе данных, который был
                            настроен на шаге  раздела .
                        Для применения изменений в настройках службы СУБД выполните команду:
                            systemctl daemon-reload
                Если вы используете ОС Centos, установите пакет iptables-services: 
                    yum install iptables-services
                Убедитесь, что контейнеры выключены:
                    docker ps
                Остановите службу docker:
                    systemctl stop docker 
                    Сообщение «Warning: Stopping docker.service, but it can still be activated
                        by: docker.socket» не является ошибкой и на дальнейшую работу не
                        влияет.
                Отредактируйте файл iptables: 
                        Откройте файл для редактирования с помощью команды:
                            vi /etc/sysconfig/iptables
                        Закройте доступ из неиспользуемых подсетей, применяемых в
                            docker-контейнерах других компонентов. Для этого закомментируйте
                            следующие строки в зависимости от компонента.
                                ITM-VM: -A INPUT -s 172.15.0.0/24 -j ACCEPT
                                    (строка номер 15);
                                ITM-K: -A INPUT -s 172.16.239.0/24 -j ACCEPT
                                    (строка номер 18);
                                ITM-A: -A INPUT -s 172.16.240.0/24 -j ACCEPT
                                    (строка номер 21).
                            Включить отображение номеров строк в файле можно с помощью
                                следующих действий: 
                                    Нажмите клавишу «Esc», чтобы перейти в командный режим. 
                                    Введите :set number или :set
                                            nu и нажмите «Enter».
                                    Нажмите клавишу «i», чтобы перевести редактор в режим ввода
                                        текста.
                                    После закрытия файла нумерация строк отключится
                                        автоматически. Чтобы отключить абсолютные номера строк на
                                        время редактирования файла, перейдите в командный режим и
                                        выполните команду :set nonumber или
                                            :set nonu.
                        При установке  и 
                             на одну машину откройте дополнительные
                            порты web-интерфейса. Для этого раскомментируйте строки #-A
                                INPUT -p tcp -m tcp --dport 8080 -j ACCEPT (номер 38) и
                                #-A INPUT -p tcp -m tcp --dport 8443 -j ACCEPT
                            (номер 39).
                        Закомментируйте строки -A INPUT -p tcp -m tcp --dport 10051 -j
                                ACCEPT (номер 42) и -A INPUT -p udp -m udp --dport
                                162 -j ACCEPT (номер 45) (порты для приема
                            zabbix-соединений и snmp traps).
                        Если требуется мониторинг сервера с помощью  или по протоколу snmp, раскомментируйте строки #-A INPUT -p
                                tcp -m tcp --dport 10050 -j ACCEPT (номер 51) и #-A
                                INPUT -p udp -m udp --dport 161 -j ACCEPT (номер 48)
                            соответственно.
                        Сохраните файл и выйдите из режима редактирования:
                            :wq
                Проверьте настройку выделения памяти vm.overcommit.memory. Для
                    этого: 
                        Откройте для редактирования файл /etc/sysctl.conf: 
                            vi /etc/sysctl.conf
                            В случае отсутствия файла /etc/sysctl.conf используйте эту же команду для создания файла и перехода в режим редактирования.
                        Добавьте в содержимое файла следующее значение:
                            vm.overcommit_memory=1
                        Сохраните файл и выйдите из режима редактирования:
                            :wq
                        Перезагрузите сервер для применения изменений.
                            Вы можете перезагрузить сервер сразу либо после
                                выполнения команды запуска контейнеров docker-compose up
                                    -d.
                Убедитесь, что имя сервера и переменная 
                    соответствуют нужным вам значениям.
                Актуальное имя сервера отображается в приглашении командной строки. Посмотреть
                    переменную окружения  можно с помощью команды
                        echo . При необходимости
                    изменения имени сервера см. раздел .
                Перезапустите службу СУБД с помощью команды:
                    systemctl restart jatoba-1
                Запустите контейнеры:
                    docker-compose up -d
                Проверьте результат обновления. Для этого перейдите в веб-интерфейс  по ранее
                    использовавшемуся адресу.
                В случае установки  и 
                     на один сервер: 
                        Перейдите в рабочую директорию :
                            cd /opt/itm-k
                        Запустите контейнеры:
                            docker-compose up -d
                Если обновление прошло успешно, удалите директорию с предыдущей версией  1.4: 
                    rm -rf /opt/datapkitm/
                Настройте в веб-интерфейсе следующие параметры, если в  версии 1.6.0.0 меняли их значения в файле
                        .env:
                        Настройка интеграции с SIEM. Подробнее см. в разделе .
                        Период хранения истории проблем. Подробнее см. в разделе .
                        Период хранения истории синхронизаций. Подробнее см. в разделе .
|*|*|*|
    Установка дополнительных пакетов в ОС РЕД ОС 7.3
        Для установки дополнительных пакетов:
|*|*|*|
    Настройка СУБД PostgreSQL 
            Настройте СУБД PostgreSQL для работы с сервером визуализации и управления . Для этого:
                        Измените пароль пользователя postgres в базе
                            данных:
                            ALTER USER postgres WITH PASSWORD '[пароль]';
                             При создании пароля к учетной записи рекомендуется
                                следовать требованиям парольной политики:
                                    длина — не менее 16 символов;
                                    символы — буквы в нижнем и верхнем регистрах, цифры и
                                        специальные символы;
                                    минимальное количество цифр — 2.
                        Создайте пользователя с именем itmm_user и необходимым
                            паролем:
                            CREATE USER itmm_user WITH createdb PASSWORD '[пароль служебного пользователя]';
                        Убедитесь, что пользователь создан:
                            \du
                        Покиньте терминал:
                            \q
                        Перейдите в режим редактирования файла
                            postgresql.conf: 
                            vi /var/lib/pgsql/14/data/postgresql.conf
                        Исправьте значения переменных, чтобы они соответствовали представленным
                            ниже:
                        listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265
shared_buffers = 8GB                         Где
                                127.0.0.1 — локальный IP-адрес сервера ;
                                172.17.0.1 — IP-адрес подсети docker0;
                                8GB — 25% от общего объема оперативной памяти сервера.
                            IP-адреса должны быть перечислены через запятую без пробелов.
                                Если IP-адрес подсети docker0 уже
                                используется в вашей инфраструктуре, его нужно изменить. Подробнее
                                см. в разделе 
                                .
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        Войдите в режим редактирования файла  с помощью команды:
                            vi /var/lib/pgsql/14/data/pg_hba.conf
                        Измените ident на md5 в строке
                                host all all 127.0.0.1/32 ident;
                        Измените настройки ограничений на подключение локальных и удаленных
                            пользователей к базам данных. Для этого добавьте следующие строки в
                            раздел «# IPv4 local connections:»
                            host all [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
host all [имя пользователя БД] [IP-адрес подсети docker0/маска в формате CIDR] [метод аутентификации]
                            Где:
                                all — значение, позволяющее подключиться к
                                    нескольким БД;
                                [имя пользователя БД] — ранее созданный пользователь БД,
                                    которому разрешен доступ к БД;
                                [IP-адрес docker-сети/маска в формате CIDR] — IP-адрес для
                                    удаленного подключения, зависит от переменной  в файле
                                        /opt/itm-vm/.env;
                                [IP-адрес подсети docker0/маска в формате CIDR] — IP-адрес
                                    подсети docker0 для удаленного подключения, по умолчанию имеет
                                    значение 172.17.0.1/24.
                            Отступ между колонками в одной строке выполняется клавишей
                                «Tab».
                        для пользователя БД itmm_user, IP-адреса подсети
                            контейнера сервера визуализации и управления по умолчанию
                                172.15.0.1/24, IP-адреса подсети docker0 по
                            умолчанию 172.17.0.1/24 и метода аутентификации
                                md5 строки будет выглядеть следующим образом:
                            host    all       all             127.0.0.1/32            md5
host    all       itmm_user       172.17.0.0/16           md5
host    all       itmm_user       172.15.0.0/24           md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:».
                Настройте запуск службы СУБД после службы docker. Для этого:
                        Перейдите в режим редактирования службы СУБД:
                            systemctl edit postgresql-14.service
                        Добавьте блок [Unit]:
                            [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
                                Добавление блока Unit
                        Если база данных хранится на отдельном томе, добавьте после блока
                            [Unit] блок [Service]:
                        [Service]
Environment=PGDATA=/storage/baseГде
                                /storage/base — путь к базе данных, который был
                            настроен на шаге  раздела .
                        Для применения изменений в настройках службы СУБД выполните
                            команду:
                            systemctl daemon-reload
                Для применения настроек в файлах конфигурации перезапустите СУБД:
                    systemctl restart postgresql-14
                     После перезапуска СУБД и применения настроек из файла
                            pg_hba.conf, команда для входа в режим редактирования
                        базы данных изменится. Она будет иметь следующий вид:
                        sudo -u postgres psql -p 10265 -h 127.0.0.1 -U [имя пользователя] [имя базы]
                            Где:
                            -u postgres — пользователь ОС;
                            -p 10265 — порт, через который будет произведено
                                подключение к базе данных;
                            -h 127.0.0.1 — подключение к хосту 127.0.0.1;
                            -U [имя пользователя] — подключение от имени
                                указанного пользователя.
                Проверьте статус СУБД:
                    systemctl status postgresql-14
                        Проверка статуса СУБД
|*|*|*|
    Установка сервера визуализации и управления DATAPK ITM-VM на ОС Centos 8
         Для установки :
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер визуализации и управления.
                Создайте директорию для установки :
                    mkdir /opt/itm-vm
                Скопируйте следующие файлы в директорию /opt/itm-vm:
                        env_generator.sh;
                        ;
                        udv_itm-vm_1.7.0.0.tar.gzussc_itm-vm_1.7.0.0.tar.gzussc_itm-vm_1.7.0.0.tar.gz.
                Перейдите в директорию /opt/itm-vm:
                    cd /opt/itm-vm
                Загрузите образы в операционную систему, на которой установлен сервер
                    визуализации и управления:
                    docker load -i ussc_itm-vm_1.7.0.0.tar.gz
                 Подготовьте сертификаты для входа в веб-интерфейс. Подробнее см. в разделе
                        .
                        Перезагрузите сервер для применения изменений.
                            Вы можете перезагрузить сервер сразу либо после
                                выполнения пункта .
                        В логах контейнера itm_m_redis нет ошибки «WARNING overcommit_memory is
                            set to 0!».
                        В файле /etc/sysctl.conf установлено значение
                                vm.overcommit_memory=1.
                        В файле /proc/sys/vm/overcommit_memory установлено
                            значение 1.
                Перейдите в каталог, содержащий compose-файлы:
                    cd /opt/itm-vm
                Запустите контейнеры:
                    docker-compose up -d
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                Для первичной настройки в окне авторизации введите логин и пароль учетной
                    записи по умолчанию:
                        логин: itm;
                        пароль: P@ssw0rd1234. 
                        Окно авторизации ITM-VM
                    При первой настройке комплекса необходимо изменить пароль
                        встроенной учетной записи.
|*|*|*|
    Установка Docker
                Добавьте репозиторий docker:
                    dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo
                Установите docker:
                    dnf install docker-ce --allowerasing
                Запустите службу docker:
                    systemctl start docker   
                Добавьте службу docker в автозагрузку:
                    systemctl enable --now docker
                Проверьте состояние службы docker:
                    systemctl status docker
                Установите docker-compose: 
                    wget https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m) -O /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
                Проверьте версию docker-compose:
                     docker-compose --version
                        Проверка версии docker-compose
|*|*|*|
    Выпуск SSL-сертификатов
        В этом разделе рассмотрен выпуск доверенных сертификатов для доступа к веб-интерфейсу  по сетевому
                        имени. 
        Перед выпуском сертификатов остановите 
                        командой:cd /opt/itm-vm && docker-compose down
        Выпуск сертификатов для  состоит из
                        следующих этапов:
                                .
                                .
|*|*|*|
    Установка и настройка СУБД Jatoba
            Настройте СУБД Jatoba для работы с сервером визуализации и управления . Для этого:
                Установите СУБД Jatoba в соответствии с документацией разработчика Jatoba.
                    Перед установкой СУБД Jatoba необходимо заказать пакет установки и лицензионный
                    ключ у поставщика ПО Jatoba.  
                Измените пароль пользователя базы данных и добавьте нового пользователя. Для
                    этого:
                        Перейдите в режим командной строки операционной системы, на которой
                            установлен сервер визуализации и управления.
                        Войдите в интерактивный терминал для работы с postgresql под
                            пользователем postgres:
                            sudo -u postgres psql
                        Измените пароль пользователя postgres, так как по
                            умолчанию пароль не задан:
                            ALTER USER postgres WITH PASSWORD '[пароль]';
                            При использовании функционала модуля парольной политики
                                «securityprofile» в составе СУБД Jatoba, его настройку следует
                                осуществлять в соответствии с документацией от разработчика. Имейте
                                в виду, что при использовании модуля парольной политики
                                «securityprofile» после каждой перезагрузки сервера необходимо
                                повторно инициализировать модуль «securityprofile» путем перезапуска
                                службы. 
                        Создайте пользователя с именем itmm_user и необходимым
                            паролем:
                            create user [имя_пользователя] with createdb password '[пароль]';
                        Убедитесь, что пользователь создан:
                            \du
                        Покиньте терминал:
                            \q
                        Исправьте значения переменных, чтобы они соответствовали представленным
                            ниже:
                        listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265
shared_buffers = 8GB                         Где
                                127.0.0.1 — локальный IP-адрес сервера ;
                                172.17.0.1 — IP-адрес подсети docker0;
                                8GB — 25% от общего объема оперативной памяти сервера.
                            IP-адреса должны быть перечислены через запятую без пробелов.
                                Если IP-адрес подсети docker0 уже
                                используется в вашей инфраструктуре, его нужно изменить. Подробнее
                                см. в разделе 
                                .
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        Измените ident на md5 в строке
                                host all all 127.0.0.1/32 ident.
                        Измените настройки ограничений на подключение локальных и удаленных
                            пользователей к базам данных. Для этого добавьте следующие строки в
                            раздел «# IPv4 local connections:»
                            host all [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
host all [имя пользователя БД] [IP-адрес подсети docker0/маска в формате CIDR] [метод аутентификации]
                            Где:
                                all — значение, позволяющее подключиться к
                                    нескольким БД;
                                [имя пользователя БД] — ранее созданный пользователь БД,
                                    которому разрешен доступ к БД;
                                [IP-адрес docker-сети/маска в формате CIDR] — IP-адрес для
                                    удаленного подключения, зависит от переменной  в файле
                                        /opt/itm-vm/.env;
                                [IP-адрес подсети docker0/маска в формате CIDR] — IP-адрес
                                    подсети docker0 для удаленного подключения, по умолчанию имеет
                                    значение 172.17.0.1/24.
                            Отступ между колонками в одной строке выполняется клавишей
                                «Tab».
                        для пользователя БД itmm_user, IP-адреса подсети
                            контейнера сервера визуализации и управления по умолчанию
                                172.15.0.1/24, IP-адреса подсети docker0 по
                            умолчанию 172.17.0.1/24 и метода аутентификации
                                md5 строки будет выглядеть следующим образом:
                            host    all       all             127.0.0.1/32            md5
host    all       itmm_user       172.17.0.0/24           md5
host    all       itmm_user       172.15.0.0/24           md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:».
                Настройте запуск службы СУБД после службы docker. Для этого:
                        Перейдите в режим редактирования службы СУБД:
                            systemctl edit jatoba-*.service
                        Добавьте блок [Unit]:
                            [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
                        Если база данных хранится на отдельном томе, добавьте после блока
                            [Unit] блок [Service]:
                            [Service]
Environment=PGDATA=/storage/base 
                            Где /storage/base — путь к базе данных, который был
                                настроен на шаге  раздела .
                        Для применения изменений в настройках службы СУБД выполните
                            команду:
                            systemctl daemon-reload
|*|*|*|
    Установка СУБД PostgreSQL v14
                Установите необходимые пакеты из репозитория:
                    sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm
                        Установка пакетов
                Отключите модули PostgreSQL:
                    sudo dnf -qy module disable postgresql
                        Отключение модулей PostgreSQL
                Установите СУБД PostgreSQL v14:
                    sudo dnf install -y postgresql14-server
                        Установка СУБД
                Инициализируйте БД:
                    sudo /usr/pgsql-14/bin/postgresql-14-setup initdb
                        Инициализация БД
                Добавьте сервис в автозагрузку и запустите его: 
                    systemctl enable postgresql-14 --now
systemctl start postgresql-14
                        Добавление сервиса в автозагрузку и его запуск
                Проверьте статус сервиса postgresql:
                    systemctl status postgresql-14
                        Проверка статуса сервиса postgresql:
|*|*|*|
    Настройка интеграции с SIEM
            Для интеграции с SIEM нужно задать несколько переменных окружения. Для этого:
                vi /opt/itm-vm/.env
                Проверьте и при необходимости измените значение переменной :
                        =true — включает интеграцию с
                            SIEM;
                        =false — отключает интеграцию с
                            SIEM.
                Задайте следующие переменные окружения:
                         — .
                        =127.0.0.1
                         — 
                        =10.51.30.99
                При необходимости задайте переменные окружения:
                         — .
                        =514
                         — . 
                        =TCP
                Сохраните файл и выйдите из режима редактирования:
                :wq
|*|*|*|
    Установка сервера визуализации и управления DATAPK ITM-VM на ОС РЕД ОС
         Для установки :
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер визуализации и управления.
                Создайте директорию для установки :
                    mkdir /opt/itm-vm
                Скопируйте следующие файлы из комплекта поставки в директорию
                        /opt/itm-vm:
                        env_generator.sh;
                        ;
                        udv_itm-vm_1.7.0.0.tar.gzussc_itm-vm_1.7.0.0.tar.gzussc_itm-vm_1.7.0.0.tar.gz.
                Перейдите в директорию /opt/itm-vm:
                    cd /opt/itm-vm
                Загрузите образы в операционную систему, на которой установлен сервер
                    визуализации и управления:
                    docker load -i ussc_itm-vm_1.7.0.0.tar.gz
                Подготовьте сертификаты для входа в веб-интерфейс. Подробнее см. в разделе
                        .
                        Перезагрузите сервер для применения изменений.
                            Вы можете перезагрузить сервер сразу либо после
                                выполнения пункта .
                        В логах контейнера itm_m_redis нет ошибки «WARNING overcommit_memory is
                            set to 0!».
                        В файле /etc/sysctl.conf установлено значение
                                vm.overcommit_memory=1.
                        В файле /proc/sys/vm/overcommit_memory установлено
                            значение 1.
                Перейдите в каталог, содержащий compose-файлы:
                    cd /opt/itm-vm
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                Для первичной настройки в окне авторизации введите логин и пароль учетной
                    записи по умолчанию:
                        логин: itm;
                        пароль: P@ssw0rd1234. 
                        Окно авторизации ITM-VM
                    При первой настройке комплекса необходимо изменить пароль
                        встроенной учетной записи.
|*|*|*|
    Настройка межсетевого экрана iptables
            Настройте межсетевой экран iptables для корректной работы . Для этого:
|*|*|*|
    Настройка СУБД
                Создайте директорию для хранения базы данных на отдельном томе:
                    mkdir /storage/base
                Установите Jatoba до действия установки пакета-активатора в соответствии с
                    докуметацией разработчика СУБД Jatoba.
                Продолжите установку пакета-активатора согласно документации разработчика СУБД
                    Jatoba.
|*|*|*|
    Монтирование раздела
            Для монтирования раздела:
                Создайте пустую таблицу разделов GPT с помощью команды g.
                        Результат работы команды g
                Создайте раздел с помощью команды n.
                        Укажите номер раздела 1.
                        В качестве значения первого сектора укажите минимальное число из предложенных.
                        Для записи вида «Первый сектор (2048-20971486, default 2048)» укажите
                            значение 2048.
                        В качестве значения последнего сектора укажите максимальное число из предложенных,
                            чтобы выделить раздел на весь объем диска.
                        Для записи вида «Последний сектор + число секторов или + размер{K,M,G,T,P}
                            (2048-20971486, default 20971486)» укажите значение 20971486.
                    По умолчанию предлагается значение последнего сектора. Его можно
                        применить, нажав на клавишу Enter.
                        Результат работы команды n.
                        Результат работы команды p.
                        Результат работы команды mkfs -t ext4 -L storage /dev/sdb1.
                Для автоматического монтирования тома после запуска системы добавим информацию в
                    конфигурационный файл /etc/fstab:
                        Перейдите в режим редактирования файла /etc/fstab:
                        vi /etc/fstab
                        Добавьте в конец файла строку:
                        UUID=afe0d861-4db9-4ad2-adde-eaa80621ffd8 /storage ext4 defaults 0 2
                                Содержимое файла /etc/fstab
                        Сохраните изменения и закройте файл:
                        :wq
                        Результат работы команды df -hT
|*|*|*|
    Требования и рекомендации к программному обеспечению
        Сертифицированные версии серверов UDV ITM должны функционировать в следующем
            окружении:
            Операционная система (сертифицированная версия):
                    РЕД ОС;
                    Astra Linux Special Edition (Смоленск).
            СУБД Jatoba DB (сертифицированная версия).
        Обязательным условием функционирования сертифицированной версии является выполнение
            требований по безопасной настройке в соответствии с Техническими условиями ТУ
            УЦЛК.468244.26-ТУ и Руководством по эксплуатации.
        При отсутствии требований по использованию сертифицированной версии ПК UDV ITM возможно
            использование следующего программного окружения:
            операционная система: Centos*, Red Hat Enterprise Linux*, Oracle Linux*;
            СУБД: PostgreSQL*.
        *Конкретные версии совместимых ОС необходимо уточнять в Руководстве по эксплуатации
            соответствующей версии ПК UDV ITM.
|*|*|*|
    Архитектура
        Архитектура ПК UDV ITM разработана для создания комплексных корпоративных система
            мониторинга распределенных ИТ-ресурсов и включает в свой состав готовые тиражируемые
            решения для трех уровней иерархии:
            Уровень администрации предприятия — для централизованного управления системой
                мониторинга в целом и консолидации данных мониторинга в масштабах предприятия.
            Уровень филиала — для осуществления непосредственно мониторинга отдельных
                компонент защищаемых систем на уровне филиала и консолидации данных с нижних
                уровней.
            Уровень технологического объекта — для осуществления необслуживаемого
                мониторинга компонент защищаемых систем на производственных площадках и
                предоставления данных о состоянии их функционирования на уровень филиала.
            Архитектура системы UDV ITM
|*|*|*|
    Сетевые взаимодействия
        В таблице указаны сетевые потоки между серверами ITM и смежными системами
            Сервер визуализации и управления (ITM-VM, уровень администрации)
                        Источник трафика
                        Узел назначения
                        Протокол и № порта по умолчанию
                        Описание трафика
                        UDV-ITM-VM
                        UDV-ITM-M
                        HTTPS (443/TCP)
                            Предоставляется информация об объектах мониторинга и их
                                свойствах.
                            Интерфейс API: Zabbix (JSON-RPC 2.0); DATAPK ITM (REST API,
                                JSON).
                            Объем трафика зависит от количества подключенных ОМ и количества
                                проблем ОМ, рассчитывается в соответствии с методикой. 
                            Сжатие трафика — gzip.
                            Периодичность получения данных в соответствии с настройками.
                        UDV-ITM-VM
                        СМКИ, SIEM
                        Syslog (514/TCP,UDP)
                            Передаются события информационной безопасности, полученные со всех
                                подключенных серверов:
                                события о проблемах функционирования объектов мониторинга;
                                действия пользователей серверов ПК UDV-ITM-M.
                            Объем трафика: зависит от количества проблем ОМ и событий аудита,
                                рассчитывается в соответствии с методикой. Отправка данных
                                осуществляется по мере их появления в UDV-ITM-VM. 
                            Сжатие трафика отсутствует.
                        САОБ
                        UDV-ITM-VM
                        HTTPS (443/TCP)
                            Предоставляется информация об объектах мониторинга и их
                                свойствах.
                            Интерфейс API — UDV ITM (REST API, JSON).
                            Объем трафика зависит от количества ОМ и соответствует методике
                                расчета трафика по передаче всех свойств ОМ, включая инвентарные
                                данные.
                             Сжатие трафика — gzip.
|*|*|*|
    Подготовка к внедрению и внедрение сервера визуализации и управления ITM-VM
            Состав работ по подготовке к внедрению и внедрению сервера визуализации и управления
                UDV-ITM-VM:
                Проектирование решения.
                        Выбор сетевого размещения сервера с учетом сетевой доступности к
                            серверам UDV-ITM-M и смежным системам.
                        Выбор оптимальной аппаратной и программной конфигурации серверов с
                            учетом количества подключаемых серверов UDV-ITM-M и количества ОМ.
                Монтаж и настройка:
                        Монтаж и пусконаладка сервера.
                        Настройка сетевого окружения для обеспечения сетевой доступности к
                            серверам UDV-ITM-M и смежным системам.
                Подключение серверов UDV-ITM-M.
                Настройка интеграций со смежными системами.
        Описание операций по настройкам приведено в Руководствах
            по эксплуатации.
|*|*|*|
    Сервер удаленного мониторинга UDV-ITM-RM (уровень технологического объекта)
        Сервер удаленного мониторинга UDV-ITM-RM предназначен для осуществления необслуживаемого
            мониторинга компонент защищаемых систем на удаленных или изолированных производственных
            площадках и предоставления данных о состоянии их функционирования серверу UDV-ITM-M.
        Использование сервера UDV-ITM-RM позволяет осуществить оптимизацию трафика и потоков
            сетевого взаимодействия с объектами мониторинга, находящимися на промышленных площадках
            с ограниченным сетевым доступом.
        Сервер не имеет собственного Web-интерфейса. Установка и настройка сервера осуществляется
            с помощью командной строки CLI. 
        Настройка параметров мониторинга объектов защиты осуществляется в Web-интерфейсе сервера
            мониторинга UDV-ITM-M, к которому подключен сервер UDV-ITM-RM.
        Сервер удаленного мониторинга UDV-ITM-RM рекомендуется использовать в следующих
            случаях:
            Если ОМ расположены на удаленных объектах, таких как производственные площадки и
                филиалы, особенно в случаях, когда между филиалом и уровнем администрации
                используются каналы связи с низкой пропускной способностью и/или низкой
                стабильностью.
            Для упрощения конфигурации межсетевого экранирования защищаемых сетей, так как
                сервер UDV-ITM-RM является единой точкой взаимодействия между сервером UDV-ITM-M и
                объектами мониторинга, расположенными на удаленной или изолированной площадке.
            Для снижения нагрузки на сервер мониторинга UDV-ITM-M.
        Нет необходимости в использовании сервера удаленного мониторинга, если все ОМ подключены
            к единой сети с хорошими каналами связи (100/1000 Мб/с) и производительность сервера
            мониторинга UDV-ITM-M достаточна для непосредственного мониторинга всех объектов.
|*|*|*|
    Рекомендуемые характеристики аппаратного обеспечения
            Минимальные требования к производительности и характеристикам серверов
                        Вариант исполнения
                        Суммарный объем объектов мониторинга с учетом подчиненных
                            серверов
                            Кол-во CPU (шт.) /
                            кол-во ядер (шт.) / частота (ГГц)
                        Объем ОЗУ
                        Дисковая подсистема*
                        Объем дисковой подсистемы для ОС
                        Сетевой адаптер
                        Малая инсталляция ITM-M, ITM-RM, ITM-VM
                        Менее 250
                        1 CPU / 2 ядра / 2 ГГц
                        16
                        ITM-RM — 100 ГБITM-VM — 250 ГБITM-M — 500 ГБ, от 7200
                                SATA
                        120 ГБ
                        1х100/1000 Мбит/с
                        Средняя инсталляция ITM-M, ITM-VM
                        250 - 2500
                        1 CPU / 4 ядра / 2 ГГц
                        32
                            Производительность: от 10K SAS
                            Объем: Кратно объему для малой инсталляции в соответствии с
                                количеством ОМ.
                        240 ГБ
                        1х100/1000 Мбит/с
                        Большая инсталляция ITM-M, ITM-VM
                        2500 - 10000
                        1 CPU / 4 ядра / 2 ГГц
                        64
                        240 ГБ
                        2х1000 Мбит/с
        *Соответствует типовому сценарию использования с параметрами «по умолчанию». При
            проектировании нетиповых решений требуется расчет в соответствии с методикой. 
        Возможно развертывание сервера мониторинга ITM-M (малая инсталляция) и сервера ITM-VM на
            одном физическом сервере, при этом требования к аппаратным ресурсам такого сервера
            следует суммировать.
        Сервер мониторинга ITM-M для мониторинга 250 и более объектов мониторинга рекомендуется
            развертывать на отдельном сервере. 
        Установка UDV-ITM-M и UDV-ITM-RM на один сервер не реализует преимущества использования
            ITM-RM на удаленных площадках и не является рекомендованным сценарием применения
            комплекса.
        Если по каким-то причинам действительно требуется установка UDV-ITM-M и UDV-ITM-RM на
            один сервер, то следует использовать средства виртуализации для изоляции сред
            функционирования этих серверов и требования к аппаратным ресурсам такого сервера равны
            сумме требований для UDV-ITM-M и UDV-ITM-RM из таблицы «Минимальные требования к
            производительности и характеристикам серверов», а требования к объему дисковой
            подсистемы из той же таблицы увеличиваются в 1.5 раза.
|*|*|*|
    Сервер мониторинга UDV-ITM-M (уровень филиала)
        Предназначен для осуществления непосредственно мониторинга отдельных компонент защищаемых
            систем и средств защиты информации на уровне филиала и консолидации данных с серверов
            уровня технологического объекта.
        Является самодостаточным сервером мониторинга, может использоваться службой эксплуатации
            для оперативного мониторинга защищаемой системы и рассылки оповещений.
        Взаимодействие пользователя с сервером осуществляется с помощью Web-интерфейса.
        Возможна установка UDV-ITM-M на один физический сервер с сервером UDV-ITM-VM. Особенности
            настройки такого развертывания описаны в руководстве по эксплуатации.
        Взаимодействие UDV-ITM-M со смежными системами:
            Сервер DATAPK:
                    получение данных об объектах защиты и их свойств.
            Сервер удаленного мониторинга UDV-ITM-RM:
                    отправка параметров шаблонов для мониторинга и получение фактических
                        результатов мониторинга объектов, подключенных к серверу UDV-ITM-RM.
        Сервер мониторинга ITM-M осуществляет мониторинг параметров функционирования следующих
            компонентов защищаемых автоматизированных систем:
        Автоматизированные рабочие места (АРМ) и серверы на базе ОС Windows и Linux:
        Сбор параметров функционирования осуществляется агентным или безагентным способом с
            использованием протоколов SNMP, IPMI, WMI.
        Периодичность получения параметров функционирования является настраиваемой.
        В стандартный комплект поставки включены шаблоны для мониторинга следующих параметров АРМ
            и серверов:
            состояние сетевой доступности устройства;
            загрузка ЦП;
            загрузка оперативной памяти;
            загрузка HDD: объем свободного и занятого пространства; скорость записи и чтения
                информации с диска;
            загрузка сетевых интерфейсов: объем отправленных и полученных данных.
        Состав контролируемых параметров АРМ и серверов может быть дополнен по предварительному
            согласованию с разработчиком.
        Активное сетевое оборудование (АСО):
        Сбор параметров функционирования осуществляется безагентным способом с использованием
            протокола SNMP.
        Периодичность получения параметров функционирования является настраиваемой.
        В стандартный комплект поставки включены шаблоны для мониторинга следующих
            параметров:
            состояние сетевой доступности устройства,
            загрузка ЦП*;
            загрузка оперативной памяти*;
            загрузка сетевых интерфейсов: объем отправленных и полученных данных*.
        * Мониторинг параметров, по умолчанию, осуществляется с использованием стандартных
            библиотек MIB. Существует возможность загрузки специализированных библиотек MIB от
            производителя.
        Состав контролируемых параметров может быть дополнен по предварительному согласованию с
            разработчиком.
        ПЛК и оборудование инженерной ИТ-инфраструктуры:
        Сбор параметров функционирования осуществляется безагентным способом с использованием
            протокола SNMP. Оборудование должно поддерживать и быть настроено для мониторинга с
            использованием протокола SNMP.
        Периодичность получения параметров функционирования является настраиваемой.
        В стандартный комплект поставки включены шаблоны для мониторинга следующих
            параметров:
            состояние сетевой доступности устройства,
            загрузка ЦП*;
            загрузка оперативной памяти*;
            загрузка сетевых интерфейсов: объем отправленных и полученных данных*;
        * Мониторинг параметров, по умолчанию, осуществляется с использованием стандартных
            библиотек MIB. Существует возможность загрузки специализированных библиотек MIB от
            производителя.
        Состав контролируемых параметров может быть дополнен по предварительному согласованию с
            разработчиком.
|*|*|*|
    Мониторинг услуг
        UDV-ITM-M позволяет осуществлять мониторинг качества предоставляемых ИТ-услуг,
            функционирование которых зависит от качества функционирования одного или нескольких
            объектов мониторинга. В качестве ИТ-услуг для мониторинга могут подключаться различные
            системно-значимые ИТ-сервисы, каналы связи, сервисы ИБ и т.д. 
        Управление мониторингом ИТ-услуг осуществляется в разделе веб-интерфейса «Настройка» →
            «Услуги». 
        Услуги могут включать в себя вложенные услуги. Это позволяет контролировать сложные
            услуги в соответствии с ресурсно-сервисной моделью ИТ-инфраструктуры предприятия.
        В иерархии UDV-ITM-M рекомендуется использовать 3 уровня вложенности услуг, так как
            только эти уровни агрегируются на уровне сервера UDV-ITM-M:
            Root — корневой уровень услуг, не может быть удален или изменен;
            Группа услуг — рекомендуется использовать для группировки ИТ-услуг в
                зависимости от их назначения, создается Администратором, название группы услуг может
                быть произвольным;
            Услуга — ИТ-услуга, качество которой требуется контролировать. Рекомендуется
                создавать в составе группы;
            Триггер — контролирует определенный параметр подключенного объекта
                мониторинга. Совокупность добавленных триггеров отражает качество функционирования
                контролируемой услуги. Состав триггеров для мониторинга ИТ-услуг может
                    определяться на этапе проектирования и корректироваться на этапе внедрения
                    системы в зависимости от специфики ОМ в ИТ-инфраструктуре и фактически доступных
                    триггеров.
            Уровни иерархии ИТ-услуг
            Пример применения функционала по мониторингу ИТ-Услуг:
        Группы услуг и Услуги:
                Каналы
                        Канал УС — Цех 1
                                Доступность
                                Загрузка более 90%
                                Интерфейс включен
                                Ошибки
                        Канал УС — Цех 2
                                Загрузка более 90%
                                Интерфейс включен
                                Ошибки
                Средства ЗИ
                        МЭ-1
                                Высокая загрузка
                                Диск заполнен
                                Недоступен
                        DATAPK
                                Недоступен агент
                                Недоступен
                ИТ-сервисы
                        NTP
                                Недоступен
                        ACS
                                Недоступен
                                Системное время
                        e-mail
                                Недоступен
|*|*|*|
    Трафик между сервером ITM-M (ITM-RM) и объектами мониторинга
            Методика расчета
            Объем сетевого трафика между сервером UDV-ITM-M или UDV-ITM-RM и объектом мониторинга
                зависит от:
                    способа мониторинга (агентный или безагентный);
                    количества контролируемых параметров объекта мониторинга (элементов
                        данных);
                    периодичности получения контролируемых параметров.
            Для ориентировочного расчета суммарного трафика мониторинга при проектировании систем
                можно рассчитать размер пакета данных от ОМ к UDV-ITM-M (UDV-ITM-RM) следующим
                образом:
                Заголовочная часть каждого пакета составляет примерно 2.3 Кбайт.
                Полезная нагрузка пакета (собираемые элементы данных) составляет примерно 220
                        байт на каждый элемент данных.
            Таким образом при среднем количестве наблюдаемых элементов данных типового ОМ равном
                10, единичный пакет от ОМ к серверу будет иметь следующий размер:
                    2.3Кбайт+(220байт*10) ≈ 4.5Кбайт 
            Соответственно, мы можем рассчитать требуемую полосу пропускания следующим
                образом:
            (2.3Кбайт +(220байт*[кол-во эл. данных])*([кол-во агентов]*[периодичность для
                    агента в минуту] + [ко-во ОМ без агентов]*[периодичность для ОМ без агентов в
                    минуту])/60.
            Расчет объема трафика системы мониторинга за период может быть выполнен по
                формуле:
            [Полоса пропускания в Кбит/с]*3600
            Если объекты мониторинга подключены к серверу агентов UDV-ITM-RM, то сервер агентов
                UDV-ITM-RM поддерживает сжатие информации, передаваемой на сервер мониторинга. Это
                позволяет снизить общий объём трафика, передаваемый между серверами. 
            Пример расчета
            Параметры системы:
                Объектов мониторинга, всего — 50, из них:
                        Мониторинг агентным способом — 25 ОМ, периодичность — 15 сек.
                        Мониторинг безагентным способом — 25 ОМ, периодичность — 2 мин.
                Количество контролируемых параметров (элементов данных мониторинга) — 10.
            Расчет: 
                Полоса пропускания — (2.3Кбайт +(220байт*10)*(25*4+25*0.5)/60 = 8,4375
                        Кбайт/сек = 67,5 Кбит/с
                Объем трафика за 1 час - 67,5 Кбит/с * 3600 с = 243000 Кбит ≈ 30 МБайт
|*|*|*|
    Требования к эксплуатирующему персоналу
        ПК UDV ITM предназначен для эксплуатации в круглосуточном и непрерывном режиме, за
            исключением периодов проведения технического обслуживания, и не требует постоянного
            наблюдения со стороны обслуживающего персонала.
        Настройку и периодическое обслуживание программного комплекса в целом или отдельных его
            компонент осуществляет специалист, выполняющий роль администратора программного
            комплекса.
        Для выполнения функций администратора ПК UDV ITM могут привлекаться специалисты,
            квалификация которых соответствует требованиям профессионального стандарта «Системный
            администратор информационно-коммуникационных систем» для выполнения функций
            «Обслуживание серверных операционных систем информационно-коммуникационной системы».
        Функции обслуживания сервера уровня администрации (UDV-ITM-VM) и серверов уровня филиала
            (UDV-ITM-M) могут выполнять разные специалисты разных подразделений, т.к. сервер
            UDV-ITM-M является самодостаточным средством мониторинга ИТ-инфраструктуры и может
            использоваться самостоятельно, вне общей архитектуры комплекса UDV ITM.
        Для эффективной и безопасной эксплуатации ПК администратор комплекса и администраторы
            серверов должны изучить эксплуатационную документацию от разработчика или пройти
            обучение в учебном центре IT Cloud  курс «Развёртывание и администрирование
            программного комплекса мониторинга безопасности и контроля ресурсов UDV ITM».
        Внедрение и эксплуатация сертифицированного ПК UDV ITM должно осуществляться в
            соответствии с требованиями Технических условий на программный комплекс мониторинга
            безопасности и контроля ресурсов «UDV ITM» (УЦЛК.468244.26-ТУ).
|*|*|*|
    Основные функции
        ПК UDV ITM осуществляет оперативное получение и автоматический анализ данных о
            производительности компонентов АСУ ТП, их хранение, представление пользователю и
            предоставление смежным системам.
        Отличительными особенностями ПК UDV ITM являются:
            ПК сертифицирован ФСТЭК России по требованиям безопасности информации (Сертификат
                соответствия №4432, от 27.07.2021 г.).
            Трехуровневая иерархическая структура комплекса, оптимизированная для использования
                в территориально распределенных промышленных предприятиях.
        Параметры функционирования и наборы шаблонов мониторинга адаптированы для использования в
            отечественных АСУ ТП в соответствии с требованиями ИБ КИИ.
|*|*|*|
    Оценка объема дисковой подсистемы
        Объем данных в базах данных серверов ПК UDV ITM зависит от множества параметров работы
            серверов и может существенно отличаться в зависимости от конкретных настроек с учетом
            специфики проекта. Настоящая методика расчета может быть использована при проектировании
            систем, функционирующих в типовых рекомендованных режимах работы. 
            Сервер мониторинга ITM-M
            Для укрупненной оценки ожидаемого объема данных при проектировании сервера
                мониторинга UDV-ITM-M можно использовать следующую формулу:
            Объем данных БД ITM-M (Мб) = (Ком*Кэд*Копр*220+Кп*1200)*Кд/1024/1024, где:
                Ком — количество ОМ.
                Кэд — количество параметров мониторинга ОМ (элементов данных). Типовой
                    набор параметров мониторинга включает, как правило, до 10 элементов динамических
                    данных.
                Копр — количество опросов значений параметров ОМ в сутки. По умолчанию,
                    агентный мониторинг осуществляется каждые 15 сек, т.е. Копр=5760, безагентный
                    мониторинг каждые 2 мин, т.е. Копр=720.
                Кп — количество проблем (срабатываний триггеров) в сутки. В нормально
                    функционирующих системах количеством проблем обычно бывает не более 2% от общего
                    количества ОМ.
                Кд — количество дней мониторинга. По умолчанию, история значений
                    контролируемых параметров очищается через 180 дней. После этого периода рост БД
                    существенно замедляется и составляет ориентировочно 10-20% в год.
            Пример расчета:
            Количество ОМ = 100. Агентным способом осуществляется мониторинг 50-ти и 50
                безагентным. Хранение истории значений параметров = 180 дней.
            (50*10*5760+50*0,02*1200)*180/1024/1024 = 108 975,5 Мб
            (50*10*720+50*0,02*1200)*180/1024/1024 = 13 806,5 Мб
            Итого, ожидаемый объем данных в БД сервера = 122 782 Мб
            Сервер удаленного мониторинга ITM-RM
            Расчет ожидаемого объема данных в сервере UDV-ITM-RM осуществляется по формуле: 
            Объем данных БД ITM-RM (Мб) = Ком*Кэд*Копр*220*Кд/1024/1024
            Обозначения и смысл переменных аналогичны использующимся в формуле для сервера
                UDV-ITM-M.
            Пример расчета:
            Количество ОМ = 100. Агентным способом осуществляется мониторинг 50-ти и 50
                безагентным. Хранение истории значений параметров = 3 дня (значение по
                умолчанию).
            50*10*5760*3/1024/1024 = 1 812,7 Мб
            50*10*720*180/1024/1024 = 226,6 Мб
            Итого, ожидаемый объем данных в БД сервера = 2 039,3 Мб
            Сервер визуализации и управления ITM-VM
            Расчет ожидаемого объема данных в сервере UDV-ITM-VM осуществляется по формуле:
            Объем данных БД ITM-VM (Мб) = (Ком*10+Кс*1*Кд+Ксв*7168)/1024, где:
            Ком — количество ОМ. Суммарное количество ОМ, полученных изо всех
                подключенных серверов UDV-ITM-M.
            Кc — количество событий о проблемах ОМ, получаемых из серверов UDV-ITM-M в
                сутки. В нормально функционирующих системах, количеством проблем бывает около 2% от
                общего количества ОМ, однако по каждой проблеме может быть множество событий. Для
                предварительного расчета проектируемой системы рекомендуется считать Кс=Ком.
                В процессе эксплуатации конкретной системы значение может быть уточнено на основе
                фактической статистики.
            Кд — количество дней хранения истории событий в серверах мониторинга. По
                умолчанию, история событий о проблемах ОМ в серверах мониторинга хранится 180
                дней.
            Ксв — количество подключенных серверов мониторинга UDV-ITM-M.
        Пример расчета:
        Количество ОМ = 1500. Количество подключенных серверов мониторинга UDV-ITM-M = 50.
            Хранение истории событий в серверах мониторинга UDV-ITM-M = 180 дней (значение по
            умолчанию).
        (1500*10+1500*1*180+100*7168)/1024 = 978,3 Мб
        Итого, ожидаемый объем данных в БД сервера = 978,3 Мб
|*|*|*|
    Глоссарий
                UDV ITM — программный комплекс мониторинга безопасности и контроля
                    ресурсов. Предназначен для мониторинга IT-инфраструктуры и сервисов предприятий.
                    Включает в себя следующие конфигурации:
                        UDV-ITM-VM — сервер визуализации и управления. Применяется
                                    для:
                                    приема данных с сервера консолидации;
                                    анализа данных;
                                    визуализации данных;
                                    предоставления высокоуровневой информации о состоянии
                                        ИТ-ресурсов  предприятия. 
                        UDV-ITM-M — сервер мониторинга (консолидации). Применяется
                                    для:
                                    сбора данных о производительности с подключенных объектов
                                        мониторинга;
                                    консолидации данных, в т. ч. полученных с сервера
                                        агентов;
                                    передачи консолидированных данных на сервер визуализации и
                                        управления;
                                    визуализации информации об использовании вычислительных
                                        ресурсов и каналов связи объектов мониторинга филиала;
                                    оповещения ответственных лиц в случае выявления сбоя, либо
                                        отклонения показателей функционирования объекта мониторинга
                                        от допустимых.
                        UDV-ITM-RM — сервер удаленного мониторинга (сервер агентов,
                            прокси-сервер). Применяется для: 
                                    сбора данных о производительности с подключенных объектов
                                        мониторинга;
                                    передачи собранных данных на сервер консолидации.
                Автоматизированная система управления технологическим процессом (АСУ ТП)
                    — комплекс программных и программно-аппаратных средств, предназначенных для
                    контроля за технологическим и (или) производственным оборудованием
                    (исполнительными устройствами) и производимыми ими процессами, а также для
                    управления такими оборудованием и процессами.
                Объект мониторинга (ОМ) — узел сети, канал связи, IT-ресурс или сервис,
                    которые подключаются к системе мониторинга для контроля качества их
                    функционирования и предоставляемых услуг.
                Система мониторинга компьютерных инцидентов (СМКИ) — система сбора,
                    анализа и корреляции событий информационной безопасности, созданная на базе
                    решений класса SIEM.
                Система автоматизации процессов обеспечения безопасности (САОБ) —
                    автоматизированная система, предназначенная для автоматизации процессов
                    управления информационной безопасностью.
                Технологический комплекс — объект АСУ ТП нижнего уровня иерархии,
                    является дочерним или подчиненным объектом филиала.
                Техническое обслуживание — комплекс операций по поддержанию
                    работоспособности или исправности производственного оборудования (изделий,
                    деталей) в процессе технической эксплуатации, хранения и транспортировки (ГОСТ
                    18322-2016).
|*|*|*|
    Сервер визуализации и управления UDV-ITM-VM (уровень администрации)
        Сервер UDV-ITM-VM предназначен для централизованного управления системой мониторинга в
            целом, консолидации данных мониторинга в масштабах всего предприятия и интеграционного
            взаимодействия с корпоративными системами обнаружения компьютерных инцидентов и
            системами автоматизации процессов обеспечения ИБ.
        Сервер предоставляет пользователям обобщенную информации о функционировании как объектов
            защиты, так и средств защиты информации, формирует оповещения о критических ошибках
            функционирования объектов защиты на разных площадках. Сервер является источником
            информации для подразделений ИБ в их деятельности по обнаружению и реагированию на
            компьютерные инциденты и принятию мер по ликвидации их последствий.
        Информация о состоянии параметров функционирования объектов защиты и нарушениях в
            функционировании может передаваться из сервера UDV-ITM-VM в корпоративные системы
            обнаружения компьютерных инцидентов. Данные об объектах защиты для смежных систем
            обогащены идентификаторами и тэгами DATAPK, данными о состоянии технического
            обслуживания, что позволяет снизить количество ложных срабатываний при обнаружении
            компьютерных инцидентов.
        Взаимодействие пользователя с сервером осуществляется с помощью web-интерфейса.
        Взаимодействие UDV-ITM-VM со смежными системами:
            Система мониторинга компьютерных инцидентов СМКИ/SIEM:
                    передаются события информационной безопасности, полученные со всех
                        подключенных серверов ПК:
                            события о проблемах функционирования объектов мониторинга;
                            действия пользователей серверов ПК UDV-ITM-M.
                Системы автоматизации процессов обеспечения информационной безопасности
                    (САОБ):
                        предоставляется информация об объектах мониторинга, их свойствах,
                            инвентарные данные.
            Серверы мониторинга UDV-ITM-M:
                    получение и периодическая актуализация информации об объектах мониторинга и
                        проблемах их функционирования.
|*|*|*|
    Лицензионная политика
                Состав лицензий комплекса UDV ITM
                            Код лицензии p/n
                            Наименование
                            Порядок применения
                            UDV-ITM-VM-LIC
                                Сервер визуализации и управления
                                Лицензия на использование программного обеспечения UDV ITM,
                                    модуль «UDV ITM Визуализация и управление»
                                Требуется 1 лицензия для сервера UDV-ITM-VM уровня
                                    администрации.
                                Лицензируется весь основной функционал ITM-VM (уровня версии
                                    1.6).
                            UDV-ITM-VMH1-LIC
                                Лицензия на подключение объектов для контроля
                                Лицензия на использование программного обеспечения UDV ITM,
                                    подключаемые 500 объектов
                                Пакеты лицензий для контроля объектов, мониторинг которых
                                    осуществляется другими системами мониторинга, не ITM-M или
                                    ITM-RM (Zabbix и др.). Используются в проектах с поставкой
                                    только ITM-VM для сбора информации с существующих систем
                                    мониторинга.
                                Для ОМ, которые подключены по лицензии ITM-H, лицензии VMH не
                                    требуются.
                            UDV-ITM-VMH2-LIC
                            Лицензия на использование программного обеспечения UDV ITM,
                                подключаемые 1000 объектов
                            UDV-ITM-VMH3-LIC
                            Лицензия на использование программного обеспечения UDV ITM,
                                подключаемые 10000 объектов
                            UDV-ITM-M-LIC
                                Сервер мониторинга
                                Лицензия на использование программного обеспечения UDV ITM,
                                    модуль «UDV ITM Мониторинг»
                            Требуется 1 лицензия для каждого сервера UDV-ITM-M уровня
                                филиала
                            UDV-ITM-RM-LIC
                                Сервер удаленного мониторинга
                                Лицензия на использование программного обеспечения UDV ITM,
                                    модуль «UDV ITM Удаленный мониторинг»
                            Требуется 1 лицензия для каждого сервера UDV-ITM-RM уровня
                                технологического объекта
                            UDV-ITM-H-LIC
                                Лицензия на подключение объектов для комплексного
                                        мониторинга
                                Лицензия на использование программного обеспечения UDV ITM,
                                    подключаемые 50 узлов
                                Пакет лицензий комплексного мониторинга 50 объектов
                                    мониторинга.
                                Требуется для серверов UDV-ITM-M или UDV-ITM-RM.
                                Лицензируется функционал агентного или безагентного мониторинга и
                                    контроля. ОМ, которые подключены по данной лицензии не требуют
                                    дополнительных лицензий ни на каком уровне иерархии решения,
                                    т.е. в рамках этой лицензии ОМ может быть подключен для
                                    мониторинга к серверу ITM-RM или ITM-M и контролироваться на
                                    уровне сервера ITM-VM.
                                Количество узлов в пакетах лицензий должно соответствовать или
                                    быть больше количества фактически подключаемых объектов
                                    мониторинга.
                                Объектами мониторинга считаются активные узлы сети в разделе
                                    Мониторинг → Узлы сети и услуги в разделе Мониторинг →
                                    Услуги.
                            UDV-ITM-DVD
                            Комплект дистрибутива «программный комплекс «UDV ITM» на
                                DVD-носителе
                            Поддержка
                                Каждая указанная позиция имеет лицензию на тех.поддержку.
                                Партномера содержат постфикс -SUP-B1Y (на 1 год)
|*|*|*|
    Подготовка к внедрению и внедрение серверов мониторинга ITM-M, ITM-RM
        Для успешного внедрения системы мониторинга на базе серверов UDV-ITM-M и UDV-ITM-RM
            необходимо на этапе проектирования или подготовки к внедрению системы мониторинга
            определить основные способы и режимы мониторинга разных типов объектов, определить
            архитектуру и оптимальный состав серверов ПК UDV ITM в соответствии со спецификой
            конкретной ИТ-инфраструктуры защищаемой системы. Состав работ по подготовке к
                внедрению и внедрению сервера мониторинга UDV-ITM-M: 
                Проектирование архитектуры решения:
                        Выбор архитектуры и сетевого размещения серверов — определить
                            оптимальное количество и состав серверов UDV-ITM-M и UDV-ITM-RM,
                            необходимых для создания системы мониторинга с учетом оптимального
                            положения по отношению к объектам мониторинга, количества ОМ,
                            контролируемых параметров, способов и периодичности мониторинга и
                            наличию сетевой доступности, качества каналов связи между территориально
                            распределенными сетевыми сегментами, наличия технического персонала для
                            эксплуатации и других факторов.
                        Выбор оптимальной аппаратной и программной конфигурации серверов с
                            учетом количества ОМ и режимов мониторинга, наличия требований об
                            использовании сертифицированных технических средств в создаваемой
                            системе, а так же требований корпоративной технической политики.
                Монтаж и настройка:
                        Монтаж и пусконаладка серверов UDV-ITM-M и UDV-ITM-RM.
                        Настройка сетевого окружения для обеспечения сетевой доступности с ОМ и
                            смежными системами DATAPK и UDV-ITM-VM.
                Подготовка объектов мониторинга.
                        Определить список ОМ.
                        Выбор способа мониторинга по каждому ОМ — агентный или безагентный.
                            Приоритетные способы мониторинга: Агентный, SNMPv3/v2, IPMI, WMI. 
                        Выбор способа сетевой доступности к каждому ОМ — мониторинг
                            непосредственно сервером UDV-ITM-M или с использованием
                            UDV-ITM-RM.
                        Настройка ОМ.
                                Установка агентов. В процессе установки агента на ОМ нужен
                                    IP-адрес сервера мониторинга UDV-ITM-M или UDV-ITM-RM. 
                                Настройка SNMP.
                                        v.3 (приоритетный в использовании). 
                                        v.2 (только, если v.3 использовать невозможно).
                                            Необходимо использовать параметр community только в
                                            режиме read only.
                                Настройка WMI. Следует использовать только в случае
                                    невозможности использования других способов. Возможно
                                    использование только на сервере UDV-ITM-M.
                                Настройка IPMI.
                Настройка интеграции с DATAPK.
                Подключение объектов мониторинга:
                        Автоматический импорт списка ОМ из DATAPK.
                        Добавление ОМ вручную.
                        Применение шаблонов мониторинга к ОМ в соответствии с их типом и
                            предварительными настройками.
                        Выбор способа мониторинга с использованием сервера UDV-ITM-RM (если
                            требуется).
                Настройка общих параметров сервера UDV-ITM-M в соответствии с потребностями
                    службы эксплуатации: информационные панели, оповещения и т.п.
                Сервер UDV-ITM-M готов к интеграции с UDV-ITM-VM.
        Описание операций по настройкам серверов UDV-ITM-M,
            UDV-ITM-RM и ОМ приведено в Руководствах по эксплуатации соответствующих
            серверов.
|*|*|*|
    Трафик между сервером ITM-VM и серверами ITM-M
            Методика расчета
            Трафик между сервером UDV-ITM-VM и каждым сервером UDV-ITM-M состоит из следующих
                сетевых потоков:
                    Данные о параметрах и инвентарных свойствах ОМ (Том).
                    Объем передаваемых данных о параметрах и инвентарных свойствах ОМ составляет,
                        в среднем, 3,7 Кбайт  на один ОМ.
                    Точный объем трафика зависит от количества заполненных полей инвентарных
                        свойств ОМ и размера текстовых значений. 
                    Данные о состоянии ОМ (Тс).
                    Объем передаваемых данных о состоянии функционирования ОМ составляет, в
                        среднем, 0,2 Кбайт на один ОМ.
                    Данные о проблемах функционирования ОМ (Тп).
                    Объем передаваемых данных о проблемах функционирования составляет, в среднем,
                            1,2 Кбайт на одну проблему.
                    Точный объем трафика зависит от размера текстовых описаний в триггерах и
                        проблемах. При передаче данных о большем количестве проблем за один цикл
                        синхронизации, среднее значение трафика на одну проблему уменьшается.
                    Журналы аудита (Та).
                    Объем передаваемых данных журналов аудита составляет, в среднем, 0,56
                            Кбайт на событие.
                    Точный объем трафика зависит от размера текстовых описаний событий. При
                        передаче данных о большем количестве проблем за один цикл синхронизации,
                        среднее значение трафика уменьшается на одно событие.
                    Служебный трафик управления (Тс).
                    Включает в себя запросы системных свойств сервера UDV-ITM-M, запросы
                        синхронизаций счетчиков ОМ и проблем, а так же служебные запросы возникающие
                        после разрывов связи и т.п.
                    Данный поток трафика является незначительным и может меняться в процессе
                        эксплуатации в зависимости от изменения служебных режимов работы комплекса и
                        составляет не более 2% от общего трафика между серверами. 
            Расчет трафика можно выполнить по формуле:
            Трафик (Кб) = (Кц*Ком*3,7+Кц*Ком*0,2+Кц*Кп*1,2+Кц*Кс*0,56)/0,98
            Где Ком — Количество ОМ, Кп — количество проблем, Кс —
                количество событий журнала аудита, Кц — количество циклов синхронизаций.
            Пример расчета
            Параметры системы:
            Количество ОМ, подключенных к серверу UDV-ITM-M = 200 (UDV-ITM-M к которому
                подключено 50 ОМ и 3 сервера UDV-ITM-RM, к каждому их которых подключено по 50
                ОМ).
            Количество проблем = по 1 новой проблеме при каждой синхронизации данных.
            Периодичность синхронизации данных:
                Полных данных об ОМ, мин — 480;
                Данных о состоянии ОМ, мин — 3;
                Данных о проблемах, мин — 1; 
                Журналов аудита, мин — 3;
                Системных свойств, мин — 3. 
            Расчет 
                Данные о параметрах и инвентарные свойства ОМ (1 цикл) = 740 Кбайт;
                Данные о состоянии ОМ (1 час) = 800 Кбайт;
                Данные о проблемах функционирования ОМ (1 час) = 72 Кбайт;
                Журналы аудита (1 час) = 44,8 Кбайт;
                Служебный трафик управления = 2%.
            Итого: 
                Требуемая минимальная полоса пропускания = 2,3 Кбит/с;
                Объем трафика за 1 сутки = 24,1 Мбайт.
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
            Добавлены разделы:
            Разделы  и  перенесены в раздел . 
            Добавлены способы устранения нештатных ситуаций:
                    .
            Изменены разделы:
            Исключены разделы:
                    «Создание резервной копии всех БД и файлов журналов БД Jatoba»
                    «Восстановление резервной копии всех БД и файлов журналов БД Jatoba»
                    «Ошибка вида "pg_basebackup: не удалось подключиться к серверу: ВАЖНО: в
                        pg_hba.conf нет записи, разрешающей подключение для репликации с компьютера
                        "127.0.0.1" для пользователя "postgres", SSL выкл."»
            Разделы «Требования к аппаратному обеспечению» и «Требования к программному
                обеспечению» объединены в раздел «Требования к аппаратному и программному
                обеспечению».
|*|*|*|
    Что нового?
        Основные изменения в ПО сервера  v.1.7.0.0:
            Изменения в версии 1.7.0.0
                        Категория
                        Изменения в продукте
                        Разделы документации
                        Шаблоны
                         Изменены следующие шаблоны:
                                Агент.yaml — добавлены инвентарные поля к
                                    некоторым из собираемых данных.
                                Windows агентный сбор.yaml — изменена панель
                                    «Производительность системы», добавлен график для оперативной
                                    памяти, добавлены инвентарные поля к некоторым из собираемых
                                    данных, название элемента данных «Описание системы» изменено на
                                    «Системная информация».
                                Linux агентный сбор.yaml — изменена панель
                                    «Производительность системы», добавлены инвентарные поля к
                                    некоторым из собираемых данных, деактивирован элемент данных
                                    «Список установленных пакетов», название элемента данных
                                    «Описание системы» изменено на «Системная информация». 
                                Сетевое универсальное устройство SNMP.yaml —
                                    отредактированы правила предобработки.
                                Windows SNMP.yaml — добавлены инвентарные поля
                                    к некоторым из собираемых данных, исправлено имя макроса в
                                    присоединенном к Windows SNMP.yaml шаблоне
                                        SNMP MIB. Ресурсы узла, деактивирован
                                    элемент данных «Идентификатор системного объекта».
                                Linux SNMP.yaml — добавлены инвентарные поля к
                                    некоторым из собираемых данных, деактивирован элемент данных
                                    «Идентификатор системного объекта».
                                Сервер агентов ITM-A.yaml — исправлена опечатка
                                    в имени элемента данных.
                                Общий ПЛК.yaml — добавлены элементы данных для
                                    мониторинга узлов с помощью ICMP. 
                                APC Smart-UPS.yaml — отредактированы правила
                                    предобработки. 
                                Eltex MES Обший.yaml — отредактированы правила
                                    предобработки. Исправлен мониторинг коммутаторов в стеке.
                                ИБП Парус Электро.yaml — исправлена опечатка в
                                    описании элемента данных
                        , 
                        Шаблоны, Элементы данных, Графики
                        ,
                        Шаблоны
                            Добавлены шаблоны:
                                    Температура ЦПУ Linux.yaml;
                                    Сервер Huawei RH5885H V3 (iBMC).yaml;
                                    Управляемый блок розеток Rem-MC.yaml;
                                    Eltex MES5448.yaml;
                                    Коммутатор MOXA серии EDS.yaml.
                        , , , , , 
                        Шаблоны
                        —
                        Шаблоны
                        Изменен шаблон Управляемый блок розеток Rem-MC.yaml. Добавлены триггеры для внутренних датчиков блока розеток. Исправлено получение SNMP-ловушек. Исправлены названия элементов данных и групп элементов данных
                        —
|*|*|*|
    Меры по выполнению безопасного безагентного сбора данных
        Для безопасного безагентного сбора данных с объектов мониторинга необходимо
            использовать:
            Штатные механизмы сетевого взаимодействия объектов мониторинга; 
            Штатные способы аутентификации:
                Внутренняя;
                HTTP;
                LDAP;
                SAML.
            Выбор способа аутентификации осуществляется на странице  → .
            Пароли для служебных учетных записей, соответствующие следующим требованиям:
                требование замены пароля при первом входе в систему;
                минимальная длина нового пароля — не менее 6 символов;
                запрет на использование в пароле более чем двух символов подряд из логина и
                    имени учетной записи;
                использование не менее трех типов символов из следующего списка:
                    цифры;
                    буквы в верхнем регистре;
                    буквы в нижнем регистре;
                    специальные символы.
                ограниченный срок действия пароля;
                запрет на использование последних (от 1 до 24) паролей, сохраненных в
                    журнале паролей.
            Минимальные права для доступа к объектам мониторинга:
                «только чтение» для пространств WMI;
                «read-only community» для SNMP.
|*|*|*|
    Режимы работы
        Для добавления и регистрации  в DATAPK
            ITM-K доступны следующие режимы:
            Автоматический импорт —  импорт данных об ОМ из программного комплекса DATAPK.
                Подробнее см. в .
            Импорт — импорт данных об  из файла
                вручную на странице →. Подробнее см. в .
            Добавление вручную — создание нового 
                на странице →.
                Подробнее см. в .
            Автоматическая регистрация  —
                добавление , найденных  с
                помощью заданных правил обнаружения. Подробнее см. в .
        В автоматическом режиме регистрации объектов мониторинга применяется активное сканирование
            заданных IP-адресов либо диапазонов IP-адресов с определенной периодичностью.
        Обнаружение объектов мониторинга осуществляется путем поиска сетевых сервисов. Доступен
            поиск сервисов с указанным диапазоном портов.
        Для активного сканирования объектов мониторинга необходимо настроить правила обнаружения.
            Доступны следующие статусы правил:
            правило обнаружения активировано;
            правило обнаружения деактивировано.
        При создании или редактировании объекта мониторинга доступны следующие поля:
            Имя узла сети — сетевое имя объекта мониторинга;
            Видимое имя — имя объекта мониторинга, которое отображается в интерфейсе ;
            Группы — принадлежность объекта мониторинга к группе.;
            Интерфейсы — сетевые интерфейсы объекта мониторинга с указанием: 
                    типа интерфейса;
                    IP-адреса или DNS-имени;
                    порта.
            Описание — описание объекта мониторинга;
            Наблюдение через прокси — включение или отключение использования прокси;
            Активировано — состояние объекта мониторинга.
|*|*|*|
    Функциональные возможности
         осуществляет сбор данных со следующих объектов
            мониторинга:
            Автоматизированные рабочие места и серверы под управлением 
                семейства Microsoft Windows,  семейства Linux,  UNIX: 
                    нагрузка на центральный процессор;
                    объем занятой оперативной памяти;
                    свободное место на дисках;
                    нагрузка на сетевые интерфейсы;
                    идентификационная информация об ;
                    статус служб ;
                    статус доступности ;
                    и др.
            Активное сетевое оборудование: 
                    показатели исходящего и входящего трафика;
                    состояние сетевых интерфейсов;
                    информация о возникающих ошибках;
                    статус доступности ;
                    и др.
            Оборудование инженерной инфраструктуры с возможностью доступа по протоколу SNMP: 
                    нагрузка на центральный процессор;
                    общий объем памяти;
                    время работы устройства;
                    и др.
        Для оперативного сбора данных взаимодействие с объектами мониторинга организовано с
            применением агентов. В случае отсутствия технической возможности применения агентов
            реализован вариант безагентного сбора данных. 
        При безагентном сборе данных  получает данные с объектов
            мониторинга по протоколам SNMP, IPMI и WMI. 
|*|*|*|
    Функциональные возможности
        Программный комплекс мониторинга безопасности и контроля ресурсов (далее — программный
            комплекс)  предоставляет следующие функциональные
            возможности:
            Предоставление высокоуровневой информации о состоянии ИТ-ресурсов.
            Контроль безотказного функционирования .
            Контроль предоставляемых вычислительных ресурсов и каналов связи.
            Контроль состояния ИТ-систем инфраструктуры общего назначения.
            Проверка соблюдения соглашений об уровне обслуживания.
            Оценка влияния сбоя компонентов инфраструктуры на предоставляемые ИТ-сервисы.
            Комбинирование графических данных, соотнесенных по временной шкале.
         используется для создания комплексных корпоративных решений
            для мониторинга иерархической ИТ-инфраструктуры.
            Архитектура системы 
        Подробная информация о функциональных возможностях серверов 
            на каждом уровне иерархии приведена в таблице.
            Функциональные возможности серверов 
                        Сервер 
                        Уровень иерархии для размещения
                        Функциональные возможности
                        Сервер агентов ()
                        Уровень 
                                сбор данных о производительности компонентов :
                                        с применением агентов для обеспечения оперативного сбора
                                            данных;
                                        безагентный сбор данных по протоколам SNMP, WMI, Modbus
                                            TCP и OPC UA в случае отсутствия технической возможности
                                            применения агентов.
                                отправка собранных данных на уровень филиала.
                        Сервер консолидации ()
                        Уровень филиала
                                сбор данных с компонентов ,
                                    функционирующих на уровне филиала;
                                консолидация данных, в т. ч. полученных с уровня ;
                                передача консолидированных данных на сервер на уровне
                                    предприятия;
                                визуализация информации об использовании вычислительных ресурсов
                                    и каналов связи 
                                    филиала;
                                оповещение ответственных лиц в случае выявления сбоя, либо
                                    отклонения показателей функционирования  от допустимых.
                        Сервер визуализации и управления (DATAPK-VM)
                        Уровень предприятия
                                прием консолидированных данных с уровня филиала;
                                анализ данных;
                                визуализация данных;
                                предоставление высокоуровневой информации о состоянии
                                    ИТ-ресурсов  предприятия в целом. 
         осуществляет сбор данных со следующих объектов
            мониторинга:
            Автоматизированные рабочие места и серверы под управлением 
                семейства Microsoft Windows,  семейства Linux,  UNIX: 
                    нагрузка на центральный процессор;
                    объем занятой оперативной памяти;
                    свободное место на дисках;
                    нагрузка на сетевые интерфейсы;
                    идентификационная информация об ;
                    статус служб ;
                    статус доступности ;
                    и др.
            Активное сетевое оборудование: 
                    показатели исходящего и входящего трафика;
                    состояние сетевых интерфейсов;
                    информация о возникающих ошибках;
                    статус доступности ;
                    и др.
            Оборудование инженерной инфраструктуры с возможностью доступа по протоколу SNMP: 
                    нагрузка на центральный процессор;
                    общий объем памяти;
                    время работы устройства;
                    и др.
        Для добавления и регистрации  в  доступны следующие возможности:
            Импорт — импорт данных об  из файла
                вручную на странице  → . 
            Добавление вручную — создание нового 
                на странице  → . 
            Автоматическая регистрация  —
                добавление , найденных  с помощью заданных правил обнаружения.
            Автоматическая синхронизация с DATAPK — добавление в качестве  объектов защиты из DATAPK.
|*|*|*|
    Меры по выполнению безопасного безагентного сбора данных
        Для безопасного безагентного сбора данных с объектов мониторинга необходимо
            использовать:
            Штатные встроенные в  механизмы сетевого взаимодействия объектов мониторинга; 
            Штатные способы аутентификации:
                    Внутренняя;
                    ;
                    ;
                    SAML.
                Выбор способа аутентификации осуществляется на странице  → .
            Пароли для служебных учетных записей, соответствующие следующим требованиям:
                    требование замены пароля при первом входе в систему;
                    минимальная длина нового пароля — не менее 6 символов;
                    запрет на использование в пароле более чем двух символов подряд из логина и
                        имени учетной записи;
                    использование не менее трех типов символов из следующего списка:
                            цифры;
                            буквы в верхнем регистре;
                            буквы в нижнем регистре;
                            специальные символы.
                    ограниченный срок действия пароля;
                    запрет на использование последних (от 1 до 24) паролей, сохраненных в
                        журнале паролей.
            Минимальные права для доступа к объектам мониторинга:
                    «только чтение» для пространств ;
                    «read-only community» для ;
                    права только на чтение для тегов OPC UA.
|*|*|*|
    Функциональные возможности
        Программный комплекс мониторинга безопасности и контроля ресурсов (далее — программный
            комплекс)  предоставляет следующие функциональные
            возможности:
            Предоставление высокоуровневой информации о состоянии ИТ-ресурсов.
            Контроль безотказного функционирования .
            Контроль предоставляемых вычислительных ресурсов и каналов связи.
            Контроль состояния ИТ-систем инфраструктуры общего назначения.
            Проверка соблюдения соглашений об уровне обслуживания.
            Оценка влияния сбоя компонентов инфраструктуры на предоставляемые ИТ-сервисы.
            Комбинирование графических данных, соотнесенных по временной шкале.
         используется для создания комплексных корпоративных решений
            для мониторинга иерархической ИТ-инфраструктуры.
            Архитектура системы 
        Подробная информация о функциональных возможностях серверов 
            на каждом уровне иерархии приведена в таблице.
            Функциональные возможности серверов 
                        Сервер 
                        Уровень иерархии для размещения
                        Функциональные возможности
                        Сервер визуализации и управления ()
                        Уровень предприятия
                                прием консолидированных данных с уровня филиала;
                                анализ данных;
                                визуализация данных;
                                предоставление высокоуровневой информации о состоянии
                                    ИТ-ресурсов  предприятия в целом. 
                        Сервер консолидации
                            Сервер консолидации
                            Сервер мониторинга ()
                        Уровень филиала
                                сбор данных с компонентов ,
                                    функционирующих на уровне филиала;
                                консолидация данных, в т. ч. полученных с уровня ;
                                передача консолидированных данных на сервер на уровне
                                    предприятия;
                                визуализация информации об использовании вычислительных ресурсов
                                    и каналов связи 
                                    филиала;
                                оповещение ответственных лиц в случае выявления сбоя, либо
                                    отклонения показателей функционирования  от допустимых.
                        Сервер агентов
                            Сервер агентов
                            Сервер удаленного мониторинга()
                        Уровень 
                                сбор данных о производительности компонентов :
                                        с применением агентов для обеспечения оперативного сбора
                                            данных;
                                        безагентный сбор данных по протоколам , , Modbus  и OPC UA в случае отсутствия технической возможности
                                            применения агентов.
                                отправка собранных данных на уровень филиала.
         осуществляет сбор данных со следующих объектов мониторинга:
            Автоматизированные рабочие места и серверы под управлением 
                семейства Microsoft Windows,  семейства Linux,  UNIX: 
                    нагрузка на центральный процессор;
                    объем занятой оперативной памяти;
                    свободное место на дисках;
                    нагрузка на сетевые интерфейсы;
                    идентификационная информация об ;
                    статус служб ;
                    статус доступности ;
                    и др.
            Активное сетевое оборудование: 
                    показатели исходящего и входящего трафика;
                    состояние сетевых интерфейсов;
                    информация о возникающих ошибках;
                статус доступности ;
                и др.
            Оборудование инженерной инфраструктуры с возможностью доступа по протоколу : 
                    нагрузка на центральный процессор;
                    общий объем памяти;
                    время работы устройства;
                    и др.
        Для добавления и регистрации  в 
            доступны следующие возможности:
            Импорт — импорт данных об  из файла
                вручную на странице  → . Подробнее см. в .
            Добавление вручную — создание нового 
                на странице  → .
                Подробнее см. в .
            Автоматическая регистрация  —
                добавление , найденных  с
                помощью заданных правил обнаружения. Подробнее см. в .
            Автоматическая синхронизация с DATAPK — добавление в качестве  объектов защиты из DATAPK. Подробнее см. в разделе
                    .
|*|*|*|
    Общее описание
                Программный комплекс мониторинга безопасности и контроля ресурсов (далее —
                    программный комплекс, ПК)  предоставляет следующие
                    функциональные возможности:
                    Предоставление высокоуровневой информации о состоянии ИТ-ресурсов.
                    Контроль безотказного функционирования .
                    Контроль предоставляемых вычислительных ресурсов и каналов связи.
                    Контроль состояния ИТ-систем инфраструктуры общего назначения.
                    Проверка соблюдения соглашений об уровне обслуживания.
                    Оценка влияния сбоя компонентов инфраструктуры на предоставляемые
                        ИТ-сервисы.
                    Анализ зависимостей, выражающийся в возможности комбинирования различных
                        графических данных, соотнесенных по временной шкале.
                ПК  используется для создания комплексных
                    корпоративных решений для мониторинга иерархической ИТ-инфраструктуры.
                    Архитектура системы 
                Каждый сервер из состава ПК  устанавливается на
                    аппаратную платформу с характеристиками, достаточными для выполнения
                    необходимого количества операций на данном уровне иерархии. Подробные требования
                    к характеристикам приведены в разделе .
                    Структура и описание 
                                Уровень иерархии 
                                Уровень ИТ-инфраструктуры для размещения
                                Функциональные возможности
                                Аппаратная платформа
                                Сервер агентов ()
                                Уровень 
                                        Агентный и безагентный сбор данных о производительности
                                            компонентов АСУ ТП;
                                        отправка собранных данных на уровень филиала.
                                Малогабаритный промышленный компьютер или сервер средней
                                    производительности в исполнении, подходящем для установки в шкаф
                                    АСУ ТП.
                                Сервер консолидации ()
                                Уровень филиала
                                        Сбор данных с компонентов АСУ ТП, функционирующих на
                                            уровне филиала;
                                        консолидация данных, в т. ч. полученных с уровня
                                            ТО;
                                        передача консолидированных данных на сервер на уровне
                                            предприятия;
                                        визуализация информации об использовании вычислительных
                                            ресурсов и каналов связи объектов мониторинга
                                            филиала;
                                        оповещение ответственных лиц в случае выявления сбоя,
                                            либо отклонения показателей функционирования объектов
                                                мониторинга от допустимых.
                                Высокопроизводительный сервер уровня Enterprise в исполнении,
                                    подходящем для монтажа в стойку 19”.
                                Сервер визуализации и управления (DATAPK-VM)
                                Уровень предприятия
                                        Прием консолидированных данных с уровня филиала;
                                        анализ данных;
                                        визуализация данных;
                                        предоставление высокоуровневой информации о состоянии
                                            ИТ-ресурсов АСУ ТП предприятия в целом. 
                                Высокопроизводительный сервер уровня Enterprise в исполнении,
                                    подходящем для монтажа в стойку 19”.
|*|*|*|
    Что нового?
            Обновления в текущей версии документации:
                    Обновлены документы:
                    Добавлены документы:
            В версии 1.4.0.0 добавлены новые функции:
                    На странице :
                            Добавлена возможность отключения автоматического сбора данных с
                                сервера мониторинга на период пусконаладки или технического
                                обслуживания.
                            Для филиалов добавлено отображение имени DATAPK, подключенного к
                                серверу мониторинга.
                            В таблицу  добавлено
                                отображение информации об  и о
                                техническом обслуживании объектов мониторинга.
                            Добавлена возможность внепланового запроса данных об объектах
                                мониторинга с сервера .
                            Добавлена кнопка для обновления страницы.
                    На странице  добавлена
                        возможность просмотра имени DATAPK, подключенного к серверу
                        мониторинга.
                    На странице  добавлена возможность
                        просмотра списка событий проблемы.
                    Страница настроек интеграций переименована в .
                    На странице  добавлена
                        возможность настройки периодичности получения с серверов мониторинга
                        системных журналов и системных свойств.
                    На странице  добавлена возможность
                        просмотра и изменения роли пользователя.
                    На странице  добавлена возможность
                        настройки подключения к LDAP-серверу.
                    На странице  добавлена возможность
                        настройки email-оповещений.
                    В файл .env добавлены переменные: 
|*|*|*|
    Что нового?
        В версии 1.4.0.1 исправлена ошибка, при которой не отправлялись события о проблемах в
            SIEM.
        Обновления в текущей версии документации:
                Обновлены документы:
                Добавлены документы:
|*|*|*|
    Использование по назначению
        В этом разделе:
            События
|*|*|*|
    Управление элементами данных
            Для управления элементами данных:
                Перейдите на страницу  →  или  → .
                Откроется страница со списком узлов сети или шаблонов.
                Нажмите на ссылку «элементы данных» в строке с узлом сети или шаблоном, к
                    которому относится нужный элемент данных.
                Откроется страница со списком элементов данных выбранного узла сети или
                    шаблона.
                Нажмите на имя нужного элемента данных.
                Откроется страница «Элементы данных», на которой указаны параметры и
                    доступные действия элемента данных.
        Получение данных элемента
            Для получения данных элемента сейчас, а не по
                заданному расписанию нажмите на кнопку «Выполнить сейчас». При успешном срабатывании
                появится уведомление «Запрос успешно отправлен».
        Тестирование
                С помощью тестирования можно проверить корректность настройки элемента данных.
                    Для тестирования:
                    Нажмите на кнопку «Тест».
                        Если элемент данных невозможно проверить, кнопка «Тест» будет
                            недоступна для него.
                    Откроется окно «Тест элемента данных»
                    Настройте параметры для проверки:
                            Получить значение с узла сети — снимите чекбокс, чтобы задать
                                значение вручную, или оставьте включенным, чтобы получить значение с
                                узла сети;
                                    Тестирование элемента данных с получением значения с узла
                                        сети
                                            Тестирование элемента данных со значением,
                                                заданным вручную
                            Адрес хоста —  имя или IP-адрес узла сети, куда будет отправлен
                                запрос;
                            Порт;
                            Прокси — чтобы подключиться к узлу сети через прокси, выберите
                                сервер агентовагентовудаленного
                                    мониторинга из списка. Если для узла сети не настроено
                                подключение через сервер агентовагентовудаленного мониторинга, доступен единственный вариант «без
                                прокси».
                    Нажмите на кнопку «Получить значение и протестировать».
                            Если тест прошел успешно, то результат появится в поле «Результат»,
                                время выполнения в поле «Время». При этом результат прошлого
                                успешного теста, если он был, переместится в поле «Предыдущее
                                значение», а время выполнения прошлого теста — в поле «Пред.
                                время».
                            Если настройка выполнена неверно, отобразится сообщение об ошибке с
                                описанием возможной причины.
        Очистка истории и динамики изменений
            Для удаления истории и динамики изменений элемента
                данных:
                    Нажмите на кнопку «Очистить историю и динамику изменений».
                    В открывшемся окне подтверждения действия нажмите «ОК».
        Удаление
            Для удаления элемента данных:
                    Нажмите на кнопку «Удалить».
                    В открывшемся окне подтверждения действия нажмите «ОК».
        Отмена изменений
            Для отмены изменения свойств элемента даннных нажмите
                на кнопку «Отмена».
|*|*|*|
    Элементы данных
        Элементы данных — это сущности, которые собирают данные с узлов сети.
        После настройки узлов сети, необходимо добавить элементы данных мониторинга для начала
            фактического сбора данных.
        Каждый элемент данных является отдельной метрикой. Один из способов быстро добавить
            большое количество элементов данных — это присоединить один из предопределенных шаблонов
            к узлу сети. Для оптимизации производительности системы может потребоваться добавление к
            шаблонам или узлам сети элементов данных и настройка частоты сбора данных этими
            элементами данных.
            Ключи элементов данных
            В каждом элементе данных есть ключ. Ключ — это параметр элемента данных, который
                определяет, какого рода данные будут собираться с узла сети. 
            Например, элемент данных с именем ключа system.cpu.load будет собирать
                данные о загрузке процессора, а элемент данных с именем ключа net.if.in
                — информацию о входящем трафике. 
            Чтобы указать дополнительные параметры для ключа, включите их в квадратные скобки после
                имени ключа. 
            Например, system.cpu.load[avg5] будет возвращать загрузку процессора за
                последние 5 минут, а net.if.in[eth0] вернет входящий трафик на
                интерфейсе eth0.
            Неподдерживаемые элементы данных
            Элемент данных может стать неподдерживаемым, если его значение не было получено по
                некоторым причинам. Такие элементы данных будут перепроверены через определенный
                интервал времени, настраиваемый в разделе боковой панели «Администрирование».
            Ограничения текстовых данных
            Ограничения текстовых данных зависят от выбранной базы данных. Перед сохранением
                текстовых значений в базу данных эти значения обрезаются в соответствии с
                ограничением типа значений в базе данных.
                Ограничения текстовых данных для базы данных
                            База данных
                            Тип информации
                            Слово
                            Журнал (лог)
                            Текст
                            JatobaDB
                            255 символов
                            65536 символов
                            65536 символов
        В этом разделе:
|*|*|*|
    История и динамика изменений
        История и динамика изменений — способы хранения собранных данных в .
        История изменений хранит каждое полученное значение. Динамика изменений хранит
            усредненную информацию за каждый час, что менее ресурсоемко.
        Время хранения в базе данных истории изменений — от 1 часа до 25 лет, время хранения
            динамики изменений — от 1 дня до 25 лет. Более старые данные будут удалены с помощью
            функции автоматической очистки истории базы данных. История и динамика изменений
            хранятся в секундах. 
        Значения истории и динамики изменений можно переопределить глобально в разделе боковой
            панели  →  на вкладке «Очистка
            истории» в левом верхнем углу экрана. 
        В этом разделе:
                Хранение истории
                Хранение динамики изменений
|*|*|*|
    Хранение динамики изменений
        Динамика изменений является встроенным механизмом обработки данных истории, где для
            каждого часа хранятся значения минимума, максимума и усредненное значение, а также общее
            количество значений за этот час.
        Период хранения динамики изменений можно указать:
            в диалоге свойств элемента данных;
            при массовом обновлении элементов данных;
            при настройке задач очистки истории.
        Обычно динамика изменений может храниться намного дольше, чем история. Любые более старые
            данные будут удалены с помощью автоматической очистки базы данных (Housekeeper).
         сервер аккумулирует данные динамики изменений в реальном времени в кэше
            динамики изменений по мере поступления потока данных. Сервер сбрасывает динамику
            изменений в базу данных (где веб-интерфейс может найти их) в следующих ситуациях:
            Начался новый час, и сервер получил новое значение по этому элементу данных.
            Новый час начнется менее, чем за 5 минут до конца предыдущего (новые значения
                отсутствуют).
            Сервер останавливается.
        Для просмотра динамики изменений на графике нужно ожидать по крайней мере до начала
            следующего часа (если элемент данных обновляется часто) и почти до конца следующего часа
            (если элемент данных обновляется реже), что означает максимум 2 часа.
        Когда сервер сбрасывает кэш динамики изменений и в базе данных уже имеются данные
            динамики изменений за этот час (например, сервер был перезапущен в середине часа),
            серверу потребуется использовать запросы обновления вместо простых запросов вставки.
            Поэтому на больших инсталляциях, если требуется перезапуск, лучше всего останавливать
            сервер в конце одного часа и запускать его в начале следующего часа, чтобы избежать
            наложения данных динамики изменения.
        Таблицы истории никак не участвуют в генерации динамики изменений.
        Если для периода динамики изменений установлено значение «0» или «Не хранить динамику
            изменений», сервер  вообще не будет считать и хранить динамику
            изменений.
        Динамика изменений вычисляется и сохраняется с использованием того же типа данных, как и
            оригинальные значения. В результате среднее значение вычисления значений целочисленных
            типов данных округляется, и чем меньше интервал значений, тем меньше будет точность
            результата. Например, если элемент данных имеет значения 0 и 1, средним значением будет
            0, а не 0.5.
        Перезапуск сервера также может привести к потере точности вычисления усредненных значений
            у целочисленных типов данных за текущий час.
|*|*|*|
    Хранение истории
        Период хранения истории можно указать:
            в диалоге свойств элемента данных;
            при массовом обновлении элементов данных;
            при настройке задач очистки истории.
        Любые более старые данные будут удалены с помощью автоматической очистки базы данных
            (Housekeeper).
        Вместо долговременного хранения истории можно хранить больше данных динамики изменений.
            Например, можно хранить историю 14 дней и динамику изменений 5 лет.
        Для подсчета, сколько потребуется места для истории в сравнении с динамикой изменений,
            используйте страницу оценки размера базы данных.
        При меньшем хранении истории все равно можно просматривать старые данные на графиках,
            графики будут использовать значения динамики изменений для отображения старых
            данных.
        Если для периода хранения истории установлено значение «0» либо «Не хранить историю»,
            элемент данных будет обновлять только инвентарные данные, указанные в поле «Заполнение
            инвентарного поля узла сети». Функции триггера не будут
            вычисляться.
        Альтернативный подход к хранению истории описан в функционале экспорта истории в
            подгружаемых модулях.
|*|*|*|
    Изменение элемента данных
        При редактировании элемента данных уровня шаблона на уровне узла сети
                некоторое количество полей доступно только для чтения. Можно воспользоваться ссылкой
                из заголовка диалога и перейти на уровень шаблона и отредактировать элемент данных
                там, однако имейте в виду, что изменение элемента данных коснется всех узлов сети, к
                которым присоединен шаблон.Для изменения элемента данных:
                Перейдите на страницу  →   или  → . 
                Нажмите на «Элементы данных» в строке с узлом сети или шаблоном.
                Откроется страница «Элементы данных».
                Нажмите на название нужного элемента данных в столбце «Имя».
                Измените атрибуты элемента данных на вкладке «Элемент данных».
                При необходимости задайте правила преобразования полученных значений на вкладке
                    «Предобработка». 
                Нажмите на кнопку «Обновить».
|*|*|*|
    Предобработка значений элемента данных
        Вкладка «Предобработка» позволяет задать правила преобразования полученных элементом
            данных значений. Можно использовать одно или несколько правил предобработки, которые
            будут применены до сохранения значений в базу данных. Преобразования с помощью правил
            предобработки выполняются в том порядке, в котором они были добавлены. Вся предобработка
            выполняется  сервером.
        В параметрах предварительной обработки значений элементов данных поддерживаются
            пользовательские макросы и пользовательские макросы с контекстом.
            Параметры предварительной обработки значений элементов данных
                        Группа преобразований
                        Преобразование
                        Параметры и описание
                        Текст
                        Регулярное выражение
                                шаблон — введите регулярное выражение;
                                вывод — введите значение, на которое нужно
                                    заменить то, что совпало с регулярным выражением в поле
                                        шаблон.  
                        Замена
                                строка поиска — введите регистрозависимую
                                    строку, которую нужно найти в значении.
                                замена — введите регистрозависимую строку, на
                                    которую нужно заменить найденную строку.  Строка замены может
                                    быть пустой.
                            Замена действует для всех найденных строк.
                            В значениях полей строка поиска и
                                    замена можно использовать следующие специальные
                                    символы:
                                    \n — разрыв строки;
                                    \r — возврат каретки;
                                    \t — табуляция;
                                    \s — пробел;
                                    \\ — символ «\».
                        Обрезать
                        список символов — введите символы, которые будут
                            удалены с начала или конца значения.
                        Обрезать справа
                        список символов — введите символы, которые будут
                            удалены с конца значения.
                        Обрезать слева
                        список символов — введите символы, которые будут
                            удалены с начала значения.
                        Составные данные
                        XML XPath
                            XPath — запрос XPath, который позволяет извлечь
                                значение или фрагмент из XML данных.
                                    Примеры применения запросов XPath к данным XML
                                                XPath
                                                XML
                                                Результат
                                                number(/document/item/value)
                                                <document><item><value>10</value></item></document>
                                                10
                                                number(/document/item/@attribute)
                                                <document><item
                                                  attribute="10"></item></document>
                                                10
                                                /document/item
                                                <document><item><value>10</value></item></document>
                                                <item><value>10</value></item>
                                    Пространства имен не поддерживаются.
                                    Для использования этого преобразования сервер  необходимо
                                        скомпилировать с поддержкой libxml.
                        JSONPath
                            $.путь.к.ноде — запрос JSONPath который позволяет
                                извлечь значение или фрагмент из данных .
                                    Примеры применения запросов JSONPath к данным
                                        JSON
                                                JSONPath
                                                JSON
                                                Результат
                                                $.document.item.value
                                              |*|*|*|  {"document":{"item":{"value":
                                                  10}}}
                                                10
                                                $.document.item
                                                {"document":{"item":{"value":
                                                  10}}}
                                                {"value": 10}
                                                $['a
                                                  document'].item.value
                                                {"a document":{"item":{"value":
                                                  10}}}
                                                10
                                                $.document.items[1].value
                                                {"document":{"items":[{"value": 10},
                                                  {"value": 20}]}}
                                                20
                            Поддерживаются только прямые пути к одиночным
                                объектам. В JSONPath в обозначении с точкой
                                    ($.a.b.c) можно использовать только буквы,
                                цифры и символ подчеркивания. Если имя объекта  содержит другие символы, необходимо использовать обозначение с
                                квадратной скобкой ($['a']['b']['c']). Допускается
                                смешивание обозначений ($.a['b'].c).Извлечение
                                    нескольких значений не поддерживается.
                        CSV в 
                        Данные файла CSV конвертируются в формат .
                        Арифметические
                        Пользовательский множитель
                            Введите число, на которое будет умножено полученное элементом данных
                                значение. 
                            Поддерживаются целые и дробные числа, а также числа в
                                экспоненциальном формате. Например, 1e+70.
                            При использование этой опции полученные элементом данных значения в
                                KB, MBps будут сконвертированы в B, Bps. 
                                При использовании этого преобразования для элементов данных со
                                    значениями типа Numeric (unsigned), если
                                    результат преобразования имеет тип float, он
                                    будет сохранен без десятичной части с типом
                                        integer.
                        Изменение
                        Простое изменение
                            При выборе этой опции будет вычислена разница между текущим и
                                предыдущим значениями элемента данных.
                            Рекомендуется использовать эту опцию для измерения постоянно
                                растущего значения. Если текущее значение меньше предыдущего, тогда
                                     не
                                записывает результат вычисления и ждет следующего значения.
                        Изменение в секунду
                            При выборе этой опции будет вычислено значение по формуле:
                                (значение-пред_значение)/(время-пред_время) В
                                этой формуле:
                                значение — текущее значение элемента
                                    данных;
                                пред_значение — предыдущее значение элемента;
                                    данных;
                                время — временная метка текущего значения
                                    элемента данных;
                                пред_время — временная метка предыдущего
                                    значения элемента данных.
                            Рекомендуется использовать эту опцию для измерения скорости в секунду
                                в случае постоянно увеличивающихся значений. Если текущее значение
                                меньше, чем предыдущее значение,  не записывает результат
                                вычисления  и ждет следующее значение. 
                                При использовании этого преобразования для элементов данных со
                                    значениями типа Numeric (unsigned), если
                                    результат преобразования имеет тип float, он
                                    будет сохранен без десятичной части с типом
                                        integer.
              |*|*|*|          Системы счисления
                        Логичный в десятичный
                        Значение элемента данных будет конвертировано из логического формата
                            в десятичный.
                        Восьмеричное в десятичное
                        Значение элемента данных будет конвертировано из восьмеричного
                            формата в десятичный.
                        Шестнадцатеричное в десятичное
                        Значение элемента данных будет конвертировано из шестнадцатеричного
                            формтата в десятичный.
                        Пользовательские скрипты
                        JavaScript
                        При выборе этой опции предобработка выполняется с помощью вызова
                            функции JavaScript с одним параметром «value» и заданным пользователем
                            телом функции. Результатом шага предобработки является значение, которое
                            возвращает функция.
                        Валидация
                        По диапазону
                            Укажите диапазон, в котором должно находиться значение: введите
                                минимальное значение в поле «мин» и максимальное значение
                                (включительно) в поле «макс».
                            Допускаются целые числа, числа с десятичной и экспоненциальной
                                частью, отрицательные числа, макросы. Минимальное значение должно
                                быть меньше максимального.
                            Необходимо заполнить хотя бы одно значение — минимальное или
                                максимальное.
                        Совпадение регулярному выражению
                        Введите регулярное выражение, которому должно соответствовать
                            значение элемента данных.
                        Не совпадает с регулярным выражением
                        Введите  регулярное выражение, которому значение элемента данных не
                            должно соответствовать.
                        Проверка на ошибку в 
                        Проверяется, нет ли сообщения об ошибке на уровне
                            приложения в
                            JSONpath.
                        Проверка на ошибку в XML
                        Проверяется, нет ли сообщения об ошибке на уровне
                            приложения в
                            xpath.
                        Проверьте на ошибку при использовании регулярного выражения
                            Проверяется с помощью регулярного выражения, нет ли сообщения об
                                ошибке на уровне приложения. 
                            В поле шаблон введите регулярное выражение.
                            В поле вывод введите шаблон для форматирования
                                результата регулярного выражения.
                        Проверка на неподдерживаемое значение
                        При выборе этой опции выполняется проверка на неподдерживаемое
                            значение. Если такое значение обнаружено, то выполнится  выбранный
                            вариант обработки ошибок.
                        Троттлинг
                        Отбрасывать не изменившееся
                        При выборе это опции полученное значение элемента данных будет
                            отброшено, если оно не изменилось. Отброшенные значения элементов данных
                            не сохраняются в базе данных, не отображаются на графиках, на основе
                            этих значений не создаются триггеры.
                        Отбрасывать не изменившееся с периодическим контролем
                        При выборе это опции полученное значение элемента данных будет
                            отброшено, если оно не изменилось в течение определенного периода.
                            Поддерживаются суффиксы времени (s, m,
                                h, d, w,
                                M, y), а также пользовательские
                            макросы и макросы низкоуровневого обнаружения. Отброшенные значения
                            элементов данных не сохраняются в базе данных, не отображаются на
                            графиках, на основе этих значений не создаются триггеры.
                        Prometheus
                        Шаблон Prometheus
                        Запрос для извлечения необходимых данных из метрик
                            Prometheus.
                        Prometheus в 
                        Преобразование метрик Prometheus в .
|*|*|*|
    Создание и настройка элемента данных
            Создание элемента данных с нуля
            Для создания элемента данных в веб-интерфейсе  необходимо выполнить следующее:
                    Перейдите на страницу  →  для добавления элемента данных к узлу
                        сети или на страницу  →  для добавления элемента данных к шаблону. 
                    Нажмите на ссылку «Элементы данных» в строке с узлом сети или шаблоном.Откроется страница «Элементы данных».
                    Нажмите на кнопку «Создать элемент данных» в правом верхнем углу экрана. Откроется страница создания элемента
                        данных.
                            Окно создания элемента данных
                    Заполните параметры элемента данных: 
                                Имя.
                                Тип.
                                Ключ — параметр элемента данных, который определяет, какого рода
                                    данные будут собираться с узла сети. Подробнее см. в разделах
                                    и .
                                Интерфейс узла сети — поле доступно при изменении элемента
                                    данных на уровне узла сети.
                                Тип информации — тип хранения информации в базе данных после
                                    всех преобразований, если таковые имеются:
                                        Числовой (целое положительное) — целое 64-битное
                                            число.
                                        Числовой (с плавающей точкой) — допустимые значения от
                                            -999999999999.9999 до 999999999999.9999. Также
                                            поддерживается получение значений в научном
                                            представлении. Например, 1e+7, 1e-4.
                                        Символ — короткие текстовые данные.
                                        Журнал (лог) — длинные текстовые данные с
                                            необязательными свойствами для журналов (штамп времени,
                                            источник, важность, logeventid).
                                        Текст — длинные текстовые данные.
                                Ед. измерения — если указать символ единицы измерения, к этому
                                    элементу будет добавлена последующая обработка полученного
                                    значения и этот элемент данных будет отображаться с заданным
                                    постфиксом единицы измерения. Подробнее см. в разделе .
                                Интервал обновления — период времени в секундах, через который
                                    будет обновляться значение элемента данных. Максимально
                                    допустимый интервал обновления — 86400 секунд (1 день).
                                        Поддерживаются функции времени, например, 30s, 1m, 2h,
                                        1d.Поддерживаются пользовательские макросы. Подробнее
                                        см. в разделе .Если задано значение, равное «0», элемент
                                        данных не будет обрабатываться. Однако, если также
                                        существует пользовательский интервал (гибкий/по расписанию)
                                        с ненулевым значением, элемент данных будет обработан в
                                        течение длительности пользовательского интервала. У
                                        существующего пассивного элемента данных можно выполнить
                                        опрос значения немедленно, нажав на кнопку «Проверить
                                        сейчас».
                                Пользовательские интервалы — пользовательские правила проверки
                                    элемента данных:
                                        Переменный — создание исключений из интервала обновления
                                            (интервал с другой частотой обновления);
                                        По расписанию — создание пользовательского расписания
                                            проверки.
                                    Функции времени поддерживаются в поле Интервал,
                                        например, 30s, 1m, 2h, 1d.данный
                                        параметр недоступен для активных элементов данных агента .
                                Период хранения истории — количество дней хранения в базе данных
                                    детальной истории (от 1 часа до 25 лет). Поддерживаются
                                    пользовательские макросы и функции времени, например, 2h,
                                        1d.Рекомендуется устанавливать период
                                        хранения истории как можно короче для уменьшения размера
                                        истории в базе данных. Вместо долговременного хранения
                                        истории значений можно хранить более долгий период динамики
                                        изменений. Смотри|*|*|*|те также раздел История и динамика изменений.
                                Период хранения динамики изменений — количество дней хранения в
                                    базе данных усредненных значений детальной истории N дней в базе
                                    данных (от 1 дня до 25 лет). Поддерживаются пользовательские
                                    макросы и функции времени, например, 2h, 1d.хранение динамики изменений доступно только
                                        для числовых данных. Смотрите также раздел История и динамика изменений.
                                Отображение значения — выберите из выпадающего списка вариант
                                    преобразования значений элемента данных.Преобразование
                                        значений не меняет полученные значения, оно служит только
                                        для отображения данных. Работает только с целыми числовыми
                                        элементами данных. Чтобы посмотреть, как работает выбранное
                                        преобразование, нажмите на кнопку «показать преобразования
                                        значений».
                                Формат времени в журнале (логе) — доступен только для элементов
                                    данных типа «Журнал». Поддерживаемые значения:
                                        y: год (1970-2038);
                                        M: месяц (01-12);
                                        d: день (01-31);
                                        h: час (00-23);
                                        m: минута (00-59);
                                        s: секунда (00-59).
                                    Если оставить это поле пустым, то штамп времени не будет
                                        обрабатываться.Например, рассмотрим следующую строку
                                        из файла журнала 
                                        агента:23480:20100328:154718.045  agent started.  1.8.2 (revision 11211).Она
                                        начинается с шести символьных позиций PID, далее указаны
                                        дата, время и остальная часть строки. Формат времени журнала
                                        для этой строки должен быть
                                        «pppppp:yyyyMMdd:hhmmss».Символы
                                        «p» и «:» являются лишь заменителями и могут быть какими
                                        угодно, кроме «yMdhms».
                                Новая группа элементов данных — имя новой группы элементов
                                    данных для этого элемента данных.
                                Группы элементов данных — соединение элемента данных с одним или
                                    несколькими существующими группами элементов данных.
                                Заполнение инвентарного поля узла сети — в выпадающем списке
                                    укажите поле, в которое будет записано полученное значение
                                    элемента данных. Функция будет работать, если у узла сети
                                    включено автоматическое заполнение инвентарных данных.
                                Описание.
                                Активировано — установите чекбокс для обработки элемента данных.
                    При необходимости задайте правила преобразования полученных значений. Для этого:
                                Перейдите на вкладку «Предобработка». 
                                 Для добавления нового преобразования нажмите на кнопку .
                                 В появившихся полях выберите преобразование и укажите его
                                    параметры. Подробнее см. в разделе . 
                                 Чтобы настроить обработку ошибок, установите чекбокс
                                    «Другое при ошибке». После установки чекбокса
                                    выберите действие, которое будет выполняться при возникновении ошибки:
                                            Отбросить значение;
                                            Задать значение в [значение];
                                            Задать ошибку в [сообщение об ошибке].
                    Если чекбокс «Другое при ошибке» невозможно
                            установить, то функция обработки ошибок недоступна для выбранного
                            преобразования.
                            Вкладка «Предобработка»
                     Нажмите на кнопку «Добавить».
            Создание элемента данных на основе существующего (клонирование)
            Чтобы создать элемент данных на основе свойств текущего элемента данных:
                    Нажмите на кнопку «Клонировать». Откроется страница создания элемента
                        данных. По умолчанию все поля нового элемента заполнены на основе данных
                        скопированного элемента и доступны для редактирования.
                    Введите уникальный ключ элемента данных. 
                    При необходимости измените другие параметры элемента данных.
                    Нажмите на кнопку «Добавить».
|*|*|*|
    SNMP агент
        Мониторинг по  используется для таких устройств, как принтеры, сетевые коммутаторы, маршрутизаторы
            или ИБП.
        Для получения данных по  необходимо настроить поддержку  на сервере .
         проверки выполняются только через  протокол.
        Демоны  и сервера удаленного
                мониторингаагентовагентов по умолчанию ипользуют массовые запросы для устройств . Если устройство не может корректно обрабатывать массовые запросы, в логах для него
            будет запись вида «SNMP response from host "gateway" does not contain all of the
                requested variable bindings». Для таких устройств рекомендуется отключать
            массовые запросы.
        Демоны сервера  и сервера удаленного
                мониторингаагентовагентов корректно обрабатывают параметр конфигурации Timeout
            при выполнении -проверок. Демоны всегда выполняют один повторный запрос: либо через механизм
            библиотеки , либо через внутренний механизм сбора множества значений за один запрос (bulk).
        При использовании мониторинга устройств по , убедитесь, что параметр msgAuthoritativeEngineID (также известный
            как snmpEngineID или Engine ID) уникален для каждого
            устройства.
        В этом разделе:
            Настройка мониторинга по
                    SNMP
|*|*|*|
    Настройка мониторинга по SNMP
        Настройка мониторинга устройства по протоколу  состоит из следующих этапов:
        Создание узла сети для устройства с -интерфейсом
            В первую очередь для настройки мониторинга по
                протоколу  нужно создать узел сети для устройства, с которого нужно получать
                данные.
                    Перейдите на страницу  → .
                    Нажмите на кнопку «Создать узел сети» в верхнем правом углу.
                    Откроется страница создания узла сети.
                    Введите имя узла сети.
                    Выберите группу узла сети.
                    В разделе «Интерфейсы» нажмите «Добавить» и выберите в выпадающем списке
                        «SNMP».
                            Выбор SNMP в качестве интерфейса
                    Появятся параметры настройки SNMP.
                            Раздел настройки SNMP
                    В разделе настройки SNMP введите IP адрес.
                    Выберите версию SNMP и выполните дополнительные настройки в зависимости от
                        версии:
                            Для версий SNMPv2 и SNMPv1 укажите SNMP community.
                            Для версии SNMPv3 укажите:
                                    Имя контекста — имя для определения элемента данных в
                                        SNMP-подсети;
                                    Имя безопасности — наименование учетной записи для доступа
                                        по SNMPv3
                                    Уровень безопасности:
                                            noAuthNoPriv — ни аутентификация, ни протокол
                                                безопасности не используются.
                                            AuthNoPriv — используется только протокол
                                                аутентификации. Для этого уровня безопасности
                                                  укажите:
                                                  протокол аутентификации;
                                                  пароль аутентификации.
                                            AuthPriv — используются и протокол
                                                аутентификации, и протокол безопасности. Для этого
                                                уровня безопасности укажите:
                                                  протокол аутентификации;
                                                  пароль аутентификации;
                                                  протокол безопасности;
                                                  ключевую фразу безопасности.
                    Чтобы отменить запрос всех элементов данных SNMP одновременно, снимите
                        чекбокс «Использовать массовые запросы».
                    При необходимости перейдите на вкладку «Шаблоны» и подключите один из
                        поставляемых шаблонов  (например, Сетевое универсальное устройство SNMP.yaml),
                        которые автоматически добавят некоторый набор элементов данных. Тем не
                        менее, шаблон может быть не совместим с узлом сети.
                    Нажмите на кнопку  для сохранения узла сети.
        Поиск SNMP-строки (OID) элемента
            После создания узла сети для устройства, с которого
                нужно получать данные по протоколу , нужно будет создать элемент данных. Элемента данных определяет, какую именно
                информацию  будет запрашивать с узла сети. Для
                корректной настройки элемента данных необходимо вначале найти SNMP-строку (OID)
                элемента. Для этого:
                    Получите список -строк, используя утилиту snmpwalk в командной
                        строке:
                    shell> snmpwalk -v 2c -c public<IP хоста>
                        В этой команде 2c — версия , public — значение 
                        community.
                    Чтобы использовать  версии 1, используйте
                        команду:shell> snmpwalk -v 1 -c public<IP хоста>
                    Появится список -строк и их последних значений. Если список
                            строк и их значений не отображается, уточните значение 
                            community. 
                    Просмотрите полученный список -строк и найдите строку для мониторинга.
                    Чтобы мониторить входящее количество байт на коммутаторе на 3 порту,
                        используйте IF-MIB::ifInOctets.3 из
                        строки:IF-MIB::ifInOctets.3 = Counter32:3409739121
                    Определите цифровой OID для найденной строки с помощью команды
                            snmpget:
                    shell> snmpget -v 2c -c public -On 10.62.1.22 [SNMP-string]
                        В этой команде последнее число в строке — это номер порта, который
                        используется для мониторинга. 
                    Для строки 'IF-MIB::ifInOctets.3' используйте
                        команду:shell> snmpget -v 2c -c public|*|*|*| -On 10.62.1.22 IF-MIB::ifInOctets.3
                        Пример вывода
                        команды:.1.3.6.1.2.1.2.2.1.10.3 = Counter32:3472126941Последнее
                        число в строке OID — это номер порта, который используется для мониторинга.
                            В 3COM перед номером порта указывается 10,
                            например: 1 порт = 101 порт, 3 порт = 103 порт. В Cisco используются
                            обычные номера, например, 3 порт =3. Некоторые -строки автоматически конвертируются сервером  в числовое
                                представление. Подробнее см. в таблице:
                                    Конвертация SNMP-строк
                                                SNMP-строка
                                                Числовое представление
                                                ASN_COUNTER
                                                Counter32
                                                ASN_COUNTER64
                                                Counter64
                                                ASN_UINTEGER
                                                UInteger32
                                                ASN_UNSIGNED64
                                                UInteger32
                                                ASN_INTEGER
                                                INTEGER
                                                ASN_INTEGER64
                                                INTEGER
                                                ASN_FLOAT
                                                Float
                                                ASN_DOUBLE
                                                Double
                                                ASN_TIMETICKS
                                                Timeticks
                                                ASN_GAUGE
                                                Gauge32
                                                ASN_IPADDRESS
                                                IpAddress
                                                ASN_OCTET_STR
                                                OCTET STRING
                                                ASN_OBJECT_ID
                                                OBJECT IDENTIFIER
                                Типы, в которые
                            конвертируются SNMP-строки, могут измениться в зависимости от наличия
                            полученной подсказки.
        Создание элемента данных для мониторинга узла сети по протоколу SNMP
            Перед выполнением данного этапа нужно:
                    Создать узла сети для устройства, с которого нужно получать данные по
                        протоколу .
                    Определить SNMP-строки (OID) для того элемента, с помощью которого
                        планируется собирать данные.
                После этого необходимо создать элемент данных, который определяет, какую
                    именно информацию  будет запрашивать с
                    узла сети. Для этого:
                    Перейдите на страницу  → .
                    Найдите строку с созданным ранее узлом сети  и нажмите на ссылку «Элементы данных» в этой строке.
                    Откроется страница «Элементы данных».
                            Страница «Элементы данных»
                    Нажмите на кнопку «Создать элемент данных» в верхнем правом углу
                        страницы.
                    Введите имя нового элемента данных.
                    В поле «Тип» установите значение « агент».
                    В поле «Ключ» введите название, отображающее сведения о получаемых данных,
                        например, -InOctets-Bps.
                    Убедитесь, что в поле «Интерфейс узла сети» указаны адрес и порт выбранного
                        коммутатора или роутера в формате ip_address : port. 
                    В поле «SNMP OID» введите полученную ранее -строку.
                    В выпадающем списке «Тип информации» выберите значение «Числовой (с
                        плавающей точкой)».
                    При необходимости измените параметры «Интервал обновления» и «Период
                        хранения истории».
                    Введите описание элемента данных.
                            Пример заполнения параметров на странице создания элемента
                                данных
                    Добавьте шаг предобработки, чтобы видеть последнее изменение значения. Для
                        этого:
                            Перейдите на вкладку «Предобработка».
                            Нажмите на кнопку .
                            появятся поля для выбора шага предобработки.
                            Выберите шаг «Изменение в секунду».
                                    Выбор шага предобработки «Изменение в секунду»
                    Нажмите на кнопку , чтобы сохранить элемент данных.
                    Перейдите в раздел боковой панели  → , чтобы увидеть полученные данные . 
|*|*|*|
    Мониторинг услуг
         позволяет осуществлять мониторинг качества предоставляемых
            ИТ-услуг, функционирование которых зависит от качества функционирования одного или
            нескольких объектов мониторинга. В качестве ИТ-услуг для мониторинга могут подключаться
            различные системно-значимые ИТ-сервисы, каналы связи, сервисы ИБ и т.д. 
        Управление мониторингом ИТ-услуг осуществляется в разделе 
            → . 
        Услуги могут включать в себя вложенные услуги. Это позволяет контролировать сложные
            услуги в соответствии с ресурсно-сервисной моделью ИТ-инфраструктуры предприятия.
        В иерархии  рекомендуется использовать 3 уровня вложенности
            услуг, так как только эти уровни агрегируются на уровне сервера :
            Root — корневой уровень услуг, не может быть удален или изменен;
            Группа услуг — рекомендуется использовать для группировки ИТ-услуг в
                зависимости от их назначения, создается Администратором, название группы услуг может
                быть произвольным;
            Услуга — ИТ-услуга, качество которой требуется контролировать. Рекомендуется
                создавать в составе группы;
            Триггер — контролирует определенный параметр подключенного объекта
                мониторинга. Совокупность добавленных триггеров отражает качество функционирования
                контролируемой услуги. Состав триггеров для мониторинга ИТ-услуг может
                    определяться на этапе проектирования и корректироваться на этапе внедрения
                    системы в зависимости от специфики  в ИТ-инфраструктуре и фактически доступных триггеров.
            Уровни иерархии ИТ-услуг
                Пример иерархии ИТ-услуг
        В этом разделе:
|*|*|*|
    Анализ состояния услуг и SLA
            Для просмотра и анализа информации о существующих услугах:
                Перейдите на страницу  → . 
                В выпадающем списке в правом верхнем углу выберите желаемый период
                    отображения.
                        Информация об услугах за выбранный период
                Просмотрите информацию об услугах. В списке услуг отображаются следующие
                    данные:
                        Услуга — имена групп услуг, услуг и триггеров. Чтобы увидеть услуги,
                            включенные в группу, нажмите на кнопку . Чтобы скрыть список услуг в группе, нажмите на кнопку . 
                        Состояние — наличие или отсутствие проблем. Доступны значения:
                                OK — проблем нет;
                                [цвет и важность триггера] — указывает на наличие
                                    проблемы и ее важность.
                        Причина — причина проблемы, если она известна. 
                        Продолжительность проблем — индикатор .
                            Соотношение зеленого и красного указывает на пропорцию доступности и
                            проблем. Индикатор отображает последние 20% . 
                        SLA / Допустимый уровень SLA — если в настройках услуги указано, что
                            для нее нужно считать , в этом столбце
                            выводятся фактическое значение  и
                            ожидаемое значение . Если фактическое
                            значение ниже допустимого уровня, оно выделено красным цветом. 
                                Фактический  высчитывается как
                                    среднее значение процента времени, когда услуга находилась в
                                    состоянии «Ок» в течение выбранного промежутка времени.
                                    Промежуток времени указывается в параметре «Период» в правом
                                    верхнем углу страницы. 
                                Допустимый уровень  указан в
                                    настройках услуги. При создании услуги рекомендуется установить
                                    значение допустимого уровня ,
                                    равное минимальному интервалу времени, в течении которого услуга
                                    должна быть в состоянии «Ок». По умолчанию услуги действуют
                                    постоянно, но если в настройках услуги задан другой интервал
                                    времени действия,  высчитывается
                                    исходя из этого параметра. 
                Для просмотра графика доступности данных для услуги за текущий год нажмите на
                    индикатор  в столбце «Продолжительность
                    проблем».
                Для просмотра отчета о доступности услуги в течение заданного периода нажмите
                    на имя услуги в столбце «Услуга».
                Для просмотра подробной информации о триггере нажмите на его имени в столбце
                    «Услуга».
|*|*|*|
    Настройка услуг
        Для настройки услуг:
                Перейдите в раздел бокового меню  → .
                Для добавления услуги нажмите «Добавить потомка» в столбце «Действие».
                Для изменения параметров существующей услуги нажмите на ее имя в столбце
                    «Услуга».
                В открывшемся окне заполните общие параметры услуги:
                        Имя;
                        Родительская услуга;
                        Порядок сортировки.
                При необходимости заполните следующие параметры:
                        Алгоритм вычисления состояния — метод, по которому определяется
                            состояние услуги: «Ок» или «Проблема». Доступны следующие
                            значения:
                                Без вычисления — состояние услуги не будет вычисляться;
                                Проблема, если хотя бы у одного из подчиненных имеется проблема
                                    — услуга будет в состоянии «Проблема», если хотя бы одна
                                    дочерняя услуга в состоянии «Проблема» из-за сработавшего
                                    триггера;
                                Проблема, если все подчиненные имеют проблемы — услуга будет в
                                    состоянии «Проблема», если все дочерние услуги находятся в
                                    состоянии «Проблема» из-за сработавших триггеров.
                        Вычислять SLA — установите чекбокс для включения вычисления уровня
                            .
                        Допустимый уровень SLA (в %) — Процент , который является приемлемым
                            для этой услуги. Используется для отчетности. Рекомендуется установить
                            значение, которое соответствует минимальному интервалу времени, в
                            течении которого услуга должна быть в состоянии «Ок». Поле доступно,
                            если установлен чекбокс «Вычислять SLA». 
                        Триггер — связь услуги с триггером. Доступные значения:
                        Доступные значения:
                                Пусто — услуга не связана с триггерами;
                                [имя триггера] — устанавливает зависимость услуги от состояния
                                    триггера. Отслеживание состояния триггера и его влияние на
                                    услугу начинается только после установления связи.
                            Услуги нижнего уровня должны быть соединены с триггерами, иначе
                                их состояние не будет определяться корректно.
                        Страница «Услуга»
                При необходимости добавьте вложенные услуги. Для этого:
                        Перейдите на вкладку «Зависимости».
                        Нажмите на кнопку «Добавить» .
                        В открывшемся окне «Зависимости услуг» выберите услугу из списка.
                        Нажмите на кнопку «Выбрать».
                        При необходимости установите чекбокс «Нежесткая».
                                Сравнение жесткой и нежесткой зависимости
                                            Вид зависимости
                                            Удаление услуги, для которой добавлена
                                                зависимость
                                            Поведение услуги, добавленной в качестве
                                                зависимости
                                            Жесткая
                                            Возможно после удаления потомков
                                            Становится потомком той услуги, для которой
                                                добавлена в качестве зависимости, и перемещается на
                                                соответствующее место в дереве услуг
                                            Нежесткая
                                            Возможно без удаления потомков, если нет других
                                                жестких зависимостей
                                            Родительская услуга остается прежней. В дереве
                                                услуг отображается и на прежнем месте, и на месте
                                                потомка той услуги, для которой добавлена в качестве
                                                зависимости
                По умолчанию все услуги действуют постоянно, но при необходимости можно
                    изменить интервал времени, когда действует услуга. Для этого:
                        Перейдите на вкладку «Время».
                        Выберите тип периода. Возможные значения:
                                Доступен;
                                Недоступен;
                                Однократная недоступность.
                            В периоды недоступности состояние услуги не влияет на SLA.
                        Укажите интервал времени.
                        При выборе интервала учтите, что день и время начала интервала должны
                            быть меньше, чем день и время окончания. Первым днем недели в
                            веб-интерфейсе  считается воскресенье. 
                        Чтобы сделать услугу недоступной с 18:00 пятницы до 09:00
                            понедельника, добавьте два временных промежутка: с 18:00 пятницы до
                            23:59 субботы и с 00:00 воскресенья до 09:00 понедельника.
                                Пример настройки интервала времени услуги
                    Интервалы времени на дочерних услугах не распространяются
                        на родительские услуги. Интервалы времени влияют на вычисление состояния
                        услуги и  в веб-интерфейсе, но не влияют на
                        добавление информации о доступности услуги в базу данных.
|*|*|*|
    Шаблоны
        Шаблон — набор объектов, который можно применить к нескольким узлам сети. Рекомендуется
            использовать шаблоны для добавления одних и те же объектов к разным узлам сети.
        Объектами могут быть:
            элементы данных;
            триггеры;
            графики;
            группы элементов данных;
            комплексные экраны;
            правила низкоуровневого обнаружения;
            веб-сценарии.
        Шаблоны можно присоединять отдельно к каждому узлу сети или сразу к группе узлов сети.
                Присоединить шаблон к отдельному узлу сети можно на вкладке «Шаблоны» при
                    создании или редактировании узла. Подробнее см. в разделах , .
                Присоединить шаблон сразу к группе узлов сети можно с помощью операции «Массовое
                    обновление» на странице  → . Подробнее см. в разделе .
        Изменение одного параметра на уровне шаблона распространяется на все присоединенные к
            этому шаблону узлы сети.
        В комплект поставки  входит набор русскоязычных шаблонов для мониторинга, которые
            рекомендуется установить при первичной настройке по инструкции «Импорт шаблонов» в Руководстве администратора . Список шаблонов и их описание см. в разделе . Рекомендуется использовать
            для мониторинга шаблоны из списка.
        В этом разделе:
|*|*|*|
    Создание объектов для шаблонов
            Для добавления новых объектов в шаблон:
                Перейдите на страницу «Настройка» → «Шаблоны». 
                Нажмите на имя нужного шаблона в списке.
                Перейдите на вкладку с названием объекта, который хотите добавить.
                Нажмите на кнопку создания объекта в верхнем правом углу.
                Заполните параметры объекта.
                Подробнее см. в разделах:
                Нажмите на кнопку «Добавить».
|*|*|*|
    Подготовка к использованию шаблона «Температура ЦПУ Linux.yaml» на ОС РЕД ОС и
        Centos
                Скопируйте дополнительный файл конфигурации и скрипт предобработки
                    значений:
                        Если у вас установлен агент версии 1, скопируйте файлы
                                rhel_userparameter_sensors_agent1.conf и
                                sensor_discovery.sh в директорию
                                /etc/zabbix/zabbix_agent.d/.
                        Если у вас установлен агент версии 2, скопируйте файлы
                                rhel_userparameter_sensors_agent2.conf и
                                sensor_discovery.sh в директорию
                                /etc/zabbix/zabbix_agent2.d/.
                Измените владельца файла и разрешения для скрипта
                        sensor_discovery.sh, выполнив команду:
                        Если у вас установлен агент версии 1:
                            chmod +x /etc/zabbix/zabbix_agent.d/sensor_discovery.sh && chown zabbix:zabbix /etc/zabbix/zabbix_agent.d/sensor_discovery.sh*
                        Если у вас установлен агент версии 2:
                            chmod +x /etc/zabbix/zabbix_agent2.d/sensor_discovery.sh && chown zabbix:zabbix /etc/zabbix/zabbix_agent2.d/sensor_discovery.sh
|*|*|*|
    Копирование объектов из другого шаблона или узла сети
            После создания шаблона необходимо добавить в него объекты. Можно сделать это,
                скопировав нужные объекты из другого шаблона или узла сети.Рассмотрим копирование объектов в шаблон на примере элементов данных:
                Перейдите на страницу  →  (или ).
                Выберите шаблон или узел сети, из которого необходимо скопировать элементы
                    данных.
                Нажмите на «Элементы данных» в строке с требуемым узлом сети/шаблоном.
                Откроется страница «Элементы данных».
                В списке элементов данных установите чекбоксы рядом с элементами, которые нужно
                    скопировать в шаблон.
                Нажмите на кнопку «Копировать» внизу списка.
                Откроется вкладка для указания цели.
                Выберите «Тип цели» — «Шаблоны».
                В поле «Цель» укажите шаблон или группу шаблонов, куда необходимо скопировать
                    элементы данных.
                Нажмите на кнопку «Копировать».
    Все выбранные элементы данных будут скопированы в шаблон.
        Копирование триггеров и графиков осуществляется аналогичным образом (из списка триггеров и
                графиков соответственно). Скопировать можно только уже существующие триггеры и
                    графики.
|*|*|*|
    Активация правила обнаружения в шаблоне
            В шаблоне «Windows агентный сбор» из комплекта поставки  по умолчанию отключено правило «Обнаружение
                сервисов Windows», в шаблоне «Windows » отключено правило «Обнаружение сетевых интерфейсов Windows 2000/XP». При
                необходимости можно активировать отключенные правила обнаружения.
                При активации правила обнаружения сбор информации о каждой
                    службе с нескольких  приведет к
                    увеличению занимаемого места на дисковой системе. 
            Можно активировать правило обнаружения для одного, нескольких или всех
                    .
            Для активации правила обнаружения:
                Перейдите на страницу редактирования шаблона или узла сети, для которого нужно
                    активировать правило обнаружения. Для этого: 
                    Если нужно активировать правило обнаружения для одного :
                            Перейдите на страницу  → .
                            Нажмите на имя нужного вам узла сети в списке.
                    Если нужно активировать правило обнаружения для всех :
                            Перейдите на страницу  → .
                            Нажмите на имя нужного вам шаблона сети в списке.
                Перейдите на вкладку «Правила обнаружения».
                Найдите в списке правило, которое необходимо активировать.
                Активируйте правило.
                    Способ 1:
                            В строке с правилом нажмите на его имя.
                            На открывшейся странице установите чекбокс «Активировано».
                    Способ 2:
                            В строке с правилом нажмите на «Деактивировано» в столбце
                                «Состояние».
                            В результате состояние правила изменится на «Активировано».
            После активации правила обнаружения для всех узлов сети, использующих измененный
                шаблон, в течение часа будут обнаруживаться службы, собираться данные о них и
                срабатывать преднастроенные в шаблоне триггеры.
|*|*|*|
    Управление шаблонами
            Управление шаблонами осуществляется на странице  →
                    . Доступны следующие возможности:
                Клонирование — создание нового шаблона, копирующего настройки и объекты
                    текущего. Для клонирования:
                        Нажмите на имя шаблона, который хотите клонировать.
                        Откроется страница редактирования текущего шаблона.
                        Выберите подходящий способ клонирования шаблона:
                                чтобы новый шаблон включал в себя только объекты, унаследованные
                                    от присоединенных шаблонов, нажмите на кнопку
                                    «Клонировать»;
                                чтобы новый шаблон включал в себя объекты, унаследованные от
                                    присоединенных шаблонов, а также объекты, напрямую
                                    присоединенные к текущему шаблону, нажмите на кнопку «Полное
                                    клонирование»;
                        Откроется страница редактирования нового шаблона.
                        Измените имя шаблона.
                        Нажмите на кнопку «Добавить».
                Удаление шаблона. Для удаления:
                        Установите чекбокс слева от имени шаблона, который необходимо
                            удалить.
                        Выберите подходящий способ удаления шаблона:
                                чтобы удалить шаблон, но оставить объекты из шаблона
                                    присоединенными к узлам сети, нажмите на кнопку «Удалить;
                                чтобы удалить шаблон и все его объекты из присоединенных узлов
                                    сети, нажмите на кнопку «Удалить и очистить»;
|*|*|*|
    Изменение интервала обновления данных
        Пользователь может изменить интервал обновления данных.
        Редактировать параметры для сбора элементов данных можно:
            В самом шаблоне — изменение распространится на все , к которым подключен этот шаблон.
            В конкретном узле сети — изменение будет только на этом .
        При импортировании новых шаблонов выставленные вручную параметры в
            заменяемых шаблонах будут изменены.
        Метрики, которые собирает сервер , определены в шаблонах с
                помощью:
                элементов данных;
                прототипов элементов данных в правиле обнаружения;
                правил обнаружения.
        Способ изменения интервала обновления данных зависит от того, что нужно отредактировать:
            шаблон или конкретный .
            Изменение одного элемента данных 
            Рассмотрим изменение элемента данных для узла сети на примере редактирования элемента
                данных для сбора общего объема оперативной памяти.
            Пример: Сейчас данные по объему оперативной памяти для  «Win1», использующего шаблон «Windows агентный
                сбор», обновляются каждые 10 минут. Пользователю требуется изменить период
                обновления данных на каждые 15 минут.
                    В веб-интерфейсе  перейдите в раздел  → .
                    В поле фильтров введите имя шаблона, который необходимо отредактировать, и
                        нажмите «Применить». Пример:  в поле фильтров в поле «Шаблоны»
                            введите «Windows агентный сбор» и нажмите «Применить».
                    Перейдите на вкладку «Элементы данных» одним из способов:
                            перейдите в карточку узла сети, нажав на его имя в списке, и
                                откройте вкладку «Элементы данных»;
                            или нажмите на «Элементы данных» в строке списка с нужным узлом
                                сети.
                        Пример: нажмите на «Элементы данных» в строке списка с узлом
                            сети «Win1».Результат шага: откроется страница «Элементы
                        данных».
                    В разделе «Подфильтр» выберите нужную группу элементов данных.
                                Пример: выберите группу элементов данных «Оперативная
                            память».
                    В выведенных данных найдите элемент данных, который нужно изменить, и
                        зайдите в его карточку, нажав на имя элемента.Пример: нажмите на
                            имя элемента «Общий объём памяти».
                    В карточке элемента данных найдите поле, которое нужно изменить, и введите
                        желаемое значение. Пример: в карточке элемента данных найдите поле
                            «Интервал обновления» и введите значение 15m. используя обозначение
                            периодов времени — 30s, 1m, 2h, 1d. Максимально допустимый интервал
                            обновления — 86400 секунд (1 день). 
                    Для применения изменений нажмите «обновить».
            Изменение нескольких элементов данных 
            Для изменения параметров нескольких элементов данных рекомендуется использовать
                массовое обновление объектов. Для этого: 
                    Откройте список элементов данных (см. п.  — п.   подраздела ).
                    Установите чекбокс в шапке таблицы, чтобы выделить все элементы данных, или
                        установите чекбоксы напротив тех элементов данных, параметры которые
                        необходимо изменить.
                    |*|*|*|Нажмите на кнопку «Массовое обновление» внизу таблицы.
                    В открывшемся окне в списке установите чекбокс напротив поля «Интервал
                        обновления».
                        В появившемся поле «Задержка» введите желаемое значение, используя
                            обозначение периодов времени — 30s, 1m, 2h, 1d. Максимально допустимый
                            интервал обновления — 86400 секунд (1 день). 
                    Для применения изменений нажмите на кнопку «Обновить».
            Изменение прототипа элементов данных в шаблоне
            Рассмотрим изменение прототипа элементов данных в шаблоне на примере редактирования
                прототипов элементов данных в правиле «Обнаружение установленных файловых систем»
                для всех . 
            Пример: Сейчас данные по файловым системам для всех , использующих шаблон «Windows агентный сбор»,
                обновляются каждые 5 минут. Пользователю требуется изменить период обновления данных
                на каждые 12 часов.
                    В веб-интерфейсе  перейдите в раздел  → . 
                    В поле фильтров в поле «Имя» введите «Windows агентный сбор» и нажмите
                        «Применить».
                    Перейдите на страницу «Правила обнаружения» одним из способов:
                            зайдите в карточку шаблона «Windows агентный сбор», нажав на имя
                                шаблона, и перейдите на вкладку «Правила обнаружения»;
                            или нажмите на «Обнаружение» в строке с нужным шаблоном.
                    Зайдите в правило «Обнаружение установленных файловых систем». 
                    В карточке правила обнаружения перейдите на вкладку «Прототипы элементов
                        данных».
                    Перейдите в карточку нужного прототипа элемента данных по клику на его
                        названии в таблице.
                    Отредактируйте параметр «Интервал обновления».
                    Нажмите «Обновить» для применения настроек.
            Также возможно массовое обновление прототипов элементов данных путем выбора
                нескольких прототипов в списке и использования действия «Массовое обновление». 
            Измененные параметры прототипов элементов данных обновятся во всех , к которым применен данный шаблон, после выполнения
                правила обнаружения, к которым относятся данные прототипы элементов, в соответствии
                с интервалом его работы.
            Редактирование правила обнаружения
            Рассмотрим изменение правил обнаружения на примере редактирования правила
                «Обнаружение установленных файловых систем». 
                    В веб-интерфейсе  перейдите в раздел  → .
                    В поле фильтров в поле «Имя» введите «Windows агентный сбор».
                    Перейдите на страницу «Правила обнаружения» одним из способов:
                            зайдите в карточку шаблона «Windows агентный сбор», нажав на имя
                                шаблона, и перейдите на вкладку «Правила обнаружения»;
                            или нажмите на «Обнаружение» в строке с нужным шаблоном.
                    Зайдите в правило «Обнаружение установленных файловых систем».
                    В карточке правила обнаружения отредактируйте параметр «Интервал
                        обновления». Этот параметр отвечает за то, как часто будет проверяться
                        количество файловых систем у 
                        (аналогично с количеством служб, сетевых интерфейсов, дисков и т.д.). 
                    Нажмите «Обновить» для применения настроек.
|*|*|*|
    Подготовка к использованию шаблона «Температура ЦПУ Linux.yaml» на ОС Astra Linux и
        Debian
                Скопируйте дополнительный файл конфигурации и скрипт предобработки
                    значений:
                        Если у вас установлен агент версии 1, скопируйте файлы
                                deb_userparameter_sensors_agent1.conf и
                                sensor_discovery.sh в директорию
                                /etc/zabbix/zabbix_agentd.conf.d/.
                        Если у вас установлен агент версии 2, скопируйте файлы
                                deb_userparameter_sensors_agent2.conf и
                                sensor_discovery.sh в директорию
                                /etc/zabbix/zabbix_agentd2.conf.d/.
                Измените владельца файла и разрешения для скрипта
                        sensor_discovery.sh, выполнив команду:
                        Если у вас установлен агент версии 1:
                            chmod +x /etc/zabbix/zabbix_agentd.conf.d/sensor_discovery.sh && chown zabbix:zabbix /etc/zabbix/zabbix_agentd.conf.d/sensor_discovery.sh
                        Если у вас установлен агент версии 2:
                            chmod +x /etc/zabbix/zabbix_agentd2.conf.d/sensor_discovery.sh && chown zabbix:zabbix /etc/zabbix/zabbix_agentd2.conf.d/sensor_discovery.sh
|*|*|*|
    Редактирование шаблона
        Для редактирования шаблона:
                Перейдите на страницу  → .
                Нажмите на имя нужного шаблона в списке шаблонов.
                Откроется вкладка «Шаблоны».
                        Вкладка «Шаблоны»
                Для редактирования парметров шаблона:
                Для отсоединения присоединенного шаблона:
                        Перейдите на вкладку «Присоединенные шаблоны».
                                Вкладка «Присоединенные шаблоны»
                        Нажмите на одну из двух кнопок напротив имени присоединенного
                            шаблона:
                                Отсоединить — отсоединить шаблон, но оставить его элементы
                                    данных, триггеры и графики присоединенными к основному шаблону и
                                    использующим его узлам сети. Сбор данных при этом продолжается.
                                        При повторном прикреплении шаблона к основному шаблону
                                        элементы данных с одинаковым ключом будут заменены на те,
                                        что находятся в присоединенном шаблоне. 
                                Отсоединить и очистить — отсоединить шаблон и удалить все его
                                    элементы данных, триггеры и графики у основного шаблона и
                                    использующих его узлов сети. При нажатии
                                        на кнопку «Отсоединить и очистить» удаляется история узлов
                                        сети, использующих этот шаблон, на страницах , .
                                        Повторное подключение шаблона позволяет собирать информацию
                                        с момента подключения, но не возвращает удаленную историю.
                Для редактирования тегов шаблона:
                        Перейдите на вкладку «Теги».
                        Для добавления тега:
                                Заполните поля «Имя» и «Значение».
                                Нажмите на кнопку «Добавить». 
                        Для изменения тега отредактируйте поля «Имя» и «Значение».
                        Для удаления тега нажмите на кнопку «Удалить» в строке с тегом.
                Для редактирования макросов шаблона:
                        Перейдите на вкладку «Макросы».
                        Для добавления макроса:
                                Заполните поля «Макрос», «Значение» и «Описание».
                                Нажмите на кнопку «Добавить».
                        Для удаления макроса нажмите на кнопку «Удалить» в строке с
                            макросом.
                 Для редактирования объектов шаблона:
                        В строке с нужным шаблоном нажмите на тип объекта, который нужно
                            отредактировать.
                        Например, «Элементы данных».
                        Откроется список объектов выбранного типа, добавленных в
                            шаблон.
                        Нажмите на имя объекта, который хотите отредактировать.
                        Измените нужные вам параметры.
                        Нажмите на кнопку «Обновить».
|*|*|*|
    Импорт новой версии шаблона
            Инструкция по первичной установке шаблонов из комплекта поставки 
            приведена в разделе Руководстве администратора  в разделе
                «Первичная настройка» → «Импорт шаблонов».Руководстве администратора  в разделе
                    «Первичная настройка» → «Импорт шаблонов». При выходе новой версии шаблона
            рекомендуется обновить его для импорта новых настроек и замены старых элементов
            данных.
                    Список установленных шаблонов можно посмотреть на странице  → .
                    Если нужно обновить несколько шаблонов, рекомендуется загружать шаблоны в
                        том порядке, который указан в списке на странице . 
            Если предыдущая версия шаблона уже загружена в , для
                импорта новой версии шаблона выполните следующие действия: 
                Перейдите на страницу  → .
                В верхнем правом углу страницы нажмите на кнопку «Импорт».
                Нажмите на кнопку «Выберите файл», найдите в окне проводника новую версию
                    шаблона и подтвердите выбор.
                Установите чекбоксы, как указано на скриншоте ниже.
                        Выбор чекбоксов для импорта новой версии шаблона
                    Правила импорта, которые применяются при установке чекбоксов, приведены в
                        таблице ниже:
                            Правила импорта
                                        Правило
                                        Описание
                                        Обновить существующее
                                        При включении правила существующие в шаблоне элементы
                                            будут обновлены с помощью данных из импортированного
                                            файла. При отключении правила существующие в шаблоне
                                            элементы не будут обновлены.
                                        Создать новый
                                        При включении правила к шаблону будут добавлены новые
                                            элементы, если они содержатся в импортированном файле.
                                            При отключении правила новые элементы не будут
                                            добавлены.
                                        Удалить отсутствующее
                                        При включении правила элементы, которые
                                            присутствовали в старой версии шаблона, но отсутствуют в
                                            импортированном файле, будут удалены. При отключении
                                            правила отсутствующие в импортированном файле элементы
                                            останутся в шаблоне.Если включить это правило для
                                                «Соединения с шаблонами», то для шаблона будут
                                                удалены все присоединенные шаблоны и унаследованные
                                                от них объекты (элементы данных, триггеры и т.д.),
                                                которых нет в импортируемом файле.
                Нажмите на кнопку «Импорт». 
        Будет загружена новая версия шаблона. При этом в шаблоне
            будут обновлены существующие значения и добавлены новые, если они есть. Значения,
            которые присутствовали в старой версии шаблона, но отсутствуют в новой версии, будут
            удалены.
|*|*|*|
    Создание шаблона
            Для создания шаблона:
                Перейдите на страницу  → .
                В верхнем правом углу страницы нажмите на кнопку «Создать шаблон».
                Откроется вкладка «Шаблоны». 
                        Вкладка «Шаблоны»
                Введите уникальное имя шаблона в поле «Имя шаблона».
                При необходимости введите имя шаблона, которое будет отображаться в
                    веб-интерфейсе , в поле «Видимое имя».
                Добавьте группы узлов сети или шаблонов, к которым будет принадлежать шаблон, в
                    поле «Группы».
                При необходимости введите описание шаблона.
                При необходимости присоедините один или несколько «вложенных» шаблонов. Для
                    этого:
                При необходимости добавьте теги:
                При необходимости добавьте пользовательские макросы уровня шаблона:
                Нажмите на кнопку «Добавить».
|*|*|*|
    Подготовка к использованию шаблона «Коммутатор MOXA серии EDS.yaml»
        В зависимости от модели коммутатора MOXA EDS внутри MIB будут различаться OID, отвечающие
            за номер модели. С другими элементами иерархия идентичная и не различается в зависимости
            от модели. 
            Проверка корректности значения OID и вывод значения
        Список пар модель — OID:
            EDS-510E — 8691.7.84
            EDS-G512E — 8691.7.70
            EDS-528E — 8691.7.142
        Макрос {$MOXA_SWITCH_MODEL} обеспечивает универсальность шаблона.
            Для корректной работы шаблона Коммутатор MOXA серии EDS.yaml выполните следующие
                действия:
                Перейдите на страницу  → .
                Нажмите на имя необходимого .
                Откроется страница «Узлы сети».
                Перейдите на вкладку «Макросы».
                Нажмите «Макросы узла сети и унаследованные».
                Напротив макроса {$MOXA_SWITCH_MODEL} нажмите Изменить.
                В поле «Эффективное значение» введите требуемое значение. Есть два способа
                    узнать требуемое значение:
                        Вариант 1:
                                На сайте производителя МОХА откройте страницу с подходящей моделью коммутатора.
                                Перейдите на вкладку «Документация и ПО».
                                Нажмите на кнопку «Скачать» возле «SNMP MIB-файл для [модель коммутатора]».
                                Найдите строку industrialEthernet в файле.
                                        Пример строки industrialEthernet
                                Для поля «Эффективное значение» возьмите число, идущее после 8691.7.
                        Вариант 2:
                                На компьютере с OC Linux и установленными пакетами net-snmp запустите команду:
                                    snmpgetnext -v2c -c moxa-EDS-510E 10.51.202.38:5161 .1.3.6.1.4.1.8691.7
                                    где moxa-EDS-510E - имя snmp community, а 10.51.202.38:5161 - IP-адрес:порт опрашиваемого устройства
                                Для поля «Эффективное значение» возьмите число, идущее после 8691.7.
                                        Результат команды
                Нажмите на кнопку «Обновить».
                У  появится «Макрос узла сети».
                        Макрос узла сети
|*|*|*|
    Подготовка ОМ к использованию шаблонов 
        Для корректной работы некоторых шаблонов необходимы дополнительные настройки. В этом
            разделе содержатся следующие инструкции для подготовки к использованию шаблонов:
|*|*|*|
    Кнопки для работы с шаблонами
    Описание кнопок для работы с шаблонами на странице  →  приведено в таблице.
        Кнопки для работы с шаблонами
                    Кнопка
                    Описание
                    Добавление шаблона. Добавленный шаблон должен появиться в списке.
                    Обновление свойств существующего шаблона.
                    Создание другого шаблона, основанного на свойствах текущего шаблона,
                            включая все объекты (элементы данных, триггеры и прочее), унаследованные
                            от присоединенных шаблонов.
                    Создание другого шаблона, основанного на свойствах текущего шаблона,
                            включая все объекты (элементы данных, триггеры и прочее) как
                            унаследованные от присоединенных шаблонов, так и напрямую присоединенные
                            к текущему шаблону.
                    Удаление шаблона. Объекты из шаблона (элементы данных, триггеры и прочее)
                            останутся присоединенными к узлам сети.
                    Удаление шаблона и всех его объектов из присоединенных узлов
                        сети.
                    Отмена изменения свойств шаблона.
|*|*|*|
    Обслуживание узлов сети и триггеров
                В  можно указать периоды
                    обслуживания узлов сети, групп узлов сети и отдельных триггеров. Период обслуживания позволяет отметить в  время, когда на узле
                    сети ведутся технические работы. Узлы сети в обслуживании отмечены иконкой
                        . Имеется два типа обслуживания: со сбором данных и без сбора данных.
                Для обеспечения предсказуемого поведения периодов
                    обслуживания (ежедневного, еженедельного, ежемесячного) требуется использовать
                    общий часовой пояс для всех компонентов .
                Сервер  должен работать во
                    время обслуживания. Включение или отключение состояния обслуживания для узлов
                    сети происходит в нулевую секунду каждой минуты.
                При переходе узла сети в режим обслуживания  перечитывает все открытые проблемы для
                    проверки того, требуется ли их подавлять. При большом количестве проблем такое
                    поведение может негативно повлиять на производительность. Подробнее про
                    подавленные проблемы см. в разделе .
                Прокси всегда собирает данные, независимо от типа обслуживания. Эти данные
                    впоследствии игнорируются сервером, если указан тип «Без сбора данных».
                Если к узлу сети, который находится в обслуживании, добавить элемент данных для
                    сбора логов, то этот элемент будет собирать только те данные, которые попадут в
                    логи уже после завершения обслуживания.
            Если пользователь меняет период обслуживания, узлы сети, группы или теги, то
                изменения применяются не мгновенно, а только по истечении периода обновления кэша,
                который указан в переменной . Например,
                если =60, то
                обновления вступят в силу через 60 секунд.
            Особенности работы в режиме обслуживания со сбором данных
            В течение обслуживания со сбором данных триггеры обрабатываются как обычно, при
                необходимости создаются события. Для узлов сети и триггеров в состоянии обслуживания
                    эскалации о проблемах будут поставлены на
                паузу, если в настройках действия установлен чекбокс «Приостановить операции для
                подавленных проблем». В этом случае шаги эскалаций,
                которые могут включать в себя отправку оповещений или удаленные команды, будут
                игнорироваться до тех пор, пока не завершится период обслуживания. Если проблема
                произойдет в процессе обслуживания, эскалация
                начнется после завершения обслуживания. 
                    Пример выполнения шагов эскалаций при обслуживании
            Чтобы получать оповещения о проблемах в процессе обслуживания без задержки:
                    Перейдите на страницу  →  → .
                    Нажмите на имя триггера, для которого нужно получать оповещения.
                    Перейдите на вкладку «Операции».
                    Отмените выбор чекбокса «Приостановить операции для подавленных
                        проблем».
                    Нажмите на кнопку «Обновить» для сохранения изменений.
            Оповещения о проблемах также будут отправляться, если выражение триггера содержит
                несколько узлов сети, и при этом хотя бы один узел сети не в режиме
                обслуживания.
            Особенности работы в режиме обслуживания без сбора данных
            После завершения обслуживания без сбора данных триггеры, использующие функцию nodata(s), активируются
                только во время следующей проверки.nodata(s) — это функция,
                    которая которая каждые 30 секунд в течение периода s проверяет,
                    были ли получены данные. s — период проверки в
                секундах.
            Если на узел сети в режиме обслуживания без сбора данных передать данные с временной
                меткой, то: 
                    Данные не будут приняты, если временная метка входит в текущий период
                        обслуживания.
                    Данные будут приняты, если временная метка входит в уже завершенный период
                        обслуживания или в период до начала текущего обслуживания.
                Пример передачи данных с временной меткой
                Временная метка — набор символов, показывающий дату и время. Данные
                    мониторинга с временной меткой могут быть переданы на сервер  с помощью
                    Zabbix_sender или аналогичной
                    утилиты.
        В этом разделе:
                Настройка периода обслуживания
                Просмотр
                        состояния обслуживания
|*|*|*|
    Просмотр состояния обслуживания
            Отображение узлов сети в обслуживании
            Если узел сети находится в обслуживании, то рядом с его названием отображается иконка
                на страницах:
                     → ;
                     → ;
                     → ;
                     →  для выбранного
                        узла сети на вкладке «Обзор».
            Если узел сети в обслуживании добавлен на карту сетей, на этой карте у него будет
                оранжевый фон и надпись «В обслуживании».
                    Узел сети в обслуживании на карте сетей
            Детали обслуживания отображаются при наведении курсора мыши на иконку .
                    Детали обслуживания 
            Отображение подавленных проблем
            Обычно проблемы с узлов сети в обслуживании подавляются, то есть не отображаются в
                веб-интерфейсе. 
            Чтобы отображать проблемы с узлов сети в обслуживании, установите чекбокс
                «Подавленные проблемы». Включить отображение подавленных проблем можно на следующих
                    страницах:
                     → ;
                     → ;
                     →  при настройке виджетов
                        «Узлы сети с проблемами», «Проблемы», «Проблемы по важности», «Обзор
                        триггеров»;
                    на вкладке «Сообщения» на странице . В
                        этом случае подавленные проблемы будут отображаться в глобальных
                            оповещениях.Глобальное оповещение — всплывающее окно с информацией
                            о только что произошедшей проблеме, которое появляется вне зависимости
                            от того, на какой странице веб-интерфейса находится
                        пользователь.
            Подавленные проблемы также отображаются на странице  →
                     при настройке на карте элемента с типом «Триггер»,
                если для выбранного триггера включено отображение подавленных проблем.
            Рядом с подавленными проблеми отображается иконка . При
                наведении курсора мыши на иконку 
                отображаются детальные сведения о проблеме. 
                    Детальные сведения о подавленной проблеме
|*|*|*|
    Настройка периода обслуживания
        Создание периода обслуживания
            Для создания периода обслуживания:
                    Перейдите на страницу  → .
                    Нажмите на кнопку «Создать период обслуживания».
                    Откроется страница с общими атрибутами периода
                        обслуживания.
                    Заполните атрибуты обслуживания:
                            Имя;
                            Тип обслуживания:
                                    Со сбором данных — сервер будет собирать данные и
                                        обрабатывать триггеры в течение обслуживания;
                                    Без сбора данных — сервер не будет собирать данные в течение
                                        обслуживания.
                            Активно с — дата и время, когда выполняемые периоды обслуживания
                                становятся активными;Установка атрибута
                                    «Активно с» не активирует период обслуживания. Для активации
                                    периода обслуживания необходимо заполнить атрибут
                                    «Периоды».
                            Активно до — дата и время, когда выполняемые периоды обслуживания
                                перестают быть активными.
                    Выберите период обслуживания:
                            Нажмите на кнопку «Добавить» в области «Периоды».
                            В открывшемся окне выберите тип периода.
                            Для периода «Единовременно» укажите дату и длительность периода
                                обслуживания.
                            Для периода «Ежедневно» укажите следующие атрибуты:
                                    Каждый день(и) — количество дней, через которое будет
                                        повторяться обслуживание;
                                    В (час:минута) — время начала обслуживания;
                                    Длительность периода обслуживания.
                                Отсчет времени начинается со дня, указанного в атрибуте
                                «Активно с».
                            заданы следующие атрибуты:
                                    Активно с — 2023-09-06 12:00;
                                    Тип периода — Ежедневно;
                                    Каждый день(и) — 2;
                                    В (час:минута) — 23:00;
                                    Длительность периода обслуживания — 1 час.
                                В таком случае первый период обслуживания начнется 2023-09-06 в
                                23:00, второй период обслуживания начнется 2023-09-08 в 23:00. 
                            Для периода «Еженедельно» укажите следующие атрибуты:
                                    Каждую неделю(и) — количество недель, через которое будет
                                        повторяться обслуживание;
                                    День недели — день начала обслуживания;
                                    В (час:минута) — время начала обслуживания;
                                    Длительность периода обслуживания.
                            заданы следующие атрибуты: 
                                    Активно с — 2023-09-04 12:00;
                                    Тип периода — Еженедельно;
                                    День недели — Вторник;
                                    Каждую неделю(и) — 2;
                                    В (час:минута) — 13:00;
                                    Длительность периода обслуживания — 1 час.
                                2023-09-04 — понедельник. В таком случае первый период
                                обслуживания начнется во вторник 2023-09-05 в 13:00, второй период
                                обслуживания начнется через 2 недели — 2023-09-19 в 13:00. 
                            Для периода «Ежемесячно» укажите следующие атрибуты:
                                    Месяц;
                                    Дата — день месяца или день недели;
                                    В (час:минута) — время начала обслуживания;
                                    Длительность периода обслуживания.
                            Нажмите на кнопку «Добавить» для добавления настроенного периода
                                обслуживания.
                    Заполните  оставшиеся атрибуты:
                            Группы узлов сети.Если выбранная группа узлов сети содержит
                                    вложенные группы, обслуживание активируется и для родительской
                                    группы, и для всех вложенных групп.
                            Узлы сети.
                            Теги — если заданы теги, то обслуживание по выбранным узлам сети
                                будет ограничено проблемами с соответствующими тегами.В случае
                                    нескольких тегов поведение вычисляется следующим образом:
                                    И/Или — должны соответствовать все теги. Теги с одинаковыми
                                        именами вычисляются с условием «Или».
                                    Или — достаточно соответствия одного тега.
                                Имеется два способа сопоставления значения тега:
                                    Содержит — регистрозависимое совпадение подстроки (значение
                                        тега содержит заданную строку);
                                    Равно — регистрозависимое соответствие строке (значение тега
                                        равно заданной строке).
                            Описание.
                            Страница «Периоды обслуживания»
                    Нажмите на кнопку «Добавить».
            Редактирование периода обслуживания
                Для изменения атрибутов имеющегося периода
                    обслуживания:
                        Перейдите на страницу  → .
                        Нажмите на имя периода обслуживания, который нужно изменить.
                        Откроется страница с общими атрибутами периода
                            обслуживания.
                        Измените атрибуты обслуживания.
                        Нажмите на кнопку «Обновить».
|*|*|*|
    Создание пользователя
            Для создания пользователя:
                Перейдите на страницу  → .
                Нажмите на кнопку «Создать пользователя» в верхнем правом углу.
                Во вкладке «Пользователь» настройте следующие параметры:
                        Псевдоним — уникальное имя пользователя, используется как логин; 
                        Группы — группы, к которым пользователь принадлежит; 
                            От групп пользователей зависит, к каким группам узлов сети и узлам
                                сети пользователь имеет доступ.
                        Пароль;
                        Пароль обязателен только при внутреннем типе аутентификации.
                        Подтверждение пароля;
                        Обновить — период обновления графиков, комплексных экранов, простых
                            тестовых данных и др.; 
                        Строк на странице — количество строк, которое отображается в списках на
                            одной странице.
                При необходимости настройте следующие параметры:
                        Имя.
                        Фамилия.
                        Язык.
                        Часовой пояс.
                        Тема — определяет внешний вид веб-интерфейса.
                        Авто-вход — установите чекбокс, чтобы 
                             запомнил
                            пользователя и выполнял вход в систему автоматически в течение 30 дней.
                            Для этого используются cookies браузера. 
                        Авто-выход —  установите чекбокс, чтобы пользователь автоматически
                            выходил из системы после бездействия в течение указанного времени
                            (минимальное значение 90 секунд, максимальное 1 день).
                        Поддерживаются суффиксы времени:
                                s — секунды;
                                m — минуты;
                                h — часы;
                                d — дни.
                             Например, 90s, 5m, 2h, 1d.Если значение указано без суффикса
                                времени, оно соответствует значению в секундах. авто-выход не будет выполняться при следующих
                                условиях: 
                                    у пользователя открыта страница меню «Мониторинг» и
                                        настроено фоновое обновление данных на странице; 
                                    пользователь отметил параметр «Запомнить меня на 30 дней»
                                        при входе в систему.
                        URL (после входа в систему) — адрес страницы, куда пользователь будет
                            перенаправлен после успешного входа в систему. 
                    Создание пользователя
                Настройте оповещения для пользователя на вкладке «Оповещения». Для добавления
                    оповещения:
                        Нажмите на кнопку «добавить» в блоке данных «Оповещения».
                        Появится всплывающее окно «Оповещения».
                        Заполните параметры оповещения.
                        Нажмите на кнопку «Добавить».
                Подробнее см. в разделе «Настройка оповещений» в Руководстве администратора 
                    .
                Настройте права доступа для пользователя. Для этого: 
                        Перейдите на вкладку «Права доступа».
                        В поле «Роли» начните вводить существующие роли, либо нажмите на кнопку
                            «Выбрать» для вывода списка ролей.
                        Выберите роль пользователя. 
                        На странице появятся тип пользователя и права доступа для
                            выбранной роли.
                        Настройка прав доступа для пользователя
                Нажмите на кнопку «Добавить».
|*|*|*|
    Пользователи, группы и роли пользователей
        Все пользователи в  работают с системой  через веб-интерфейс.
            Каждому пользователю в  присвоены уникальные имя пользователя и пароль.
        Все пароли пользователей зашифрованы и хранятся в базе данных . Пользователи
             не могут использовать свои имя пользователя и пароль для авторизации
            непосредственно на сервере UNIX, за исключением ситуации, когда они были заведены
            соответственно также и в UNIX. Соединение между веб-сервером и браузером пользователя
            может быть защищено с помощью SSL.
        При наличии гибкой схемы прав доступа пользователя можно ограничить и разграничить права
            доступа к:
            административным функциям веб-интерфейса ;
            наблюдаемым узлам сети в группах узлов сети.
        Начальная установка  содержит двух предустановленных пользователей —
            «datapkitm» и «guest». На  сертифицированной версии пользователь «guest» по
            умолчанию отключен.
        В случае пяти последовательных неудачных попыток входа c одной учетной записью в
            веб-интерфейс  (кроме учетной записи «guest», которая не требует ввода
            пароля) данная учетная запись блокируется на 30 секунд для предотвращения компьютерных
            атак методом перебора пароля. Сообщение с IP-адресом, с которого были осуществлены
            неудачные попытки входа, будет отображено на стартовой странице в разделе боковой панели
             →  (при первом входе) или последней открытой странице (если вход
            ранее выполнялся) после успешного входа в систему. Событие неудачного входа также
            фиксируется в журнале аудита с указанием пользователя, IP-адреса, с которого
            осуществлялось подключение, действие и примечание.
        В этом разделе:
|*|*|*|
    Роли пользователей
        Роль определяет, какие элементы интерфейса пользователь может просматривать и какие
            действия ему разрешено выполнять. 
        По умолчанию в  добавлены 4 роли: 
                Администратор (Admin role);
                Гость (Guest role);
                Супер-администратор (Super admin role);
                Пользователь (User role).
            Заданную по умолчанию роль «Super admin role» нельзя изменить или удалить,
                так в  должен быть хотя бы один
                супер-администратор с неограниченными привилегиями.При первой настройке
                существующих пользователей измените пароль по умолчанию. При создании пароля к
                учетной записи рекомендуется следовать требованиям парольной политики
                предприятия.
        Пользователи с ролью «Super admin role» и соответствующими правами могут изменять или
            удалять существующие роли или создавать новые пользовательские роли.
        В этом разделе:
|*|*|*|
    Управление группами пользователей 
        Создание группы пользователей
            Для создания группы пользователей:
                    Перейдите на страницу  → .
                    Нажмите на кнопку «Создать группу пользователей» в верхнем правом
                        углу.
                    Откроется окно «Группы пользователей».
                    Настройте следующие параметры:
                            В поле «Имя группы» введите уникальное название группы.
                            Выберите пользователей.
                            Выберите способ аутентификации выбранных пользователей в выпадающем
                                списке «Доступ к веб-интерфейсу»:
                                    Системная по умолчанию — для входа с помощью аутентификации
                                            по умолчанию, которая настраивается на странице  → ;
                                    Внутренний — для входа с помощью внутренней аутентификации
                                            ; 
                                     — для входа с помощью аутентификации ; 
                                    Деактивировано — доступ к веб-интерфейсу  запрещен для этой
                                        группы.
                                Если по умолчанию для всех пользователей используется -аутентификация, выбор аутентификации с типом «Внутренний» или
                                        «» для отдельных пользователей игнорируется.
                            Чтобы деактивировать всех членов группы, снимите чекбокс
                                «Активировано».
                            Чтобы члены группы получили доступ к режиму отладки, установите
                                чекбокс «Режим отладки».
                            Подробнее см. в разделе .
                            Создание группы пользователей
                    Чтобы настроить для группы пользователей права доступа к данным групп узлов
                        сети:
                            Перейдите на вкладку «Права доступа».
                            Выберите группу узлов сети, для доступа к которой необходимо задать
                                права.
                            Укажите права доступа к выбранной группе узлов сети:
                                    Чтение-запись;
                                    Чтение;
                                    Запрещено — доступ к группе узлов сети запрещен;
                                    Нет — права доступа не заданы.
                                 Выбор уровня «Нет» удалит группу узлов сети
                                    из списка, если эта группа узлов сети уже указана в нем. 
                            Чтобы права доступа к выбранной группе наследовались всеми
                                вложенными группами узлов сети, установите чекбокс «Включая
                                подгруппы».
                            Нажмите на кнопку «Добавить» («»).
                            В список добавится строка с правами доступа к выбранной
                                    группе узлов сети.
                            При необходимости настройте права доступа к другим группам узлов
                                сети.
                            Вкладка «Права доступа»
                        При настройке правам доступа к группам узлов сети учитывайте следующие
                            особенности работы: 
                                Пользователь с ролью Администратор и правом доступа на
                                    «Чтение-запись» к узлу сети может присоединять шаблоны к узлу
                                    сети или отсоединять их, только если у него есть права доступа к
                                    группе «Шаблоны».
                                Пользователь с ролью «Администратор» и правами доступа на
                                    «Чтение» к узлу сети не увидит этот узел сети в списке на
                                    странице  → , но триггеры этого узла сети будут доступны на странице
                                         → .
                                Узлы сети, группы узлов сети или триггеры видны на картах сети и
                                    комплексных экранах только тем пользователям с ролями
                                    «Администратор», «Пользователь» и|*|*|*|ли «Гость», у которых есть
                                    права на «Чтение» или «Чтение-запись». При этом присоединенные к
                                    таким узлам сети объекты видны пользователям независимо от прав
                                    доступа. 
                                Сервер  не будет отправлять оповещения пользователям,
                                    которые указаны получателями в операции действия, если доступ к
                                    соответствующему узлу сети «запрещен».
                    По умолчанию группа пользователей видит все проблемы по выбранной группе
                        узлов сети. Чтобы видеть проблемы, отфильтрованные по имени и значению тега,
                        задайте права доступа группам пользователей на основе тегов:
                            Перейдите на вкладку «Фильтр тегов».
                            Выберите группу узлов сети.
                            Введите тег и его значение в одноименные поля. 
                                Если имя и значение тега указаны некорректно,
                                    соответствующая группа пользователей не сможет видеть никакие
                                    проблемы.
                            Чтобы права доступа к выбранной группе наследовались всеми
                                вложенными группами узлов сети, установите чекбокс «Включая
                                подгруппы». 
                            Нажмите на кнопку «Добавить» («»).
                            Вкладка «Фильтр тегов»
                    Если администратору баз данных нужно видеть проблемы только по базе
                        данных «MySQL», создайте группу пользователей для администраторов баз данных
                        и укажите имя тега «Сервис» со значением «MySQL».
                        Если пользователь является членом нескольких выбранных групп
                            пользователей, фильтрация для тегов будет использовать условие «OR».
                            Пример использования тегов для групп пользователей
                                        Группа пользователей
                                                A
                                        Группа пользователей
                                                B
                                        Видимый результат у пользователя обеих
                                            групп
                                        Фильтр
                                            тегов
                                        Группа узлов сети
                                        Имя тега
                                        Значение тега
                                        Группа узлов сети
                                        Имя тега
                                        Значение тега
                                        Шаблоны/Базы данных
                                        Сервис
                                        MySQL
                                        Шаблоны/Базы данных
                                        Сервис
                                        Oracle
                                        Видны проблемы Сервис: MySQL или Oracle
                                        Шаблоны/Базы данных
                                        пусто
                                        пусто
                                        Шаблоны/Базы данных
                                        Сервис
                                        Oracle
                                        Видны все проблемы
                                        не выбрано
                                        пусто
                                        пусто
                                        Шаблоны/Базы данных
                                        Сервис
                                        Oracle
                                        Видны проблемы Сервис:Oracle
                    Нажмите на кнопку «Добавить» .
        Редактирование группы пользователей
            Для настройки группы пользователей:
                    Перейдите на страницу  → .
                    Нажмите на имя группы для редактирования существующей группы.
                    Измените на открывшейся странице необходимые параметры группы.
                    Нажмите на кнопку «Обновить».
|*|*|*|
    Управление ролями пользователей
            Вы можете клонировать, отредактировать или удалить роль. Для этого:
                Перейдите на страницу  → .
                Нажмите на имя роли в списке. 
                Откроется страница редактирования роли.
                Для клонирования роли:
                        Нажмите на кнопку «Клонировать» в нижней части страницы.
                        Откроется страница новой роли с такими же
                            настройками.
                        Измените имя для новой роли.
                        Нажмите на кнопку «Добавить» в нижней части страницы.
                Для редактирования роли:
                        Измените нужные параметры.
                        Нажмите на кнопку «Обновить» в нижней части страницы.
                Для удаления роли:
                        Нажмите на кнопку «Удалить» в нижней части страницы.
                        Откроется окно подтверждения.
                        В окне подтверждения нажмите на кнопку «ОК».
|*|*|*|
    Группы пользователей
        Группы пользователей позволяют объединять пользователей и назначать им права доступа к
            данным групп узлов сети. Группировка пользователей необходима, чтобы разграничить доступ
            к информации, так как в  можно назначить права доступа к
            данным групп узлов сети только группе пользователей, не индивидуальному пользователю. 
        Пользователь может входить в любое количество групп. Эти группы могут иметь различные
            права доступа к узлам сети.
        Рассмотрим, как доступ к узлу сети Х будет меняться в различных ситуациях для
            пользователей, которые состоят в группах А и В.
            Примеры доступа к узлу сети Х для групп пользователей A и B
                        Права доступа к узлу сети X
                        Группы, где состоит узел сети X
                        Доступ к группам узлов сети для группы пользователей A
                        Доступ к группам узлов сети для группы пользователей B
                        Доступ к узлу сети X для пользователя, который состоит в группах A и
                            B
                        Группа 1
                        Чтение
                        Чтение-запись
                        Чтение-запись
                        Группа 1, Группа 2
                                Группа 1: Чтение
                                Группа 2: Запрещено
                                Группа 1: Чтение-запись
                                Группа 2: Запрещено
                        Нет
                        Группа 1
                        Нет
                        Чтение-запись
                        Чтение-запись
                        Группа 1
                        Запрещено
                        Чтение-запись
                        Нет
        В этом разделе:
|*|*|*|
    Создание роли пользователей
            Для создания роли пользователей:
                Перейдите на страницу  → .
                Нажмите на кнопку «Создать роль пользователей» в верхнем правом углу.
                Откроется страница создания роли.
                Введите имя роли.
                В выпадающем списке выберите тип пользователя. 
                    Тип влияет на то, какие параметры будут доступны для настройки. 
                Для типа «Пользователь» недоступна страница «Обнаружение» из раздела
                    «Мониторинг», поэтому соответствующий чекбокс недоступен для выбора. Остальные
                    страницы раздела «Мониторинг» доступны для типа «Пользователь», можно установить
                    или отменить выбор чекбоксов для этих страниц при настройке роли.
                        Настройка доступности раздела «Мониторинг» для типа
                            «Пользователь»
                В разделе «Доступ к Веб элементам» установите чекбоксы напротив тех страниц
                    веб-интерфейса, которые будут доступны пользователям с текущей ролью. 
                При необходимости установите чекбокс «Доступ по умолчанию к новым Веб
                    элементам». 
                При необходимости установите чекбокс «Доступ по умолчанию к новым модулям» в
                    разделе «Доступ к модулям». 
                        Настройка раздела «Доступ к модулям»
                В разделе «Доступ к API» установите чекбокс «Активировано», если нужно
                    предоставить пользователям с текущей ролью доступ к методам API.
                При необходимости настройте список разрешенных или запрещенных методов API. Для
                    этого:
                        Выберите опцию «Список разрешений» или «Список запретов».
                        Нажмите на кнопку «Выбрать».
                        Откроется всплывающее окно «Методы API».
                        В открывшемся окне установите чекбоксы напротив методов, которые нужно
                            разрешить или запретить использовать. 
                        Нажмите на кнопку «Выбрать».
                        В списке разрешений или запретов появятся выбранные методы
                            API.
                        Настройка раздела «Доступ к API»
                В разделе «Доступ к действиям» установите чекбоксы напротив действий, которые
                    будут доступны для пользователей с текущей ролью.
                При необходимости устаносите чекбокс «Доступ по умолчанию к новым
                    действиям».
                        Настройка раздела «Доступ к действиям»
                Нажмите на кнопку «Добавить».
|*|*|*|
    Настройка пользователя
    Для настройки пользователя необходимо сделать следующее:
                Перейдите в раздел боковой панели  → .
                Нажмите на имя пользователя для редактирования уже существующего
                    пользователя.
                Откроется вкладка «Пользователь».
                Измените общие атрибуты пользователя на вкладке «Пользователь»:
                        Псевдоним — уникальное имя пользователя, используется как логин. 
                        Имя.
                        Фамилия.
                            Если поля «Имя» и «Фамилия» заполнены, их значения будут
                                отображаться в информации подтверждения и в сообщении-уведомлении
                                оповещения.
                        Группы — группы, к которым пользователь принадлежит. 
                            От групп пользователей зависит, к каким группам узлов сети и узлам
                                сети пользователь имеет доступ.
                        Пароль.
                            Пароль обязателен только при внутреннем типе
                                аутентификации.
                        Подтверждение пароля.
                        Язык.
                        Часовой пояс.
                        Тема — определяет внешний вид веб-интерфейса.
                        Авто-вход — установите чекбокс, чтобы 
                             запомнил
                            пользователя и выполнял вход в систему автоматически в течение 30 дней.
                            Для этого используются cookies браузера. 
                        Авто-выход — установите чекбокс, чтобы пользователь автоматически
                            выходил из системы после бездействия в течение указанного времени
                            (минимальное значение 90 секунд, максимальное 1 день).
                        Поддерживаются суффиксы времени:
                                s — секунды;
                                m — минуты;
                                h — часы;
                                d — дни.
                             Например, 90s, 5m, 2h, 1d.Если значение указано без суффикса
                                времени, оно соответствует значению в секундах. авто-выход не будет выполняться при следующих
                                условиях: 
                                    У пользователя открыта страница меню «Мониторинг» и
                                        настроено фоновое обновление данных на странице. 
                                    Пользователь отметил параметр «Запомнить меня на 30 дней»
                                        при входе в систему.
                        Обновить — период обновления графиков, комплексных экранов, простых
                            тестовых данных и др. 
                        Строк на странице — количество строк, которое отображается в списках на
                            одной странице.
                        URL (после входа в систему) — адрес страницы, куда пользователь будет
                            перенаправлен после успешного входа в систему. 
                Настройте оповещения для пользователя на вкладке «Оповещения». Для
                    редактирования оповещения:
                        Нажмите на кнопку «Изменить» рядом с оповещением.
                        Появится всплывающее окно «Оповещения».
                        Измените необходимые параметры.
                        Нажмите на кнопку «Обновить».
                Подробнее см. в разделе «Настройка оповещений» в Руководстве администратора
.
                Настройте права доступа. Для этого:
                        Перейдите на вкладку «Права доступа».
                        Измените роль пользователя.
                            Список интерфейсов, доступных каждой роли пользователей, приведен
                                в разделе .
                        На странице появятся тип пользователя и права доступа для
                            выбранной роли. Подробнее про тип см. в разделе , про права доступа — в
                            разделе .
|*|*|*|
    Права доступа
            Права доступа определяют, какие группы узлов сети будут доступны пользователю.
            Пользователи с типом «Пользователь» и «Администратор» не имеют прав доступа к каким-либо
            группам узлов сети или узлам сети по умолчанию. Для получения прав доступа им необходимо
            находиться в группах пользователей с соответствующими группами узлов сети и узлами
            сети.Чтобы получить доступ к узлу сети, пользователь должен состоять в группе пользователей, которая
            имеет доступ к группе узлов сети, которая содержит необходимый узел сети. Получить
            доступ к узлу сети напрямую невозможно. Любое изменение прав доступа фиксируется в
                    журнале аудита с указанием пользователя, сделавшего изменение, предыдущего и
                    текущего значения.
|*|*|*|
    Тип пользователя
        Тип пользователя определяет права доступа к разделам главного меню и к данным групп узлов
            сети. Пользователи не могут менять тип самим себе. 
                Типы пользователей в 
                            Тип пользователя
                            Описание
                            Пользователь
                            Имеет доступ к разделам главного меню ,  и . По
                                умолчанию не имеет прав доступа к каким-либо группам узлов сети.
                                Права доступа к группе узлов сети должны быть заданы явно.
                            Администратор
                            Имеет доступ к разделам главного меню , ,  и . По умолчанию не имеет прав доступа к
                                каким-либо группам узлов сети. Права доступа к группе узлов сети
                                должны быть заданы явно.
                            Супер-администратор
                            Имеет доступ ко всем разделам главного меню: , , ,  и . Имеет права на чтение и запись всех
                                групп узлов сети. Запрет доступа к каким-либо группам узлов сети не
                                влияет на права доступа Супер-администратора.
|*|*|*|
    Аудит действий, выполняемых при обнаружении узлов
        На странице  →  пользователи с правами
            «Пользователь» и выше могут просмотреть записи об операциях, выполненных действиями при
            обнаружении узлов (оповещения, удаленные команды).
        Отображаемые в журнале аудита поля и их возможные значения приведены в таблице ниже.
            Поля журнала аудита действий при обнаружении узлов и их возможные значения
                        Колонка
                        Описание
                        Время
                        Время действия
                        Действие
                        Название действия, вызвавшего операцию
                        Тип
                        Тип действия — Email или Команда
                        Получатель
                        Псевдоним пользователя, его имя и фамилия (в круглых скобках) и Email
                            адрес получателя оповещения
                        Сообщение
                        Содержимое сообщения или удаленной команды. Удаленная команда
                            отделяется от узла сети, который является целью, при помощи символа
                            двоеточия: <узел сети>:<команда>. Если удаленная
                            команда выполнялась на сервере , тогда информация имеет следующий
                            формат: сервер :<команда>
                        Состояние
                            Состояние действия. Возможные значения:
                                в процессе — действие в процессе выполнения. Для действий в
                                    состоянии в процессе отображается оставшееся количество попыток
                                    — сколько еще раз сервер будет пытаться отправить
                                    оповещение;
                                отправлено — оповещение было отправлено;
                                выполнено — команда была выполнена;
                                не отправлено — действие не завершилось
                        Инфо
                        Информация об ошибке (если имеется) при выполнении действия
|*|*|*|
    Сообщения о событиях безопасности в веб-интерфейсе
        В таблице приведен список сообщений о событиях безопасности, с которыми могут столкнуться
            пользователи при работе в веб-интерфейсе, а также приведены роли, при наличии которых
            пользователи могут получать приведенные сообщения, и ситуации, при которых пользователь
            может получить данные сообщения.
            События безопасности и роли, которым доступны данные события
                        Описание события безопасности
                        Сообщение при возникновении события
                        Роль или пользователь, которым доступно событие
                        Совершена неуспешная попытка входа с неправильным логином или паролем
                            (отображается после входа в систему)
                        Зафиксировано [количество попыток] неуспешные попытки входа в
                            систему. Последняя неуспешная попытка с [IP-адрес] в [дата и
                            время]
                            Доступно любой роли.
                            Отображается при входе в веб-интерфейс только для пользователя,
                                совершившего неуспешные попытки входа.
                            Супер-администратор может просмотреть сообщение на странице  → .
                            Действия пользователя:
                                    если пользователь знает, что это он совершал неуспешные
                                        попытки авторизоваться (ошибся при вводе пароля), то никаких
                                        действий не требуется;
                                    если пользователь не совершал попыток входа, то необходимо
                                        сообщить об инциденте администратору
                        Не удалось выполнить вход с использованием заблокированной учетной
                            записи
                        No permissions for system access
                            Доступно любому неавторизованному пользователю на странице
                                авторизации.
                            Действия пользователя:
                                убедиться, что логин и пароль введены правильно;
                                обратиться к администратору для выяснения причин блокировки
                                    учетной записи
                        Учетная запись заблокирована после выполнения пяти неуспешных
                            последовательных попыток входа с неправильным паролем
                        Account is blocked for 30 seconds
                            Доступно любому неавторизованному пользователю на странице
                                авторизации.
                            Действия пользователя:
                                по истечении 30 секунд блокировки ввести корректные логин и
                                    пароль
                        Доступ к странице веб-интерфейса заблокирован при попытке открытия
                            страницы (по заранее известному адресу) после выхода из системы или
                            после блокировки учетной записи
                            Вы не выполнили вход.
                            - Для просмотра этой страницы вы должны войти в систему.
                            - Если вы считаете это сообщение ошибкой, пожалуйста, свяжитесь с
                                вашими администраторами для получения прав доступа
                            Доступно любому неавторизованному пользователю при попытке доступа к
                                странице веб-интерфейса с использованием заблокированной учетной
                                записи или без выполнения входа под учетной записью.
                            Действия пользователя:
                                авторизоваться в системе — ввести корректные логин и пароль
                        Доступ к странице веб-интерфейса заблокирован при попытке открытия
                            страницы (по заранее известному адресу), для доступа к которой у
                            пользователя недостаточно прав
                            Доступ запрещен.
                            - Вы вошли под именем [логин УЗ]. У вас нет полномочий для доступа к
                                этой странице.
                            - Если вы считаете это сообщение ошибкой, пожалуйста, свяжитесь с
                                вашими администраторами для получения прав доступа
                            Доступно любому авторизованному пользователю при попы|*|*|*|тке доступа к
                                странице веб-интерфейса с использованием учетной записи, прав
                                которой недостаточно для открытия данной страницы.
                            Действия пользователя:
                                обратиться к администратору для расширения прав доступа
                        Сессия пользователя завершена по истечении установленного
                            времени
                        Session terminated, re-login, please
                            Доступно любому авторизованному пользователю.
                            Действия пользователя:
                                авторизоваться в системе
                        При попытке входа в систему введены некорректные логин или
                            пароль
                        Некорректные имя пользователя или пароль или аккаунт временно
                            заблокирован
                            Доступно любому неавторизованному пользователю.
                            Действия пользователя:
                                    ввести корректные логин и пароль
                        Ошибки при работе с базой данных
                        Database error | [Описание ошибки]
                            Доступно любому авторизованному пользователю.
                            Пользователь с ролью «Супер-администратор» получит сообщение с
                                описанием ошибки.
                            Действия пользователя:
                                    обратиться к администратору для устранения ошибки в
                                        подключении к базе данных.
                            Действия администратора — см. раздел 
                                Руководство администратора  раздел
                                    «Действия после сбоев и ошибок эксплуатации средства»
                        Подключение к базе данных прервано
                        [Тип БД] database [Имя БД] [on [Хост БД]:[Порт БД]] is not available:
                            [описание ошибки]
                            Доступно любому авторизованному пользователю при условиях настройки
                                email-оповещений и добавлении пользователя в группу пользователей,
                                которым будет отправляться сообщение о недоступности базы
                                данных.
                            Действия пользователя:
                                    обратиться к администратору для устранения ошибки в
                                        подключении к базе данных.
                            Действия администратора — см. раздел 
                                Руководство администратора  раздел «Действия после сбоев и
                                    ошибок эксплуатации средства»
                         сервер
                            недоступен
                        Сервер не запущен: [описание ошибки]
                            Доступно любому авторизованному пользователю.
                            Пользователь с ролью «Супер-администратор» получит сообщение с
                                описанием ошибки.
                            Действия пользователя:
                                обратиться к администратору для устранения ошибки.
                            Действия администратора — см. раздел 
                                Руководство администратора  раздел «Действия после сбоев и
                                    ошибок эксплуатации средства»
                        Ошибка SQL
                            Ошибка в SQL. Пожалуйста, обратитесь к администратору
                            Ошибка в SQL: [описание ошибки]
                            Доступно любому авторизованному пользователю, если переменная 
                                ZBX_SHOW_SQL_ERRORS в файле defines.inc.php содержит значение false
                                и у пользователя деактивирован режим отладки.
                            Пользователь с ролью «Супер-администратор» получит сообщение с
                                описанием ошибки. В случае установки значения переменной true
                                все пользователи будут видеть текст ошибки.
                            Действия пользователя:
                                обратиться к администратору для устранения ошибки. 
                            Действия администратора — см. раздел 
                                Руководство администратора  раздел «Действия после сбоев и
                                    ошибок эксплуатации средства»
|*|*|*|
    Объект события
        Объект события  содержит свойства, приведенные в таблице.
            Свойства объекта события
                        Свойство
                        Тип
                        Описание
                        eventid
                        строка
                        ID события.
                        source
                        целое число
                            Тип события.
                            Возможные значения:
                                0 — событие создано триггером;
                                1 — событие создано правилом обнаружения;
                                2 — событие создано авторегистрацией активного агента;
                                3 — внутреннее событие
                        object
                        целое число
                            Тип объекта, к которому относится событие.
                            Возможные значения для событий на триггер:
                                    0 — триггер.
                            Возможные значения для событий на обнаружения:
                                1 — обнаруженный узел сети;
                                2 — обнаруженный сервис.
                            Возможные значения для событий на авторегистрацию:
                                3 — автоматически зарегистрированный узел сети.
                            Возможные значения для внутренних событий:
                                0 — триггер;
                                4 — элемент данных;
                                5 — правило LLD
                        objectid
                        строка
                        ID связанного объекта
                        acknowledged
                        целое число
                        Подтверждено ли событие
                        clock
                        штамп времени
                        Время, когда событие было создано
                        ns
                        целое число
                        Наносекунды, когда событие было создано
                        name
                        строка
                        Имя решенного события
                        value
                        целое число
                            Состояние связанного объекта.
                            Возможные значения для событий на триггер:
                                0 — ОК;
                                1 — проблема.
                            Возможные значения для событий на обнаружения:
                                0 — узел сети или сервис доступны;
                                1 —узел сети или сервис недоступны;
                                2 — узел сети или сервис обнаружены;
                                3 — узел сети или сервис потеряны.
                            Возможные значения для событий на авторегистрацию:
                                0 — «нормальное» состояние;
                                1 — «неизвестное» или «неподдерживаемое» состояние.
                            Этот параметр не используется для событий на авторегистрацию активных
                                агентов
                        severity
                        целое число
                            Текущая важность события.
                            Возможные значения:
                                0 — не классифицировано;
                                1 —информационная;
                                2 — предупреждение;
                                3 — средняя;
                                4 — высокая;
                                5 — чрезвычайная
                        r_eventid
                        строка
                        ID события восстановлении
                        c_eventid
                        строка
                        ID события о проблеме, которое сгенерировало OK событие
                        correlationid
                        строка
                        ID корреляции
                        userid
                        строка
                        ID пользователя, который закрыл событие вручную
                        suppressed
                        целое число
                            Подавлено ли событие или нет.
                            Возможные значения:
                                0 — событие в нормальном режиме;
                                1 — событие подавлено
|*|*|*|
    Аудит действий, выполненных в веб-интерфейсе
        События о действиях пользователей в веб-интерфейсе доступны для просмотра пользователям с
            правами «Супер-администратор» на странице  → .
        Типы событий:
            Вход пользователя в систему; 
            Выход пользователя из системы; 
            События изменений внутренних объектов ПК:
                    Активировать; 
                    Выполнить;
                    Добавить; 
                    Обновить; 
                    Отключить;
                    Удалить.
        Перечень внутренних объектов ПК, изменения которых записываются в журнал аудита
            безопасности и доступны для просмотра:
            Авторегистрация;
            Аутентификация;
            Веб-сценарий;
            График;
            Группа пользователей;
            Группа узлов сети;
            Группа элементов данных;
            Действие;
            Изображение;
            Карта сети;
            Комплексный экран;
            Корреляция событий;
            Макрос;
            Модуль;
            Настройка Zabbix;
            Настройки;
            Обслуживание;
            Очистка истории;
            Панель;
            Пользователь;
            Правило обнаружения;
            Преобразование значений;
            Прокси;
            Прототип графиков;
            Прототип триггеров;
            Прототип узлов сети;
            Прототип элемента данных;
            Регулярное выражение;
            Скрипт;
            Слайд-шоу;
            Соответствия иконок;
            Способ оповещений;
            Триггер;
            Узел сети;
            Услуга;
            Шаблон;
            Шаблон панели;
            Элемент графика;
            Элемент данных.
        Каждая запись о событии содержит следующую информацию:
            Время — время записи аудита;
            Пользователь — пользователь, выполнивший действие;
            IP-адрес — IP-адрес, с которого выполнялось действие;
            ID — ID измененного объекта;
            Описание — описание измененного объекта;
            Детали — детальная информация о действии над объектом, в том числе старое и новое
                значение (для события неуспешного входа пользователя в систему данное поле имеет
                значение «Login failed»).
|*|*|*|
    События
                 осуществляет логирование
                        и отображение событий в зависимости от источника и их типа. Типы
                        событий:
                        События на триггеры. Генерируются всякий
                                раз, когда триггер меняет свое
                                состояние (ОК→ПРОБЛЕМА→ОК). Подробнее см. в разделе .
                        События на обнаружение. Генерируются при обнаружении узлов сети или
                                сервисов. Подробнее см. в разделе .
                        События на авторегистрацию. Генерируются, когда активные агенты
                                автоматически регистрируются сервером. Подробнее см. в разделе .
                        Внутренние события. Генерируются, когда элементы данных или правила
                                низкоуровневого обнаружения становятся не поддерживаемыми или триггер переходит в состояние
                                        неизвестно. Подробнее см. в разделе .
                        События аудита действий, выполненных автоматически при обнаружении узла
                                сети. Подробнее см. в разделе .
                        События безопасности. Подробнее см. в разделе .
                События имеют временную метку и могут быть основой для действий — например, для
                        отправки оповещений по почте.
                В этом разделе:
|*|*|*|
    События на триггеры
                Каждый раз, когда триггер меняет свое состояние,
                        генерируется событие, которое содержит подробную информацию об изменении
                        состояния триггера — когда это случилось и
                        какое сейчас новое состояние.
                Триггерами создаются два типа событий:
                                Проблема и ОК.
                События на триггеры отображаются на странице  → . При этом пользователь видит события только для
                        узлов из тех групп узлов сети, в которых он состоит. Для просмотра деталей
                        событий на триггеры нажмите на дату и время события.
        В этом разделе:
|*|*|*|
    Настройка параметров закрытия проблемы
        Настройка триггера
        В настройке триггера включите опцию Разрешить закрывать вручную.
        Экран обновления проблемы
        Если возникает проблема у триггера с флагом Закрыть вручную, можно перейти на
            экран обновления проблемы этого триггера и закрыть проблему вручную.
        Чтобы закрыть проблему, проверьте наличие опции Закрыть проблему в диалоге и
            нажмите на «Обновить».
        Все обязательные поля ввода отмечены красной звездочкой.
        Запрос выполняется сервером . Обычно такая процедура занимает несколько
            секунд до закрытия проблемы. В процессе этой процедуры в разделе боковой панели  → 
            будет отображаться ЗАКРЫТИЕ, как состояние проблемы.
        Можно проверить, что проблема была закрыта вручную:
            в деталях события, доступных через раздел боковой панели  →
                ;
            используя макрос {EVENT.UPDATE.HISTORY} в сообщениях оповещения, который
                предоставит такую информацию.
|*|*|*|
    События ОК
        Событие OK закрывает связанные события проблемы и может быть создано тремя
            компонентами:
            триггеры — основываясь на настройках Генерация ОК
                    событий и ОК событие закрывает;
            корреляция событий;
            менеджер задач — когда событие закрывается вручную.
        У триггеров имеется настройка Формирование ОК
                событий, которая определяет, при каких условиях генерируются события ОК:
            Выражение — событие OK генерируется, если триггер находится в состоянии
                    Проблема и выражение этого триггера вычисляется как ЛОЖЬ. Это
                самая простая настройка, активированная по умолчанию.
            Выражение восстановления — событие OK генерируется, если триггер находится в
                состоянии Проблема, выражение этого триггера вычисляется как ЛОЖЬ и
                выражение восстановления вычисляется как ПРАВДА. Эту опцию можно
                использовать, если критерий восстановления триггера отличается от критерия
                проблемы.
            Нет — событие OK никогда не генерируется. Эту опцию можно использовать в
                сочетании с множественной генерацией проблем для простой отправки оповещений, когда
                происходит проблема.
        Дополнительно у триггеров имеется настройка ОК событие закрывает, которая
            определяет, какие события проблемы закрываются:
            Все проблемы — событие OK закрывает все открытые проблемы, которые созданы
                этим триггером.
            Все проблемы, если значение тега совпадает — событие OK закрывает все
                открытые проблемы, которые созданы этим триггером, и имеющие по крайней мере одно
                совпадающее значение тега. Тег задается настройкой триггера Теги для
                    совпадения. Если нет никаких событий проблемы для закрытия, тогда событие ОК
                не генерируется. Эту опцию часто называют «корреляция событий на уровне
                триггеров».
|*|*|*|
    Закрытие проблем вручную
        Хотя в целом события о проблемах решаются автоматически, когда состояние триггера переходит из Проблема в ОК, могут
            быть случаи, когда трудно определить при помощи выражения триггера, что проблема решена.
            В таких случаях проблема должна быть решена вручную.
        Например, syslog может сообщать о том, что для оптимальной производительности необходимо
            отрегулировать некоторые параметры ядра. В этом случае информация о проблеме сообщается
            администраторам Linux, они исправляют эту проблему и затем вручную закрывают ее.
        Проблемы можно закрывать вручную только у триггеров, у которых включена опция «Разрешить
            закрывать вручную».
        Когда проблема закрыта вручную,  генерирует новую внутреннюю задачу для
            сервера. Затем процесс task manager выполняет эту задачу и генерирует OK событие,
            следовательно, закрывает событие о проблеме.
        Вручную закрытая проблема не означает, что основной триггер никогда больше не перейдет в состояние «Проблема». При поступлении
            новых данных от любого элемента данных, которые включены в выражение триггера,
            произойдет повторное вычисление всего выражения, что может привести снова к проблеме.
            Также триггер вычисляется повторно, когда в его выражении
            используются функции, связанные со временем.
|*|*|*|
    События на обнаружение
         может периодически сканировать диапазоны IP-адресов, заданные в правилах
            сетевого обнаружения. Частота этой проверки настраивается индивидуально для каждого
            правила. После того, как узел сети или сервис обнаружен, генерируется одно или несколько
            событий на обнаружение. Режим автообнаружения объектов не рекомендуется использовать в
                , работающих в режиме управления действующим
            производством. Режим автообнаружения может использоваться в режимах технического
            обслуживания .
         генерирует события, приведенные в таблице ниже.
            События обнаружения, генерируемые 
                        Событие
                        Когда генерируется
                        Сервис доступен
                        Каждый раз, когда 
                            обнаруживает активный сервис
                        Сервис недоступен
                        Каждый раз, когда  не
                            может обнаружить сервис
                        Узел сети доступен
                        Если хотя бы один сервис доступен для IP
                        Узел сети недоступен
                        Если все сервисы не доступны
                        Сервис обнаружен
                        Если сервис стал доступен после его недоступности или обнаружен
                            впервые
                        Сервис потерян
                        Если сервис потерян после того, как был доступен
                        Узел сети обнаружен
                        Если узел сети стал доступен после его недоступности или обнаружен
                            впервые
                        Узел сети потерян
                        Если узел сети потерян после того, как был доступен
|*|*|*|
    Карты сетей
        Карты сетей нужны для визуального представления инфраструктуры. Создание карт сетей
            доступно всем пользователям независимо от их роли. При создании карты сети можно выбрать
            ее тип: публичный (доступный всем пользователям) или приватный (доступный выбранным
            пользователям).
        В этом разделе:
            Публичные и
                                        приватные карты
                        Создание карты
                                        сети
                        Добавление
                                        элементов
|*|*|*|
    Настройка соответствий иконок
            Для настройки соответствия иконок:
                Перейдите на страницу  → .
                Нажмите на кнопку в верхнем левом углу и выберите «Соответствия иконок» в
                    выпадающем списке.
                Откроется страница .
                Нажмите на кнопку «Создать соответствие иконок» в верхнем правом углу.
                Введите название соответствия в поле «Имя».
                Добавьте новое соответствие, для этого:
                        Выберите поле инвентарных данных из списка.
                        Введите «=» в поле «Выражение».
                        Выберите изображение из списка доступных иконок.
                Нажмите на кнопку «Добавить».
|*|*|*|
    Управление фигурами
        Управление фигурами осуществляется на странице редактирования карты сети. Для
                перехода на эту страницу:
                Перейдите на страницу  → . 
                Нажмите на ссылку «Конструктор» в строке с нужной картой.
            Возможности для управления фигурами:
                Выделение нескольких фигур. Эта функция нужна, чтобы впоследствии обновить,
                    удалить или скопировать и вставить сразу несколько фигур. 
                Способ 1:
                        Кликните левой кнопкой мыши на одной из фигур.
                        Зажмите клавишу «Ctrl».
                        Не отпуская клавишу «Ctrl», кликните левой кнопкой мыши на оставшихся
                            фигурах.
                Способ 2:
                        Установите курсор в той области карты, откуда хотите начать
                            выделение.
                        Зажмите левую кнопку мыши и потяните курсор в нужную сторону.
                        Когда будет выделена нужная область карты, отпустите курсор.
                Массовое обновление. Эта функция доступна только для однотипных фигур —
                    например, можно обновить сразу несколько прямоугольников, но нельзя обновить
                    вместе прямоугольник и линию, так как доступные свойства этих фигур различаются.
                    Для изменения свойств сразу нескольких фигур:
                        Выделите нужные фигуры. Подробнее см. шаг .
                        Откроется окно «Массовое обновление фигур».
                        В открывшемся окне установите чекбоксы напротив тех параметров, которые
                            нужно изменить.
                        Измените выбранные параметры.
                                Окно «Массовое обновление фигур»
                        Нажмите на кнопку «Применить».
                        Результат изменений отобразится на карте сети.
                        Нажмите на кнопку «Закрыть».
                    Также доступно удаление нескольких фигур по нажатию на кнопку «Удалить» в
                        окне «Массовое обновление фигур».
                Копирование и вставка. 
                        Кликните правой кнопкой мыши по фигуре. 
                        В появившемся выпадающем списке выберите опцию «Копировать». 
                        Кликните правой кнопкой мыши в той части карты, куда вы хотите вставить
                            скопированную фигуру.
                        В появившемся выпадающем списке выберите опцию «Вставить». 
                    также доступны копирование и вставка нескольких предварительно выделенных
                        фигур.
                Удаление. Для удаления фигуры:
                        Кликните левой кнопкой мыши на фигуре.
                        Появится окно «Фигура карты сети».
                        Нажмите на кнопку «Удалить» .
                        Появится окно подтверждения действия.
                        В открывшемся окне подтверждения действия нажмите «ОК».
                Изменение очередности фигур. Для упорядочивания фигур:
                        Кликните правой кнопкой мыши на фигуре.
                        В открывшемся меню выберите один из вариантов:
                                На передний план — показывать фигуру поверх всех остальных.
                                Переместить вперед — показывать фигуру на один слой выше.
                                Переместить назад — показывать фигуру на один слой ниже.
                                На задний план — показывать фигуру ниже всех остальных.
                                Очередность фигур
|*|*|*|
    Добавление элементов
        После создания карты сети необходимо добавить в нее элементы. Для этого:
                Нажмите на кнопку «Конструктор» в строке с картой сети.
                Откроется страница редактирования карты сети.
                Для добавления элемента нажмите на кнопку «Добавить», следующую за подписью
                    «Элемент карты сети».
                В верхнем левом углу карты появится новый элемент.
                Переместите новый элемент в нужную область на карте.
                    С опцией сетки «Вкл» элементы будут всегда выравниваться
                        по сетке (можно выбрать различные размеры сетки из выпадающего меню, а также
                        скрыть/показать сетку). Если требуется разместить элементы в любом месте без
                        выравнивания, переключите опцию в «Выкл» (элементы, расположенные случайным
                        образом, можно в дальнейшем снова выровнять по сетке с помощью кнопки
                        «Выровнять элементы карты»).
                Для изменения атрибутов элемента:
                        Нажмите на элемент.
                        Откроется окно редактирования атрибутов элемента.
                        Выберите тип элемента:
                                Узел сети — иконка, отображающая состояние всех триггеров у
                                    выбранного узла сети;
                                Карта сети — иконка, отображающая состояние всех элементов на
                                    карте сети;
                                Триггер — иконка, отображающая состояние одного и более
                                    триггеров;
                                Группа узлов сети — иконка, отображающая состояние всех
                                    триггеров на всех узлах сети в выбранной группе узлов сети;
                                Изображение — иконка, не связанная с каким-то ресурсом.
                        Задайте подпись к иконке. В подписях можно использовать многострочные
                            строки и макросы для автозамены текста, например, {HOST.NAME} для
                            видимого имени узла сети. Подробнее см. в разделе .
                        Выберите расположение подписи по отношению к иконке.
                        Если выбран тип элемента «Узел сети», укажите узел сети, которому
                            соответствует элемент.
                        Если выбран тип элемента «Карта сети», укажите карту сети, которой
                            соответствует элемент. 
                        Если выбран тип элемента «Триггер», укажите один или несколько
                            триггеров, которым соответствует элемент.  
                            Порядок выбранных триггеров можно изменить, но только в пределах
                                триггеров одной важности. 
                            Режим просмотра зависит от параметра «Отображение проблем» в общих
                                атрибутах карты сети. Подробнее см. в разделе Создание карты сети.
                            В режиме конструктора первые отображаемые макросы {HOST.*} будут
                                раскрыты в зависимости от первого триггера в списке (на основании
                                важности триггера). Если выбран режим «Развертывание одиночной
                                проблемы», тогда первые отображаемые макросы {HOST.*} будут раскрыты
                                в зависимости от последней обнаруженной проблемы триггера (вне
                                зависимости от важности) или от первого триггера в списке (в случае
                                отсутствия обнаруженных проблем). Если выбран режим «Количество
                                проблем» и «Раскрывать наиболее критичную», тогда первые
                                отображаемые макросы {HOST.*} будут раскрыты в зависимости от
                                важности триггера.
                        Если указан тип элемента «Группа узлов сети», укажите группу узлов
                            сети, которой соответствует элемент. 
                        Выберите группу элементов данных, чтобы отображать только те проблемные
                            триггеры, которые принадлежат этой группе.
                        Установите чекбокс «Автоматический выбор иконки», чтобы выбор
                            отображаемой иконки определялся соответствием иконок. Подробнее см. в
                            разделе .
                        В разделе «Иконки» выберите иконки, которые будут использоваться для
                            отображения элемента на карте в состояниях «По умолчанию», «Проблема»,
                            «Обслуживание», «Деактивирован».
                        Задайте координаты X и Y, чтобы изменить местоположение элемента на
                            карте.
                        При необходимости добавьте ссылку для выбранного элемента. Для этого
                            настройте параметр «URLы»:
                                Введите имя ссылки, которое будет отображаться в
                                    веб-интерфейсе.
                                Добавьте ссылку в поле «URL».
                                Нажмите на кнопку «Добавить».
                            Макросы, которые можно использовать в URL'ах карт сети: {MAP.ID},
                                {HOSTGROUP.ID}, {HOST.ID}, {TRIGGER.ID}. Подробнее см. в разделе
                                    .
                        При нажатии на элемент данных во время просмотра карты сети
                            появится всплывающее меню с блоком данных «URLы».
                Нажмите на кнопку «Обновить» в правом верхнем углу для сохранения настроек.
|*|*|*|
    Публичные и приватные карты
        Все пользователи  могут создавать карты сетей. У карт сетей имеется
            владелец — пользователь, который создал их.
            Публичные карты сетей видны всем пользователям, у которых есть права на чтение хотя
                бы одного элемента карты сети. Редактировать публичные карты могут пользователи, у
                которых есть права чтение и запись этой карты, а также права на чтение всех
                элементов соответствующей карты, включая триггеры в
                связях.
            Приватные карты сетей видны только своим владельцам, а также пользователям или
                группам пользователей, которым владелец предоставил доступ. Пользователи с ролью
                отличной от «Супер-администратор» могут предоставить доступ к своей карте сети
                только тем группам пользователей, к которым они сами принадлежат. Пользователи с
                ролью «Администратор» могут просматривать приватные карты сетей независимо от того,
                являются ли они владельцами и входят ли в список пользователей с общим доступом.
                Редактировать приватные карты может владелец карты, а также пользователь или группа
                пользователей с правами на чтение и запись этой карты сети и с правами на чтение
                всех элементов соответствующей карты, включая триггеры в связях.
        Если у пользователя нет прав на чтение элемента карты, то этот элемент отображается без
            текстовой информации и с серой иконкой. Однако подпись к триггеру видна, даже если у пользователя нет прав на чтение триггера.
        Чтобы добавить элемент на карту, у пользователя должны быть как минимум права на чтение
            этого элемента.
|*|*|*|
    Добавление и настройка фигур
            Фигуры позволяют настраивать внешний вид карты сети и визуально группировать элементы
                данных на карте.
            Чтобы добавить и настроить фигуру:
                Перейдите на страницу  → . 
                Нажмите на ссылку «Конструктор» в строке с той картой, для которой нужно
                    добавить или изменить фигуры.
                Откроется страница редактирования карты сетей.
                Для добавления фигуры нажмите кнопку «Добавить» после надписи «Фигура».  
                Новая фигура появится в левом верхнем углу карты сети.
                        Добавление фигуры
                Для перемещения фигуры:
                        Наведите курсор на фигуру и зажмите левую кнопку мыши.
                        Не отпуская левую кнопку мыши, перетащите фигуру в нужную область
                            карты.
                        Отпустите левую кнопку мыши.
                Для изменения размера фигуры:
                        Наведите курсор на край фигуры и зажмите левую кнопку мыши.
                        Потяните край фигуры в нужную сторону.
                        При изменении фигуры до нужного размера отпустите левую кнопку
                            мыши.
                Для изменения свойств фигуры:
                        Кликните левой кнопкой мыши на фигуре.
                        Появится окно «Фигура карты сети».  
                        Настройте параметры: 
                                Фигура — по умолчанию выбран прямоугольник. Другие доступные
                                    значения — эллипс, линия.
                            Для прямоугольника и эллипса доступны следующие свойства:
                                Текст — подпись, которая будет отображаться внутри фигуры. Текст
                                    может содержать гиперссылки и макросы, они станут активны после
                                    сохранения изменений фигуры. Здесь же настраивается выравнивание
                                    текста относительно фигуры, шрифт и его размер, цвет. 
                                Фон.
                                Рамка.Вы можете добавить на карту текст без
                                        видимой фигуры, выбрав тип рамки «Нет».
                                Координаты — координаты верхнего левого угла прямоугольника, в
                                    котором находится фигура.
                                Размер.
                                Окно «Фигура карты сети» для прямоугольника
                            Для линии доступны следующие свойства:
                                Линия;
                                Точки — координаты начала линии X1 и Y1 и координаты конца линии
                                    X2 и Y2.
                                Окно «Фигура карты сети» для линии
                        Нажмите на кнопку «Применить».
                        Результат изменений отобразится на карте сети.
                        Нажмите на кнопку «Закрыть».
                На рисунке ниже использованы прямоугольники для группировки ПК и телефонов
                    инженеров, эллипс для выделения сервера, линии для обозначения связей. Название
                    «Карта сети предприятия» добавлено с помощью прямоугольника с соответствующим
                    текстом и типом рамки «Нет».
                        Пример использования фигур на карте сети
|*|*|*|
    Управление элементами
        Управление элементами осуществляется на странице редактирования карты сети. Для
                перехода на эту страницу:
                Перейдите на страницу  → . 
                Нажмите на ссылку «Конструктор» в строке с нужной картой.
            Возможности для управления элементами:
                Выделение нескольких элементов. Эта функция нужна, чтобы впоследствии обновить,
                    удалить или скопировать и вставить сразу несколько элементов. 
                Способ 1:
                        Кликните левой кнопкой мыши на одном из элементов.
                        Зажмите клавишу «Ctrl».
                        Не отпуская клавишу «Ctrl», кликните левой кнопкой мыши на оставшихся
                            элементах.
                Способ 2:
                        Установите курсор в той области карты, откуда хотите начать
                            выделение.
                        Зажмите левую кнопку мыши и потяните курсор в нужную сторону.
                        Когда будет выделена нужная область карты, отпустите курсор.
                Массовое обновление. Для изменения свойств сразу нескольких элементов: 
                        Выделите нужные элементы. Подробнее см. шаг .
                        Откроется окно «Массовое обновление элементов».
                        В открывшемся окне установите чекбоксы напротив тех параметров, которые
                            нужно изменить.
                        Измените выбранные параметры.
                                Окно «Массовое обновление элементов»
                            В поле «Подпись» доступно использование макросов, например,
                                {HOSTNAME}.
                        Нажмите на кнопку «Применить».
                        Результат изменений отобразится на карте сети.
                        Нажмите на кнопку «Закрыть».
                Перемещение. Для перемещения элемента:
                        Наведите курсор на элемент и зажмите левую кнопку мыши.
                        Не отпуская левую кнопку мыши, перетащите элемент в нужную область
                            карты.
                        Отпустите левую кнопку мыши.
                Копирование и вставка. 
                        Кликните правой кнопкой мыши по элементу. 
                        В появившемся выпадающем списке выберите опцию «Копировать». 
                        Кликните правой кнопкой мыши в той части карты, куда вы хотите вставить
                            скопированный элемент.
                        В появившемся выпадающем списке выберите одну из опций:
                                Вставить — для вставки всех выделенных элементов и связей. 
                                Вставить без внешних связей — для вставки выбранных элементов и
                                    связей только между ними.
                    Также доступны копирование и вставка нескольких предварительно выделенных
                        элементов. Копирование и вставка работают только в одном окне браузера.
                        Быстрые сочетания клавиш не поддерживаются.
                Создание связей между элементами. Для соединения двух элементов:
                        Зажмите клавишу «Ctrl».
                        Выберите два элемента на карте нажатием левой кнопки мыши.
                        Нажмите на кнопку «Добавить» справа от подписи «Связь» в верхней части
                            страницы.
                        Появится связь между выбранными элементами. Для каждого из
                            соединенных элементов в окне редактирования появится раздел «Связи».
                                Соединенные элементы
                Настройка связей между элементами. Для настройки ранее созданной связи:
                        Выберите один из связанных элементов на карте нажатием левой кнопки
                            мыши.
                        В открывшемся окне редактирования элемента нажмите на кнопку «Изменить»
                            в разделе «Связи». 
                        В окне редактирования элемента появятся дополнительные
                            атрибуты.
                        Измените атрибуты связей элементов:
                                Подпись — отображается поверх связи. В этом поле поддерживается
                                    макрос {узел_сети:ключ.функция(параметр)} c
                                    функциями триггеров avg, last,
                                        min и max с параметром в
                                    виде секунд.
                                Подключаться через — элемент, к которому присоединяется
                                    связь.
                                Тип (ОК) — стиль связи по умолчанию:
                                        Линия;
                                        Жирная линия;
                                        Точечная линия;
                                        Пунктирная линия.
                                Цвет (ОК) — цвет связи по умолчанию.
                                Индикаторы связи — список триггеров, соединенных со связью. В
                                    случае, если триггер в состоянии
                                    ПРОБЛЕМА, его стиль применяется к связи.
                                Атрибуты редактирования связи
                        Для сохранения настроек нажмите на кнопку «Применить». 
                        Для выхода из раздела редактирования связей нажмите на кнопку
                            «Закрыть».
|*|*|*|
    Создание карты сети
        Для создания карты сети:
                Перейдите на страницу  → .
                Если на странице отображается одна из открытых ранее карт сети, перейдите на
                    вкладку «Все карты сети».
                Нажмите на кнопку «Создать карту сети» в верхнем правом углу.
                Заполните обязательные параметры на вкладке «Карта сети»:
                        Владелец;
                        Имя — уникальное название карты сети;
                        Ширина (в пикселях);
                        Высота (в пикселях).
                При необходимости заполните другие параметры на вкладке «Карта сети»:
                        Фоновое изображение — позволяет установить фон для карты, если он
                            предварительно был загружен. Подробнее см. в разделе .
                        Автоматическое соответствие иконок — выберите вариант «вручную» либо
                            название настроенного сответствия из списка. Подробнее см. в разделе
                                .Нажмите на кнопку
                                «Показать соответствия иконок» для просмотра содержимого доступных
                                соответствий.
                        Подсветка иконок — установите чекбокс для включения подсветки элементов. 
                                Пример подсветки элементов
                        Помечать элементы при изменении состояния триггера — установите чекбокс,
                            чтобы элементы с недавно изменившим состояние триггером отмечались на
                            карте красными маркерами. 
                                Пример отображения элемента при изменении состояния
                                    триггера
                        Отображение проблем — выберите один из доступных вариантов
                                отображения:
                                Развертывание одиночной проблемы;
                                Количество проблем;
                                Количество проблем и раскрывать наиболее
                                        критичную.Наиболее критичная проблема определяется
                                        следующим образом: 
                                            для элемента триггера на карте — по важности
                                                триггера и его позиции в списке триггеров;
                                            для остальныx элементов карты — по важности триггера
                                                и ID триггера.
                        Расширенные подписи — установите чекбокс, чтобы настроить для разных
                            элементов карты разные типы подписей:
                                Тип подписи к группе узлов сети;
                                Тип подписи к узлу сети;
                                Тип подписи к триггеру;
                                Тип подписи к карте сети;
                                Тип подписи к изображению.
                        Тип подписи к элементам карты — выберите один из доступных типов
                            подписей, который будет применяться ко всем элементам карты:
                                Подпись;
                                IP-адрес;
                                Название элемента;
                                Только состояние;
                                Ничего.
                        Размещение подписи к элементам карты:
                                По нижнему краю;
                                По левой стороне;
                                По правой стороне;
                                По верхнему краю.
                        Отображение проблем — отображение количества проблем определенного
                                вида:
                                Все;
                                Неподтвержденные отдельно;
                                Только неподтвержденные. 
                        Минимальная важность — проблемы с важностью ниже минимальной не будут
                            отображены на карте.
                        Подавленные проблемы — установите чекбокс для отображения проблем узлов
                            сети, находящихся в обслуживании.
                        URLы — ссылки для выбранных типов элементов. Чтобы добавить ссылку:
                                Введите имя, которое будет отображаться в веб-интерфейсе.
                                Добавьте ссылку в поле «URL».
                                Выберите тип элемента данных.
                                Нажмите на кнопку «Добавить».
                        Страница создания карты 
                При необходимости добавьте ссылки для выбранных типов элементов. Для этого
                    настройте параметр «URLы»:
                        Введите имя ссылки, которое будет отображаться в веб-интерфейсе.
                        Добавьте ссылку в поле «URL».
                        Выберите тип элемента данных, для которого будет отображаться
                            ссылка.
                        Нажмите на кнопку «Добавить».
                        При нажатии на элемент данных выбранного типа на карте появится
                            всплывающее меню с блоком данных «URLы».
                При необходимости перейдите на вкладку «Общий доступ» и настройте следующие
                    параметры:
                        Тип:
                                Приватная  — карта видима только выбранным группам пользователей
                                    и пользователям;
                                Публичная  — карта видима всем.
                        Список групп пользователей общего доступа — группы пользователей,
                            которые будут иметь доступ к этой карте сети;
                        Список пользователей общего доступа — пользователи, которые будут иметь
                            доступ к этой карте сети.
                    Можно разрешить доступ только на чтение или
                        чтение-запись.
                Нажмите на кнопку «Добавить» для сохранения карты сети.
                Будет создана пустая карта сети с заданными настройками. 
            Чтобы создать новую карту сети, можно использовать кнопки «Клонировать»
                и «Полное клонирование» в диалоге конфигурации существующей карты. 
                    При нажатии на кнопку «Клонировать» будут сохранены все атрибуты макета
                        оригинальной карты без элементов карты сетей. 
                    При нажатии на кнопку «Полное клонирование» сохранятся как общие атрибуты
                        макета, так и все элементы оригинальной карты сети.
|*|*|*|
    Загрузка фонового изображения для карты сети
            Для загрузки фонового изображения:
                Перейдите на страницу  → .
                Нажмите на кнопку в верхнем левом углу и выберите «Изображения» в выпадающем
                    списке.
                Откроется страница .
                Выберите тип «Фон» в верхнем правом углу.
                Нажмите на кнопку «Создать фон» в верхнем правом углу.
                В открывшемся окне введите имя фонового изображения.
                Нажмите на кнопку «Выберите файл».
                В открывшемся окне выберите нужный вам файл и нажмите на кнопку
                    «Открыть».
                Нажмите на кнопку «Добавить».
|*|*|*|
    Триггеры
        Триггеры — это логические выражения, которые отражают текущее состояние системы на основе
          данных, полученных во время мониторинга.
        Выражения триггеров позволяют задать пороговое значение, при достижении которого триггер
          активизируется, то есть меняет состояние с «ОК» на «ПРОБЛЕМА».
        В зависимости от используемых функций пересчет выражения может выполняться:
            Каждые 30 секунд — при использовании функций, связанных со временем
                (nodata(), date(), dayofmonth(),
                dayofweek(), time(), now()).
            Каждый раз при поступлении нового значения, которое является частью выражения — при
              использовании функций, не связанных со временем.
            Каждые 30 секунд либо чаще, если поступило новое значение, которое является частью
              выражения — при использовании функций обоих типов.
    Вы можете сделать один триггер зависимым от другого. Зависимый триггер не меняет свое
      состояние, пока тот триггер, от которого он зависит, находится в состоянии «ПРОБЛЕМА». 
    При срабатывании триггера рекомендуется решить возникшую проблему. Например, в случае
      срабатывании триггера «Ошибка синхронизации времени» необходимо настроить ntp-сервер для всех
 и сервера . 
    Триггер можно добавить:
        к узлу сети —  триггер будет работать для конкретного ;
        к шаблону — триггер будет работать для всех , использующих этот шаблон.
    В этом разделе:
|*|*|*|
    Управление триггерами
            Доступны следующие возможности:
                Редактирование триггера. Для редактирования:
                        Перейдите на страницу  →  или  → .
                        Нажмите на имя шаблона или узла сети, который включает в себя нужный
                            триггер.
                        Откроется страница редактирования шаблона или узла
                            сети.
                        Перейдите на вкладку «Триггеры». 
                        Отредактируйте необходимые параметры. Подробнее см. в разделе .
                        Нажмите на кнопку «Обновить».
                Клонирование триггера. Для клонирования:
                        Перейдите на страницу  →  или  → .
                        Нажмите на имя шаблона или узла сети, который включает в себя нужный
                            триггер.
                        Откроется страница редактирования шаблона или узла
                            сети.
                        Перейдите на вкладку «Триггеры». 
                        Нажмите на имя нужного вам триггера.
                        Нажмите на кнопку «Клонировать».
|*|*|*|
  Создание триггера
   Для создания нового триггера:
        Выберите  или шаблон, к которому нужно
          добавить триггер. Для этого: 
          Чтобы добавить триггер к :
              Перейдите на страницу  → . 
              Выберите нужный узел сети.
              Перейдите на вкладку «Шаблоны» и убедитесь, что к узлу сети присоединен шаблон,
                позволяющий производить мониторинг необходимых данных.
              Окно выбора шаблона ОМ
          Чтобы добавить триггер к шаблону:
              Перейдите на страницу  → .
              Выберите нужный шаблон.
              Создание триггера для шаблона
        Перейдите на вкладку «Макросы». 
        Выберите одну из опций:  
          Для узла сети:
              «Макросы узла сети» — список макросов, добавленных непосредственно к узлу
                сети.
              «Макросы узла сети и унаследованные» — список всех макросов для этого узла сети,
                  включая:
                  глобальные макросы;
                  макросы шаблонов, подключенных к узлу сети;
                  макросы, добавленные непосредственно к узлу сети.
                  Окно со списком макросов узла сети
          Для шаблона:
              «Шаблонные макросы» — список макросов, добавленных непосредственно к шаблону.
              «Унаследованные и макросы из шаблонов» — список всех макросов этого шаблона,
                  включая:
                  глобальные макросы;
                  макросы присоединенных шаблонов; 
                  макросы, добавленные непосредтвенно к шаблону.
        Убедитесь, что в списке макросов присутствуют элементы, которые отвечают за мониторинг
          необходимых данных. 
        Перейдите на вкладку «Триггеры».
            Вкладка «Триггеры»
        Нажмите на кнопку «Создать триггер» в верхнем правом углу. 
        Откроется окно создания триггера.  
        Введите имя триггера. Имя может содержать макросы, в этом случае имя макроса будет
          заменено на конкретное значение. Подробнее см. в разделе .
        При необходимости настройте следующие параметры:
            «Имя события» — значение этого поля будет отображается как название проблемы после
              активации триггера. 
            «Оперативные данные» — строка для отображения последних данных с помощью макросов.
              Значения макросов в этом поле будут обновляться при каждом просмотре подробной
              информации о проблеме на странице .
             «Важность» — выберите уровень критичности триггера. Значение по умолчанию — «Не
              классифицировано».
            Заполнение параметров триггера
        Задайте выражение триггера. Для этого:
            В разделе «Выражение» нажмите на «Конструктор выражения». 
            Нажмите на появившуюся в разделе «Выражение» кнопку «Изменить».
                Переход к добавлению выражения
            Откроется окно «Условие».
            В открывшемся окне заполните следующие параметры: 
                В поле «Элемент данных» нажмите на кнопку «Выбрать».Результат шага: Откроется
                    окно «Выбор элемента данных».
                Выберите нужный элемент данных.  
                    Выбора элемента данных
                Из выпадающего списка поля «Функция» выберите значение, при котором будет
                  срабатывать триггер. 
                В поле «За последние (Т) Количество» укажите значение времени для активации
                  триггера. 
                При необходимости заполните поле «Сдвиг по времени». Данный параметр
                  сопоставляет текущее значение полученных данных со значением в прошлом на
                  определенном отрезке времени. 
                В поле «Результат» установите значение для полученных данных, при котором
                  триггер будет активирован. 
                Пример параметров в окне «Условие»
            Нажмите на кнопку «Вставить».
            Убедитесь, что в поле «Выражение» появился созданный триггер. 
                Добавление созданного триггера
            Нажмите на кнопку «Добавить» под выражением.
            Убедитесь, что триггер добавился под полем «Выражение».
        При необходимости добавьте еще выражения. Для этого:
            Повторите шаги  — . 
            В открывшемся окне «Триггеры» для добавления нового выражения выберите одну из
              опций: 
                Или — триггер будет активирован, если хотя бы одно из выражений истинно.
                И — триггер будет активирован только при истинности всех выражений одновременно. 
                Замена — замена добавленного ранее триггера на текущий.
            Выражения будут добавлены в область под полем «Выражение».
                Результат создания выражений 
        Протестируйте работу добавленных выражений. Для этого:
            Нажмите на кнопку «Тест» под добавленными выражениями.
            Откроется всплывающее окно «Тест».
            В области «Тестовые данные» заполните поле «Значение» для каждого выражения. 
            Нажмите на кнопку «Тест».
            В области «Результат» посмотрите, каким будет результат работы триггера для каждого
              выражения при указанных значениях.
                Проверка созданных выражений
            Для выхода из режима тестирования нажмите на кнопку «Отмена» или .
            Появится окно «Триггеры».
        При необходимости задайте следующие параметры:
             «Генерация ОК событий» — выберите один из режимов формирования ОК событий:
                Выражение — события ОК и ПРОБЛЕМА формируются на основе выражения
                  триггера;
                Выражение восстановления — при выборе этой опции появится поле, где
                  необходимо указать выражение восстановления. В этом режиме OK события формируются,
                  если выражение триггера вычисляется как ЛОЖЬ и выражение восстановления
                  вычисляется как ПРАВДА. 
                Нет — в этом случае триггер возвращается в
                  состояние ОК только вручную.
            «Режим генерации событий ПРОБЛЕМА» — выберите режим формирования событий о
              проблемах:
                Одиночный — формируется одно событие, когда триггер переходит в состояние «Проблема» в первый раз;
                Множественный — событие формируется каждый раз, когда триггер переходит в
                  состояние «Проблема».
            «Разрешить закрывать вручную» — большинство возникающих проблем закрываются сами,
              когда переходят в состояние «ОК». Установка данного чекбокса позволяет закрывать
              данную проблему вручную после ее разрешения, т.е. после действий ответственного
              специалиста.
            «URL» — укажите ссылку, по которой можно будет открыть триггер из следующих
              разделов:
                на странице  → ;
                в виджете «Проблем|*|*|*|ы» на странице .
            «Описание» — введите дополнительную информацию о триггере. 
            «Активировано» — отмените выбор чекбокса, чтобы отключить триггер сразу после
              создания. При установленном чекбоксе созданный триггер будет сразу включен. 
          Поля «URL» и «Описание» поддерживают использование макросов. Подробнее см. в разделе
              . 
        Для завершения создания триггера нажмите на кнопку «Добавить» внизу страницы. 
            Завершение создания триггера
        При необходимости добавьте теги для маркировки событий триггера. Для этого:
            Перейдите на вкладку «Теги».
            Задайте имя тега.
            При необходимости задайте значение тега.
            Нажмите на кнопку «Добавить» или «Обновить» для сохранения результата.
            Вкладка «Теги»
          Теги событий могут использоваться для корреляции событий и в условиях действий.
            Отображаются в следующих местах:
              на странице  → ;
              в виджете «Проблемы» на странице .
          Теги событий поддерживают макросы, подробнее см. в разделе 
          Поле «Тег» ограничено 255 символами.
        При необходимости добавьте триггеры, от которых будет зависеть текущий триггер. Для
          этого:
            Перейдите на вкладку «Зависимости».
            Нажмите на кнопку «Добавить» (). 
            Откроется окно выбора триггеров, от которых будет зависеть текущий
              триггер.
            Установите чекбокс рядом с именем триггера, который нужно добавить.
            Нажмите на кнопку «Выбрать».
            Триггер появится в списке зависимостей.
            Нажмите на кнопку «Добавить» или «Обновить» для сохранения результата.
            Вкладка «Зависимости»
      Пример
      На  с ОС Windows и установленным агентом для
        сбора данных необходимо осуществлять мониторинг критической загрузки процессора, оперативной
        памяти и файловой системы. В случае достижения данными параметрами критических значений
        нужно уведомлять о наличии проблемы.
      Для создания такого триггера:
        Убедитесь, что к  присоединен шаблон
          «Windows агентный сбор». Для этого:
            Перейдите на страницу  → .
            Выберите нужный узел сети.
            Перейдите на вкладку «Шаблоны» и найдите в списке шаблон «Windows агентный
              сбор».
        Перейдите на вкладку «Макросы». 
        Выберите опцию «Макросы узла сети и унаследованные». 
        Убедитесь, что в списке присутствуют элементы, которые отвечают за мониторинг
          необходимых данных: 
            {$CPU.UTIL.CRIT} = 90 — критический порог загрузки процессора в процентах;
            {$MEMORY.UTIL.MAX} = 90 — критический порог используемой оперативной памяти в
              процентах; 
            {$VFS.FS.PUSED.MAX.CRIT} = 90 — критический порог использования файловой системы в
              процентах.
        Перейдите на вкладку «Триггеры».
        Нажмите на кнопку «Создать триггер» в верхнем правом углу. 
        Заполните следующие параметры:
            Введите имя триггера: «Критическое состояние узла сети {HOST.DNS} с IP-адресом
              {HOST.IP}».
            Заполните поле «Оперативные данные», чтобы отслеживать загруженность процессора
              каждый раз при просмотре проблемы: «Текущая загруженность процессора {ITEM.VALUE} %». 
            Выберите важность «Высокая».
            Заполнение параметров триггера
        Задайте выражение триггера для мониторинга загрузки оперативной памяти. Для этого:
            В разделе «Выражение» нажмите на «Конструктор выражения». 
            Нажмите на кнопку «Изменить» рядом с полем «Выражение» для добавления нового выражения.
                Переход к добавлению выражения
            В открывшемся окне «Условие» заполните следующие параметры: 
                Нажмите на кнопку «Выбрать» рядом с полем «Элемент данных» .
                В открывшемся окне «Выбор элемента данных» выберите «Загрузка памяти в %».
            Из выпадающего списка поля «Функция» выберите значение, при котором будет
              срабатывать триггер: «last() – Последнее (наиболее новое) значение T».
              В поле «За последние (Т) Количество» укажите значение времени для активации
                триггера: 300 секунд.
              В поле «Результат» укажите знак «>» и значение «90», чтобы триггер активировался
                при загрузке памяти больше, чем на 90%.
                  Пример параметров в окне «Условие»
              Нажмите «Вставить».
              Убедитесь, что в поле «Выражение» появился созданный триггер. 
        Задайте выражение триггера для мониторинга загрузки процессора: 
            Нажмите на кнопку «Изменить» рядом с полем «Выражение» для добавления нового
              выражения.
            В открывшемся окне «Условие» заполните параметры для создания следующего
                выражения.
                Создание выражения для элемента данных «Загрузка процессора в %»
            Нажмите на кнопку «Вставить».
            В открывшемся окне «Триггеры» для добавления нового выражения выберите «И». 
        Задайте выражение триггера для мониторинга загрузки файловой системы:
            Нажмите на кнопку «Изменить» рядом с полем «Выражение» для добавления нового
              выражения.
            В открывшемся окне «Условие» заполните параметры для создания следующего выражения.
                Создание выражения для мониторинга загрузки файловой системы
            Нажмите на кнопку «Вставить».
            В открывшемся окне «Триггеры» для добавления нового выражения выберите «И». 
          Протестируйте работу добавленных выражений. Для этого:
            Нажмите на кнопку «Тест» под добавленными выражениями.
            В открывшемся окне в области «Тестовые данные» заполните поле «Значение» для каждого
              выражения. 
            Нажмите на кнопку «Тест».
            В области «Результат» посмотрите, каким будет результат работы триггера для каждого
              выражения при указанных значениях.
            Для выхода из режима тестирования нажмите на кнопку «Отмена» или .
        Настройте следующие параметры:
            «Генерация ОК событий» — выберите «Нет», чтобы триггер можно было вернуть в
              состояние «ОК» только вручную.
            «Режим генерации событий ПРОБЛЕМА» — выберите «Множественный», чтобы сообщение о
              проблеме формировалось каждый раз при активации триггера.
            Установите чекбокс «Разрешить закрывать вручную». 
            В поле «Описание» добавьте дополнительную информацию о триггере и введите контактные
              данные сотрудников, с которыми необходимо связаться в случае активации триггера.
            Убедитесь, что установлен чекбокс «Активировано».
                Завершение создания триггера
        Нажмите на кнопку «Добавить».
|*|*|*|
    Просмотр отчета о доступности триггера
            В разделе  можно узнать, сколько триггер
                находился в состоянии «ОК» или «Проблема» за указанный в фильтре промежуток
                времени.
            Для просмотра отчета о доступности триггера:
                Перейдите на страницу  → .
                Найдите нужный триггер в списке. При необходимости воспользуйтесь фильтрами,
                    для этого: 
                        Перейдите на вкладку «Фильтр».
                        Укажите группу узлов сети или узел сети, для которых работает триггер,
                            в соответствующих полях.
                        Нажмите на кнопку «Применить».
                Укажите период времени, за который нужно посмотреть доступность триггера. Для
                    этого:
                        Перейдите на вкладку с указанием временного промежутка. 
                        Выберите подходящий временной промежуток из списка или укажите его
                            вручную, введя дату и время начала промежутка в поле «От» и дату и время
                            конца промежутка в поле «К».
                        Нажмите на кнопку «Применить». 
                Для просмотра графика с информацией о доступности триггера за текущий год в
                    строке с триггером нажмите на «Показать» в столбце «График».
                    График показывает информацию о доступности триггера. Каждый столбец графика
                        представляет неделю текущего года. Зеленая часть столбца показывает
                        суммарное время, в течение которого триггер был в состоянии «ОК», красная —
                        суммарное время, в течение которого триггер был в состоянии «Проблема». 
                    Данный график всегда отображает значения за календарный год начиная с
                        понедельника. Например, в графике за 2023 год первая неделя будет начинаться
                        с 26.12.2022. Этот шаблон графика применяется ко всем объектам мониторинга
                        вне зависимости от даты их создания и даты развертывания сервера.
                        Пример графика отчета о доступности триггера
|*|*|*|
    Параметры функций
        Большинство числовых функций принимают количество секунд в качестве параметра.
        Можно использовать префикс #, чтобы указать что этот параметр должен иметь другой
            смысл.
            Пример числовой функции и значений ее параметров
                        Вызов функции
                        Значение функции
                        sum(600)
                        Сумма всех значений за 600 секунд
                        sum(#5)
                        Сумма последних 5 значений
        Функция last использует другой смысл для значений, когда начинается с решетки –
            она дает выбрать n-ое предыдущее значение, так, что с учетом значений 3, 7, 2, 6, 5 (от
            наиболее нового до наиболее старого), при last(#2) вернется 7 и при
                last(#5) вернется 5.
        Несколько функций поддерживают дополнительный, второй параметр – сдвиг времени. Этот
            параметр позволят ссылаться на данные из периода времени в прошлом. Например, для
                avg(1h,1d) будет возвращено среднее значение за час днем ранее.
        Можно использовать поддерживаемые суффиксы преобразований в выражениях триггеров,
            например, '5m' (минут) вместо '300' секунд или '1d' (день) вместо '86400' секунд. '1K'
            будет состоять из '1024' байт.
|*|*|*|
    Отключение триггера
            Для отключения триггера:
                Для всех :
                        Перейдите на страницу  → .
                        Нажмите на имя шаблона, для которого нужно отключить триггер.
                        Откроется страница редактирования шаблона.
                        Перейдите на вкладку «Триггеры». 
                        В строке с нужным триггером в столбце «Состояние» нажмите на
                            «Активировано» для изменения статуса на противоположный.
                        Состояние триггера сменится на «Деактивировано».
                Отключенный триггер перестанет срабатывать для всех , использующих измененный шаблон.
                Для одного или нескольких :
                        Перейдите на страницу  → .
                        Нажмите на имя узла сети, для которого нужно отключить триггер.
                        Откроется страница редактирования узла сети.
                        Перейдите на вкладку «Триггеры». 
                        В строке с нужным триггером в столбце «Состояние» нажмите на
                            «Активировано» для изменения статуса на противоположный.
                        Состояние триггера сменится на «Деактивировано».
                Отключенный триггер перестанет срабатывать для измененного узла
                    сети.
|*|*|*|
    Выражения с неподдерживаемыми элементами данных и неизвестными значениями
        Существует подход к неподдерживаемым элементам данных, который допускет неизвестные
            значения при вычислении выражений:
            Функции nodata(), date(),
                    dayofmonth(), dayofweek(),
                    now() и time() вычисляются даже в том случае,
                если ссылаются на неподдерживаемые элементы данных. Значения этих функций не зависят
                от того, поддерживается ли элемент данных или нет.
            Логические выражения с «ИЛИ» («or») и «И» («and») могут быть вычислены независимо от
                неизвестных операндов в двух случаях:
                    1 or Неподдерживаемый_элемент_данных1.некая_функция() or
                            Неподдерживаемый_элемент_данных2.некая_функция() or ... будет
                        вычислена как 1 (Правда).
                    0 and Неподдерживаемый_элемент_данных1.некая_функция() and
                        Неподдерживаемый_элемент_данных2.некая_функция() and … будет вычислена как
                        0 (Ложь).
                 пытается вычислить логические выражения, принимая неподдерживаемые
                элементы данных как «Неизвестные значения». В двух случаях, упомянутых выше, будет
                приниматься известное значение; в остальных случаях значением триггера будет «Неизвестно».
            Если вычисление триггера по поддерживаемому элементу данных приведет к ошибке,
                значением функции будет «Неизвестно», и оно будет частью дальнейшего вычисления
                выражения.
        Обратите внимание на то, что неизвестные значения могут «исчезать» только в логических
            выражениях, описанных выше. В арифметических выражениях неизвестные значения дают
            «Неизвестный» результат (за исключением деления на 0).
        Если выражение триггера с несколькими неподдерживаемыми элементами данных вычисляется,
            как «Неизвестное», сообщение об ошибке в веб-интерфейсе ссылается на последний
            вычисленный неподдерживаемый элемент данных.
|*|*|*|
    Операторы
        Следующие операторы, приведенные в таблице, поддерживаются для триггеров (представлены по убыванию приоритета выполнения).
            Операторы, поддерживаемые для триггеров
                        Приоритет
                        Оператор
                        Определение
                        Заметки понеизвестным значениям
                        1
                        -
                        Унарный минус
                        -Неизвестно → Неизвестно
                        2
                        not
                        Логическое НЕ
                        not Неизвестно → Неизвестно
                        3
                        *
                        Умножение
                            0 * Неизвестно → Неизвестно
                             (да, Неизвестно, не 0 – чтобы не потерять
                            Неизвестно в арифметических операциях)
                            1.2 * Неизвестно → Неизвестно
                        /
                        Деление
                            Неизвестно / 0 → ошибка
                            Неизвестно / 1.2 → Неизвестно
                            0.0 / Неизвестно → Неизвестно
                        4
                        +
                        Арифметический плюс
                        1.2 + Неизвестно → Неизвестно
                        -
                        Арифметический минус
                        1.2 - Неизвестно → Неизвестно
                        5
                        <
                            Менее чем. Этот оператор может быть представлен в виде:
                             A<B ⇔ (A<B-0.000001)
                        1.2 < Неизвестно → Неизвестно
                        <=
                            Менее чем или равно.Этот оператор может быть представлен в виде:
                             A<=B ⇔ (A≤B+0.000001)
                        Неизвестно <= Неизвестно → Неизвестно
                        >
                            Более чем. Этот оператор может быть представлен в виде:
                             A>B ⇔ (A>B+0.000001)
                        >=
                            Более чем или равно. Этот оператор может быть представлен в виде:
                             A>=B ⇔ (A≥B-0.000001)
                        6
                        =
                            Равенство. Этот оператор может быть представлен в виде:
                             A=B ⇔ (A≥B-0.000001) и (A≤B+0.000001)
                        <>
                            Не равно. Этот оператор может быть представлен в виде:
                             A<>B ⇔ (A<B-0.000001) или (A>B+0.000001)
                        7
                        and
                        Логическое И
                            0 and Неизвестно → 0
                            1 and Неизвестно → Неизвестно
                            Неизвестно and Неизвестно → Неизвестно
                        8
                        or
                        Логическое ИЛИ
                            1 or Неизвестно → 1
                             0 or Неизвестно → Неизвестно
                             Неизвестно or Неизвестно → Неизвестно
        Операторы not, and и or регистрозависимы и должны быть в нижнем регистре. Они также
            должны быть окружены символами пробелов или круглыми скобками.
        Все операторы, кроме унарных минусов и «not», имеют ассоциативность слева направо.
            Унарные минусы и «not» не ассоциативны (имеется в виду необходимо использовать -(-1) и
            not (not 1) вместо --1 и not not 1).
        Результат вычисления:
            Операторы <, <=, >, >=, =, <> должны давать '1' в выражении триггера, если указанное соотношение правдиво, и '0',
                если оно ложно. Если по крайней мере один операнд неизвестен, то и результат будет:
                «Неизвестно».
            «and» по известным операндам должен давать '1', если оба из этих операндов сравнения
                не равны '0'; в противном случае, будет давать '0'; для неизвестных операндов «and»
                даст '0', только если один из операндов сравнения равен '0'; в противном случае, он
                даст «Неизвестно».
            «or» по известным операндам должно давать '1', если какой-либо из этих операндов
                сравнения не равен '0'; в противном случае, будет давать '0'; для неизвестных
                операндов or даст '1', только если один из операндов сравнения не равен '0'; в
                противном случае, он даст «Неизвестно».
            Результат логического операнда отрицания «not» для известного операнда равен '0',
                если значение этого операнда сравнения не равно '0'; '1', если значение его операнда
                сравнения равно '0'. Для неизвестных операндов «not» даст «Неизвестно».
|*|*|*|
    Кэширование значений
        Значения, которые требуются для вычисления триггеров, кэшируются  сервером.
            По этой причине такое вычисление триггеров на некоторое время приводит к более высокой
            загрузке базы данных после перезапуска сервера. Кэш значений не очищается, когда
            значения истории элементов данных удаляются (либо вручную, либо при помощи
            автоматической очистки истории), поэтому сервер будет использовать кэшированные значения
            пока они не станут старше, чем периоды времени, которые заданы в функциях триггеров,
            либо пока сервер не будет перезапущен. 
|*|*|*|
    LLD макросы
        На вкладке «LLD макросы» можно указать пользовательские макросы низкоуровневого
            обнаружения (LLD макросы).
            Вкладка «LLD макросы»
        LLD макросы состоят из:
            LLD макросы — имя макроса низкоуровневого обнаружения, используя следующий синтаксис: {#MACRO}.
            JSONPath — путь, используемый для извлечения значения макроса LLD из строки LLD с использованием синтаксиса JSONPath.
        Пользовательские макросы полезны в тех случаях, когда возвращаемый JSON не имеет уже
            определенных макросов, которые необходимы.
        Извлеченные значения могут использоваться в обнаруженных элементах, триггерах и т. д.
            Значения будут извлечены из результата обнаружения и любых шагов предобработки,
            выполненных до этого момента.
|*|*|*|
    Предобработка
        Вкладка «Предобработка» позволяет определить правила преобразования, применяемые к
            результату обнаружения. На этом этапе возможно одно или несколько преобразований.
            Преобразования выполняются в том порядке, в котором они определены. Вся предварительная
            обработка выполняется  сервером.
            Вкладка «Предобработка»
        Если правило обнаружения было применено к хосту через шаблон, то содержимое этой вкладки доступно только для чтения.
        Чтобы настроить детали новой предобработки, нажмите Добавить. После этого раскроются
            поля для настройки новой предобработки.
            Создание новой предобработки
        Чекбокс «Другое при ошибке» позволяет выбрать действие, которое будет выполняться при
            возникновении ошибки:
            Отбросить значение.
            Задать значение в значение.
            Задать ошибку в сообщение об ошибке.
            Параметры предварительной обработки значений элементов данных
                        Группа преобразований
                        Преобразование
                        Параметры и описание
                        Текст
                        Регулярное выражение
                                шаблон — введите регулярное выражение;
                                вывод — введите значение, на которое нужно
                                    заменить то, что совпало с регулярным выражением в поле
                                        шаблон.  
                        Замена
                                строка поиска — введите регистрозависимую
                                    строку, которую нужно найти в значении.
                                замена — введите регистрозависимую строку, на
                                    которую нужно заменить найденную строку.  Строка замены может
                                    быть пустой.
                            Замена действует для всех найденных строк.
                            В значениях полей строка поиска и
                                    замена можно использовать следующие специальные
                                    символы:
                                    \n — разрыв строки;
                                    \r — возврат каретки;
                                    \t — табуляция;
                                    \s — пробел;
                                    \\ — символ «\».
                        Составные данные
                        XML XPath
                            XPath — запрос XPath, который позволяет извлечь
                                значение или фрагмент из XML данных.
                                    Примеры применения запросов XPath к данным XML
                                                XPath
                                                XML
                                                Результат
                                                number(/document/item/value)
                                                <document><item><value>10</value></item></document>
                                                10
                                                number(/document/item/@attribute)
                                                <document><item
                                                  attribute="10"></item></document>
                                                10
                                                /document/item
                                                <document><item><value>10</value></item></document>
                                                <item><value>10</value></item>
                                 Пространства имен не поддерживаются.
                        JSONPath
                            $.путь.к.ноде — запрос JSONPath который позволяет
                                извлечь значение или фрагмент из данных .
                                    Примеры применения запр|*|*|*|осов JSONPath к данным
                                        JSON
                                                JSONPath
                                                JSON
                                                Результат
                                                $.document.item.value
                                                {"document":{"item":{"value":
                                                  10}}}
                                                10
                                                $.document.item
                                                {"document":{"item":{"value":
                                                  10}}}
                                                {"value": 10}
                                                $['a
                                                  document'].item.value
                                                {"a document":{"item":{"value":
                                                  10}}}
                                                10
                                                $.document.items[1].value
                                                {"document":{"items":[{"value": 10},
                                                  {"value": 20}]}}
                                                20
                            Поддерживаются только прямые пути к одиночным
                                объектам. В JSONPath в обозначении с точкой
                                    ($.a.b.c) можно использовать только буквы,
                                цифры и символ подчеркивания. Если имя объекта  содержит другие символы, необходимо использовать обозначение с
                                квадратной скобкой ($['a']['b']['c']). Допускается
                                смешивание обозначений ($.a['b'].c).Извлечение
                                    нескольких значений не поддерживается.
                        CSV в 
                        Данные файла CSV конвертируются в формат .
                        Пользовательские скрипты
                        JavaScript
                        При выборе этой опции предобработка выполняется с помощью вызова
                            функции JavaScript с одним параметром «value» и заданным пользователем
                            телом функции. Результатом шага предобработки является значение, которое
                            возвращает функция.
                        Валидация
                        Не совпадает с регулярным выражением
                        Введите  регулярное выражение, которому значение элемента данных не
                            должно соответствовать.
                        Проверка на ошибку в 
                        Проверяется, нет ли сообщения об ошибке на уровне
                            приложения в
                            JSONpath.
                        Проверка на ошибку в XML
                        Проверяется, нет ли сообщения об ошибке на уровне
                            приложения в
                            xpath.
                        Троттлинг
                        Отбрасывать не изменившееся с периодическим контролем
                        При выборе это опции полученное значение элемента данных будет
                            отброшено, если оно не изменилось в течение определенного периода.
                            Поддерживаются суффиксы времени (s, m,
                                h, d, w,
                                M, y), а также пользовательские
                            макросы и макросы низкоуровневого обнаружения. Отброшенные значения
                            элементов данных не сохраняются в базе данных, не отображаются на
                            графиках, на основе этих значений не создаются триггеры.
                        Prometheus
                        Prometheus в 
                        Преобразование метрик Prometheus в .
|*|*|*|
    Параметры правила обнаружения
        При переходе в  →  → колонка «Обнаружение» выбранного шаблона открывается
            окно «Правила обнаружения». При нажатии кнопки «Создать правило обнаружения» в верхнем
            правом углу экрана открывается форма создания правила обнаружения.
        Форма создания правила обнаружения содержит пять вкладок:
            Правило обнаружения — позволяет установить основные параметры для создания
                правила обнаружения.
            Предобработка — позволяет настроить предварительную обработку обнаруженных
                данных.
            LLD макросы — позволяет настроить извлечение значений макросов для
                использования в обнаруженных элементах, триггерах и т. д.
            Фильтры — позволяет настроить фильтрацию обнаруженных значений.
            Замещения — позволяет настроить изменения списка прототипов элементов
                данных, триггеров, графиков и узлов сети или их атрибутов для ситуаций, когда
                обнаруженный объект соответствует заданным критериям.
            Вкладки «Правила обнаружения»
        В этом разделе:
|*|*|*|
    Создание правила обнаружения
                Для создания правила обнаружения в веб-интерфейсе  необходимо выполнить следующее::
                    Перейдите на страницу  → .
                    Нажмите на «Обнаружение» в строке с соответствующим шаблоном.
                Откроется страница «Правила обнаружения».
                        Страница «Правила обнаружения»
                    Нажмите «Создать правило обнаружения» в верхнем правом углу экрана.
                    Откроется окно «Правила обнаружения» для создания правила.
                        Окно создания нового правила обнаружения
                Заполните параметры правила обнаружения на вкладке «Правило обнаружения»:
                        Вкладка «Правило обнаружения» содержит общие атрибуты правила
                            обнаружения. Подробнее см. в разделе .
                        Имя.
                        Тип.
                        Ключ — введите ключ элемента обнаружения (до 2048 символов).
                        Интервал обновления — Это поле задает, как часто сервер выполняет
                            обнаружение.
                        Пользовательские интервалы — позволяет создавать интервалы обновления с
                            другой частотой обновления и пользовательские расписания проверок.
                        Период сохранения потерянных ресурсов — это поле указывает, как много
                            дней обнаруженный объект будет храниться после получения состояния «Не
                            обнаруживается более» (мин 1 час, макс 25 лет).
                        Описание.
                        Активировано — установите чекбокс для обработки правила.
                    При необходимости настройки правил преобразования полученных значений перейдите на вкладку «Предобработка».
                        Вкладка «Предобработка» позволяет определить правила преобразования, применяемые к результату обнаружения. На этом этапе возможно одно или несколько преобразований. Преобразования выполняются в том порядке, в котором они определены. Вся предварительная обработка выполняется  сервером.
                    Для добавления нового преобразования нажмите на кнопку Добавить. Подробнее о преобразованиях см. в разделе :
                            В появившихся полях выберите преобразование и укажите его параметры.
                            Чтобы настроить обработку ошибок, установите чекбокс «Другое при ошибке» и выберите действие, которое будет выполняться при возникновении ошибки.
                        Вкладка «Предобработка»
                    При необходимости добавления пользовательских макросов низкоуровневого обнаружения перейдите на вкладку «LLD макросы»:
                        Подробнее о LLD макросах см. в разделе .
                            Введите макрос в поле «LLD макрос», используя синтаксис {#MACRO}.
                            Введите путь для извлечения значения макроса LLD из строки LLD с использованием синтаксиса JSONP в поле «JSONPath».
                        Вкладка «LLD макросы»
                    При необходимости добавления фильтрации правила обнаружения перейдите на вкладку «Фильтры»:
                        Подробнее о фильтрах см. в разделе .
                            Введите макрос в поле «Макрос».
                            Введите регулярное выражение в поле «Регулярное выражение».
                            Выберите в выпадающем списке, должен ли макрос соответствовать указанному регулярному выражению.
                        Вкладка «Фильтры»
                    Если добавлено несколько фильтров, можно выбрать тип вычисления:
                            И.
                            Или.
                            И/Или — используется И для разных имен макросов и Или с одинаковым именем макроса.
                            Пользовательское выражение — появляется возможность указать пользовательское вычисление фильтров. Формула должна включать в себя все фильтры из списка. Ограничено 255 символами.
                        Выбор типа вычисления
                    При необходимости настройки правил изменения списка прототипов или их атрибутов для обнаруженных объектов, соответствующих заданным критериям, перейдите на вкладку «Замещения».
                        Замещения отображаются и выполняются в том порядке, в котором они определены. При необходимости этот порядок можно изменить, перетаскивая строчки из списка с помощью мышки. Подробнее о замещениях см. в разделе .
                            Вкладка «Замещения»
                    Для добавления нового замещения нажмите на кнопку Добавить.
                    Откроется окно настройки нового замещения.
                        Окно настройки нового замещения
                    Заполните параметры замещения:
                            Имя.
                            При соответствии фильтру — Следует ли обрабатывать следующие замещения при выполнении условий фильтра.
                            Фильтры — определяют, к каким обнаруженным объектам следует применить замещение. Фильтры замещения обрабатываются после фильтров правила обнаружения и имеют ту же функциональность.
                            Операции — позволяет выбрать тип прототипа, условие и действие при выполнении условия. Для добавления новой операции нажмите на кнопку Добавить.
                            Откроется окно настройки новой операции.
                                Окно «Новая операция»
                    Заполните параметры операции:
                            Объект — позволяет выбрать тип прототипа (элемент данных, триггер, график, узел сети).
                            Условие — позволяет фильтровать объекты, к которым должна применяться операция.
                            Остальные параметры меняются в зависимости от выбранного прототипа, подробнее см. в разделе .
                    Нажмите кнопку «Добавить» для добавления операции.
                    Нажмите кнопку «Добавить» для добавления замещения.
                    Нажмите кнопку «Добавить» для создания правила обнаружения.
|*|*|*|
    Правило обнаружения
        Вкладка «Правило обнаружения» содержит общие атрибуты правила обнаружения:
            Имя — имя правила обнаружения.
            Тип — тип проверки выполняемого обнаружения.
            Ключ — это ключ элемента обнаружения, можно указать до 2048 символов.
            Интервал обновления — это поле задает, как часто сервер выполняет обнаружение. Если
                указать значение 0, элемент данных не будет обрабатываться. Однако, если существует
                переменный интервал с ненулевым значением, элемент данных будет обрабатываться в
                течении действия переменного интервала.
            Пользовательские интервалы — позволяют создавать правила проверки элемента данных
                двух типов:
                    Переменный — создание исключений из «Интервала обновления» (интервал с
                        другой частотой обновления).
                    По расписанию — создание пользовательского расписания проверки.
            Период сохранения потерянных ресурсов — это поле указывает, как много дней
                обнаруженный объект будет храниться (не будет удален) после того, как его состояние
                обнаружения станет «Не обнаруживается более» (мин 1 час, макс 25 лет).
                    Если значение равно 0, объекты будут удалены сразу. Использование значения 0 не
                    рекомендуется, так как простое ошибочное изменение фильтра может закончится тем,
                    что объект будет удален вместе со всеми данными истории.
            Описание — при необходимости можно описать правило обнаружения.
            Активировано — если чекбокс установлен, правило будет обрабатываться.
            Вкладка «Правило обнаружения»
|*|*|*|
    Низкоуровневое обнаружение
        Низкоуровневое обнаружение (LLD) позволяет автоматически создавать элементы данных, триггеры и
            графики для различных объектов на компьютере. Таким образом, можно автоматически начать
            мониторить файловые системы или настроить удаление ненужных объектов, основываясь
            результатах периодически выполняемого обнаружения.
        Сначала пользователь создает правило обнаружения в  →  → колонка
            «Обнаружение» выбранного шаблона. Правило обнаружения состоит из элемента данных, ключ
            которого выявляет необходимые объекты (например, файловые системы или сетевые
            интерфейсы) и прототипы элементов данных, триггеров и графиков, которые должны быть
            созданы на основании полученных значений этого элемента данных.
            Страница «Шаблоны»
        Элемент данных, который осуществляет обнаружение необходимых объектов, подобен обычным
            элементам данных: сервер запрашивает у агента значение этого элемента данных, и агент
            отвечает текстовым значением. Разница в том, что значение содержит список из пар:
            «макрос → значение».
        Когда сервер получает значение элемента данных обнаружения, он смотрит на пару «макрос → значение» и для каждой пары создает реальные элементы данных, триггеров и графиков,
            основанных на их прототипах.
        Обнаруженные объекты
        Представленные снимки экрана ниже иллюстрируют, как выглядят уже обнаруженные элементы
            данных, триггеры и графики в настройке узла сети. Обнаруженные объекты имеют префикс
            ссылку оранжевого цвета, которая ведет к правилу обнаружения, создавшего эти
            объекты.
            Обнаруженные объекты на вкладке «Элементы данных»
        Обнаруженные объекты не будут созданы в случае, если объекты с такими же условиями
            уникальности уже существуют, например, элемент данных с таким же ключом или график с
            таким же именем.
        Элементы данных, триггеры и графики, созданные с помощью низкоуровневого правила
            обнаружения, невозможно удалить вручную. Тем не менее, они будут удалены автоматически,
            если обнаруженный объект (файловая система, интерфейс и т.д.) более не обнаруживается
            (или более не попадает под фильтр). В этом случае они будут удалены спустя некоторое
            количество дней, указанное в поле «Период сохранения потерянных ресурсов».
        Когда обнаруженный объект приобретает статус «Более не обнаруживается», в списке
            элементов данных будет отображаться оранжевый индикатор времени жизни. Переместите
            курсор мыши на этот индикатор, и вы увидите сообщение с количеством дней до момента
            удаления элемента данных.
            Информация об удалении элемента
        Если объекты помечены на удаление, но не были удалены в назначенное время (деактивировано
            правило обнаружения или элемент данных узла сети), они удалятся при следующем выполнении
            правила обнаружения.
        Объекты, содержащие другие объекты, помеченные на удаление, не будут обновлены, если
            будут изменены на уровне правила обнаружения. Например, триггеры на основе LLD не будут
            обновлены, если они содержат элементы данных, которые помечены на удаление.
        В этом разделе:
|*|*|*|
    Замещения
        Вкладка «Замещения» позволяет устанавливать правила для изменения списка прототипов
            элементов данных, триггеров, графиков и узлов сети или их атрибутов, если обнаруженный
            объект соответствует заданным критериям.
            Вкладка «Замещения»
        Замещения отображаются и выполняются в том порядке, в котором они определены. При
            необходимости этот порядок можно изменить, перетаскивая строчки из списка с помощью
            мышки.
        Чтобы настроить детали нового замещения, нажмите Добавить. Чтобы изменить существующее
            замещение, нажмите на его название. Откроется всплывающее окно, позволяющее
            редактировать заданные настройки.
            Окно настройки нового замещения
        Параметры замещения:
            Имя — уникальное (для каждого правила низкоуровневого обнаружения) имя
                замещения.
            При соответствии фильтру — следует ли обрабатывать следующие замещения при
                выполнении условий фильтра:
                    Продолжить замещения — будут обработаны последующие замещения.
                    Остановить обработку — будут выполнены предшествующие операции (если есть),
                        и текущее замещение, последующие замещения будут проигнорированы.
            Фильтры — определяет, к каким обнаруженным объектам следует применить замещение.
                Фильтры замещения обрабатываются после фильтров правила обнаружения и имеют ту же
                функциональность.
            Операции — позволяет выбрать тип прототипа, условие и действие при выполнении
                условия.
        Настройка операций
        Чтобы настроить детали новой операции, нажмите Добавить в блоке операций. Чтобы
            редактировать существующую операцию, нажмите Изменить рядом с операцией. Откроется
            всплывающее окно, в котором вы можете редактировать детали операции.
            Окно «Новая операция»
        Доступны четыре типа объектов:
            прототип элемента данных;
            прототип триггеров;
            прототип графиков;
            прототип узлов сети.
        Условие позволяет фильтровать объекты, к которым должна применяться операция.
            Поддерживаются следующие опции:
            Равно — применить к этому прототипу.
            Не равно — применить ко всем прототипам, кроме этого.
            Содержит — имя прототипа содержит этот шаблон.
            Не содержит — имя прототипа не содержит этот шаблон.
            Совпадает — имя прототипа совпадает с этим шаблоном.
        Поле «Шаблон» используется для указания имени элемента, триггера, графика или хоста в
            зависимости от выбранного объекта.
        При создании операции с прототипом элемента данных доступны следующие параметры:
            Создать активированным — установка чекбокса позволяет переопределить исходные
                параметры объекта:
                    Да — объект будет добавлен в активированном состоянии.
                    Нет — объект будет добавлен к обнаруженному объекту, но в деактивированном
                        состоянии.
            Обнаружить — установка чекбокса позволяет переопределить настройки прототипа
                исходного объекта:
                    Да — объект будет добавлен.
                    Нет — объект не будет добавлен.
            Интервал обновления — установка чекбокса позволяет изменить интервал обновления для
                элемента данных:
                    Задержка — интервал обновления элемента данных. Поддерживаются
                        пользовательские макросы и суффиксы времени (например, 30s, 1m, 2h, 1d).
                        Должен быть равен 0, если используются «Пользовательские интервалы».
                    Пользовательские и|*|*|*|нтервалы — нажмите кнопку Добавить, чтобы указать
                        переменный интервал или интервал по расписанию.
            Период хранения истории — установка чекбокса позволяет установить период хранения
                истории для элемента данных:
                    Не хранить историю — данные не будут сохраняться.
                    Период хранения — указывается в открывшемся справа поле ввода.
                        Поддерживаются пользовательские макросы и макросы низкоуровневого
                        обнаружения.
            Период хранения динамики изменений — установка чекбокса позволяет указать период
                хранения динамики изменений для элемента данных:
                    Не хранить динамику изменений — данные не будут сохраняться.
                    Период хранения — указывается в открывшемся справа поле ввода.
                        Поддерживаются пользовательские макросы и макросы низкоуровневого
                        обнаружения.
            В качестве объекта выбран прототип элемента данных
        При создании операции с прототипом триггеров доступны следующие параметры:
            Создать активированным — установка чекбокса позволяет переопределить исходные
                параметры объекта:
                    Да — объект будет добавлен в активированном состоянии.
                    Нет — объект будет добавлен к обнаруженному объекту, но в деактивированном
                        состоянии.
            Обнаружить — установка чекбокса позволяет переопределить настройки прототипа
                исходного объекта:
                    Да — объект будет добавлен.
                    Нет — объект не будет добавлен.
            Важность — установка чекбокса позволяет изменить важность триггера.
            Теги — установка чекбокса позволяет указать пары тег-значение. Все теги прототипа
                триггера будут заменены тегами из этого переопределения.
            В качестве объекта выбран прототип триггеров
        При создании операции с прототипом графиков доступен параметр «Обнаружить». Установка
            чекбокса «Обнаружить» позволяет переопределить исходные настройки прототипа
            графиков:
            Да — график будет добавлен.
            Нет — график не будет добавлен.
            В качестве объекта выбран прототип графиков
        При создании операции с прототипом узлов сети доступны следующие параметры:
            Создать активированным — установка чекбокса позволяет переопределить исходные
                параметры объекта:
                    Да — объект будет добавлен в активированном состоянии.
                    Нет — объект будет добавлен к обнаруженному объекту, но в деактивированном
                        состоянии.
            Обнаружить — установка чекбокса позволяет переопределить настройки прототипа
                исходного объекта:
                    Да — объект будет добавлен.
                    Нет — объект не будет добавлен.
            Присоединить шаблоны — при установке чекбокса справа открывается поле для ввода
                имени шаблона, и кнопка «Выбрать», так же позволяющая указать нужные шаблоны. Все
                шаблоны, связанные с прототипом узлов сети, будут заменены шаблонами из этого
                замещения.
            Инвентарные данные узла сети — установка чекбокса позволяет выбрать другой режим
                заполнения инвентарных данных для прототипа узла сети:
                    Деактивировано — не заполнять инвентарные данные узла сети.
                    Вручную — возможность предоставить данные вручную.
                    Автоматически — автоматически заполнять данные инвентаризации узла сети на
                        основе собранных метрик.
            В качестве объекта выбран прототип узлов сети
|*|*|*|
    Фильтры
        Вкладка «Фильтры» содержит определения фильтрации правила обнаружения:
            Тип вычисления — доступны следующие опции расчета фильтров: 
                    И — должны выполниться все фильтры.
                    Или — достаточно выполнения одного фильтра.
                    И/Или — используется И для разных имен макросов и Или с
                        одинаковым именем макроса.
                    Пользовательское выражение — появляется возможность указать пользовательское
                        вычисление фильтров. Формула должна включать в себя все фильтры из списка.
                        Ограничено 255 символами.
            Фильтры — фильтр можно использовать только для генерирования реальных элементов
                данных, триггеров и графиков конкретных файловых систем. Если какой-то макрос из
                фильтра отсутствует в ответе, найденный объект будет проигнорирован. Две опции
                выпадающего меню в фильтре позволяют выбрать, должен ли макрос соответствовать
                указанному регулярному выражению или наоборот, не соответствовать ему.
            Вкладка «Фильтры»
        Ошибка или опечатка в регулярном выражении, которое используется в правиле
                низкоуровневого обнаружения, может привести к удалению элементов конфигурации,
                данных истории и событий на большом количестве узлов сети.
|*|*|*|
    Управление узлами сети
        В  можно редактировать или удалять узлы сети, настраивать их инвентарные
            данные.
        В этом разделе:
|*|*|*|
    Массовое обновление узлов сети
            Для обновления сразу нескольких узлов сети:
                Перейдите на страницу  → . 
                В списке узлов сети установите чекбоксы рядом с теми узлами, которые необходимо
                    обновить.
                Нажмите на кнопку «Массовое обновление» внизу страницы.
                Для обновления параметров узла сети: 
                        Установите чекбоксы рядом с теми параметрами, которые нужно
                            изменить.
                        Измените выбранные параметры:
                                Группы узлов сети;
                                Описание;
                                Прокси;
                                Состояние.
                        Для изменения группы сети:
                                Выберите одно из действий:
                                        Добавить — добавить узлы сети в указанные группы;
                                        Замена — удалить узлы сети из имеющихся групп и добавить
                                            их в выбранные группы;
                                        Удалить — удалить узлы сети из выбранных групп.
                                Выберите группы,  для которых будет выполняться указанное выше
                                    действие.
                        Вкладка «Узлы сети»
                Для обновления шаблонов:
                        Перейдите на вкладку «Шаблоны».
                        Установите чекбокс «Присоединить шаблоны».
                        Выберите одну из опций:
                                Связь — для присоединения новых шаблонов;
                                Замена — для замены ранее соединенных с узлами сети шаблонов на
                                    новые;
                                Отсоединить — для отсоединения указанных шаблонов.
                        Выберите шаблоны, для которых будет выполняться указанное выше
                            действие.
                        Чтобы не только отсоединить ранее присоединенные шаблоны, но и удалить
                            все унаследованные от них элементы (элементы данных, триггеры, и т.д.),
                            установите чекбокс «Очистить при отсоединении».
                        Вкладка «Шаблоны»
                Для настройки IPMI: 
                        Перейдите на вкладку «IPMI».
                        Установите чекбоксы рядом с теми параметрами, которые нужно
                            изменить.
                        Измените значения параметров:
                                Алгоритм аутентификации;
                                Уровень привилегий;
                                Имя пользователя;
                                Пароль.
                        Вкладка «IPMI»
                Для изменения тегов: 
                        Перейдите на вкладку «Теги».
                        Установите чекбоксы рядом с параметром «Теги».
                        Выберите одну из опций:
                                Добавить — добавить новые теги;
                                Замена — удалить имеющиеся теги и добавить новые;
                                Удалить — удалить указанные теги.
                        Введите имя и значение тега.
                        Нажмите на кнопку «Добавить».
                        Вкладка «Теги»
                Для изменения макросов:
                        Перейдите на вкладку «Макросы».
                        Установите чекбокс «Макросы».
                        Выберите одну из опций:
                                Добавить — задать дополнительные пользовательские макросы для
                                    узлов сети. Если установить чекбокс  «Обновить существующее», то
                                    если макрос с указанным именем уже существует на узле сети,
                                    значение, тип и описание указанного имени макроса будут
                                    обновлены. Если чекбокс не установлен, то макрос не будет
                                    обновлен.
                                Обновить — заменить значения, типы и описание указанных в списке
                                    макросов. Если установить чекбокс «Добавить отсутствующее», то
                                    макрос, который ранее не существовал на узле сети, будет
                                    добавлен как новый макрос. Если чекбокс не установлен, будут
                                    обновлены только те макросы, которые уже существуют на узле
                                    сети.
                                Удалить — удалить с узлов сети указанные макросы. Если
                                    установлен чекбокс «Исключая выбранные», тогда будут удалены все
                                    макросы, за исключением выбранных в списке. Если чекбокс не
                                    установлен, то будут удалены только указанные в списке
                                    макросы.
                                Удалить все — удалить все пользовательские макросы с узлов сети.
                                    Если не установлен чекбокс «Я подтверждаю удаление всех
                                    макросов», потребуется подтвердить удаление в новом всплывающем
                                    окне.
                                Вкладка «Макросы»
                Для изменения инвентарных данных:
                        Перейдите на вкладку «Инвентаризация».
                        Установите чекбоксы рядом с данными, которые нужно обновить, и
                            установите новые значения.
                        Вкладка «Инвентаризация»
                Для настройки шифрования: 
                        Перейдите на вкладку «Шифрование».
                        Установите чекбокс «Соединения».
                        Выберите способ подключения к узлу сети:
                                Без шифрования;
                                PSK;
                                Сертификат.
                        Выберите один или несколько способов соединения с узлом сети:
                                Без шифрования;
                                PSK;
                                Сертификат.
                        Если ранее был выбран способ подключения или соединения «PSK»,
                            заполните поля «Идентификатор PSK» и «PSK». 
                        Если ранее был выбран способ подключения или соединения «Сертификат»,
                            заполните поля «Издатель» и «Субъект». 
                        Вкладка «Шифрование»
                Нажмите на кнопку «Обновить» для сохранения изменений.
|*|*|*|
    Объекты мониторинга. Узлы сети
        Чтобы отслеживать изменения параметров устройства с помощью , нужно добавить это устройство как узел сети ().
        В  данные с одного  можно
            получать, используя одновременно только один тип интерфейса — агент, ,  или . Если необходимо наблюдать за одним и тем же  одновременно разными способами, следует создать два
                 с разными типами интерфейса. 
        В  доступны следующие способы добавления :
                 — автоматическое обнаружение объектов мониторинга путем сканирования
                    диапазона IP-адресов, указанного в правилах сетевого обнаружения.
                 — получение объектов мониторинга из
                    DATAPK, подключенного к . Доступны два вида
                    синхронизации с DATAPK:
                        Однократная — объектов
                                мониторинга будут получены из DATAPK один раз.
                        Автоматическая — 
                            будет регулярно получать список объектов мониторинга из DATAPK по указанному
                            расписанию.
                 — импорт списка  из файла. Такие файлы могут быть получены в
                    результате экспорта объектов мониторинга
                    с другого .
                 — добавление объектов мониторинга в веб-интерфейсе  с указанием имени, группы узлов сети, типа
                    интерфейса для сбора данных, IP-адреса, порта и других параметров.
            Для корректного сбора данных перед добавлением узла сети необходимо
                установить агента на этот узел сети либо настроить узел сети для безагентного сбора.
                Подробнее см. в разделах  и .
        К узлам сети обычно присоединены шаблоны. Для корректной работы некоторых шаблонов
            требуются дополнительные настройки . Подробнее см. в разделе .
        В этом разделе:
|*|*|*|
    Создание узлов сети вручную
        Чтобы создать новый узел сети:
                Заполните следующие параметры:
                        Имя узла сети — сетевое имя объекта мониторинга.
                        Видимое имя — имя объекта мониторинга, которое отображается в
                            интерфейсе .
                        Группы — принадлежность объекта мониторинга к группе.
                        Интерфейсы — сетевые интерфейсы объекта мониторинга. Для выбора
                            интерфейса:
                                Нажмите на кнопку «Добавить».
                                В выпадающем списке выберите тип интерфейса.
                                        Выбор типа интерфейса
                                Независимо от выбранного типа интерфейса заполните следующие
                                        параметры:
                                        IP-адрес;
                                        DNS-имя;
                                        Способ подключения (через IP или DNS);
                                        Порт.
                                Если выбран тип «SNMP», дополнительно заполните следующие
                                        параметры:
                                        Версия SNMP;
                                        Для версий SNMPv2 и SNMPv1 укажите SNMP community;
                                        Для версии SNMPv3 укажите:
                                                Имя контекста — имя для определения элемента
                                                  данных в SNMP-подсети;
                                                Имя безопасности — наименование учетной записи
                                                  для доступа по SNMPv3
                                                Уровень безопасности:
                                                  noAuthNoPriv — ни аутентификация, ни
                                                  протокол безопасности не используются.
                                                  AuthNoPriv — используется протокол
                                                  аутентификации, протокол безопасности нет. Для
                                                  этого уровня безопасности необходимо выбрать
                                                  протокол аутентификации и задать пароль
                                                  аутентификации. 
                                                  AuthPriv — используются и протокол
                                                  аутентификации, и протокол безопасности. Для этого
                                                  уровня безопасности необходимо выбрать протокол
                                                  аутентификации и задать пароль аутентификации, а
                                                  также выбрать протокол безопасности и ключевую
                                                  фразу безопасности.
                                        Чтобы отменить запрос всех элементов данных SNMP
                                            одновременно, снимите чекбокс «Использовать массовые
                                            запросы».
                        Описание.
                        Наблюдение через прокси — включение или отключение использования
                            прокси. Если  расположен в
                            сети уровня , то необходимо выбрать в
                            выпадающем списке соответствующий сервер , расположенный в той же сети
                                .
                        Активировано — режим мониторинга .
                Перейдите на вкладку «Шаблоны» и добавьте подходящий шаблон для сбора данных.
                Убедитесь в работоспособности мониторинга подключенного : 
                        Убедитесь в сетевой доступности : 
                                Перейдите на страницу  → . 
                                Нажмите на подключенный .
                                Выберите в контекстном меню скрипт ping.
                        Откроется окно с результатом команды ping.
                        Убедитесь в получении параметров функционирования подключенного
                                :
                                На странице  → 
                                    нажмите на подключенный .
                                Выберите в контекстном меню пункт «Последние данные».
                        Откроется страница «Последние данные» с таблицей, содержащей
                            список параметров функционирования  с указанием времени последней проверки
                            и полученного результата. По ссылке «График» можно просмотреть значения
                            контролируемого параметра в виде графика.
                    Индикаторы статуса доступности объекта мониторинга в столбце «Доступность»
                        на странице «Узлы сети» при
                        мониторинге по  не будут менять цвет. 
|*|*|*|
    Автоматическое обнаружение узлов сети
             осуществляет автоматическое обнаружение объектов мониторинга путем сканирования
                диапазона IP-адресов, указанного в правилах сетевого обнаружения. Доступна настройка
                расписания сканирования для каждого правила обнаружения. Подробнее см. в разделе
                    . 
            Каждое правило обнаружения имеет заданный набор проверок, которые будут выполняться
                по диапазону IP-адресов. Доступны следующие проверки: , , , , , , , , , , , Zabbix agent, v1 agent,  agent,  agent,  ping.
            Проверки обрабатываются независимо друг от друга. Если какие-либо проверки не находят
                сервис или завершаются с ошибкой, то другие проверки все равно выполняются.
            В результате проверки каждого узла сети и сервиса генерируется событие обнаружения.
                Типы событий представлены в таблице . 
                Типы событий обнаружения узлов сети и состояния сервисов
                            Событие
                            Описание проверки сервиса
                            Сервис обнаружен
                            Сервис доступен после того, как был недоступен, либо сервис
                                обнаружен первый раз
                            Сервис доступен
                                Текущий статус сервиса: доступен
                                Предыдущий статус: доступен
                            Сервис потерян
                            Текущий статус сервиса: недоступенПредыдущий статус:
                                    доступен
                            Сервис недоступен
                                Текущий статус сервиса: недоступен
                                Предыдущий статус: недоступен
                            Узел сети обнаружен
                                Текущий статус: хотя бы один сервис на узле сети доступен
                                Предыдущий статус: все сервисы узла сети недоступны
                            Узел сети доступен
                                Текущий статус: хотя бы один сервис на узле сети доступен
                                Предыдущий статус: хотя бы один сервис на узле сети доступен
                            Узел сети потерян
                                Текущий статус: хотя бы один сервис на узле сети доступен
                                Предыдущий статус: все сервисы на узле сети недоступны
                            Узел сети недоступен
                                Предыдущий статус: все сервисы на узле сети недоступны
                                Текущий статус: все сервисы на узле сети недоступны
            Создание интерфейсов при добавлении узлов сети
            При автоматическом добавлении узлов сети им будут присвоены интерфейсы в соответствии
                со следующими правилами:
                Если обнаружен сервис, то будет создан соответствующий интерфейс. Например,
                        если проверка на обнаружение сервиса  прошла успешно, то будет создан -интерфейс.
                Если узел сети отвечает и на запросы агента, и на запросы , будут созданы интерфейсы обоих типов.
                Если критерием уникальности — проверка «Zabbix агент» или « агент», первый найденный интерфейс, который будет создан для узла сети, будет
                    интерфейсом по умолчанию. Другие IP-адреса добавляются дополнительными
                    интерфейсами.
                Если узел сети отвечает только на проверки агентов, для него будет создан только
                    агентский интерфейс. Если в дальнейшем узел сети начнет отвечать на , дополнительно будет создан -интерфейс.
                Если 3 различных узла сети были обнаружены по критерию уникальности «IP», а
                    затем критерий уникальности в правиле обнаружения изменили на другой и при этом
                    результат нового критерия уникальности одинаковый для узлов сети A, B и C, то B
                    и C будут созданы, как дополнительные интерфейсы к первому узлу сети А.
                    Доступность IP-адресов B и C не будет проверяться. На странице  →  в колонке «Обнаруженное
                    устройство» будут отображаться все добавленные интерфейсы A, B и C, а в колонке
                    «Наблюдаемый узел сети» — только первый созданный узел сети A. 
            Действия обнаружения
            На основе событий обнаружения можно создать соответствующие действия, такие как:
                отправить сообщение;
                удаленная команда;
                добавить узел сети;
                удалить узел сети;
                добавить в группу узлов сети;
                удалить из группы узлов сети;
                присоединить к шаблону;
                отсоединить от шаблона;
                активировать узел сети;
                деактивировать узел сети;
                установить режим инвентарных данных узлов сети.
            Настройка действий, которые будут выполняться в соответствии с каждым событием,
                описана в разделе .
|*|*|*|
    Настройка действий обнаружения и авторегистрации
    На основе событий обнаружения можно создать соответствующие действия. Действия
        обнаружения и авторегистрации позволяют задать операции, которые выполняются при
        соответствии узла сети заданному условию. Действия позволяют настроить автоматическое
        добавление обнаруженного узла сети в группу, присоединение к шаблону, активацию узла сети.
        Полный список действий см. в разделе Действия
            обнаружения.
            Для настройки действий:
                Перейдите на страницу  → .
                Выберите «Действия обнаружения» или «Действия авторегистрации» в выпадающем
                    списке в верхнем левом углу.
                Нажмите на кнопку «Создать действие» в верхнем правом углу.
                Откроется страница «Действия». 
                        Страница «Действия»
                Введите название действия в поле «имя».
                Добавьте условие, при котором будет выполняться действие. Для этого:
                        Нажмите на кнопку «Добавить» в области «Условия».
                        Откроется окно «Новое условие». 
                                Окно «Новое условие»
                        Задайте параметры условия.
                        Нажмите на кнопку «Добавить».
                Установите чекбокс «Активировано».
                Задайте действие, которое будет выполняться при соблюдении заданного условия.
                    Для этого:
                        Перейдите на вкладку «Операции».
                        Нажмите на кнопку «Добавить» в области «Операции».
                        Откроется окно «Детали операции».
                                Окно «Детали операции»
                        Выберите тип операции — действие, которое будет выполняться при
                            соблюдении заданного условия.
                        При необходимости задайте другие параметры, которые зависят от типа
                            операции. 
                Нажмите «Добавить».
            Узел сети добавляется, даже если операция «Добавить узел сети» пропущена, если
                выбраны операции, приводящие к действиям над узлом сети, например:
                активация узла сети;
                деактивация узла сети;
                добавление узла сети в группу узлов сети;
                присоединение шаблона к узлу сети.
            При добавлении узлов сети имя узла сети является результатом обратного преобразования DNS или IP
                адреса в случае, если обратное преобразование неудачно. Преобразование выполняется
                на стороне  сервера или , в зависимости от того, кто выполняет
                обнаружение. Если преобразование неудачно на прокси, оно не повторяется на стороне
                сервера. Если узел сети с таким же именем уже существует, следующий узел сети
                получит приставку к имени _2, затем _3 и так далее.Созданные узлы сети добавляются по умолчанию в группу «Обнаруженные хосты». Данную настройку
                можно изменить в разделе боковой панели «Администрирование» → «Общие» при выборе
                вкладки «Прочие» в левом верхнем углу экрана. Чтобы узлы сети добавлялись в другую
                группу, добавьте необходимую группу узлов сети в поле «Группа для обнаруженных узлов
                сети» с помощью кнопки «Выбрать». После изменения следует нажать кнопку «Обновить»
                для сохранения внесенных изменений. Если узел сети уже существует с обнаруженным IP-адресом, новый узел сети не создается. Однако,
                если действие на обнаружение содержит операции (присоединение шаблона, добавление в
                группу узлов сети и т.д.), они будут выполнены над существующим узлом сети.
            Если у созданного узла сети с наблюдением через прокси индикатор доступности красного
                цвета, см. решение проблемы в Руководстве администратора
                         в разделе «Недоступен узел сети, подключенный
                    через сервер агентов»разделе .
|*|*|*|
    Настройка автоматического обнаружения ОМ
            Для настройки автоматической регистрации:
                В конфигурационном файле  укажите
                    IP-адрес сервера, к которому планируется подключить , и порт для подключений сервера. Подробнее см.
                    в Руководстве администратора  в разделе «Установка и
                        настройка агентов»
                    разделе .
                Перейдите на страницу  → .
                Нажмите на кнопку «Создать правило обнаружения» в правом верхнем углу.
                Откроется страница «Правила обнаружения».
                    Cтраница «Правила обнаружения»
                Задайте следующие параметры:
                        Имя — название правила обнаружения.
                        Обнаружение через прокси — позволяет выбрать, будет ли поиск
                                 осуществляться через
                            прокси.
                        Диапазон IP-адресов — IP-адреса, которые  будет сканировать для поиска
                                .
                        Доступны следующие форматы:
                                Один IP: 192.168.1.33
                                Диапазон IP-адресов: 192.168.1-10.1-255
                                Маска IPv4 и IPv6: 192.168.4.0/24. Поддерживаемые маски
                                    IP: /16 — /30 для IPv4 адресов и /112 — /128 для IPv6
                                    адресов
                                Список: 192.168.1.1-255, 192.168.2.1-100, 192.168.2.200,
                                    192.168.4.0/24
                        Интервал обновления — период активного сканирования IP-адресов.
                            Формат: 1х, где x — суффикс времени. 
                            Доступные суффиксы:
                                s — секунды;
                                m — минуты;
                                h — часы;
                                d — дни;
                                w — недели.
                        Проверки — позволяют выбрать сетевой сервис в качестве типа проверки и
                            задать диапазон портов.
                        Используются для поиска узлов сети. Доступны следующие проверки: , , , , , , , , , , , Zabbix agent, v1 agent,  agent,  agent,  ping.
                        Критерий уникальности устройства — параметр, по которому определается,
                            является ли обнаруженный узел сети уникальным.
                        Критерием уникальности может быть:
                                IP-адрес;
                                Проверка типа ;
                                Проверка типа Zabbix агент.
                        Имя узла сети.
                        В качестве имени узла сети могут использоваться:
                                DNS имя;
                                IP адрес;
                                Проверка типа ;
                                Проверка типа Zabbix агент.
                        Видимое имя — имя, которое будет отображаться в веб-интерфейсе.
                        В качестве видимого имени узла сети могут использоваться:
                                Имя узла сети — совпадает со значением поля «Имя»;
                                DNS имя;
                                IP адрес;
                                Проверка типа ;
                                Проверка типа Zabbix агент.
                        Активировано — установите чекбокс, чтобы активировать правило
                            обнаружения.
                Нажмите на кнопку «Добавить».
                обнаруженные узлы сети появятся на странице 
                    → .
                При необходимости настройте действия для обнаруженных узлов сети согласно
                    инструкции .
                Отключите автоматические проверки после обнаружения всех  во избежание лишней нагрузки на сеть.
|*|*|*|
    Импорт узлов сети
            Для импорта узлов сети:
                Перейдите на страницу  → .
                В верхнем правом углу страницы нажмите на кнопку «Импорт».
                Откроется страница «Импорт».
                Нажмите на кнопку «Выберите файл».
                Выберите в окне проводника файл с нужным узлом сети.
                Подтвердите выбор.
                Установите чекбоксы напротив элемента «Узлы сети».
                Нажмите кнопку «Импорт» в нижней части страницы.
                Появится окно, сообщающее об успешности или обнаруженных проблемах импорта.
|*|*|*|
    Добавление узлов сети
        В  доступны следующие способы добавления :
                 — автоматическое обнаружение объектов мониторинга путем сканирования
                    диапазона IP-адресов, указанного в правилах сетевого обнаружения.
                 — получение объектов мониторинга из
                    DATAPK, подключенного к . Доступны два вида
                    синхронизации с DATAPK:
                        Однократная — объектов
                                мониторинга будут получены из DATAPK один раз.
                        Автоматическая — 
                            будет регулярно получать объектов
                                мониторинга из DATAPK по указанному расписанию.
                 — импорт имеющихся на компьютере файлов с объектов мониторинга. Такие файлы могут
                    быть получены в результате экспорта объектов
                        мониторинга с другого .
                 — добавление объектов мониторинга в веб-интерфейсе  с указанием имени, группы узлов сети, типа
                    интерфейса для сбора данных, IP-адреса, порта и других параметров.
            Для корректного сбора данных перед добавлением узла сети необходимо
                установить агента на этот узел сети либо настроить узел сети для безагентного сбора.
                Подробнее см. в разделах  и .
|*|*|*|
    Редактирование узлов сети
        После создания узла сети вы можете изменить необходимые параметры. Для
            редактирования узла сети:
                Перейдите на страницу  → .
                Выберите узел сети в списке и нажмите на его имя.
                Откроется страница «Узлы сети».
                Для редактирования параметров узла сети:
                        Отредактируйте нужные параметры:
                                В поле «Имя узла сети» укажите новое сетевое имя объекта
                                    мониторинга.
                                В поле «Видимое имя» укажите имя объекта мониторинга, которое
                                    будет отображаться в интерфейсе .
                                В поле «Группы» укажите группы, в которых будет состоять объект
                                    мониторинга.
                                В поле «Интерфейсы» укажите сетевые интерфейсы объекта
                                    мониторинга с указанием типа интерфейса, IP-адреса или
                                    DNS-имени, порта.
                                Измените описание объекта мониторинга.
                                Установите или снимите чекбокс «Наблюдение через прокси», чтобы
                                    включить или отключить использование прокси (сервера удаленного мониторингаагентовагентов).
                                Установите или снимите чекбокс «Активировано», чтобы изменить
                                    состояние объекта мониторинга.
                Для присоединения новых шаблонов:
                        Начните печатать название шаблона в поле «Присоединение новых
                            шаблонов».
                        Появится список шаблонов.
                        Прокрутив список, выберите необходимый шаблон.
                Для отсоединения шаблонов:
                        Нажмите на одну из двух кнопок напротив имени шаблона:
                                Отсоединить — отсоединить шаблон, но оставить его элементы
                                    данных, триггеры и графики присоединенными к узлу сети. Сбор
                                    данных при этом продолжается. При повторном прикреплении
                                        шаблона к этому узлу сети элементы данных с одинаковым
                                        ключом будут заменены на те, что находятся в шаблоне.
                                Отсоединить и очистить — отсоединить шаблон и удалить все его
                                    элементы данных, триггеры и графики у узла сети. При нажатии на кнопку «Отсоединить и
                                        очистить» удаляется история узла сети на страницах , .
                                        Повторное подключение шаблона позволяет собирать информацию
                                        с момента подключения, но не возвращает удаленную историю.
                Для настройки управления по :
                        Перейдите на вкладку «».
                Для изменения тегов:
                        Перейдите на вкладку «Теги».
                        Для изменения существующего тега отредактируйте его имя и значение в
                            соответствующих полях. 
                            Добавление и редактирование тега asu_tp вручную рекомендуется
                                использовать только в случае отсутствия интеграции с DATAPK и/или
                                для объектов мониторинга, которые отсутствуют в DATAPK. 
                Для добавления нового тега:
                        Нажмите на кнопку .
                        Задайте имя и значение тега в соответствующих полях.
                Для редактирования макроса:
                        Перейдите на вкладку «Макросы».
                Для настройки мониторинга сервера, на котором установлен :
                        Найдите объект мониторинга — сервер , в столбце «интерфейс» у него будет
                            указано «zabbix-agent: 10050».
                                Cервер  в списке объектов мониторинга
                        Нажмите на имя объекта мониторинга, чтобы перейти к его
                            настройкам.
                        Измените настройки интерфейса объекта мониторинга:
                                Введите в поле «IP адрес» значение 172.17.0.1
                                    (адрес сервера в подсети docker).
                                Введите в поле «DNS» значение
                                        host.docker.internal.
                                Изменение настроек интерфейса 
                        Нажмите на кнопку «Обновить» для сохранения настроек . 
                        Убедитесь, что  стал
                            доступен. 
|*|*|*|
    Ключи для сбора инвентарных данных
        Ключ — это выражение, которое определяет, какую информацию будет собирать элемент данных
            с узла сети.
        В таблице ниже перечислены ключи, которые наиболее полезны для автоматического сбора
            инвентарных данных:
            Ключи для сбора инвентарных данных
                        Ключ для сбора инвентарных данных
                        Значение ключа по умолчанию
                        Описание
                        system.hw.chassis[full|type|vendor|model|serial]
                        system.hw.chassis[info]
                        Информация о шасси. Возвращает строку. Требуются права root
                        system.hw.cpu[all|cpunum,full|maxfreq|vendor|model|curfreq]
                        system.hw.cpu[cpu,info]
                        Информация о ЦПУ. Возвращает строку или число
                        system.hw.devices[pci|usb]
                        system.hw.devices[type]
                        Список PCI и USB устройств. Возвращает текст
                        system.hw.macaddr[interface,short|full], где
                            interface — регулярное выражение
                        system.hw.macaddr[interface,format]
                        Список MAC-адресов, у которых имена интерфейсов соответствуют
                            заданному регулярному выражению. Возвращает строку.Пример:
                                Ключ system.hw.macaddr["eth0$",full] позволяет
                                найти МАС-адрес [eth0] 00:11:22:33:44:55.
                                Если формат задан как short, имена
                                интерфейсов и одинаковые MAC-адреса не попадают в список
                        system.sw.arch
                        system.sw.arch
                        Информация об архитектуре программного обеспечения. Возвращает
                            строку
                        system.sw.os[name|short|full]
                        system.sw.os[info]
                        Информация об операционной системе. Возвращает строку
                        system.sw.packages[package,manager,short|full], где
                            package — регулярное выражение
                        system.sw.packages[package,manager,format]
                        Список установленных пакетов, имена которых совпадают с заданным
                            регулярным выражением. Список пакетов выводится в алфавитном
                                    порядке.Пример: Ключ
                                    system.sw.packages[mini,dpkg,short] может найти
                                пакеты python-minimal,
                                    python2.6-minimal,
                                    ubuntu-minimal.Поддерживаются менеджеры
                                пакетов (выполняемые команды):
                                    dpkg (dpkg
                                            --get-selections)
                                    pkgtool (ls
                                            /var/log/packages)
                                    rpm (rpm -qa)
                                    pacman (pacman -Q)
                                Форматы:
                                    full — пакеты группируются по менеджерам
                                        пакетов, каждая группа отображается с новой строки. В начале
                                        строки указано имя менеджера пакетов в квадратных скобках. 
                                    short — пакеты не группируются и
                                        отображаются одной строкой
|*|*|*|
    Просмотр инвентарных данных
        Детали всех указанных инвентарных данных доступны в разделе бокового меню .
            Обзор инвентарных данных узла сети
            На странице  →  можно
                сгруппировать узлы сети по различным полям инвентарных данных и просмотреть
                доступные данные.
            Пример: на рисунке ниже узлы сети из группы «Агенты Linux» сгруппированы по
                полю инвентарных данных «ОС». В результате отображается список ОС для узлов сети из
                выбранной группы и количество узлов сети с каждой ОС. 
                    Страница «Обзор инвентарных данных узла сети»
            Для просмотра узлов сети, сгруппированных по определенному полю инвентарных
                данных:
                В выпадающем списке «Группы узлов сети» выберите нужные группы:
                        Нажмите на кнопку «Выбрать» справа от поля «Группа узлов сети».
                        В открывшемся окне установите чекбоксы рядом с нужными группами узлов
                            сети.
                        Нажмите на кнопку «Выбрать». 
                    Если не выбрать группу узлов сети, то группировка по полю инвентарных
                        данных применяется ко всем узлам сети.
                В выпадающем списке «Сгруппировать по» выберите поле инвентарных данных.
                Нажмите на кнопку «Применить», чтобы получить список узлов сети, которые
                    соответствуют фильтрам.
            Нажмите на число в столбце «Количество узлов сети», чтобы увидеть имена
                этих узлов сети и информацию о них.
            Инвентарные данные узла сети
            На странице  → 
                отображаются все узлы сети, содержащие инвентарные данные. 
                Страница «Инвентарные данные узла сети»
            На странице доступны следующие возможности:
                Фильтрация узлов сети по группе. Для этого:
                        Нажмите на кнопку «Выбрать» справа от поля «Группа узлов сети».
                        В открывшемся окне установите чекбоксы рядом с нужными группами узлов
                            сети.
                        Нажмите на кнопку «Выбрать». 
                        Нажмите на кнопку «Применить».
                Фильтрация по полю инвентарных данных. Для этого:
                        Выберите нужное поле инвентарных данных из списка, в котором по
                            умолчанию указано значение «МАС адрес А».
                        В следующем выпадающем списке выберите одну из опций:
                                «содержит» — для поиска инвентарных данных, включающих в себя
                                    указанное значение;
                                «равно» — для поиска инвентарных данных, точно совпадающих с
                                    указанным значением.
                        Введите значение поля инвентарных данных.
                        Нажмите на кнопку «Применить».
                Просмотр подробной информации об узле сети. Для этого:
                        Нажмите на имя узла сети в списке, чтобы перейти на страницу с данными
                            узла сети. 
                                Просмотр данных узла сети
                        Для просмотра подробных инвентарных данных узла сети перейдите на
                            вкладку «Детали». 
                                Вкладка «Детали»
                        Для возврата к списку узлов сети нажмите на кнопку «Отмена».
|*|*|*|
    Настройка сбора инвентарных данных
        При настройке сбора инвентарных данных узла сети можно выбрать автоматический или ручной режим. 
            Также можно настроить режим сбора инвентарных данных по умолчанию, который будет применяться для новых узлов сети.
            Автоматический режим       
                Для автоматического сбора инвентарных данных узла сети: 
                Настройте элемент данных узла сети. Подробнее см. в разделе «Настройка элемента данных». 
                Перейдите на страницу  → .
                Нажмите на имя узла сети.
                Перейдите на вкладку «Инвентаризация».
                Выберите режим построения инвентарных данных «Автоматически». 
                        Режим «Деактивировано» отключает сбор инвентарных данных.  
                Нажмите на кнопку «Обновить» для сохранения изменений.
            Ручной режим
            Для сбора инвентарных данных узла сети вручную:
                Перейдите на страницу  → .
                Нажмите на имя узла сети.
                Перейдите на вкладку «Инвентаризация».
                Выберите режим построения инвентарных данных «Вручную».
                        Режим «Деактивировано» отключает сбор инвентарных данных.
                Заполните необходимые параметры инвентаризации. 
                        Вкладка «Инвентаризация»
                    при вводе URL в инвентарные данные начните с «» или «», тогда переход по этому URL будет доступен при просмотре данных узла
                        сети на странице  → .
                Нажмите на кнопку «Обновить» для сохранения изменений.
            Режим по умолчанию
            Чтобы настроить режим сбора инвентарных данных по умолчанию для новых узлов
                сети:
                Перейдите на страницу  → .
                В выпадающем списке в левом верхнем углу окна выберите «Прочие».
                Выберите режим инвентаризации узлов сети по умолчанию:
                            «Деактивировано»;
                            «Вручную»;
                            «Автоматически».
                Нажмите на кнопку «Обновить».
|*|*|*|
    Инвентаризация
        В  можно хранить инвентарные данные сетевых устройств: тип,
            серийный номер, MAC-адрес, местоположение и т. д.
        Раздел бокового меню  предназначен для просмотра инвентарных
            данных. Пользователь может настроить автоматический сбор инвентарных данных узла сети
            или заполнить данные вручную при настройке узла сети.
        В этом разделе:
|*|*|*|
    Графики
        Графики позволяют визуализировать данные.  предоставляет
            пользователям:
            встроенные простые графики по данным одного элемента данных;
            возможность создавать более сложные пользовательские графики, которые позволяют
                сравнивать несколько элементов данных.
        В этом разделе:
                Простые графики
                Пользовательские
                        графики
                        Настройка пользовательских графиков
|*|*|*|
    Создание и настройка пользовательских графиков
    Для создания и настройки пользовательского графика:
                Перейдите на страницу  →  (или ).
                Нажмите на ссылку «Графики» в строке с желаемым узлом сети или шаблоном.
                Откроется страница «Графики».
                На странице «Графики» нажмите на кнопку «Создать график» в верхнем правом
                    углу.
                Откроется страница создания графика.
                Задайте уникальное имя графика.
                    В имени можно обращаться к значениям элементов данных, используя простые
                        макросы со стандартным синтаксисом {узел
                            сети:ключ.функция(параметр)}. В этих макросах поддерживаются
                        только функции avg, last,
                            max и min с секундами в качестве
                        параметров. Макросы {HOST.HOST<1-9>} поддерживаются для
                        использования в ранее упомянутом макросе, как ссылки на первый, второй,
                        третий и т.д. узел сети в графике, например,
                            {{HOST.HOST1}:ключ.функция(параметр)}.
                Задайте ширину и высоту графика в пикселях.
                    Ширина графика отображается только при предпросмотре и для кругового или
                        расширенного кругового графиков.
                Выберите тип графика:
                        Нормальный;
                                Пример нормального графика
                        Стэкируемый;
                                Пример стэкируемого графика
                        Круговой;
                                Пример кругового графика
                        Расширенный круговой.
                                Пример расширенного кругового графика
                Если необходимо отключить отображение легенды графика, снимите чекбокс
                    «Легенда».
                Для нормального и стэкируемого графика настройте следующие параметры: 
                        Чтобы отметить нерабочие часы на графике серым цветом фона, установите
                            чекбокс «Отображать рабочее время».
                        Чтобы триггеры отображались на графике красными линиями, установите
                            чекбокс «Отображать триггеры».
                Для нормального графика настройте следующие параметры:
                        Чтобы отображать процентную линии для левой оси Y, установите чекбокс
                            «Процентная линия (слева)» и задайте процент значений, которые попадут
                            под линию. 
                        Чтобы отображать процентную линию для правой оси Y, установите чекбокс
                            «Процентная линия (справа)» и задайте процент значений, которые попадут
                            под линию.
                        Пример графика с процентной линией слева
                Для нормального и стекируемого графика настройте параметры: 
                        МИН значение оси Y — выберите, каким способом будет определяться
                            минимальное значение оси Y.
                        МАКС значение оси Y  — выберите, каким способом будет определяться
                            максимальное значение оси Y.
                    Для определения как минимального, так и макимального значения оси Y
                    доступны следующие варианты:
                        Вычисляемое — значение будет вычисляться автоматически.
                        Фиксированное — при выборе этого варианта появится поле, где нужно будет
                            вручн|*|*|*|ую указать значение.
                        Элемент данных — при выборе этого варианта появится поле, где нужно
                            выбрать элемент данных. Последнее значение этого элемента данных будет
                            являться минимальным или макисмальным значением оси Y.
                Для круговых и расширенных круговых графиков можно изменить стиль графика,
                    установив чекбокс «3D вид».
                        3D вид расширенного кругового графика
                Добавьте элементы, данные которых будут представлены на графике. Для этого: 
                        Нажмите на кнопку «Добавить» в области «Элементы данных». 
                        В окрывшемся окне установите чекбоксы рядом с элементами, данные
                            которых нужно отображать на графике.
                        Нажмите на кнопку «Выбрать».
                        Выбранные элементы появятся в окне настройки графика.
                                        Пример добавленных элементов данных для нормального
                                            графика
                        Настройте следующие параметры для каждого из добавленных
                            элементов:
                                Функция — выбор значений для отображения, когда у элемента
                                    данных существует более одного значения на один вертикальный
                                    пиксель графика:
                                        все — отображение всех возможных значений (минимума,
                                            максимума, среднего) на графике. Эта опция доступна
                                            только для нормального типа графика. Эта опция
                                                влияет только на отображение только при длительных
                                                периодах, когда перегрузка данными на вертикальный
                                                пиксель графика увеличивается. 
                                        сред — отображение усредненных значений.
                                         посл — отображение последних значений. Эта опция
                                            доступна только для круговых и расширенных круговых
                                            графиков.
                                        макс — отображение значений максимумов.
                                        мин — отображение значений минимумов.
                                Стиль отрисовки — стиль, который будет применен к данным
                                    элемента данных. Доступные варианты: «Линия», «Жирная линия»,
                                    «Заполнение», «Точечная линия», «Пунктирная линия», «Градиентная
                                    линия». Только для нормальных графиков.
                                Расположение оси — сторона оси Y, на которой будут отображаться
                                    данные элемента данных. Доступные варианты: «Слева», «Справа».
                                    Только для нормальных и стэкируемых графиков.
                                Тип — тип графика: 
                                        Простой — значение элемента данных будет отображаться
                                            пропорционально кругу.
                                        Суммарный график — значение элемента данных представляет
                                            собой всю окружность.
                                   Эта опция доступна только для круговых и расширенных круговых графиков.
                                Цвет.
|*|*|*|
    Простые графики
        Простые графики служат для визуализации данных, собранных элементами данных. 
        Пользователю не требуются настраивать простые графики для их просмотра.
        Для просмотра простого графика перейдите на страницу  → 
             и
            нажмите на ссылку графика напротив соответствующего элемента данных.
            Выбор периода времениВ верхней части страницы находится область для
            выбора периода времени, который отображается на графике. При выборе периода времени
            доступны следующие возможности:
                Чтобы выбрать уже заданный период, нажмите на его название, например, «Вчера».
                        Опции «Сегодня», «Эта неделя», «Этот месяц», «Этот год» отображают
                            весь период целиком, включая часы и дни, которые еще не наступили.
                            «Сегодня до сих пор», напротив, отображает только прошедшие часы до
                            текущего момента.
                        Область выбора периода времени
                Чтобы перемещать выбранный период назад и вперед во времени, используйте кнопки
                    стрелок 
                    .
                Чтобы увеличить период на 50% с каждой стороны, нажмите на кнопку «Расширить»
                    либо дважды кликните на графике. 
                Чтобы свернуть или развернуть область выбора времени, нажмите на подпись к
                    вкладке в верхней части страницы, которая содержит строку с выбранным
                    периодом.
                Чтобы приблизить область на графике, выделите эту область левой кнопкой
                    мыши.
                Чтобы задать конкретные даты начала и конца периода:
                            Нажмите на иконке календаря рядом с полем «От» и выберите дату
                                начала периода во всплывающем окне.
                            Нажмите на иконке календаря рядом с полем «К» и выберите дату конца
                                периода во всплывающем окне.
                            Выбор конкретных дат начала и конца периода
                    В окне выбора даты можно перемещаться между блоками года,
                        месяца и даты, используя клавиши «Tab» и «Shift+Tab». Для выбора значений
                        внутри блока используйте кнопки  и  или клавиши стрелок на клавиатуре. Для
                        активации выбора нажмите клавишу «Enter» или левую кнопку мыши.
            Поля «От» и «К» отображают выбранный период в виде: 
                абсолютного времени в формате Г-М-д ч:м:с;
                синтаксиса относительного времени, например: now-1d.
            Дата в относительном формате может содержать только одну математическую операцию
                (- или +). В относительном времени поддерживаются следующие аббревиатуры:
                now — текущее время;
                s — секунды;
                m — минуты;
                h — часы;
                d — дни;
                w — недели;
                M — месяцы;
                y — годы.
            Если поле «От» или «К» не задано, график не будет отображаться.При выборе
                даты в поле «От» или «К» по умолчанию будет установлено следующее время:
                    текущее время при выборе текущей даты;
                    00:00:00 при выборе любой даты, отличной от текущей. 
                Если в полях «От» или «К» было указано время, это же значение времени
            сохранится при изменении даты. Если для элемента данных установлено правило
                предобработки «Отбрасывать не изменившееся с периодическим контролем» со значением
                1d, то при выборе периода времени меньше чем 1 день на графике не будет отображаться
                часть значений этого элемента.
            Недавние данные и длительные периоды
            Для последних данных график отображается в виде одиночной линии с учетом каждого
                полученного значения. Одиночная линия отображается до тех пор, пока доступен хотя бы
                один горизонтальный пиксель для одного значения.
            Для данных, показывающих длительный период, график отображается в виде трех линий:
                    темно-зеленая — среднее значение;
                    светло-розовая — максимальное значение в данный момент времени;
                    светло-зеленая — минимальное значение в данный момент времени.
            Пространство между максимумами и минимумами заполнено желтым цветом.
            Рабочее время отображаются на графиках белым фоном, а нерабочее время отображается
                серым (при теме «Оригинальная синяя», выбранной по умолчанию в веб-интерфейсе).
            Рабочее время отображается на простых графиках, если график отображает данные за
                период меньше 3 месяцев.
                    Пример простого графика
            Формирование графиков из истории или динамики изменений
            Графики могут быть сгенерированы на основе истории или динамики изменений элемента
                данных.
            Если у пользователя в веб-интерфейсе активирован режим отладки, то снизу справа от
                графика отображается вертикальная подпись серого цвета, которая указывает, откуда
                пришли данные.
            Факторы, которые влияют на то, будет ли использована история или динамика
                изменений:
                Длительность истории элемента данных. Например, история элемента данных хранится
                    14 дней. В этом случае любые данные старше 14 дней будут взяты из динамики
                    изменений.
                Перегрузка данных в графике. Если отображаемое количество секунд по
                    горизонтальным пикселям графика превышает 3600/16, то будут отображены данные из
                    динамики изменений, даже если имеется история элемента данных за этот
                    период.
                Если динамика изменений отключена, то для построения графика будет
                    использоваться история элемента данных, если история доступна за требуемый
                    период.
            Переключение к необработанным данным
            Выпадающее меню «Просмотр как» в верхнем правом углу страницы с графиком позволяет
                переключаться с простого графика на список числовых значений, создающих график.
                Доступен просмотр всего списка (при выборе опции «Значения») или последних 500
                значений. Значения в списке приводятся без единиц измерения.
                    Выпадающее меню «Просмотр как»
|*|*|*|
    Настройка размеров комплексного экрана
            Для изменения размеров комплексного экрана используйте кнопки «+» и «-» с каждой
                стороны таблицы.
                Для удаления строки нажмите на «-» в правой части этой строки.
                Для удаления столбца нажмите на «-» в нижней части этого столбца.
                Для добавления строки над текущей нажмите «+» в левой части текущей
                    строки.
                Для добавления столбца слева от текущего нажмите «+» в верхней части текущего
                    столбца.
|*|*|*|
    Динамические элементы
        Чекбокс «Динамический элемент» позволяет использовать один комплексный экран для
            отображения данных разных узлов сети. При установке этого чекбокса на странице  →  становятся доступны
            дополнительные выпадающие меню для выбора узла сети. Элемент комплексного экрана
            отображает информацию для выбранного в данный момент узла сети. 
        Чекбокс «Динамический элемент» доступен для следующих элементов комплексного экрана:
            графики (пользовательские графики);
            прототипы графиков;
            простые графики;
            прототипы простых графиков;
            простой текст;
            URL.
                Динамический элемент URL не будет отображаться в разделе боковой панели  →
                    , если не выбран узел сети. Если не выбрано ни одного узла сети, то
                    отобразится только сообщение «Не выбран узел сети».
        При нажатии на динамический график откроется этот график в полном виде; однако в случае с
            пользовательскими графиками и прототипами графиков эта опция поддерживается только для
            узла сети, выбранного по умолчанию (то есть с узлом сети «не выбран» из выпадающего
            меню). При выборе другого узла сети из выпадающего меню динамический график создается с
            использованием данных элементов данных выбранного узла сети, и результирующий график не
            является ссылкой.
|*|*|*|
    Добавление элементов
            Для добавления элементов на комплексный экран:
                Перейдите в раздел бокового меню  → .
                Нажмите на «Конструктор» в строке с комплексным экраном, куда нужно добавить
                    элементы. 
                Для добавления элемента нажмите на «Изменить» в той ячейке, куда нужно добавить
                    элемент.  
                Появятся параметры настройки элемента.
                Настройте параметры элемента:
                        В выпадающем списке «Ресурс» выберите тип элемента. Доступны следующие
                            ресурсы: 
                                Журнал действий — история недавних действий;
                                Часы — цифровые и аналоговые часы, которые показывают время на
                                    сервере или местное время;
                                Обзор данных — последние данные группы узлов сети;
                                График — один пользовательский график;
                                Прототип графиков — пользовательский график из правила
                                    низкоуровневого обнаружения;
                                История событий — последние события;
                                События в группах узлов сети — состояния триггеров,
                                    отфильтрованные по группе узлов сети (включая триггеры без событий);
                                Информация о узлах сети;
                                События у узла сети — состояния триггеров, отфильтрованные по
                                    узлу сети (включая триггеры без
                                    событий);
                                Карта сети;
                                Простой текст;
                                Простой график;
                                Прототип простого графика — простой график на основе элемента
                                    данных, сгенерированного правилом низкоуровневого
                                    обнаружения;
                                Информация о системе — высокоуровневая информация о ;
                                Проблемы по важности;
                                Информация о триггерах;
                                Обзор триггеров — состояние триггеров группы узлов сети;
                                URL — добавление содержимого из внешнего источника.
                            Если заданная высота графика менее 120 пикселов, то триггеры не будет отображены в
                                легенде этого графика.
                        Выберите способ выравнивания по вертикали и горизонтали.
                        В поле «Объединение столбцов» укажите количество столбцов, на которое
                            нужно расширить ячейку.
                        В поле «Объединение строк» укажите количество строк, на которое нужно
                            расширить ячейку. 
                        Укажите другие параметры в зависимости от типа выбранного
                            элемента.
                Нажмите на кнопку «Добавить».
|*|*|*|
    Комплексные экраны
        Комплексный экран — это таблица, где можно группировать информацию с различных источников
            для быстрого обзора данных на одном экране. Комплексный экран может включать в себя
            различные элементы, такие как графики, карты сети, информация о триггерах и узлах сети,
            история событий и др.
        Комплексные экраны бывают следующих видов:
            Глобальные — отображают общие данные. Для управления, настройки и просмотра
                глобальных комплексных экранов необходимо перейти в раздел бокового меню  → .
            Комплексные экраны узлов сети — отображают данные только о конкретном узле сети,
                настраиваются на уровне шаблонов и затем генерируются для узлов сети, как только
                шаблон присоединяется к этим узлам сети.
        На странице  →  можно добавить
            комплексный экран как элемент панели. Для этого надо добавить экран в избранное, нажав
            на кнопку .
        Все пользователи  вне зависимости от их роли могут создавать
            комплексные экраны. Комплексные экраны имеют владельца — пользователя, который создал
            их.
        Комплексные экраны бывают публичными и приватными. Публичные комплексные экраны доступны
            всем пользователям, приватные — только владельцу и пользователям, которым владелец
            предоставил доступ.
        Для просмотра или добавления элементов пользователь должен иметь права по крайней мере на
            чтение всех элементов комплексного экрана. 
        Пользователи с ролью «Пользователь» или «Администратор» могут назначать общий доступ к
            комплексному экрану только тем группам и пользователям, в которые они входят сами. 
        Пользователи с ролью «Администратор» или «Супер Администратор» могут просматривать и
            редактировать приватные комплексные экраны независимо от того, являются ли они
            владельцами или входят ли в список пользователей общего доступа.
        В этом разделе:
                Создание комплексного
                        экрана
                Добавление
                        элементов
                Динамические
                        элементы
|*|*|*|
    Создание комплексного экрана
    Для создания комплексного экрана:
                Перейдите в раздел бокового меню 
                    → .
                Нажмите на «Все комплексные экраны» в верхнем левом углу страницы.
                Нажмите на кнопку «Создать комплексный экран» в верхнем правом углу
                    страницы.
                Откроется вкладка «Комплексный экран».
                Заполните общие атрибуты:
                        Выберите владельца комплексного экрана.
                        Введите имя комплексного экрана.
                        Укажите количество столбцов и строк комплексного экрана.
                Настройте параметры доступа к комплексному экрану. Для этого:
                        Перейдите на вкладку «Общий доступ».
                        Выберите тип:
                                Приватный — комплексный экран виден только выбранным группам
                                    пользователей и пользователям;
                                Публичный — комплексный экран виден всем.
                        В разделах «Список групп пользователей общего доступа» и  «Список
                            пользователей общего доступа» добавьте группы пользователей или
                            отдельных пользователей, у которых будет доступ к этому комплексному
                            экрану. Для этого:
                                Нажмите на кнопку «Добавить» ().
                                В открывшемся окне установите чекбоксы рядом с нужными
                                    пользователями или группами.
                                Нажмите на кнопку «Выбрать».
                                Установите права доступа для выбранных пользователей или
                                    групп.
                Нажмите на кнопку «Добавить» () для
                    сохранения комплексного экрана.
|*|*|*|
    Добавление сервера удаленного мониторинга
        Сервер удаленного мониторингаагентовагентов может быть активным или
                пассивным.
                Активный сервер удаленного мониторингаагентовагентов
                    подключается к серверу  для получения
                    конфигурации и передачи данных мониторинга .
                Пассивный сервер удаленного мониторингаагентовагентов ждет,
                    пока к нему подключится сервер  для передачи
                    конфигурации и получения данных мониторинга .
|*|*|*|
    Что нового?
        Обновления в текущей версии документации:
                Обновлены документы:
                Добавлены документы:
        В версии 1.4.0.0 добавлены новые функции:
                На странице :
                        Добавлена возможность отключения автоматического сбора данных с сервера
                            мониторинга на период пусконаладки или технического обслуживания.
                        Для филиалов добавлено отображение имени DATAPK, подключенного к серверу
                            мониторинга.
                        В таблицу  добавлено
                            отображение информации об  и о
                            техническом обслуживании объектов мониторинга.
                        Добавлена возможность внепланового запроса данных об объектах
                            мониторинга с сервера .
                        Добавлена кнопка для обновления страницы.
                На странице  добавлена возможность
                    просмотра имени DATAPK, подключенного к серверу мониторинга.
                На странице  добавлена возможность просмотра
                    списка событий проблемы.
                Страница настроек интеграций переименована в .
                На странице  добавлена возможность
                    настройки периодичности получения с серверов мониторинга системных журналов и
                    системных свойств.
                На странице  добавлена возможность
                    просмотра и изменения роли пользователя.
                На странице  добавлена возможность настройки
                    подключения к LDAP-серверу.
                На странице  добавлена возможность настройки
                    email-оповещений.
                В файл .env добавлены переменные: 
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
                Добавлены разделы: 
                Обновлены разделы:
                Исключены разделы:
                        «Создание резервной копии всех БД и файлов журналов БД Jatoba»
                        «Восстановление резервной копии всех БД и файлов журналов БД
                            Jatoba»
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
                Добавлены разделы: 
                                Обновлены разделы:
                Исключены разделы:
                        «Создание резервной копии всех БД и файлов журналов БД Jatoba»
                        «Восстановление резервной копии всех БД и файлов журналов БД
                            Jatoba»
|*|*|*|
    Назначение и условия применения
            Сервер визуализации и управления  предназначен для осуществления контроля
                    предоставляемых вычислительных ресурсов и каналов связи в автоматизированных
                        системах управления путем реализации следующих функций:
                    Предоставление сводной информации о состоянии функционирования
                        контролируемых ИТ-ресурсов  в филиалах и
                        на технологических комплексах предприятия.
                    Передача консолидированных данных о свойствах и состоянии функционирования
                        контролируемых ресурсов в смежные корпоративные системы: систему
                        автоматизации процессов обеспечения безопасности () и систему мониторинга компьютерных инцидентов
                            ().
                Сервер визуализации и управления  используется в составе комплексной
                    системы мониторинга и контроля ИТ-ресурсов  .
                Архитектура системы  приведена на рисунке.
                    Архитектура системы 
|*|*|*|
    Что нового?
        Основные изменения в ПО сервера  версии 1.7.0.0:
                Изменения  версии
                    1.7.0.0
                            Категория
                            Изменения в продукте
                            Разделы документации
                            Серверы мониторинга
                            На странице :
                                    В таблицу добавлена информация о серверах удаленного
                                        мониторинга.
                                    Добавлена возможность просмотра карточки сервера удаленного
                                        мониторинга.
                                    Добавлена возможность свернуть или развернуть сразу все
                                        записи в таблице.
                                    Добавлена возможность внеочередного сбора данных с сервера
                                        мониторинга.
                                    Добавлена возможность настройки сбора данных. В связи с этим
                                        исключен раздел «Настройки» → «Сбор данных». 
                                    Добавлено автоматическое обновление до новой версии серверов
                                        мониторинга, подключенных к .
                                        После обновления сбор данных с серверов мониторинга
                                        продолжится.
                                    Исправлена ошибка, при которой можно было добавить несколько
                                        одинаковых серверов при повторном нажатии кнопки
                                        «Подключить» в окне «Подключение сервера мониторинга».
                                    Исправлена ошибка в названии версии , при которой
                                        некорректно работала сортировка в столбце «Версия ПО».
                                В карточке сервера мониторинга:
                                    Добавлена таблица с параметрами конфигурации сервера
                                        мониторинга.
                                    Добавлена ссылка для перехода на страницу этого сервера
                                        мониторинга.
                                Во всплывающем окне со статусами синхронизаций на странице
                                параметр «Системные свойства» переименован в «Свойства сервера
                                мониторинга»
                            , , , , , 
                            Объекты мониторинга
                            На странице :
                                    Исключено дерево филиалов и ,
                                        теперь по умолчанию в списке отображаются все
                                            .
                                    Добавлена возможность фильтрации  по филиалу и
                                            .
                                    В таблицу со списком  добавлены новые
                                            столбцы:
                                            «Филиал»;
                                            «»;
                                            «Тип »;
                                            «Ссылки».
                                    Добавлен счетчик количества .
                                    Добавлена возможность просмотра наиболее критичных проблем
                                        выбранного 
                                        при нажатии на значение в столбце «Проблемы».
                                    Добавлена возможность сортировки по филиалу.
                                    Изменены настройки сортировки по умолчанию.
                                В карточке :
                                    Параметр «Состояние» переименован в «Статус».
                                    Добавлены параметры «Обновление статуса» и «Обновление
                                        свойств ОМ».
                                    Исключен параметр «Дата обновления».
                                    Добавлена возможность отображения внешних ссылок,
                                        добавленных в качестве значения полей «URL A», «URL B», «URL
                                        C» в инвентарных данных 
                                        или Zabbix.
                                    Исправлено отображение IP-адресов с 12 символами. 
                                    Изменено отображение состояния для объектов мониторинга на
                                        техническом обслуживании
                            , , 
                  |*|*|*|          Объекты мониторинга, серверы мониторинга, проблемы
                                        Добавлена возможность просмотра окон «Свойства сервера
                                            удаленного мониторинга» и «Свойства сервера мониторинга»
                                            на страницах , .
                                        Добавлена возможность просмотра окна «Свойства сервера
                                            удаленного мониторинга» при нажатии в любом месте строки
                                            конкретного  на странице
                                                .
                                        Изменено поведение на странице :
                                                При нажатии на значение в столбце «Филиал,
                                                  » выводится окно
                                                  просмотра свойств сервера мониторинга.
                                                При нажатии на значение в столбце «Объект»
                                                  выводится окно просмотра информации об объекте
                                                  мониторинга
                            , , , , , , , , 
                            Проблемы
                                На странице :
                                        Изменен счетчик записей.
                                        Добавлена возможность сортировки по длительности
                                            проблем.
                                        Добавлена возможность фильтрации списка по состоянию
                                            проблем и по объектам мониторинга.
                                        Добавлена возможность поиска  в фильтре «Объект»
                            Отчет о проблемах
                            Изменен шаблон письма с отчетом о проблемах:
                                    Добавлены столбцы с нумерацией строк и состоянием
                                        проблемы.
                                    Добавлена строка с информацией об общем количестве событий и
                                        о количестве нерешенных проблем.
                                    Добавлено наименование оповещения
                            ИТ-услуги
                                    Исправлена ошибка, возникавшая при попытке пользователя
                                        включить ИТ-услугу, отключенную администратором.
                                        Исправлена ошибка, при которой на
                                            странице 
                                            отключалось несколько услуг вместо одной
                            —
                            Роли пользователей
                                    Для авторизованных пользователей исключена возможность
                                        перехода на страницу авторизации без завершения текущей
                                        сессии.
                                        Для роли «Пользователь» добавлены
                                            следующие возможности:
                                                просмотр списка и карточек правил оповещений на
                                                  странице 
                                                  → ;
                                                создание, изменение, включение, выключение и
                                                  удаление собственных правил оповещений на странице
                                                   → 
                            Email-оповещения, внешний вид
                            Скрипты, переменные
                            —
                            Переменные, основные настройки
                            , , 
                            Оповещения
                            —
                            Администрирование, журнал событий
                            , 
                            Панель информации
                            На странице :
                                    Добавлена возможность изменения размера графиков: 
                                            «Количество объектов мониторинга по статусу»;
                                            «Количество объектов мониторинга по
                                                проблемности»;
                                            «Изменение количества объектов мониторинга»;
                                            «Количество нерешенных проблем по важности»;
                                            «Изменение количества проблем»|*|*|*|.
                                    Изменен внешний вид графиков:
                                            «Количество нерешенных проблем по важности»;
                                            «Изменение количества объектов мониторинга»;
                                            «Изменение количества проблем».
                                    Изменен тип графиков «Количество объектов мониторинга по
                                        статусу» и «Количество объектов мониторинга по
                                        проблемности», а также пояснения к этим графикам.
                                        Добавлена возможность выбора
                                            отображаемых графиков.
                                        Добавлена возможность перемещения
                                            графиков.
                                    Исправлена ошибка, при которой некорректно отображались
                                        подписи к графикам
                            , 
                            Внешний вид
                                    Изменено отображение процесса загрузки данных на следующих
                                            страницах:
                                            ;
                                            ;
                                            ;
                                            ;
                                            ;
                                            страница авторизации.
                                    Исправлено отображение полосы прокрутки при загрузке
                                        данных.
                                    Изменен внешний вид таблиц при отсутствии данных и при
                                        возникновении ошибки 502.
                                    Добавлено оповещение «Сервер не отвечает» при отсутствии
                                        ответа от сервера в течение 30 секунд.
                                    Обновлен внещний вид ряда всплывающих окон:
                                            окно удаления правила оповещения;
                                            окно удаления сервера;
                                            окно очистки настроек LDAP;
                                            окно свойств сервера мониторинга;
                                            окно изменения свойств сервера мониторинга;
                                            окно информации об ИТ-услуге;
                                            окно настройки сбора данных;
                                            окно просмотра информации об объекте
                                                мониторинга;
                                            окно очистки настроек email-оповещений;
                                            окно подтверждения удаления пользователя;
                                            окно подтверждения изменения периода неактивности
                                                пользователя для блокировки сеанса;
                                            карточка проблемы.
                                        Исправлена ошибка во всплывающей
                                            подсказке к полю «Пароль» в окне «Добавление
                                            пользователя»
                            , , , , , , , , , , , 
                            Фильтры, панель информации
                            Фильтры, объекты мониторинга, проблемы
                            Добавлена возможность отмены сразу всех фильтров на страницах:
                                    ;
                            , 
                            Фильтры, проблемы
                            Добавлена возможность фильтрации по  на странице 
                            Правила оповещений
                            Добавлена иконка, которая показывает состояние работоспособности
                                канала Email-оповещений на странце 
                            Синхронизация
                            Исправлена ошибка синхронизации метаданных
                            —
                            SIEM
                            Изменено событие о неуспешном входе в систему: если указанный при
                                попытке входа пользователь не существует, информация об этом
                                записывается в поле details объекта user_action
                            Настройки, SIEM
                            Добавлена возможность настройки подключения к SIEM на странице
                                     → 
                            , 
|*|*|*|
    Установка сервера удаленного мониторинга UDV-ITM-RM на ОС РЕД ОС
        Установите ОС РЕД ОС 7.3 по инструкции от производителя. В процессе установки ОС:
        В этом разделе:
|*|*|*|
    Что нового?
        Основные изменения в ПО сервера  v. 1.3.0.1:
            Проверена совместимость с Jatoba 4.5.
            В скрипте генерации переменных env_generator.sh:
                добавлены переменные для настройки шифрования между  и : ,
                            , ;
                    актуализированы значения переменных по умолчанию;
                удалены переменные ZBX_TLSCAFILE, ZBX_TLSCRLFILE, ZBX_TLSCERTFILE,
                ZBX_TLSKEYFILE.
|*|*|*|
    Восстановление резервной копии базы данных Jatoba/PostgreSQL
            Способ 1: развертывание резервной копии с форматом «custom»
            Способ подходит для резервных копий, которые были созданы с помощью команды
                    pg_dump -Fc и имеют пользовательский формат.
                    Убедитесь, что на сервере для восстановления находится файл архива,
                        полученный в результате работы pg_dump. 
                    Восстановите базу данных Jatoba из файла архива, созданного командой
                            pg_dump:psql -U [db_user] -h [host] -p [port] [db_name] < [db_dump_path]В
                        этой команде:
                            db_user — имя пользователя;
                            host — имя или IP-адрес компьютера, на котором работает сервер;
                            port — порт подключения;
                            db_name — наименование базы данных;
                            db_dump_path - путь до резервной копии.
                        Пример: Команда для восстановления БД с пользователем
                                itmrm_user, IP-адресом сервера
                                127.0.0.1, портом 10265,
                            наименованием itmrm_db и путем для резервной копии
                                /opt/itmrm_db_260723.dump будет выглядеть следующим
                            образом:psql -U itmrm_user -h 127.0.0.1 -p 10265 itmrm_db < /opt/itmrm_db_260723.dump
                        Введите пароль пользователя для доступа к базе данных.
                        После успешного ввода пароля начнется восстановление из файла с
                            выгруженной базой данных.
|*|*|*|
    Ошибка при запуске агента вида «cannot load os dependent items: strconv.Atoi: parsing
        "имя_службы": invalid syntax»
                Причина
                Способ устранения
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
            Добавлен способ устранения нештатной ситуации .
            Изменены разделы: 
            Удалены разделы:
                    «Создание резервной копии всех БД и файлов журналов БД Jatoba»
                    «Восстановление резервной копии всех БД и файлов журналов БД Jatoba»
|*|*|*|
    Ошибка в логах контейнеров «**** PostgreSQL server is not available.»
             недоступен, в логах содержится ошибка «****
                PostgreSQL server is not available. Waiting 5 seconds…».
                Причина 1
                Запуск службы docker после службы СУБД.
                Способ устранения
                        Убедитесь, что причина проблемы в запуске службы docker после службы
                            СУБД. На это указывают следующие признаки: 
                                При проверке статуса службы СУБД командой systemctl
                                        status jatoba-* выясняется, что служба не запущена.
                                Появляется сообщение «СООБЩЕНИЕ: не удалось привязаться к
                                    адресу IPv4 "172.16.239.1": Cannot assign requested address
                                    ПРЕДУПРЕЖДЕНИЕ: не удалось создать принимающий сокет для
                                    "172.16.239.1"».
                                При запуске команды lsof -i -P -n в выводе нет
                                    сокета для 172.16.239.1. 
                        Настройте запуск службы СУБД после службы docker. Для этого:
                                Перейдите в режим редактирования службы СУБД:
                                    systemctl edit jatoba-*.service
                                Добавьте блок [Unit]:
                                    [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
                                Для применения изменений в настройках службы СУБД выполните
                                    команду:
                                    systemctl daemon-reload
                        Проверьте состояние службы Jatoba:
                            systemctl status jatoba-*
                Причина 2
                Опечатки в значениях IP-адресов в в файле pg_hba.conf.
                Способ устранения
                        Перейдите в режим редактирования файла pg_hba.conf: 
                        vi /var/lib/jatoba/[jatoba_version]/data/pg_hba.confВ
                            этой команде jatoba_version — первая цифра версии
                            Jatoba.
                        При использовании Jatoba 4.5 выполните
                            команду:vi /var/lib/jatoba/4/data/pg_hba.conf
                        Проверьте и при необходимости исправьте IP-адрес.
                Причина 3
                Опечатки в значении порта в файле postgresql.conf.
                Способ устранения
                        Перейдите в режим редактирования файла
                            postgresql.conf:
                            vi /var/lib/jatoba/[jatoba_version]/data/postgresql.conf
                        В этой команде jatoba_version — первая цифра версии
                            Jatoba.
                        При использовании Jatoba 4.5 выполните
                            команду:vi /var/lib/jatoba/4/data/postgresql.conf
                        Проверьте и при необходимости исправьте значение порта.
                Причина 4
                Неверные учетные данные для подключения к БД в конфигурационном файле
                        .db.env.
                Способ устранения
                        Перейдите в режим редактирования файла .db.env:
                            vi env/.db.env
                        Проверьте, что учетные данные в файле .db.env
                            совпадают с учетными данными для подключения. При необходимости
                            исправьте данные.
|*|*|*|
    Установка агента на DATAPK ITM-A
        Для мониторинга состояния аппаратной платформы, на которой установлен сервер
            агентов, необходимо установить на ней агент .
                Запустите установку rpm-пакета агента:
                    rpm -Uvh itm-agent_[версия_агента].rpm
                Добавьте сервис в автозагрузку с помощью команды: 
                    systemctl enable zabbix-agent
                С помощью текстового редактора отредактируйте переменные в файле
                        /etc/zabbix/zabbix_agentd.conf:
                        Откройте файл /etc/zabbix/zabbix_agentd.conf для
                            редактирования:
                            vi /etc/zabbix/zabbix_agentd.conf
                        Измените значения следующих переменных:
                                Server=<IP-адрес сервера
                                        консолидации>
                                ListenPort=10050
                                ServerActive=<IP-адрес сервера
                                    консолидации>
                                Hostname=<имя текущего
                                        сервера>
                Добавьте правило в межсетевой экран для открытия порта агента:
                    iptables -I INPUT [номер строки] -p tcp --dport 10050 -j ACCEPT
                 Чтобы добавить правило 4 строкой, используйте команду:
                    iptables -I INPUT 4 -m state --state NEW -p udp --dport 161 -j ACCEPT 
                Примените правила межсетевого экрана:
                    service iptables save
                Проверьте правила межсетевого экрана:
                    iptables -nL
                Запустите агента:
                systemctl start zabbix-agent
                Проверьте состояние агента:
                systemctl status zabbix-agent
|*|*|*|
    Установка агента на UDV-ITM-RM
        Для мониторинга состояния аппаратной платформы, на которой установлен сервер
            агентовагентовудаленного мониторинга, необходимо установить на ней агент 
            .
                Запустите установку rpm-пакета агента:
                    rpm -Uvh itm-agent_[версия_агента].rpm
                Добавьте сервис в автозагрузку с помощью команды: 
                    systemctl enable zabbix-agent
                С помощью текстового редактора отредактируйте переменные в файле
                    /etc/zabbix/zabbix_agentd.conf:
                        Откройте файл /etc/zabbix/zabbix_agentd.conf для
                            редактирования:
                            vi /etc/zabbix/zabbix_agentd.conf
                        Измените значения следующих переменных:
                                Server=<IP-адрес сервера
                                    консолидации>
                                ListenPort=10050
                                Hostname=<имя текущего
                                    сервера>
                        Закомментируйте переменную .
                Добавьте правило в межсетевой экран для открытия порта агента:
                    iptables -I INPUT [номер строки] -p tcp --dport 10050 -j ACCEPT
                 Чтобы добавить правило 4 строкой, используйте команду:
                    iptables -I INPUT 4 -m state --state NEW -p udp --dport 161 -j ACCEPT 
                Примените правила межсетевого экрана:
                    service iptables save
                Проверьте правила межсетевого экрана:
                    iptables -nL
                Запустите агента:
                systemctl start zabbix-agent
                Проверьте состояние агента:
                systemctl status zabbix-agent
|*|*|*|
    Совместимость компонентов решения для UDV-ITM-RM
        В таблице указаны поддерживаемые версии компонентов решения для  v. 1.3.0.
                Совместимость компонентов решения для 
                            Компонент решения
                            Версия ПО
                            Операционная система
                                    РЕД ОС v. 7.3*; 7.2
                                    Centos v. 8.4
                                    Astra Linux Special Edition (Смоленск) v. 1.6
                            СУБД
                                    Jatoba v. 4.5*; 1.14
                                    PostgreSQL v. 14
                            Виртуализация
                            Docker v. 20
        Где * — рекомендованная версия, обеспечивающая весь доступный функционал и стабильность
            работы.
|*|*|*|
    Сбой инициализации модуля управления парольными политиками «securityprofile»
            После перезагрузки сервера СУБД или перезапуска службы jatoba-1 в логах СУБД,
                расположенных в директории /var/lib/jatoba/1/data/log, содержится
                ошибка «FATAL: Extension securityprofile need to be initialized by superuser.».
                Причина
                Модуль управления парольными политиками «securityprofile» не был повторно
                    инициализирован после перезагрузки сервера СУБД или перезапуска службы
                    jatoba-1.
                Способ устранения
                Повторно инициализируйте модуль управления парольными политиками
                    пользователей СУБД «securityprofile». Для этого:
                        Войдите в интерактивный терминал для работы с postgresql под
                            пользователем postgres:
                            sudo -u postgres psql -p 10265 -h 127.0.0.1 -U [имя пользователя] [имя базы]
                            Где:
                                -u postgres — пользователь ОС;
                                -p 10265 — порт, через который будет произведено
                                    подключение к базе данных;
                                -h 127.0.0.1 — подключение к хосту 127.0.0.1;
                                -U [имя пользователя] — подключение от имени
                                    указанного пользователя.
                        Инициализируйте модуль «securityprofile» c помощью команды:
                            SELECT SECURITYPROFILE.SYNCHRONIZE();
                        Покиньте терминал:
                            \q
|*|*|*|
    Ошибка вида «Cannot connect to <...>: Timeout.»
            В веб-интерфейсе  индикатор статуса доступности узла сети
                по протоколу  при подключении через прокси (сервер ) имеет красный цвет: . При наведении курсора
                на индикатор появляется всплывающая подcказка с ошибкой вида «Cannot connect to
                <...>: Timeout.».
            В качестве причин недоступности узла сети рассмотрены следующие:
                    Закрыты порты 161/ и 162/ на межсетевом экране узла сети.
                    Превышено время ожидания ответа от узла сети.
                Способ устранения
                Способ устранения
                        Перейдите в режим командной строки сервера  или другого компьютера с
                                 Linux и установленными пакетами
                            net-snmp и net-snmp-utils.
                        Отредактируйте значение переменной  в
                            соответствии с найденным значением таймаута. Для этого:
                                Перейдите в режим командной строки сервера .
                                Перейдите в режим редактирования файла
                                        zabbix_proxy.conf:
                                    vi /etc/zabbix/zabbix_proxy.conf
                                Увеличьте значение переменной .
                                    Максимальное возможное значение  равно 30.
                                Сохраните файл и выйдите из режима редактирования:
                                    :wq
                                Перезапустите службу сервера 
                                    командой:
                                    systemctl restart zabbix-proxy
|*|*|*|
    Установка сервера агентов DATAPK ITM-A на ОС РЕД ОС
        Установите ОС РЕД ОС 7.3 по инструкции от производителя. В процессе установки ОС:
        В этом разделе:
|*|*|*|
    Резервное копирование и восстановление баз данных
            В этом разделе рассматривается резервное копирование и восстановление баз данных.
                Рассмотренный метод позволяет восстанавливать базу данных в том состоянии, в котором
                она была на момент резервного копирования. См. подразделы: 
                Для настройки резервного копирования нескольких БД
                    и файлов журнала БД в двоичном виде вы можете воспользоваться сторонними
                    средствами. 
|*|*|*|
    Переменные файла .env
                Переменные файла .env
                            Название переменной
                            Описание
                            Значение по умолчанию (жирным) или пример
                            docker-compose.release.yaml
                            172.16.240.0/24
                            172.16.240.1
                            Тег.
                            master
                            10051
                            5432
                            162
                            Порт для подключения администратора postgres.
                            5454
|*|*|*|
    Конфликт подсети контейнеров
                Причина 1
                Адрес подсети контейнеров уже используется в вашей инфраструктуре.
                Способ устранения
                Для устранения проблемы измените подсеть контейнеров
                    Docker:
                        Проверьте и при необходимости отредактируйте файл
                            .env:
                                Если в файле  не задано значение переменной , добавьте в файл строку:
                                =XXX.XXX.XXX.XXX/XX
                                    Где XXX.XXX.XXX.XXX/XX — новая подсеть. 
                                Если в файле  уже указано значение переменной , задайте ей новое значение.
                        Отредактируйте файл . Для этого:
                                Войдите в режим редактирования файла  с помощью команды:
                                    vi /var/lib/jatoba/1/data/pg_hba.conf
                                Измените IP-адрес и маску подсети контейнеров Docker в разделе
                                    «# IPv4 local connections:» в строке вида:
                                    host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                                Перезапустите СУБД для применения настроек:
                                    systemctl restart jatoba-1*
                        Убедитесь, что в файле .db.env используется корректное
                            значение подсети для обращения к базе данных:
                                Перейдите в режим редактирования файла:
                                    vi env/.db.env
                                Убедитесь, что переменная 
                                    имеет значение 172.17.0.1.
                Причина 2
                Адрес подсети docker0 используется в вашей инфраструктуре.
                Способ устранения 1
                        Остановите и удалите все контейнеры, которые не указаны в
                                docker-compose файлах:
                            docker-compose down --remove-orphans
                        Просмотрите список маршрутов одной из команд:
                                    route -n
                                        Результат работы команды route -n
                                    ip r
                                        Результат работы команды ip r
                        Убедитесь, что в списке маршрутов отсутствуют контейнерные подсети,
                            кроме docker0. Для этого просмотрите список контейнерных подсетей
                            командой: 
                            docker network ls
                        При наличии в списке других подсетей найдите их идентификаторы сети в
                            столбце NETWORK ID.
                                Список контейнерных подсетей
                             В приведенном выше списке идентификатор сети c именем bridge —
                            bf34584f056d.
                        При необходимости удалите контейнерные подсети, кроме docker0: 
                            docker network rm [идентификатор подсети]
                            рекомендуется удалять контейнерную подсеть только
                                в случае проблем с инициализацией.
                        Создайте файл /etc/docker/daemon.json.
                        Добавьте в файл адрес узла сети и маску сети.
                            {
"bip": "172.17.77.1/24"
}
                        Перезапустите службу docker:
                            systemctl restart docker
                        Убедитесь, что в файле .db.env используется значение
                            новой подсети для обращения к базе данных:
                                Перейдите в режим редактирования файла:
                                    vi env/.db.env
                                Убедитесь, что значение переменной  равно значению docker0, заданному
                                    на шаге .
                        Отредактируйте файл pg_hba.conf. Для этого:
                                Перейдите в режим редактирования файла
                                        pg_hba.conf с помощью команды:
                                    vi /var/lib/jatoba/1/data/pg_hba.conf
                                Измените IP-адрес и маску подсети контейнеров Docker в разделе
                                    «# IPv4 local connections:» в строке вида:
                                    host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        Отредактируйте файл postgresql.conf. Для этого: 
                                Измените значение переменной listen_addresses
                                    в разделе «CONNECTIONS AND AUTHENTICATION», чтобы оно
                                    соответствовало представленному ниже: 
                                listen_addresses = '127.0.0.1,172.17.77.1'Где:
                                        127.0.0.1 — локальный IP-адрес сервера ;
                                        172.17.77.1 — IP-адрес подсети docker0, заданный на шаге
                                                 .
                Способ устранения 2
                        Удалите все Docker-контейнеры, включая запущенные контейнеры:
                            docker rm -f $(docker ps -a -q)
|*|*|*|
    Нештатные ситуации и способы их устранения
        Дополнительно может потребоваться следующая информация:
                полная техническая информация о системе и логи (используйте скрипт сбора
                    детальной информации о системе, подробнее см. в разделе );
                свободное место на корневом разделе диска; используйте команду
                            df -h /.
                свободная оперативная память, текущий список процессов; используйте команду htop.
                значение Load Average;
                загрузка диска. используйте команду
                        iotop.
            В этом разделе:
|*|*|*|
    Установка сервера удаленного мониторинга с СУБД Jatoba
                Установите СУБД Jatoba по инструкции от производителя.
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер удаленного мониторинга. 
                Создайте директорию для установки :
                    mkdir /opt/itm-rm
                Скопируйте следующие файлы в директорию opt/itm-a:
                        env_generator.sh;
                        docker-compose.release.yaml;
                        datapk_itm-rm_[номер версии].tar.gz.
                Перейдите в директорию /opt/itm-rm/: 
                    cd /opt/itm-rm/
                Загрузите образы в операционную систему:
                    docker load -i datapk_itm-rm_[номер версии].tar.gz
                        Измените пароль пользователя postgres в базе
                            данных:
                            ALTER USER postgres WITH PASSWORD '[пароль]';
                             При настройке парольной
                                политики средствами СУБД Jatoba после перезагрузки сервера СУБД или
                                перезапуска службы jatoba-* необходимо повторно инициализировать
                                модуль парольной политики «securityprofile» из-под учетной записи
                                супер-администратора (postgres). В противном случае пользователи с
                                правами ниже супер-администратора не смогут пройти авторизацию.
                                Подробнее см. в разделе  и в
                                документации Jatoba.
                        Создайте пользователя с именем itma_user и необходимым
                            паролем:
                            CREATE USER itma_user WITH PASSWORD '[пароль служебного пользователя]';
                        Создайте базу данных itma_db, в качестве владельца
                            которой указан пользователь itma_user:
                            CREATE DATABASE itma_db WITH OWNER 'itma_user' ENCODING 'UTF8' LC_COLLATE = 'ru_RU.UTF-8' LC_CTYPE = 'ru_RU.UTF-8' TEMPLATE template0;
                        Убедитесь, что база данных itma_db создана:
                            \l
                                Список созданных БД
                        Исправьте значения переменных, чтобы они соответствовали представленным
                            ниже:
                        listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265                          Где:
                                127.0.0.1 — локальный IP-адрес сервера ;
                                172.17.0.1 — IP-адрес подсети docker0.
                            IP-адреса должны быть перечислены через запятую без пробелов.
                                Если IP-адрес подсети docker0 уже
                                используется в вашей инфраструктуре, его нужно изменить. Подробнее
                                см. в разделе .
                Скрипт env_generator.sh предназначен только для создания
                    новых env-файлов, не для редактирования существующих.
                Создайте env-файлы и настройте значения переменных. Для этого:
                        Перейдите в директорию /opt/itm-rm:
                            cd /opt/itm-rm
                        Назначьте скрипту env_generator.sh полные права
                            доступа:
                            chmod +x env_generator.sh
                        Запустите скрипт:
                            ./env_generator.sh
    |*|*|*|                    Откроется всплывающее окно для настройки
                            переменных.
                        Выполните настройку переменных:
                                Чтобы изменить переменную, введите новое значение и нажмите
                                    «Enter».
                                Чтобы оставить значение переменной по умолчанию, нажмите
                                    «Enter».
                            Рекомендуемые и возможные значения переменных приведены в разделе
                                    .
                        Будут созданы файл .env, директория
                                env с файлами .db.env,
                                .proxy.env и директория
                                env/wmi_cred c файлом
                            wmi.pw.
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        Войдите в режим редактирования файла pg_hba.conf с
                            помощью команды:
                        vi /var/lib/jatoba/[версия jatoba]/data/pg_hba.confВ
                            этой команде [версия jatoba] — первая цифра в версии
                            Jatoba.
                        При необходимости измените настройки ограничений на подключение
                            локальных и удаленных пользователей к базам данных:
                        Добавьте следующую строку в раздел «# IPv4 local connections:»
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        для базы данных itma_db, пользователя БД
                                itma_user, IP-адреса подсети контейнера сервера
                            консолидации по умолчанию 172.16.240.0/24 и метода аутентификации
                                md5 строка будет выглядеть следующим образом:
                            host itma_db itma_user 172.16.240.0/24 md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:» и измените ident на md5
                            в строке host all all 127.0.0.1/32 ident.
                Настройте запуск службы СУБД после службы docker. Для этого:
                        Перейдите в режим редактирования службы СУБД:
                            systemctl edit jatoba-*.service
                        Добавьте блок [Unit]:
                            [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
                        Для применения изменений в настройках службы СУБД выполните команду: 
                            systemctl daemon-reload
                Запустите контейнеры:
                    docker-compose up -d
                Для настройки подключения  к серверу
                    мониторинга:
                        Откройте веб-интерфейс сервера мониторинга.
                        Перейдите в меню «Администрирование» → «Прокси». 
                        В правом верхнем углу нажмите на кнопку «Создать прокси».
                        В появившемся окне заполните поля:
                                Имя прокси — введите имя сервера удаленного мониторинга.
                                Режим прокси — выберите «Пассивный».
                                Интерфейс — укажите IP-адрес, оставьте значения «Подключаться
                                    через IP» и «Порт 10051».
                        Нажмите на кнопку «Добавить».
|*|*|*|
    Совместимость компонентов решения для DATAPK ITM-A
        В таблице указаны поддерживаемые версии компонентов решения для  v. 1.3.0.
                Совместимость компонентов решения для 
                            Компонент решения
                            Версия ПО
                            Операционная система
                                    РЕД ОС v. 7.3*; 7.2
                                    Centos v. 8.4
                                    Astra Linux Special Edition (Смоленск) v. 1.6
                            СУБД
                                    Jatoba v. 4.5*; 1.14; 1.5
                                    PostgreSQL v. 14
                            Виртуализация
                            Docker v. 20
        Где * — рекомендованная версия, обеспечивающая весь доступный функционал и стабильность
            работы.
|*|*|*|
    Установка сервера агентов с СУБД Jatoba
                Установите СУБД Jatoba по инструкции от производителя.
                Перейдите в режим командной строки операционной системы, на которой будет установлен
                    сервер агентов. 
                Создайте директорию для установки :
                    mkdir /opt/itm-a
                Скопируйте следующие файлы в директорию opt/itm-a:
                        env_generator.sh;
                        docker-compose.release.yaml;
                        datapk_itm-a_[номер версии].tar.gz.
                Перейдите в директорию /opt/itm-a/: 
                    cd /opt/itm-a/
                Загрузите образы в операционную систему:
                    docker load -i datapk_itm-a_[номер версии].tar.gz
                        Измените пароль пользователя postgres в базе
                            данных:
                            ALTER USER postgres WITH PASSWORD '[пароль]';
                             При настройке парольной
                                политики средствами СУБД Jatoba после перезагрузки сервера СУБД или
                                перезапуска службы jatoba-* необходимо повторно инициализировать
                                модуль парольной политики «securityprofile» из-под учетной записи
                                супер-администратора (postgres). В противном случае пользователи с
                                правами ниже супер-администратора не смогут пройти авторизацию.
                                Подробнее см. в разделе  и в
                                документации Jatoba.
                        Создайте пользователя с именем itma_user и необходимым
                            паролем:
                            CREATE USER itma_user WITH PASSWORD '[пароль служебного пользователя]';
                        Создайте базу данных itma_db, в качестве владельца
                            которой указан пользователь itma_user:
                            CREATE DATABASE itma_db WITH OWNER 'itma_user' ENCODING 'UTF8' LC_COLLATE = 'ru_RU.UTF-8' LC_CTYPE = 'ru_RU.UTF-8' TEMPLATE template0;
                        Убедитесь, что база данных itma_db создана:
                            \l
                                Список созданных БД
                        Исправьте значения переменных, чтобы они соответствовали представленным
                            ниже:
                        listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265                          Где:
                                127.0.0.1 — локальный IP-адрес сервера ;
                                172.17.0.1 — IP-адрес подсети docker0.
                            IP-адреса должны быть перечислены через запятую без пробелов.
                                Если IP-адрес подсети docker0 уже
                                используется в вашей инфраструктуре, его нужно изменить. Подробнее
                                см. в разделе .
                Скрипт env_generator.sh предназначен только для создания
                    новых env-файлов, не для редактирования существующих.
                Создайте env-файлы и настройте значения переменных. Для этого:
                        Перейдите в директорию /opt/itm-a:
                            cd /opt/itm-a
                        Назначьте скрипту env_generator.sh полные права
                            доступа:
                            chmod +x env_generator.sh
                        Запустите скрипт:
                            ./env_generator.sh
             |*|*|*|           Откроется всплывающее окно для настройки
                            переменных.
                        Выполните настройку переменных:
                                Чтобы изменить переменную, введите новое значение и нажмите
                                    «Enter».
                                Чтобы оставить значение переменной по умолчанию, нажмите
                                    «Enter».
                            Рекомендуемые и возможные значения переменных приведены в разделе
                                    .
                        Будут созданы файл .env, директория
                                env с файлами .db.env,
                                .proxy.env и директория
                                env/wmi_cred c файлом
                            wmi.pw.
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        Войдите в режим редактирования файла pg_hba.conf с
                            помощью команды:
                        vi /var/lib/jatoba/[версия jatoba]/data/pg_hba.confВ
                            этой команде [версия jatoba] — первая цифра в версии
                            Jatoba.
                        При необходимости измените настройки ограничений на подключение
                            локальных и удаленных пользователей к базам данных:
                        Добавьте следующую строку в раздел «# IPv4 local connections:»
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        для базы данных itma_db, пользователя БД
                                itma_user, IP-адреса подсети контейнера сервера
                            консолидации по умолчанию 172.16.240.0/24 и метода аутентификации
                                md5 строка будет выглядеть следующим образом:
                            host itma_db itma_user 172.16.240.0/24 md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:» и измените ident на md5
                            в строке host all all 127.0.0.1/32 ident.
                Настройте запуск службы СУБД после службы docker. Для этого:
                        Перейдите в режим редактирования службы СУБД:
                            systemctl edit jatoba-*.service
                        Добавьте блок [Unit]:
                            [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
                        Для применения изменений в настройках службы СУБД выполните команду: 
                            systemctl daemon-reload
                Запустите контейнеры:
                    docker-compose up -d
                Для настройки подключения сервера агентов к серверу консолидации:
                        Откройте веб-интерфейс сервера консолидации.
                        Перейдите в меню «Администрирование» → «Прокси». 
                        В правом верхнем углу нажмите на кнопку «Создать прокси».
                        В появившемся окне заполните поля:
                                Имя прокси — введите имя сервера агентов.
                                Режим прокси — выберите «Пассивный».
                                Интерфейс — укажите IP-адрес, оставьте значения «Подключаться
                                    через IP» и «Порт 10051».
                        Нажмите на кнопку «Добавить».
|*|*|*|
    Переменные файла .db.env
                Переменные для работы с БД
                            Название переменной
                            Описание
                            Значение по умолчанию (жирным) или пример
                            172.17.0.1
                            10265
                            itma_user
                            P@ssw0rd
                            itma_db
|*|*|*|
    Переменные файла .proxy.env
        Не рекомендуется менять значения переменных, если это не указано в
            инструкции. 
            Переменные для корректной работы 
                        Название переменной
                        Описание
                        Допустимые значения
                        Значение по умолчанию (жирным) или пример
                        Режим работы прокси:
                                0 — прокси в активном режиме.
                                1 — прокси в пассивном режиме.
                            Рекомендуется использовать пассивный режим
                            (1).
                        0-1
                        1
                        Адрес сервера  или
                                Zabbix.Входящие соединения будут приниматься только с адресов,
                                указанных в этом списке.
                        Если включена поддержка IPv6, то '127.0.0.1', '::127.0.0.1',
                            '::ffff:127.0.0.1' обрабатываются одинаково и '::/0' разрешает все IPv4
                            и IPv6 адреса. '0.0.0.0/0' можно использовать, чтобы разрешить любой
                            IPv4 адрес.
                        172.16.240.1
                            Порт  или
                                Zabbix, принимающий соединения. Актуально только для прокси в
                                активном режиме.
                        1024-32767
                        10051
                        Уникальное регистрозависимое имя прокси. 
                        Допустимые символы: цифры, буквы, '.', ' ', '_' и '-'.Максимальная
                                длина: 64.
                        zabbix-proxy-docker
                        #
                            Количество часов, в течение которого сервер удаленного мониторинга агентов агентов  будет
                                локально хранить данные, даже если они уже синхронизированы с
                                сервером. Этот параметр можно использовать, если локальные данные
                                используются сторонними приложениями.
                        0-720
                        0
                        Количество часов, в течение которого сервер удаленного мониторинга агентов агентов  будет хранить
                            собранные непереданные данные в случае, если нет связи с сервером . Более старые
                            данные будут утеряны.
                        1-720
                            1
                        #
                        0-3600
                        60
                        #
                            Частота получения конфигурации с сервера. Актуально только для прокси
                                в активном режиме. 
                        1-604800
                        3600
                        #
                        1-3600
                        1
                        Разрешено ли выполнение удаленных команд с сервера мониторинга:
                                0 — не разрешены;
                                1 — разрешены.
                        0-1
                        1
                        Включение логирования выполняемых shell-команд как предупреждений:
                                0 — отключено;
                                1 — включено.
                        0-1
                        1
                        #
                        —
                        0.0.0.0
                        #
                        Порт, который слушает траппер.
                        1024-32767
                        10051
                        #
                        required, verify_ca, verify_full
                        required
                        #
                        —
                        /run/secrets/root-ca.pem
                        #
                        —
                        /run/secrets/client-cert.pem
                        #
                        —
                        /run/secrets/client-key.pem
                        #
                        —
              |*|*|*|          —
                        #
                        —
                        —
                        #
                        0-5
                        3
                        0-1000
                        10
                        #
                        0-1000
                        0
                        #
                         0-1000
                        3
                        0-1000
                        10
                        #
                        0-1000
                        5
                        0-1000
                        5
                        #
                        0-250
                        1
                        #
                        0-1000
                        1
                        #
                        true, false
                        true
                        #
                        —
                        zabbix-java-gateway
                        #
                        1024-32767
                        10052
                        #
                        0-1000
                        5
                        #
                        0-250
                        0
                        #
                        10-86400
                        60
                        #
                        10-86400
                        60
                        #
                        256K - 2G
                        8M
                        #
                        1-300
                        10
                        true или false
                        true
                        #
                        1-24
                        1
                        #
                        128K-8G
                        8M
                        #
                        1-100
                        4
                        #
                        128K-2G
                        16M
                        #
                        128K-2G
                        4M
                        1-30
                        20
                        #
                        1-300
                        300
                        #
                        1-3600
                        45
                        #
                        1-3600
                        60
                        #
                        1-3600
                        15
                        #
                        0-3600000
                        3000
                        #
                        —
                        "dummy1.so,dummy2.so,dummy10.so"
                        #
                        —
                        /zbx/path
                        #
                        —
                        https://127.0.0.1:8200/
                        #
                        —
                        —
                        #
                        Способ подключения агента к серверу. Значение переменной используется
                            активными проверками и игнорируется пассивным прокси.
                            Можно указать только одно значение:
                                unencrypted — подключаться без шифрования (по
                                    умолчанию);
                                psk — подключаться, используя TLS и pre-shared
                                    ключ (PSK);
                                cert — подключаться, используя TLS и
                                    сертификат.
                        unencrypted
                        #
                        Строка — значение pre-shared ключа прокси, используется для
                            зашифрованных соединений с Zabbix сервером.
                        Значение генерируется с помощью команды openssl rand -hex
                                32
                        er125stgedh38dh34u2fgbjqe
                        #
                        Идентификатор pre-shared ключа, используется для зашифрованных
                            соединений с Zabbix сервером.
                        Любая строка
                        Testpsk
|*|*|*|
    Настройка СУБД
                Создайте директорию для хранения базы данных на отдельном томе:
                    mkdir /storage/base
                Установите Jatoba по инструкции от производителя до действия установки
                    пакета-активатора. 
                Продолжите установку пакета-активатора по инструкции от производителя
                    Jatoba.
|*|*|*|
    Установка и настройка агентов
        После установки агента необходимо настроить объект мониторинга. Подробная настройка объектов мониторинга в веб-интерфейсе описана в
            руководстве по эксплуатации .
        В этом разделе:
|*|*|*|
    Установка агентов версии 1 или 2 на ОС Debian
            Для установки агента на  под
                управлением операционной системы Debian 9 версии и новее:
                Добавьте сервис в автозагрузку и запустите агента:
                systemctl enable [имя агента] --nowГде [имя агента] —
                        zabbix-agent для агента версии 1 и
                        zabbix-agent2 для агента версии 2.
                Убедитесь в корректности работы агента:
                systemctl status [имя агента]Где [имя агента] —
                        zabbix-agent для агента версии 1 и
                        zabbix-agent2 для агента версии 2.
                Внесите изменения в конфигурационный файл zabbix_agentd.conf.
                    Для этого:
                        Войдите в режим редактирования файла:
                        vi /etc/zabbix/[имя файла]Где [имя файла] —
                                zabbix_agentd.conf для агента версии 1 и
                                zabbix_agentd2.conf для агента версии 2.
                        Измените файл следующим образом:
                                Присвойте переменной  (и , если используется активный режим
                                    агента) значение IP-адреса сервера  или
                                        , в
                                    зависимости от вашей иерархии. При необходимости
                                        подключения к нескольким серверам мониторинга, перечислите
                                        их IP-адреса через запятую без пробелов.
                                Раскомментируйте строку с переменной . Для этого уберите символ «#» в начале
                                    строки.
                                Присвойте переменной  значение,
                                    соответствующее имени текущего .
                        Сохраните файл и выйдите из режима редактирования: 
                            :wq
                Если в системе используется межсетевой экран, добавьте в него правила для
                    открытия порта агента и примените их.
                        Если используется межсетевой экран firewall-cmd:
                                Если на сервере установлен docker, остановите работу
                                    контейнеров:docker-compose down
                                Добавьте правило:
                                    firewall-cmd --permanent --zone=public --add-port=10050/tcp
                                Примените
                                    правило:firewall-cmd –reload
                                Убедитесь в корректности
                                    настройки:firewall-cmd --permanent --list-all
                                Если на сервере установлен docker:
                                        Перезапустите службу docker для добавления правил в
                                            межсетевой
                                            экран:systemctl restart docker
                                        Запустите работу
                                            контейнеров:docker-compose up -d
                        Если используется межсетевой экран iptables:
                                Если на сервере установлен docker, остановите работу
                                    контейнеров:docker-compose down
                                Добавьте правило: iptables -I INPUT [номер строки] -p tcp --dport 10050 -j ACCEPT 
                                Примените
                                    правило:service iptables save
                                Убедитесь в корректности
                                    настройки:iptables -nL
                                Если на сервере установлен docker:
                                        Перезапустите службу docker для добавления правил в
                                            межсетевой
                                            экран:systemctl restart docker
                                        Запустите работу
                                            контейнеров:docker-compose up -d
                Перезапустите службу агента для применения настроек:
                systemctl restart [имя службы агента]Где [имя службы
                    агента] — zabbix-agent для агента версии 1 и
                        zabbix-agent2 для агента версии 2.
|*|*|*|
    Монтирование раздела
                Для монтирования раздела:
                    Создайте пустую таблицу разделов GPT с помощью команды
                        g.
                            Результат работы команды g
                    Создайте раздел с помощью команды n. 
                            Укажите номер раздела 1.
                            В качестве значения первого сектора укажите минимальное число из
                                предложенных.
                            Для записи вида «Первый сектор (2048-4685545438, default 2048)»
                                укажите значение 2048.
                            В качестве значения последнего сектора укажите максимальное число
                                из предложенных, чтобы выделить раздел на весь объем диска.
                            Для записи вида «Последний сектор + число секторов или +
                                размер{K,M,G,T,P} (2048-4685545438, default 4685545438)» укажите
                                    значение 4685545438.
                            Результат работы команды p.
                            Результат работы команды mkfs -t ext4 -L storage
                                /dev/sdb1.
                    Просмотрите файловые системы и UUID в системе с помощью команды
                            lsblk -f.
                            Результат работы команды lsblk -f
                    Для автоматического монтирования тома после запуска системы добавим
                        информацию в конфигурационный файл /etc/fstab:
                            Перейдите в режим редактирования файла
                                /etc/fstab:
                                vi /etc/fstab
                            Добавьте в конец файла строку:
                                /dev/sdb1 /storage ext4 defaults 0 2
                                    Содержимое файла /etc/fstab
                            Сохраните изменения и закройте файл:
                                :wq
                            Результат работы команды df -hT
|*|*|*|
    Обновление UDV-ITM-RM с версии 1.2 до версии 1.3.0.1
        Для обновления  с версии 1.2 до версии 1.3.0.1
                используется скрипт conf_to_envs.sh. Скрипт также переносит
                имеющиеся значения переменных из конфигурационного файла в env-файлы и генерирует
                остальные необходимые для работы env-файлы и переменные. 
        Для обновления:
            Остановите службу zabbix-proxy:
                systemctl disable --now zabbix-proxy.service
            Установите docker согласно инструкции .
                Создайте директорию /opt/itm-rm:
                    mkdir /opt/itm-rm
                Загрузите на сервер  в директорию
                        /opt/itm-rm содержимое каталога с обновленным
                    дистрибутивом:
                        datapk_itm-a_v1.3.0.1.tar.gz;
                        docker-compose.release.yaml;
                        conf_to_envs.sh.
                Перейдите в директорию /opt/itm-rm: 
                    cd /opt/itm-rm/
            Назначьте права на запуск скрипта:
                chmod +x conf_to_envs.sh
            Запустите скрипт:
                ./conf_to_envs.sh
                Скрипт предназначен для генерации env-файлов с нуля, поэтому в рабочей
                    директории не должно быть директории env и файла
                    .env. Для работы скрипта также необходимо наличие файла
                    /etc/zabbix/zabbix_proxy.conf.
            Откроется окно для редактирования переменных.
            Настройте переменные, относящиеся к базам данных и подсети Docker:
                    Чтобы изменить переменную, введите новое значение и нажмите
                        «Enter».
                    Чтобы оставить значение по умолчанию, нажмите «Enter».
                Остальные переменные скрипт самостоятельно берет из имеющегося
                    конфигурационного файла. Подробнее про переменные см. в разделе 
                    .
            Установите docker-образы командой:
                docker load -i datapk_itm-a_v1.3.0.1.tar.gz
            Остановите службу docker:
                systemctl stop docker
                Запустите docker-контейнеры, выполнив следующую команду из директории
                        /opt/itm-rm/, где находятся compose и
                        env файлы компонента:
                    docker-compose up -d
            Убедитесь, что новая версия  работает и собирает данные.
            Удалите пакет zabbix-proxy:
                yum remove zabbix-proxy
|*|*|*|
    Настройка ОМ с ОС Windows для безагентного мониторинга по протоколу WMI
        Протокол  для мониторинга функционирования 
                рекомендуется использовать только при отсутствии возможности мониторинга по
                протоколу ., на котором ранее был
                настроен сбор по  для DATAPK, не требует дополнительной настройки  для .Для настройки безагентного сбора
            на  Windows с помощью протокола :
                Зайдите в интерфейс объекта мониторинга.
                Добавьте пользователя для безагентного сбора по протоколу . Для этого:
                        Нажмите Win+R.
                        Появится окно «Выполнить».
                        Введите compmgmt.msc и нажмите Enter.
                        Появится окно «Управление компьютером». 
                                Окно «Управление компьютером»
                        В левой части окна перейдите в директорию Служебные программы →
                            Локальные пользователи → Пользователи.
                        В центральной части окна нажмите правой кнопкой мыши и выберите «Новый
                            пользователь».
                                Процесс создания нового пользователя
                        Появится окно создания нового пользователя.
                        Введите логин в поле «Пользователь».
                        Введите и подтвердите пароль.
                        Снимите чекбокс «Требовать смены пароля при следующем входе в
                            систему».
                        Нажмите на кнопку «Создать».
                                Окно создания нового пользователя
                Установите необходимые права созданному пользователю. Для этого:
                        В окне «Управление компьютером» установите курсор на Службы и
                            приложения → Управляющий элемент .
                        Нажмите правую кнопку мыши и выберите «Свойства».
                                Выбор свойств управляющего элемента WMI
                        Появится окно «Свойства. Управляющий элемент ».
                        Перейдите на вкладку «Безопасность».
                        Выберите пространство Root и нажмите кнопку «Безопасность» в нижней
                            правой части окна.
                                Окно «Свойства. Управляющий элемент WMI», вкладка
                                    «Безопасность»
                        Появится окно «Безопасность для Root».
                        Добавьте в список созданного пользователя и установите ему разрешения
                            «Выполнение методов», «Включить учетную запись», «Включить
                            удаленно».
                        Нажмите на кнопку «Применить».
                                Окно «Безопасность для Root»
                Разрешите передавать трафик по протоколу  через стандартный межсетевой экран (брандмауэр). Для этого:
                        Нажмите Win+R.
                        Появится окно «Выполнить».
                        Введите cmd и нажмите Enter.
                        В зависимости от языка системы введите:
                                Если в системе установлен русский язык:
                                    netsh advfirewall firewall set rule group="инструментарий управления windows (wmi)" new enable=yes
                                Если в системе установлен английский язык:
                                    netsh advfirewall firewall set rule group="windows management instrumentation (wmi)" new enable=yes
                    При наличии другого межсетевого экрана настройте его так, чтобы
                        он не блокировал трафик по протоколу .
                Отключите контроль учетных записей пользователя. Для этого:
                        Перейдите в раздел «Учетные записи пользователей» панели
                            управления.
                        Выберите пункт «Изменение параметров контроля учетных записей».
                                Раздел «Учетные записи пользователей»
                        Появится окно «Параметры управления учетными записями
                            пользователей».
                        Установите значение «Никогда не уведомлять».
                                Окно «Параметры управления учетными записями
                                    пользователей»
                        Нажмите на кнопку «ОК».
                        Нажмите Win+R.
                        Появится окно «Выполнить».
                        Введите regedit и нажмите Enter.
                        Появится окно подтверждения.
                        В левой части окна перейдите в директорию
                                HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System.
                                Окно «Редактор реестра»
                        В правой части окна дважды нажмите левой кнопкой мыши на имя элемента
                                LocalAccountTokenFilterPolicy.
                        Появится окно «Изменение параметра».
                         Измените значение LocalAccountTokenFilterPolicy на 1
                            (тип DWORD). 
                        Нажмите на кнопку «ОК».
                                Окно «Изменение параметра»
                        Перезагрузите операционную систему и войдите в систему с настроенной
                            для сбора учетной записью.
                Добавьте 
                    в список доверенных узлов. Для
                    этого:
                        Нажмите Win+R.
                        Появится окно «Выполнить».
                        Введите powershell и нажмите Ctrl + Shift + Enter для запуска от имени
                            администратора.
                        Появится окно powershell.
                        Перейдите в директорию client:
                            cd wsman:\localhost\client
                        Добавьте 
                             в
                            список доверенных:
                            set-item trustedhosts [сетевое имя   ]
        |*|*|*|        Разрешите вызовы DCOM:
                        Нажмите Win+R.
                        Появится окно «Выполнить».
                        Введите DCOMCNFG и нажмите Enter.
                        Появится окно «Службы компонентов».
                        Найдите пункт «Службы компонентов» и нажмите на него.
                        В центральной части окна перейдите в директорию Компьютеры → Мой
                            компьютер.
                         Нажмите правой кнопкой мыши на надпись «Мой компьютер» и выберите в
                            контекстном меню «Свойства».
                                Окно «Службы компонентов»
                        Появится окно «Свойства: Мой компьютер».
                        Перейдите на вкладку «Безопасность COM».
                        В разделе «Права доступа» выберите «Изменить ограничения».
                                Окно «Свойства: Мой компьютер», вкладка
                                    «Безопасность»
                        Появится окно «Права доступа». 
                        Добавьте созданного пользователя и установите ему разрешения «Локальный
                            доступ» и «Удаленный доступ».
                        Нажмите на кнопку «ОК».
                                Окно «Права доступа»
                        В разделе «Разрешения на запуск и активацию» окна «Свойства: Мой
                            компьютер» выберите «Изменить ограничения».
                        Появится окно «Разрешение на запуск и активацию».
                        Добавьте созданного пользователя и установите ему разрешения «Локальный
                            запуск», «Удаленный запуск», «Локальная активация» и «Удаленная
                            активация».
                        Нажмите на кнопку «ОК».
                                Окно «Разрешение на запуск и активацию»
                        Убедитесь, что на вкладке «Свойства по умолчанию» установлен чекбокс
                            «Разрешить использование DCOM на этом компьютере».
                                Вкладка «Свойства по умолчанию»
                        Нажмите на кнопку «Применить».
                        Появится окно подтверждения выбора.
                        Нажмите на кнопку «Да».
                                Окно подтверждения выбора
                        Вернитесь в окно «Службы компонентов».
                        В директории Мой компьютер → Настройка DCOM выберите Windows Management
                            and Instrumentation.
                        Нажмите правую кнопку мыши и выберите «Свойства».
                                Выбор свойств Windows Management and Instrumentation
                        Появится окно «Свойства: Windows Management and
                            Instrumentation».
                        Перейдите на вкладку «Безопасность».
                        Убедитесь, что для всех разрешений установлен пункт «Настроить» и
                            созданному пользователю даны все разрешающие права.
                                Вкладка «Безопасность» окна «Свойства: Windows Management and
                                    Instrumentation»
                        Нажмите на кнопку «ОК».
                Настройте CIMOM. Для этого:
                        Нажмите Win+R.
                        Появится окно «Выполнить».
                        Введите regedit и нажмите Enter.
                        Появится окно подтверждения.
                        В левой части окна перейдите в директорию
                                HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WBEM\CIMOM.
                                Окно «Реестр изменений»
                        В правой части окна дважды нажмите левой кнопкой мыши на имя элемента
                                AllowAnonymousCallback.
                        Появится окно «Изменение параметра».
                        Измените значение AllowAnonymousCallback на 1 (тип
                            DWORD).
                        Нажмите на кнопку «ОК».
                                Окно «Изменение параметра»
                Убедитесь, что созданному пользователю предоставлен доступ к компьютеру из
                    сети. Для этого:
                        Нажмите Win+R.
                        Появится окно «Выполнить».
                        Введите gpedit.msc и нажмите Enter.
                        Появится окно «Редактор групповой локальной
                            политики».
                        В левой части окна перейдите в директорию Конфигурация компьютера →
                            Конфигурация Windows → Параметры безопасности → Локальные политики →
                            Назначение прав пользователя.
                        Найдите в списке политику «Доступ к компьютеру из сети» и дважды
                            нажмите на нее левой кнопкой мыши.
                                Окно «Редактор локальной групповой политики»
                        Появится окно «Свойства: доступ к компьютеру из сети». 
                                Окно «Свойства: доступ к компьютеру из сети»
                        Убедитесь, что созданный пользователь присутствует в списке. Если
                            пользователя там нет, добавьте его.
                Убедитесь, что служба «Инструментарий управления Windows» запущена
                    автоматически. Для этого:
                        Нажмите Win+R.
                        Появится окно «Выполнить».
                        Введите services.msc и нажмите Enter.
                        Появится окно «Службы».
                        Найдите в списке службу «Инструментарий управления Windows».
                        Убедитесь, что в состояние службы «Работает», а тип запуска
                            «Автоматически».
                                Окно «Службы»
                Перезагрузите операционную систему объекта мониторинга.
            Подробная настройка объектов мониторинга в
                веб-интерфейсе описана в Руководстве по эксплуатации  в разделе «Объекты мониторинга. Узлы
                сети».
|*|*|*|
    Настройка безагентного сбора
        Безагентный мониторинг  и сбор параметров
            их функционирования может быть реализован с использованием протоколов , ,  или .
        Для безагентного мониторинга рекомендуется преимущественно использовать протокол 
            для всех типов , в том числе
                 с ОС Windows. При отсутствии
            поддержки  объектом мониторинга, возможно использование .
        В этом разделе:
|*|*|*|
    Установка сервера агентов с отдельным томом для БД
            Этот раздел описывает последовательность действий для установки  для случая, когда на сервере используются два
                тома — первый том для операционной системы, второй том для базы данных.
            Если вы планируете использовать только один том, перейдите в раздел .
            Все нижеописанные действия на сервере производятся после настройки RAID на дисках и
                установки операционной системы и дополнительных пакетов согласно разделу .
            В этом разделе:
|*|*|*|
    Настройка сервера ITM-RM для безагентного мониторинга по протоколу WMI
            Для настройки возможности безагентного сбора данных с  по протоколу WMI:
                Перейдите в режим командной строки сервера консолидации , который будет
                    собирать данные с .
                Войдите в режим редактирования файла wmi.pw:
                    vi /opt/itm-rm/env/wmi_cred/wmi.pw
                Введите учетные данные  по
                    следующему шаблону:
                        В квадратные скобки «[]» введите имя  (hostname).
                        В переменную username введите логин .
                        В переменную password введите пароль .
                        В переменную domain введите домен, под которой происходит подключение к
                            . Если это локальная
                            учетная запись, то в качестве домена введите имя .
                    При полном совпадении данных учетных записей в одном домене вы
                        можете добавить их в блок [DEFAULT].
                Сохраните конфигурационный файл и выйдите из режима редактирования:
                    :wq
|*|*|*|
    Настройка ОМ с ОС Windows Server 2012 
        Для  с этой ОС
            настройка происходит с помощью протокола .
            Настройка ОМ
                Для настройки ОМ должна быть установлена служба . Подробнее про установку см. в разделе .
                Найдите соответствующие службы для последующей настройки. Для этого:
                        Нажмите Win+R. 
                        В появившемся окне введите services.msc.
                        Нажмите на кнопку «OK».
                        Запуск оснастки службы 
                Для более детальной настройки  агента:
                        Нажмите правой кнопкой мыши на « Service» и выберите «Properties».
                                Службы
                        На вкладке «Security» создайте имя сообщества. Для этого нажмите на
                            кнопку «Add».
                                Окно «SNMP Service Properties»
                        В открывшемся окне:
                                выберите права сообщества;Рекомендуемое значение — READ
                                        ONLY.
                                введите имя сообщества;
                                нажмите на кнопку «Add».
                                Окно «SNMP Service Configuration»
                        Для применения текущих настроек нажмите на кнопку «Apply».
                                Окно «SNMP Service Configuration»
                Перезапустите службу .
            Установка службы SNMP
                Зайдите в панель «Server Manager». 
                Перейдите в раздел «Add roles and features».
                        Панель «Server manager»
                В открывшемся окне перейдите на вкладку «Server Selection».
                Выберите сервер, на который будет производится установка компонента .
                        Окно «Add Roles and Features Wizard»
                Добавьте компонент « Service». Для этого:
                        Перейдите на вкладку «Features».
                        В выведенном списке установите чекбокс « Service».
                                Выбор SNMP service
                        В появившемся окне нажмите на кнопку «Add features».
                                Добавление компонента
                            Результат шага: Будет установлен чекбокс напротив « Service».
                        Нажмите на кнопку «Next».
                                Переход у установке SNMP Service
                        Для начала загрузки нажмите на кнопку «Install».
                                Начало установки
                            Результат шага: Начнется загрузка. 
                                Запуск оснастки Службы
                        После завершения загрузки нажмите на кнопку «Close».
                                Службы
|*|*|*|
    Настройка безагентного сбора на ОМ с ОС Centos с помощью протокола SNMPv3
                        Для настройки безагентного сбора данных на  с  Centos с помощью
                протокола :
                            Перейдите в режим командной строки .
                            Остановите сервис snmpd:
                                systemctl stop snmpd
                            Создайте пользователя с помощью команды:
                            net-snmp-create-v3-user [-ro] [-A authpass] [-a MD5|SHA] [-X privpass] [-x DES|AES] [username]Где:
                                    -ro — read-only, права только для чтения;
                                    authpass — пароль аутентификации;
                                    -a — протокол аутентификации MD5 или SHA;
                                    privpass — приватный ключ;
                                    -x — протокол безопасности DES или AES;
                                    username — пользователь.
                            Для пользователя с паролем аутентификации P@ssw0rd, протоколом
                                аутентификации SHA, приватным ключом p@SSW0RD, протоколом
                                безопасности AES и именем datapkitmv3 команда будет выглядеть
                                следующим
                                    образом:net-snmp-create-v3-user -ro -A P@ssw0rd -a SHA -X p@SSW0RD -x AES datapkitmv3
                                    Создание пользователя
                            Данные о пользователе будут записаны в файл
                                    /etc/snmp/snmpd.conf, а данные о приватном
                                ключе — в файл
                                /var/lib/net-snmp/snmpd.conf.
                            Запустите службу snmpd и добавьте ее в автозагрузку:
                                systemctl enable snmpd --now
                            Убедитесь в корректности настроек межсетевого экрана:
                                iptables -nL
                Если в цепочке INPUT отсутствует правило, разрешающее использование порта
                        161/, выполните следующие действия: 
                        Остановите работу контейнеров:
                            docker-compose down
                        Добавьте правило, разрешающее использование порта 161/, для корректной отправки информации по протоколу : 
                            iptables -I INPUT [номер строки] -m state --state NEW -p udp --dport 161 -j ACCEPT
                         Чтобы добавить правило 5 строкой, используйте команду:
                            iptables -I INPUT 5 -m state --state NEW -p udp --dport 161 -j ACCEPT 
                        Сохраните правила межсетевого экрана командой:
                            service iptables save
                        Запустите работу контейнеров:
                            docker-compose up -d
                В командной строке узла сети отправьте запрос к -агенту с помощью утилиты snmpwalk для проверки сделанных настроек:
                snmpwalk -v3 [-a MD5|SHA] [-A authpass] [-x DES|AES] [-X privpass] [-l noAuthNoPriv|authNoPriv|authPriv] [-u username] [IP-address] | moreГде:
                        -v3 — версия ;
                        -a — протокол аутентификации MD5 или SHA;
                        authpass — пароль аутентификации;
                        -x — протокол безопасности DES или AES;
                        privpass — приватный ключ;
                        -l — уровень безопасности noAuthNoPriv, authNoPriv или authPriv;
                        username — пользо|*|*|*|ватель;
                        IP-address — IP-адрес узла сети. Укажите 127.0.0.1, чтобы узел сети
                            отправил запрос сам себе.
                Для пользователя с протоколом аутентификации SHA, паролем аутентификации
                    P@ssw0rd, протоколом безопасности AES, приватным ключом p@SSW0RD, уровень
                    безопасности authPriv и именем datapkitmv3 команда будет выглядеть следующим
                        образом:snmpwalk -v3 -a SHA -A P@ssw0rd -x AES -X p@SSW0RD -l authPriv -u datapkitmv3 127.0.0.1 | more
                        Результат работы утилиты snmpwalk
                            Создайте :
                        В веб-интерфейсе 
                            перейдите на страницу НастройкаНастройка → Узлы сети
                            Узлы сети.
                                    Нажмите на имя узла сети, для которого производится
                                        настройка сбора данных.
                                    Откроется страница с подробной информацией об узле
                                        сети.
                        На вкладке «Узел сети» в разделе «Интерфейсы» нажмите на кнопку
                            «Добавить» и выберите .
                        В появившихся полях введите параметры, которые использовались при
                            создании пользователя  на шаге :
                                Версия  — ;
                                Имя безопасности — datapkitmv3; 
                                Уровень безопасности — authPriv.
                            После выбора уровня безопасности authPriv заполните следующие
                            появившиеся параметры:
                                Протокол аутентификации — SHA;
                                Пароль аутентификации — P@ssw0rd;
                                Протокол безопасности — AES;
                                Ключевая фраза безопасности — p@SSW0RD.
                                    Если нужно отредактировать параметры:
                                            На вкладке «Узел сети» в разделе «Интерфейсы»
                                    нажмите на кнопку «Раскрыть» («  ») рядом с «».
                                            Отредактируйте параметры. Имя пользователя, пароль и
                                                ключ указаны в полях «Имя безопасности», «Пароль
                                                аутентификации» и «Ключевая фраза
                                                безопасности».
                                    Добавьте к 
                                        шаблоны:
                                            Перейдите на вкладку «Шаблоны».
                                            Нажмите на кнопку «Выбрать» напротив поля
                                                «Присоединение новых шаблонов». Результат шага:
                                                  Появится список доступных шаблонов.
                                            Установите чекбокс рядом с тем шаблоном, который
                                    необходимо добавить. Например, Linux .
                                            Нажмите на кнопку «Выбрать» для добавления
                                                шаблона.
                                    Нажмите на кнопку «Добавить» для сохранения
                                        изменений.
                                        Если нужно сохранить параметры после редактирования,
                                            нажмите на кнопку «Обновить».
|*|*|*|
    Настройка АСО
        Настройте права доступа на чтение для группы (community) public SNMPv1,  или SNMPv3 в зависимости от версии, поддерживаемой оборудованием. В качестве имени
            community, вместо public можно использовать другое значение, в зависимости от настроек
            оборудования.
        Если данное устройство подключено к DATAPK, то синхронизатор будет брать уже заведенное в
            DATAPK имя community и передавать его для сбора данных в . Во избежание
            расхождений в настройках рекомендуется использовать имя community, которое было заведено
            в DATAPK для сбора данных по SNMP. Если для данного устройства в DATAPK сбор данных
            осуществлялся по , то в  можно использовать любое имя community.
        Подробная настройка объектов мониторинга в
            веб-интерфейсе описана в руководстве .
|*|*|*|
    Установка сервера удаленного мониторинга с отдельным томом для БД
            Этот раздел описывает последовательность действий для установки  для случая, когда на сервере используются два
                тома — первый том для операционной системы, второй том для базы данных.
            Если вы планируете использовать только один том, перейдите в раздел 
                .
            Все нижеописанные действия на сервере производятся после настройки RAID на дисках и
                установки операционной системы и дополнительных пакетов согласно разделу .
            В этом разделе:
|*|*|*|
    Обновление DATAPK ITM-A с версии 1.3.0.0 до версии 1.3.0.1
            Для обновления сервера  с версии 1.3.0.0 до версии 1.3.0.1:
                Перейдите в рабочую директорию : 
                    cd /opt/itm-a
                Остановите работу сервера :  
                    docker-compose down
                Переименуйте старую рабочую директорию :  
                    mv /opt/itm-a /opt/itm-a-bkp
                Создайте директорию для новой версии :
                    mkdir /opt/itm-a
                Скопируйте файлы настроек  из директории со
                    старой версией в новую:
                    cp -r /opt/itm-a-bkp/.env /opt/itm-a-bkp/env /opt/itm-a/
                Загрузите в директорию /opt/itm-a на сервере  следующие файлы из
                    каталога с обновленным дистрибутивом: 
                        datapk_itm-a_v1.3.0.1.tar.gz;
                        docker-compose.release.yaml.
                Перейдите в директорию, куда были перемещены файлы с обновленным дистрибутивом
                        :
                    cd /opt/itm-a
                Установите обновленные образы командой:
                    docker load -i datapk_itm-a_v1.3.0.1.tar.gz
                Запустите контейнеры:
                    docker-compose up -d
|*|*|*|
    Настройка агентов версии 1 или 2 на ОС Windows 7+
        Для изменения настроек агента на  Windows 7 версии и новее:
                Перейдите в директорию, куда был установлен агент. По умолчанию это директория
                        C:\Program Files\Zabbix agent для агента версии 1 и
                        C:\Program Files\Zabbix agent 2 для агента версии 2.
                Откройте с помощью текстового редактора файл zabbix_agentd.conf для агента версии 1 или zabbix_agent2.conf для агента версии
                    2.
                Измените один или несколько параметров агента.
                        Для изменения или добавления IP-адреса сервера  или :
                                Присвойте переменной  значение
                                    IP-адреса сервера  или , в
                                    зависимости от вашей иерархии. При необходимости
                                        подключения  к
                                        нескольким серверам мониторинга, перечислите их IP-адреса
                                        через запятую без пробелов.
                                Закомментируйте переменную ,
                                    чтобы не использовать активный режим агента.
                        Для изменения порта подключения к серверу мониторинга:
                                Раскомментируйте строку с переменной . Для этого уберите символ «#» в начале
                                    строки. Присвойте переменной новое значение.
                        Для изменения имени узла сети:
                                Присвойте переменной  новое
                                    значение.
                Сохраните изменения.
                Для применения настроек агента перезапустите службу Zabbix Agent для агента
                    версии 1 или Zabbix Agent 2 для агента версии 2:
                        Одновременно нажмите клавиши Win+R.
                        Введите команду services.msc.
                        Найдите в появившемся окне в списке служб Zabbix Agent или Zabbix Agent
                            2 и выделите строку с ней.
                        Нажмите правой кнопкой мыши на строке со службой Zabbix Agent или
                            Zabbix Agent 2.
                        В контекстном меню выберите «Перезапустить».
|*|*|*|
    Настройка ОМ с ОС Windows и 10 Windows 7
            Для  с этой ОС
                настройка происходит с помощью протокола .
            Настройка SNMP службы 
                Для настройки ОМ должна быть установлена служба . Подробнее про установку см. в разделе .
                Для настройки найдите соответствующие службы в консоли управления службами. Для
                        этого:
                        Зайдите в панель управления.
                        Перейдите в раздел «Администрирование».
                        В открывшемся окне нажмите на кнопку «Управление компьютером».
                Выполните более детальную настройку  агента. Для этого:
                        Нажмите правой кнопкой мыши на «Служба » и выберите «Свойства».Результат шага: Откроется окно «Служба ».
                        В открывшемся окне откройте вкладку «Безопасность».
                        Нажмите на кнопку «Добавить» в разделе «Приемлемые имена
                                сообществ».Результат шага: Откроется окно «Настройка службы ».
                        В открывшемся окне: 
                                выберите права сообщества;Рекомендуемое значение — READ
                                        ONLY.
                                введите имя сообщества;
                                нажмите на кнопку «Добавить».
                                Окно настройки SNMP
                        Для сохранения текущих настроек нажмите на кнопку «Применить».
                Перезапустите службу .
            Установка SNMP службы
            Способ установки 1: 
                Зайдите в панель управления. 
                Перейдите в раздел «Программы и компоненты». 
                В открывшемся окне нажмите на иконку «Включение или отключение компонентов
                        Windows».Результат шага: Откроется окно «Компоненты Windows».
                В открывшемся окне установите чекбокс напротив компонента «-протокол» и нажмите «ОК».
                        Окно установки SNMP
                    Результат шага: После окончания установки компонента окна установки
                        закроются автоматически. 
            Способ установки 2:
            Для данного метода установки нужен выход в интернет.
                Запустите PowerShell от имени администратора. Для этого:
                        Нажмите Win+X.
                        Выберите «Windows PowerShell (администратор)».
                        Запуск PowerShell
                Проверьте наличие -клиента:Get-WindowsCapability -Online -Name "*SNMP*"
                        Проверка наличия SNMP-клиента
                Установите -клиент:Add-WindowsCapability -Online -Name "SNMP.Client~~~~0.0.1.0"
                        Установка SNMP-клиента
                Установите дополнительный компонент для -клиента:Add-WindowsCapability -Online -Name "WMI-SNMP-Provider.Client~~~~0.0.1.0"
                        Установка дополнительного компонента для SNMP-клиента
                Убедитесь, что -клиент и дополнительный компонент
                        установлены:Get-WindowsCapability -Online -Name "*SNMP*"
                        Проверка установки SNMP-клиента и дополнительного компонента
                Перезагрузите компьютер.
|*|*|*|
    Обновление DATAPK ITM-A с версии 1.2 до версии 1.3.0.1
            Для обновления  с версии 1.2 до версии 1.3.0.1
                используется скрипт conf_to_envs.sh. Скрипт также переносит
                имеющиеся значения переменных из конфигурационного файла в env-файлы и генерирует
                остальные необходимые для работы env-файлы и переменные. 
            Для обновления:
                Остановите службу zabbix-proxy:
                    systemctl disable --now zabbix-proxy.service
                Установите docker согласно инструкции .
                Создайте директорию /opt/itm-a:
                    mkdir /opt/itm-a
                Загрузите на сервер  в папку
                        /opt/itm-a содержимое каталога с обновленным
                    дистрибутивом:
                        datapk_itm-a_v1.3.0.1.tar.gz;
                        docker-compose.release.yaml;
                        conf_to_envs.sh.
                Перейдите в директорию /opt/itm-a: 
                    cd /opt/itm-a/
                Назначьте права на запуск скрипта:
                    chmod +x conf_to_envs.sh
                Запустите скрипт:
                    ./conf_to_envs.sh
                    Скрипт предназначен для генерации env-файлов с нуля, поэтому в рабочей
                        директории не должно быть директории env и файла
                            .env. Для работы скрипта также необходимо наличие файла
                            /etc/zabbix/zabbix_proxy.conf.
                Откроется окно для редактирования переменных.
                Настройте переменные, относящиеся к базам данных и подсети Docker:
                        Чтобы изменить переменную, введите новое значение и нажмите
                            «Enter».
                        Чтобы оставить значение по умолчанию, нажмите «Enter».
                    Остальные переменные скрипт самостоятельно берет из имеющегося
                        конфигурационного файла. Подробнее про переменные см. в разделе .
                Установите docker-образы командой:
                    docker load -i datapk_itm-a_v1.3.0.1.tar.gz
                Остановите службу docker:
                    systemctl stop docker
                Запустите docker-контейнеры, выполнив следующую команду из директории
                        /opt/itm-a/, где находятся compose и
                        env файлы компонента:
                    docker-compose up -d
                Убедитесь, что новая версия  работает и собирает данные.
                Удалите пакет zabbix-proxy:
                    yum remove zabbix-proxy
|*|*|*|
    Настройка сервера ITM-A для безагентного мониторинга по протоколу WMI
            Для настройки возможности безагентного сбора данных с  по протоколу WMI:
                Перейдите в режим командной строки сервера консолидации , который будет собирать данные с .
                Войдите в режим редактирования файла wmi.pw:
                    vi /opt/itm-a/env/wmi_cred/wmi.pw
                Введите учетные данные  по
                    следующему шаблону:
                        В квадратные скобки «[]» введите имя  (hostname).
                        В переменную username введите логин .
                        В переменную password введите пароль .
                        В переменную domain введите домен, под которой происходит подключение к
                                . Если это локальная
                            учетная запись, то в качестве домена введите имя .
                    При полном совпадении данных учетных записей в одном домене вы
                        можете добавить их в блок [DEFAULT].
                Сохраните конфигурационный файл и выйдите из режима редактирования:
                    :wq
|*|*|*|
    Настройка ОМ с ОС Windows XP 
        Для  с этой ОС
                настройка происходит с помощью протокола .Настройка  на Windows XP настраивается одинаково, независимо от версии service pack (SP1, SP2,
            SP3). 
            Настройка ОМ
            Для настройки ОМ должна быть установлена служба . Подробнее про установку см. в разделе .
                Найдите соответствующие службы в панели управления. Для этого:
                        Зайдите в панель управления. 
                        Перейдите в раздел «Администрирование».
                                Панель управления
                            Результат шага: Откроется окно «Администрирование».
                        В открывшемся окне нажмите на кнопку «Управление компьютером».
                                Управление компьютером
                        В разделе «Службы и приложения» перейдите в раздел «Службы» и найдите в
                            списке «Служба ».
                                Раздел «Службы»
                            Если службы  нет в списке, необходимо ее установить. Подробнее про установку
                                см. в разделе .
                Выполните более детальную настройку  агента. Для этого:
                        Нажмите правой кнопкой мыши на «Служба » и выберите «Свойства».Результат шага: Откроется окно «Служба ».
                        В открывшемся окне откройте вкладку «Безопасность».
                        Нажмите на кнопку «Добавить» в разделе «Приемлемые имена
                                    сообществ».
                                    Служба SNMP
                                Результат шага: Откроется окно «Настройка службы ».
                        В открывшемся окне: 
                                выберите права сообщества;Рекомендуемое значение — READ
                                        ONLY.
                                введите имя сообщества;
                                нажмите на кнопку «Добавить».
                                Настройка службы SNMP
                        Нажмите на кнопку «Применить» в окне «Служба ».
                Перезапустите службу .
            Установка службы SNMP
                Зайдите в панель управления.
                Перейдите в раздел «Установка и удаление программ».Результат шага: Откроется
                        окно «Установка и удаление программ».
                В открывшемся окне нажмите на кнопку «Установка компонентов Windows».
                        Окно «Установка и удаление программ»
                    Результат шага: Откроется окно «Мастер компонентов Windows».
                В открывшемся окне выберите компонент «Средства управления и наблюдения» в конце
                        списка.
                        Установка компонента
                Нажмите на кнопку «Состав».Результат шага: Откроется окно с содержимым
                        компонента «Средства управления и наблюдения». 
                В открывшемся окне установите чекбоксы рядом с необходимыми компонентами.
                Нажмите на кнопку «ОК».
                        Окно «Средства управления и наблюдения»
                Нажмите «Далее» в окне «Мастер компонентов Windows». Результат шага: Начнется
                        установка компонента. 
                            Установка компонента
                        В процессе установки вам понадобится вставить диск с дистрибутивом
                            Windows в CD-ROM.
|*|*|*|
    Обновление UDV-ITM-RM с версии 1.3.0.0 до версии 1.3.0.1
            Для обновления сервера  с версии 1.3.0.0 до версии 1.3.0.1:
                Перейдите в рабочую директорию : 
                    cd /opt/itm-rm
                Остановите работу сервера :  
                    docker-compose down
                Переименуйте старую рабочую директорию :  
                    mv /opt/itm-rm /opt/itm-rm-bkp
                Создайте директорию для новой версии :
                    mkdir /opt/itm-rm
                Скопируйте файлы настроек  из директории со
                    старой версией в новую:
                    cp -r /opt/itm-rm-bkp/.env /opt/itm-rm-bkp/env /opt/itm-rm/
                Загрузите в директорию /opt/itm-rm на сервере  следующие файлы из
                    каталога с обновленным дистрибутивом: 
                        datapk_itm-a_v1.3.0.1.tar.gz;
                        docker-compose.release.yaml.
                Перейдите в директорию, куда были перемещены файлы с обновленным дистрибутивом
                    :
                    cd /opt/itm-rm
                Установите обновленные образы командой:
                    docker load -i datapk_itm-a_v1.3.0.1.tar.gz
                Запустите контейнеры:
                    docker-compose up -d
|*|*|*|
    Установка агентов версии 1 или 2 на ОС Centos 7+ и RedOS 7.2
            Для установки агента на  под
                управлением операционной системы CentOS 7 версии и новее или RedOS 7.2:
                Добавьте сервис в автозагрузку и запустите агента:
                systemctl enable [имя агента] --nowГде [имя агента] —
                        zabbix-agent для агента версии 1 и
                        zabbix-agent2 для агента версии 2.
                Убедитесь в корректности работы агента:
                systemctl status [имя агента]Где [имя агента] —
                        zabbix-agent для агента версии 1 и
                        zabbix-agent2 для агента версии 2.
                Внесите изменения в конфигурационный файл zabbix_agentd.conf
                    для агента версии 1 или zabbix_agent2.conf для агента версии 2.
                    Для этого:
                        Войдите в режим редактирования файла:
                        vi /etc/zabbix/[имя файла]Где [имя файла] —
                                zabbix_agentd.conf для агента версии 1 и
                                zabbix_agentd2.conf для агента версии 2.
                        Измените файл следующим образом:
                                Присвойте переменной  (и , если используется активный режим
                                    агента) значение IP-адреса сервера  или
                                        , в
                                    зависимости от вашей иерархии. При необходимости
                                        подключения к нескольким серверам мониторинга, перечислите
                                        их IP-адреса через запятую без пробелов.
                                Если в иерархии не будет использоваться режим активного агента,
                                    закомментируйте переменную .
                                Раскомментируйте строку с переменной
                                        . Для этого уберите символ «#»
                                    в начале строки.
                                Присвойте переменной  значение, соответствующее имени текущего
                                        .
                Если в системе используется межсетевой экран, добавьте в него правила для
                    открытия порта агента и примените их.
                        Если используется межсетевой экран firewall-cmd:
                                Если на сервере установлен docker, остановите работу
                                    контейнеров:docker-compose down
                                Добавьте правило:
                                    firewall-cmd --permanent --zone=public --add-port=10050/tcp
                                Примените
                                    правило:firewall-cmd –reload
                                Убедитесь в корректности
                                    настройки:firewall-cmd --permanent --list-all
                                Если на сервере установлен docker:
                                        Перезапустите службу docker для добавления правил в
                                            межсетевой
                                            экран:systemctl restart docker
                                        Запустите работу
                                            контейнеров:docker-compose up -d
                        Если используется межсетевой экран iptables:
                                Если на сервере установлен docker, остановите работу
                                    контейнеров:docker-compose down
                                Добавьте правило:
                                        iptables -I INPUT [номер строки] -p tcp --dport 10050 -j ACCEPT 
                                Примените
                                    правило:service iptables save
                                Убедитесь в корректности
                                    настройки:iptables -nL
                                Если на сервере установлен docker:
                                        Перезапустите службу docker для добавления правил в
                                            межсетевой
                                            экран:systemctl restart docker
                                        Запустите работу
                                            контейнеров:docker-compose up -d
                Перезапустите службу агента для применения настроек:
                systemctl restart [имя службы агента]Где [имя службы
                    агента] — zabbix-agent для агента версии 1 и
                        zabbix-agent2 для агента версии 2.
|*|*|*|
    Настройка ОМ с ОС Windows 2000
        Для  с этой ОС
            настройка происходит с помощью протокола .
            Настройка ОМ
            Для настройки ОМ должна быть установлена служба . Подробнее про установку см.
                в разделе .
                Найдите соответствующие службы в панели управления. Для этого:
                        Зайдите в панель управления. 
                        Перейдите в раздел «Администрирование».
                                Панель управления
                            Результат шага: Откроется окно «Администрирование».
                        В открывшемся окне нажмите на кнопку «Управление компьютером».
                                Управление компьютером
                        В разделе «Службы и приложения» перейдите в подраздел «Службы» и найдите
                            в списке «Служба SNMP».
                                Раздел «Службы»
                            Если службы  нет в списке, необходимо ее установить. Подробнее про установку
                                см. в разделе .
                Выполните более детальную настройку  агента. Для этого: 
                        Нажмите правой кнопкой мыши на «Служба » и выберите «Свойства».Результат шага: Откроется окно «Служба ».
                        В открывшемся окне откройте вкладку «Безопасность».
                        Нажмите на кнопку «Добавить» в разделе «Приемлемые имена
                                сообществ».Результат шага: Откроется окно «Настройка службы ».
                        В открывшемся окне: 
                                выберите права сообщества;Рекомендуемое значение — READ
                                        ONLY.
                                введите имя сообщества;
                                нажмите на кнопку «Добавить».
                                Настройка службы SNMP
                        Нажмите на кнопку «ОК» в окне «Служба ».
                Перезапустите службу .
            Установка службы SNMP
                Зайдите в панель управления.
                Перейдите в раздел «Установка и удаление программ».Результат шага: Откроется
                        окно «Установка и удаление программ».
                В открывшемся окне нажмите на кнопку «Добавление и удаление компонентов
                        Windows».
                        Добавление и удаление компонентов Windows
                    Результат шага: Откроется окно «Мастер компонентов Windows».
                В открывшемся окне выберите компонент «Средства управления и наблюдения» в конце
                    списка. 
                        Установка компонента
                Нажмите на кнопку «Состав».Результат шага: Откроется окно с содержимым
                        компонента «Средства управления и наблюдения». 
                Нажмите «ОК» в окне «Средства управления и наблюдения».
                        Окно «Средства управления и наблюдения»
                Нажмите «Далее» в окне «Мастер компонентов Windows». Результат шага: Начнется
                        установка компонента. 
                            Установка компонента
                        В процессе установки вам понадобится вставить диск с дистрибутивом
                            Windows в CD-ROM.
|*|*|*|
    Установка дополнительных пакетов в ОС РЕД ОС 7.3
        Для установки дополнительных пакетов:
|*|*|*|
    Расчет контрольных сумм для файлов из дистрибутива
        Чтобы рассчитать контрольные суммы для файлов из дистрибутива, выполните следующие
            шаги: 
                Подключите диск с сертифицированным дистрибутивом к компьютеру, на котором планируется установить .
                Перейдите в директорию, куда был примонтирован диск с сертифицированным дистрибутивом.
                Запишите в текстовый файл listfile список файлов, для которых
                    нужно рассчитать контрольные суммы:
                    ufix -jRa . >> /opt/listfile
                    В этой команде . — текущая директория, куда был
                        примонтирован диск с сертифицированным дистрибутивом.
                Исключите файл «Руководство администратора » из списка файлов, для которых нужно
                    рассчитать контрольные суммы. Для этого:
                        Откройте файл listfile для редактирования:
                            vi /opt/listfile
                        Удалите строку с упоминанием Руководства. 
                        Для этого в редакторе vi установите курсор на нужную строку и дважды
                            нажмите на клавишу «d».
                        Сохраните изменения и закройте файл.
                            :wq
                Рассчитайте контрольные суммы файлов из списка listfile и
                    создайте файл проекта с контрольными суммами
                    listfile.prj:
                    ufix -eN /opt/listfile
                Будет создан файл listfile.prj в директории
                        /opt, в терминале также появятся контрольные
                    суммы.
                Получите из проекта файл listfile.html, содержащий отчет с
                    информацией об итоговых контрольных суммах для каждой вложенной директории, в
                    том числе и корневой, а также размеры файлов и итоговые размеры
                    директорий:
                    ufix -h /opt/listfile.prj
                Будет создан файл listfile.html в директории
                        /opt.
                Проверьте целостность дистрибутива: сравните полученные контрольные суммы с
                    эталонными, приведенными в документе «УЦЛК.468244.26 30. Формуляр». При
                    совпадении контрольных сумм файлов дистрибутива скопируйте файлы с диска на
                    компьютер.
|*|*|*|
    Требования к маркировке и упаковке
        Упаковка (транспортная тара) обеспечивает при пересылке и хранении защиту  от
            механических и климатических воздействий.
        Транспортной тарой для сертифицированной версии  является картонная коробка.
            В одной единице транспортной тары располагается один комплект . В
            транспортную тару  вложен упаковочный лист.
        На оптический носитель информации (DVD) наклеивается или накатывается методом печати
            этикетка, содержащая наименование изделия, наименование предприятия-изготовителя,
            серийный номер. Знак соответствия качеству наносится на диск отдельно в виде
            голографического изображения.
        Оптический носитель информации (DVD), содержащий программное обеспечение «»
            и комплект эксплуатационной документации, упаковывается в защитный пластиковый футляр
            для хранения.
        Маркировка  размещается на транспортной таре, упаковочном листе, а также на
            вкладыше в защитный пластиковый футляр для хранения оптического носителя информации и
            содержит:
            товарный знак разработчика продукции;
            наименование продукции;
            серийный номер.
|*|*|*|
    Требования к аппаратному и программному обеспечению
        Каждый экземпляр сертифицированной версии программного комплекса 
            устанавливается на аппаратную платформу с характеристиками,
            достаточными для работы на данном уровне иерархии. 
        Требования к аппаратному обеспечению уровней филиала и предприятия приведены в
            таблице.
            Минимальные требования к производительности серверов
                        Вариант исполнения
                        Суммарный объем объектов мониторинга с учетом подчиненных
                            серверов
                            Кол-во CPU (шт.) /
                            кол-во ядер (шт.) / частота (ГГц)
                        Объем ОЗУ
                        Объем дисковой подсистемы
                        Объем дисковой подсистемы для ОС
                        Сетевой адаптер
                        Малая инсталляция , 
                        Менее 250
                        1 CPU / 2 ядра / 2 ГГц
                        16
                        250 ГБ, от 7200 SATA
                         120 ГБ
                        1х100/1000 Мбит/с
                        Средняя инсталляция , 
                        250 - 2500
                        1 CPU / 4 ядра / 2 ГГц
                        32
                        1 ТБ, от 10К SAS
                        240 ГБ
                        1х100/1000 Мбит/с
                        Большая инсталляция , 
                        2500 - 10000
                        1 CPU / 4 ядра / 2 ГГц
                        64
                            3 ТБ, от 10К SAS,
                            RAID6
                         240 ГБ
                        1х1000 Мбит/с
        Требования, которым должны удовлетворять АРМ управления (или оператора) для подключения к
            , приведены в таблице.
            Минимальные системные требования для АРМ управления (или оператора) для
                подключения к 
                        Компонент
                        Требования
                        Процессор
                        По характеристикам не ниже Pentium IV и с тактовой частотой не менее
                            2 ГГц
                        ОЗУ
                        1 ГБ
                        Свободное пространство на жестком диске
                        1 ГБ
                        Скорость работы сетевой карты
                        10/100/1000 Мбит/с
                        Дисплей
                        Разрешающая способность: 1024x768 точек или больше
                        Устройства ввода
                        Клавиатура, компьютерная мышь
                        Операционные системы
                        Microsoft Windows 8.1 и новее, Microsoft Windows Server 2012 и новее,
                            CentOS 7, Red Hat Enterprise Linux 7 и новее
                        Браузеры
                        Google Chrome, Яндекс браузер
        Сертифицированная версия  функционирует на серверах под управлением следующих
                :
            РЕД ОС версии 7.3;
            Astra Linux Special Edition (Смоленск) версии 1.7.
        Обязательным условием функционирования сертифицированной версии  является наличие установленного ПО системы управления базами данных Jatoba
            DB.
        Для мониторинга узла сети с помощью  необходимо установить агента
            на узле сети. Требования, которым должен удовлетворять объект мониторинга для установки
            на него агента, приведены в таблице ниже.
            Системные требования к объекту мониторинга для установки агента
                        Компонент
                        Требования
                        Операционные системы
                        Windows, Linux
                        Архитектура процессора
                        i386 или AMD64
                        Место в памяти для установки агента
                        RAM 1.5 Мб
                        Место на диске для установки агента
                        HDD 8 Мб
|*|*|*|
    Принципы безопасного использования
        В качестве безопасных способов взаимодействия пользователей с сертифицированной версией
             необходимо использовать следующие методы для подключения к комплексу:
            протокол  для подключения к веб-интерфейсу ;
            протокол  для подключения к интерфейсу командной строки ОС, на которой функционирует
                программное обеспечение .
        Рекомендуется отключить в настройках службы  возможность удаленного входа в терминал ОС под учетной записью администратора с
            логином root и использовать для входа вручную созданную учетную запись
                datapkitm, добавленную в дополнительные группы
                wheel и docker.
        В качестве механизма аутентификации в  используются пароли, поэтому требуется
            соблюдение следующих требований к их стойкости:
            требование замены пароля при первом входе в систему;
            минимальная длина нового пароля — не менее 6 символов;
            сложность нового пароля — запрет использования логина и имени учетной записи в
                пароле (не более, чем два символа подряд из логина и имени), требование
                использования в пароле не менее трех типов символов из следующего списка:
                    цифры;
                    буквенные символы в верхнем регистре;
                    буквенные символы в нижнем регистре;
                    специальные символы.
            ограниченный срок действия пароля;
            запрет на использование последних (от 1 до 24) паролей, сохраненных в журнале
                паролей.
        При эксплуатации  на объектах информатизации необходимо обеспечить
            обязательное выполнение следующих условий:
            Исключение возможности использования  для обработки информации, содержащей сведения,
                составляющие государственную тайну.
            Наличие администратора безопасности, отвечающего за правильные настройки функций
                безопасности  и установку обновлений безопасности,
                прошедших испытания.
            Идентификация и аутентификация администратора безопасности при доступе к
                автоматизированному рабочему месту.
            Сохранение в секрете идентификаторов и паролей на доступ к .
            Периодическая смена паролей на доступ к .
            Обеспечение физической сохранности ЭВМ с установленным  путем исключения возможности доступа к ней
                посторонних лиц.
            Периодическое тестирование функций защиты  администратором безопасности, включающее
                проверку целостности неизменных установленных файлов .
            Администрирование  должно осуществляться с
                автоматизированного рабочего места, на котором должно быть установлено средство
                антивирусной защиты с последними обновлениями антивирусных баз.
            Каналы управления , расположенные в пределах контролируемой
                зоны, должны быть защищены организационно-техническими мерами.
            Для защиты каналов управления , выходящих за пределы
                контролируемой зоны, должны применяться методы и средства, устойчивые к пассивному
                и/или активному прослушиванию сети и сертифицированные в установленном порядке или
                должен быть запрещен удаленный доступ для администрирования  по незащищенным каналам связи.
            Администратор безопасности должен проводить периодическую проверку на отсутствие
                уязвимостей, а в случае обнаружения уязвимостей необходимо сообщить в службу
                технической поддержки поставщика.
|*|*|*|
    Действия по приемке комплекса
    Для приемки сертифицированной версии :
                Проверьте целостность оптического носителя. Данный этап состоит в визуальном
                    определении отсутствия каких-либо механических или иных повреждений. На
                    оптическом носителе не должно быть обнаружено никаких повреждений.
                Проверьте документацию в печатном виде на изделие (по составу, содержанию,
                    качеству). Данный этап выполняется путем визуального сравнения предъявленного
                    комплекта с учтенными копиями, анализа наличия и целостности документов.
                    Эксплуатационная документация (далее – ЭД) на  должна удовлетворять стандартам и не
                    содержать дефектов, затрудняющих чтение. Проверка состава документации для
                    образца  осуществляется путем сравнения с
                    составом, представленным в «Программный комплекс мониторинга безопасности и
                    контроля ресурсов «», децимальный номер УЦЛК.468244.26.
                    Формуляр УЦЛК.468244.26 30» (далее – УЦЛК.468244.26 30). Комплектность ЭД
                    согласно УЦЛК.468244.26 30 представлена в таблице «Комплектность поставки ».
                Проверьте комплектность образца. Данный этап выполняется путем сравнения
                    комплектности предъявленного образца к приемке с составом, указанным в
                    УЦЛК.468244.26 30, с учетом договора на поставку. Комплектность образца  согласно УЦЛК.468244.26 30 представлена в таблице «Комплектность
                    поставки ».
                Проверьте маркировку и упаковку. Проверка качества упаковки на соответствие
                    требованиям УЦЛК.468244.26 30 проводится путем визуального осмотра. Проверка
                    соответствия  требованиям к маркировке производится путем оценки
                    нанесенной маркировки. Требования к маркировке и упаковке согласно
                    УЦЛК.468244.26 30 приведено в разделе  настоящего документа.
                Проверьте соответствие дистрибутивного носителя программного обеспечения
                    эталонному образцу. Производится путем сравнения фактических контрольных сумм
                    дистрибутива, рассчитанных с помощью программы фиксации и контроля исходного
                    состояния программного комплекса «ФИКС-UNIX» (версия 1.0) по 32-байтовому
                    алгоритму, с приведенными в файле-приложении к документу УЦЛК.468244.26
                    30.
         должен предъявляться для испытаний в комплектации, представленной в таблице
                «Комплектность поставки ».После получения  в полном комплекте необходимо произвести установку и настройку,
                    представленную в пункте .После корректной настройки  проводятся испытания по методике, приведенной в разделе
                .Принятым считается изделие, которое выдержало приемо-сдаточные испытания.
                Комплектность поставки 
                        Наименование
                        Кол-во
                        Примечание
                                Оптический носитель информации (DVD)
                                 с размещенными на нем:
                                    программным обеспечением «»;
                                    эксплуатационной документацией «Программный комплекс
                                        мониторинга безопасности и контроля ресурсов «», децимальный номер УЦЛК.468244.26. Руководство
                                        по эксплуатации УЦЛК.468244.26-РЭ.1»;
                                    приложениями к формуляру с  информацией о контрольных суммах
                                        дистрибутива и неизменных исполняемых файлах.
                            1
                            1
                            1
                        Защитный пластиковый футляр для хранения оптического носителя
                            информации
                        1
                        Вкладыш в защитный пластиковый футляр для хранения оптического
                            носителя информации
                        1
                        «Программный комплекс мониторинга безопасности и контроля ресурсов
                            «», децимальный номер УЦЛК.468244.26. Формуляр УЦЛК.468244.26
                            30»
                        1
                        В печатном виде
                            Копия сертификата соответствия Системы сертификации средств защиты
                                информации по требованиям безопасности информации № РОСС
                                RU.0001.01БИ00
                            от «____»___________ 20__ г. № ________
                        1
                        В печатном виде
                        Упаковка (транспортная тара) с упаковочным листом
                        1
                        Представляет собой картонную коробку
|*|*|*|
    Расчет контрольных сумм для исполняемых файлов
        Чтобы рассчитать контрольные суммы для исполняемых файлов, выполните следующие
            шаги: 
                Перейдите в директорию, содержащую файл
                        itm_create_executable_files.sh:
                    cd /opt
                Назначьте скрипту itm_create_executable_files.sh права на
                    исполнение:
                    chmod +x itm_create_executable_files.sh
                    Скрипт itm_create_executable_files.sh предназначен для
                        получения копии исполняемых файлов из развернутых docker-контейнеров .
                Запустите скрипт:
                    ./itm_create_executable_files.sh -o ./execfiles
                в директорию execfiles будут записаны директории с
                    названиями модулей-контейнеров , содержащие только
                    исполняемые файлы.
                Запишите в текстовый файл listfile_ex список файлов, для
                    которых нужно рассчитать контрольные суммы:
                    ufix -jRa execfiles >> /opt/listfile_ex
                Рассчитайте контрольные суммы файлов из списка listfile_ex и
                    создайте файл проекта с контрольными суммами
                    listfile_ex.prj:
                    ufix -eN /opt/listfile_ex
                Будет создан файл listfile_ex.prj в директории
                        /opt,  в терминале также появятся контрольные
                    суммы.
                Получите из проекта файл listfile_ex.html, содержащий отчет с
                    информацией об итоговых контрольных суммах для каждой вложенной директории, в
                    том числе и корневой, а также размеры файлов и итоговые размеры
                    директорий:
                    ufix -h /opt/listfile_ex.prj
                Будет создан файл listfile_ex.html в директории
                        /opt.
                Проверьте целостность исполняемых файлов: сравните полученные контрольные суммы
                    с эталонными, приведенными в документе «УЦЛК.468244.26 30. Формуляр». При
                    совпадении контрольных сумм файлов дистрибутива скопируйте файлы с диска на
                    компьютер.
|*|*|*|
    Требования и рекомендации к программному обеспечению
        Сертифицированные версии серверов UDV ITM должны функционировать в следующем
            окружении:
            Операционная система (сертифицированная версия):
                    РЕД ОС;
                    Astra Linux Special Edition (Смоленск).
            СУБД Jatoba DB (сертифицированная версия).
        Обязательным условием функционирования сертифицированной версии является выполнение
            требований по безопасной настройке в соответствии с Техническими условиями ТУ
            УЦЛК.468244.26-ТУ и Руководством по эксплуатации.
        При отсутствии требований по использованию сертифицированной версии UDV ITM возможно
            использование следующего программного окружения:
            операционная система: Centos*, Red Hat Enterprise Linux*, Oracle Linux*;
            СУБД: PostgreSQL*.
        *Конкретные версии совместимых ОС необходимо уточнять в Руководстве по эксплуатации
            соответствующей версии UDV ITM.
|*|*|*|
    Архитектура
        Архитектура UDV ITM разработана для создания комплексных корпоративных система
            мониторинга распределенных ИТ-ресурсов и включает в свой состав готовые тиражируемые
            решения для трех уровней иерархии:
            Уровень администрации предприятия — для централизованного управления системой
                мониторинга в целом и консолидации данных мониторинга в масштабах предприятия.
            Уровень филиала — для осуществления непосредственно мониторинга отдельных
                компонент защищаемых систем на уровне филиала и консолидации данных с нижних
                уровней.
            Уровень технологического комплекса — для осуществления необслуживаемого
                мониторинга компонент защищаемых систем на производственных площадках и
                предоставления данных о состоянии их функционирования на уровень филиала.
            Архитектура системы UDV ITM
|*|*|*|
    Лицензионная политика
                Состав лицензий комплекса UDV ITM
                            Код лицензии p/n
                            Наименование
                            Порядок применения
                            UDV-ITM-VM-LIC
                                Сервер визуализации и управления
                                Лицензия на использование системы зонтичного мониторинга
                                    автоматизированных и информационных систем «Cyberlympha ITM»,
                                    модуль «Визуализация и управление»
                                Требуется 1 лицензия для сервера ITM-VM уровня администрации.
                                Лицензируется весь основной функционал ITM-VM.
                            UDV-ITM-VM[XXX]-LIC
                                Лицензия на подключение объектов для контроля
                                Лицензия на подключаемые ОМ к ITM-VM через другие системы
                                    мониторинга.
                                В прайсе: Лицензия на использование системы зонтичного
                                    мониторинга автоматизированных и информационных систем
                                    «Cyberlympha ITM», подключаемые [XXX] объектов
                                Пакеты лицензий для контроля объектов, мониторинг которых
                                    осуществляется другими системами мониторинга, не ITM-M или
                                    ITM-RM (Zabbix и др.). Используются в проектах с поставкой
                                    только ITM-VM для сбора информации с существующих систем
                                    мониторинга.
                                Данные лицензии не требуются для ОМ, которые подключены по
                                    лицензии ITM-H.
                            UDV-ITM-M-LIC
                                Сервер мониторинга
                                Лицензия на использование системы зонтичного мониторинга
                                    автоматизированных и информационных систем «Cyberlympha ITM»,
                                    модуль «Мониторинг»
                            Требуется 1 лицензия для каждого сервера ITM-M уровня
                                филиала
                            UDV-ITM-RM-LIC
                                Сервер удаленного мониторинга
                                Лицензия на использование системы зонтичного мониторинга
                                    автоматизированных и информационных систем «Cyberlympha ITM»,
                                    модуль «Удаленный мониторинг»
                            Требуется 1 лицензия для каждого сервера ITM-RM уровня
                                технологического комплекса
                            UDV-ITM-H[XXX]-LIC
                                Лицензия на подключение объектов для комплексного
                                        мониторинга
                                Лицензия на использование системы зонтичного мониторинга
                                    автоматизированных и информационных систем «Cyberlympha ITM»,
                                    подключаемые [ХХХ] узлов
                                Пакет лицензий комплексного мониторинга XXX объектов
                                    мониторинга.
                                Требуется для серверов ITM-M или CL ITM-RM.
                                Лицензируется функционал агентного или безагентного мониторинга и
                                    контроля. 
                                ОМ, которые подключены по данной лицензии не требуют
                                    дополнительных лицензий ни на каком уровне иерархии решения,
                                    т.е. в рамках этой лицензии ОМ может быть подключен для
                                    мониторинга к серверу ITM-M или ITM-RM и контролироваться на
                                    уровне сервера ITM-VM.
                                Количество узлов в пакетах лицензий должно соответствовать или
                                    быть больше количества фактически подключаемых объектов
                                    мониторинга.
                                Объектами мониторинга считаются активные узлы сети в разделе
                                    Мониторинг → Узлы сети и услуги в разделе Мониторинг →
                                    Услуги.
                            UDV-ITM-DVD
                            Комплект дистрибутивов «системы зонтичного мониторинга
                                автоматизированных и информационных систем «Cyberlympha ITM» на
                                DVD-носителе
                            Поддержка
                                Каждая указанная позиция имеет лицензию на тех.поддержку и
                                    обновления
|*|*|*|
    Сетевые взаимодействия
        В таблице указаны сетевые потоки между серверами ITM и смежными системами
            Сервер визуализации и управления (ITM-VM, уровень администрации)
                        Источник трафика
                        Узел назначения
                        Протокол и № порта по умолчанию
                        Описание трафика
                        UDV-ITM-VM
                        UDV-ITM-M
                        HTTPS (443/TCP)
                            Предоставляется информация об объектах мониторинга и их
                                свойствах.
                            Интерфейс API: Zabbix (JSON-RPC 2.0); UDV ITM (REST API, JSON).
                            Объем трафика зависит от количества подключенных ОМ и количества
                                проблем ОМ, рассчитывается в соответствии с методикой. 
                            Сжатие трафика - gzip.
                            Периодичность получения данных в соответствии с настройками.
                        UDV-ITM-VM
                        СМКИ, SIEM
                        Syslog (514/TCP,UDP)
                            Передаются события информационной безопасности, полученные со всех
                                подключенных серверов:
                                события о проблемах функционирования объектов мониторинга;
                                действия пользователей серверов UDV-ITM-M.
                            Объем трафика: зависит от количества проблем ОМ и событий аудита,
                                рассчитывается в соответствии с методикой. Отправка данных
                                осуществляется по мере их появления в UDV-ITM-VM. 
                            Сжатие трафика отсутствует.
                        САОБ
                        UDV-ITM-VM
                        HTTPS (443/TCP)
                            Предоставляется информация об объектах мониторинга и их
                                свойствах.
                            Интерфейс API — UDV ITM (REST API, JSON).
                            Объем трафика зависит от количества ОМ и соответствует методике
                                расчета трафика по передаче всех свойств ОМ, включая инвентарные
                                данные.
                             Сжатие трафика - gzip.
            Сервер мониторинга/консолидации (ITM-K, уровень филиала), cервер агентов (ITM-A,
                уровень ТО)
                        Источник трафика
                        Узел назначения
                        Протокол и № порта по умолчанию
                        Описание трафика
                        DATAPK ITM-K
                        DATAPK
                        HTTPS (443/TCP)
                            Получение данных об объектах защиты и их свойств.
                            Интерфейс API: DATAPK API (REST API, JSON).
                            Объем трафика зависит от количества ОМ и может быть оценен, как
                                половина трафика о параметрах и инвентарные свойства ОМ (Том) между
                                DATAPK ITM-VM и DATAPK ITM-K в соответствии с методикой. 
                            Сжатие трафика - gzip.
                         DATAPK ITM-K (DATAPK ITM-A) 
                        Объекты мониторинга, безагентный сбор
                            SNMP (161/UDP, 162/UDP),
                            SSH (22/TCP),
                            WMI (MSRPC 135/TCP, MSRPC XP 1025-5000/TCP, MSRPC Vista и новее
                                49152-65535/TCP)
                            Получение параметров функционирования и свойств объектов
                                мониторинга.
                            Объем трафика зависит от количества собираемых параметров
                                функционирования и периодичности. Рассчитывается в соответствии с
                                методикой.
                        Объекты мониторинга, агентный сбор
                        10050/TCP
                        DATAPK ITM-K
                        DATAPK ITM-A
                        10051/TCP (пассивный режим)10052/TCP (активный режим)
                            Получение параметров функционирования и свойств объектов мониторинга,
                                подключенных к серверу агентов DATAPK ITM-A.
                            Трафик соответствует суммарному трафику данных от объектов
                                мониторинга со сжатием gzip.
|*|*|*|
    Рекомендуемые характеристики аппаратного обеспечения
            Минимальные требования к производительности и характеристикам серверов
                        Вариант исполнения
                        Суммарный объем объектов мониторинга с учетом подчиненных
                            серверов
                            Кол-во CPU (шт.) /
                            кол-во ядер (шт.) / частота (ГГц)
                        Объем ОЗУ
                        Дисковая подсистема*
                        Объем дисковой подсистемы для ОС
                        Сетевой адаптер
                        Малая инсталляция ITM-M, ITM-RM, ITM-VM
                        Менее 250
                        1 CPU / 2 ядра / 2 ГГц
                        16
                        ITM-RM — 100 ГБITM-VM — 250 ГБITM-M — 500 ГБ, от 7200
                                SATA
                        120 ГБ
                        1х100/1000 Мбит/с
                        Средняя инсталляция ITM-M, ITM-VM
                        250 - 2500
                        1 CPU / 4 ядра / 2 ГГц
                        32
                            Производительность: от 10K SAS
                            Объем: Кратно объему для малой инсталляции в соответствии с
                                количеством ОМ.
                        240 ГБ
                        1х100/1000 Мбит/с
                        Большая инсталляция ITM-M, ITM-VM
                        2500 - 10000
                        1 CPU / 4 ядра / 2 ГГц
                        64
                        240 ГБ
                        1х1000 Мбит/с
        *Соответствует типовому сценарию использования с параметрами «по умолчанию». При
            проектировании нетиповых решений требуется расчет в соответствии с методикой. 
        Возможно развертывание сервера мониторинга ITM-M (малая инсталляция) и сервера ITM-VM на
            одном физическом сервере, при этом требования к аппаратным ресурсам такого сервера
            следует суммировать.
        Сервер мониторинга ITM-M для мониторинга 250 и более объектов мониторинга рекомендуется
            развертывать на отдельном сервере. 
        Установка UDV-ITM-M и UDV-ITM-RM на один сервер не реализует преимущества использования
            ITM-RM на удаленных площадках и не является рекомендованным сценарием применения
            комплекса.
|*|*|*|
    Сервер UDV-ITM-RM (уровень технологического комплекса)
        Сервер удаленного мониторинга (прокси-сервер) UDV-ITM-RM предназначен для осуществления
            необслуживаемого мониторинга компонент защищаемых систем на удаленных или изолированных
            производственных площадках и предоставления данных о состоянии их функционирования
            серверу UDV-ITM-M.
        Использование сервера UDV-ITM-RM позволяет осуществить оптимизацию трафика и потоков
            сетевого взаимодействия с объектами мониторинга, находящимися на промышленных площадках
            с ограниченным сетевым доступом.
        Сервер не имеет собственного Web-интерфейса. Установка и настройка сервера осуществляется
            с помощью командной строки CLI. 
        Настройка параметров мониторинга объектов защиты осуществляется в Web-интерфейсе сервера
            мониторинга UDV-ITM-M, к которому подключен сервер UDV-ITM-RM.
        Сервер удаленного мониторинга UDV-ITM-RM рекомендуется использовать в следующих
            случаях:
            Если ОМ расположены на удаленных объектах, таких как производственные площадки и
                филиалы, особенно в случаях, когда между филиалом и уровнем администрации
                используются каналы связи с низкой пропускной способностью и/или низкой
                стабильностью.
            Для упрощения конфигурации межсетевого экранирования защищаемых сетей, так как
                сервер UDV-ITM-RM является единой точкой взаимодействия между сервером UDV-ITM-M и
                объектами мониторинга, расположенными на удаленной или изолированной площадке.
            Для снижения нагрузки на сервер мониторинга UDV-ITM-M.
        Нет необходимости в использовании сервера агентов, если все ОМ подключены к единой сети с
            хорошими каналами связи (100/1000 Мб/с) и производительность сервера мониторинга
            UDV-ITM-M достаточна для непосредственного мониторинга всех объектов.
|*|*|*|
    Требования к эксплуатирующему персоналу
        UDV ITM предназначен для эксплуатации в круглосуточном и непрерывном режиме, за
            исключением периодов проведения технического обслуживания, и не требует постоянного
            наблюдения со стороны обслуживающего персонала.
        Настройку и периодическое обслуживание программного комплекса в целом или отдельных его
            компонент осуществляет специалист, выполняющий роль администратора программного
            комплекса.
        Для выполнения функций администратора UDV ITM могут привлекаться специалисты,
            квалификация которых соответствует требованиям профессионального стандарта «Системный
            администратор информационно-коммуникационных систем» для выполнения функций
            «Обслуживание серверных операционных систем информационно-коммуникационной системы».
        Функции обслуживания сервера уровня администрации (UDV-ITM-VM) и серверов уровня филиала
            (UDV-ITM-M) могут выполнять разные специалисты разных подразделений, т.к. сервер
            |UDV-ITM-M является самодостаточным средством мониторинга ИТ-инфраструктуры и может
            использоваться самостоятельно, вне общей архитектуры комплекса UDV ITM.
        Для эффективной и безопасной эксплуатации ПК администратор комплекса и администраторы
            серверов должны изучить эксплуатационную документацию от разработчика или пройти
            обучение в учебном центре IT Cloud  курс «Программный комплекс мониторинга
            безопасности и контроля ресурсов CyberLympha ITM».
        Внедрение и эксплуатация сертифицированного UDV ITM должно осуществляться в соответствии
            с требованиями Технических условий на программный комплекс мониторинга безопасности и
            контроля ресурсов «UDV ITM» (УЦЛК.468244.26-ТУ).
|*|*|*|
    Сервер мониторинга UDV-ITM-M (уровень филиала)
        Предназначен для осуществления непосредственно мониторинга отдельных компонент защищаемых
            систем и средств защиты информации на уровне филиала и консолидации данных с серверов
            уровня технологического комплекса.
        Является самодостаточным сервером мониторинга, может использоваться службой эксплуатации
            для оперативного мониторинга защищаемой системы и рассылки оповещений.
        Взаимодействие пользователя с сервером осуществляется с помощью Web-интерфейса.
        Возможна установка UDV-ITM-M на один физический сервер с сервером UDV-ITM-VM. Особенности
            настройки такого развертывания описаны в руководстве по эксплуатации.
        Взаимодействие UDV-ITM-M со смежными системами:
            Сервер DATAPK:
                    получение данных об объектах защиты и их свойств.
            Сервер удаленного мониторинга UDV-ITM-RM:
                    отправка параметров шаблонов для мониторинга и получение фактических
                        результатов мониторинга объектов, подключенных к серверу UDV-ITM-RM.
        Сервер мониторинга ITM-M осуществляет мониторинг параметров функционирования следующих
            компонентов защищаемых автоматизированных систем:
        Автоматизированные рабочие места (АРМ) и серверы на базе ОС Windows и Linux:
        Сбор параметров функционирования осуществляется агентным или безагентным способом с
            использованием протоколов SNMP, IPMI, WMI.
        Периодичность получения параметров функционирования является настраиваемой.
        В стандартный комплект поставки включены шаблоны для мониторинга следующих параметров АРМ
            и серверов:
            состояние сетевой доступности устройства;
            загрузка ЦП;
            загрузка оперативной памяти;
            загрузка HDD: объем свободного и занятого пространства; скорость записи и чтения
                информации с диска;
            загрузка сетевых интерфейсов: объем отправленных и полученных данных.
        Состав контролируемых параметров АРМ и серверов может быть дополнен по предварительному
            согласованию с разработчиком.
        Активное сетевое оборудование (АСО):
        Сбор параметров функционирования осуществляется безагентным способом с использованием
            протокола SNMP.
        Периодичность получения параметров функционирования является настраиваемой.
        В стандартный комплект поставки включены шаблоны для мониторинга следующих
            параметров:
            состояние сетевой доступности устройства,
            загрузка ЦП*;
            загрузка оперативной памяти*;
            загрузка сетевых интерфейсов: объем отправленных и полученных данных*.
        * Мониторинг параметров, по умолчанию, осуществляется с использованием стандартных
            библиотек MIB. Существует возможность загрузки специализированных библиотек MIB от
            производителя.
        Состав контролируемых параметров может быть дополнен по предварительному согласованию с
            разработчиком.
        ПЛК и оборудование инженерной ИТ-инфраструктуры:
        Сбор параметров функционирования осуществляется безагентным способом с использованием
            протокола SNMP. Оборудование должно поддерживать и быть настроено для мониторинга с
            использованием протокола SNMP.
        Периодичность получения параметров функционирования является настраиваемой.
        В стандартный комплект поставки включены шаблоны для мониторинга следующих
            параметров:
            состояние сетевой доступности устройства,
            загрузка ЦП*;
            загрузка оперативной памяти*;
            загрузка сетевых интерфейсов: объем отправленных и полученных данных*;
        * Мониторинг параметров, по умолчанию, осуществляется с использованием стандартных
            библиотек MIB. Существует возможность загрузки специализированных библиотек MIB от
            производителя.
        Состав контролируемых параметров может быть дополнен по предварительному согласованию с
            разработчиком.
|*|*|*|
    Глоссарий
            DATAPK ITM — программный комплекс мониторинга безопасности и контроля
                ресурсов. Предназначен для мониторинга IT-инфраструктуры и сервисов предприятий.
                Включает в себя следующие конфигурации:
                    DATAPK ITM-A — сервер агентов (прокси-сервер). Применяется для:
                                сбора данных о производительности с подключенных объектов
                                    мониторинга;
                                передачи собранных данных на сервер консолидации.
                    DATAPK ITM-K — сервер консолидации. Применяется для:
                                сбора данных о производительности с подключенных объектов
                                    мониторинга;
                                консолидации данных, в т. ч. полученных с сервера агентов;
                                передачи консолидированных данных на сервер визуализации и
                                    управления;
                                визуализации информации об использовании вычислительных ресурсов
                                    и каналов связи объектов мониторинга филиала;
                                оповещения ответственных лиц в случае выявления сбоя, либо
                                    отклонения показателей функционирования объекта мониторинга от
                                    допустимых.
                    DATAPK ITM-VM — сервер визуализации и управления. Применяется
                                для:
                                приема данных с сервера консолидации;
                                анализа данных;
                                визуализации данных;
                                предоставления высокоуровневой информации о состоянии
                                    ИТ-ресурсов  предприятия. 
            Автоматизированная система управления технологическим процессом (АСУ ТП) —
                комплекс программных и программно-аппаратных средств, предназначенных для контроля
                за технологическим и (или) производственным оборудованием (исполнительными
                устройствами) и производимыми ими процессами, а также для управления такими
                оборудованием и процессами.
            Объект мониторинга (ОМ) — узел сети, канал связи, IT-ресурс или сервис,
                которые подключаются к системе мониторинга для контроля качества их функционирования
                и предоставляемых услуг.
            Система мониторинга компьютерных инцидентов (СМКИ) — система сбора, анализа и
                корреляции событий информационной безопасности, созданная на базе решений класса
                SIEM.
            Система автоматизации процессов обеспечения безопасности (САОБ) —
                автоматизированная система, предназначенная для автоматизации процессов управления
                информационной безопасностью.
            Технологический комплекс — объект АСУ ТП нижнего уровня иерархии, является
                дочерним или подчиненным объектом филиала.
            Техническое обслуживание — комплекс операций по поддержанию работоспособности
                или исправности производственного оборудования (изделий, деталей) в процессе
                технической эксплуатации, хранения и транспортировки (ГОСТ 18322-2016).
|*|*|*|
    Подготовка к внедрению и внедрение сервера визуализации и управления ITM-VM
        Состав работ по подготовке к внедрению и внедрению сервера визуализации и
            управления UDV-ITM-VM:
                Проектирование решения.
                        Выбор сетевого размещения сервера с учетом сетевой доступности к
                            серверам UDV-ITM-M и смежным системам.
                        Выбор оптимальной аппаратной и программной конфигурации серверов с
                            учетом количества подключаемых серверов UDV-ITM-M и количества ОМ.
                Монтаж и настройка:
                        Монтаж и пусконаладка сервера.
                        Настройка сетевого окружения для обеспечения сетевой доступности к
                            серверам UDV-ITM-M и смежным системам.
                Подключение серверов UDV-ITM-M.
                Настройка интеграций со смежными системами.
        Описание операций по настройкам приведено в Руководствах по эксплуатации.
|*|*|*|
    Мониторинг услуг
        UDV-ITM-M позволяет осуществлять мониторинг качества предоставляемых ИТ-услуг,
            функционирование которых зависит от качества функционирования одного или нескольких
            объектов мониторинга. В качестве ИТ-услуг для мониторинга могут подключаться различные
            системно-значимые ИТ-сервисы, каналы связи, сервисы ИБ и т.д. 
        Управление мониторингом ИТ-услуг осуществляется в разделе веб-интерфейса «Настройка» →
            «Услуги». 
        Услуги могут включать в себя вложенные услуги. Это позволяет контролировать сложные
            услуги в соответствии с ресурсно-сервисной моделью ИТ-инфраструктуры предприятия.
        В иерархии UDV-ITM-M рекомендуется использовать 3 уровня вложенности услуг, так как
            только эти уровни агрегируются на уровне сервера UDV-ITM-M:
            Root — корневой уровень услуг, не может быть удален или изменен;
            Группа услуг — рекомендуется использовать для группировки ИТ-услуг в
                зависимости от их назначения, создается Администратором, название группы услуг может
                быть произвольным;
            Услуга — ИТ-услуга, качество которой требуется контролировать. Рекомендуется
                создавать в составе группы;
            Триггер — контролирует определенный параметр подключенного объекта
                мониторинга. Совокупность добавленных триггеров отражает качество функционирования
                контролируемой услуги. Состав триггеров для мониторинга ИТ-услуг может
                    определяться на этапе проектирования и корректироваться на этапе внедрения
                    системы в зависимости от специфики ОМ в ИТ-инфраструктуре и фактически доступных
                    триггеров.
            Уровни иерархии ИТ-услуг
            Пример применения функционала по мониторингу ИТ-Услуг:
        Группы услуг и Услуги:
            Каналы
                Канал УС — Цех 1
                    Доступность
                    Загрузка более 90%
                    Интерфейс включен
                    Ошибки
                Канал УС — Цех 2
                    Загрузка более 90%
                    Интерфейс включен
                    Ошибки
            Средства ЗИ
                МЭ-1
                    Высокая загрузка
                    Диск заполнен
                    Недоступен
                DATAPK
                    Недоступен агент
                    Недоступен
            ИТ-сервисы
                NTP
                    Недоступен
                ACS
                    Недоступен
                    Системное время
                e-mail
                    Недоступен
|*|*|*|
    Мониторинг услуг
        DATAPK ITM-K позволяет осуществлять мониторинг качества предоставляемых ИТ-услуг,
            функционирование которых зависит от качества функционирования одного или нескольких
            объектов мониторинга. В качестве ИТ-услуг для мониторинга могут подключаться различные
            системно-значимые ИТ-сервисы, каналы связи, сервисы ИБ и т.д. 
        Управление мониторингом ИТ-услуг осуществляется в разделе веб-интерфейса «Настройка» →
            «Услуги». 
        Услуги могут включать в себя вложенные услуги. Это позволяет контролировать сложные
            услуги в соответствии с ресурсно-сервисной моделью ИТ-инфраструктуры предприятия.
        В иерархии DATAPK ITM-K рекомендуется использовать 3 уровня вложенности услуг, так как
            только эти уровни агрегируются на уровне сервера DATAPK ITM-K:
            Root — корневой уровень услуг, не может быть удален или изменен;
            Группа услуг — рекомендуется использовать для группировки ИТ-услуг в
                зависимости от их назначения, создается Администратором, название группы услуг может
                быть произвольным;
            Услуга — ИТ-услуга, качество которой требуется контролировать. Рекомендуется
                создавать в составе группы;
            Триггер — контролирует определенный параметр подключенного объекта
                мониторинга. Совокупность добавленных триггеров отражает качество функционирования
                контролируемой услуги. Состав триггеров для мониторинга ИТ-услуг может
                    определяться на этапе проектирования и корректироваться на этапе внедрения
                    системы в зависимости от специфики ОМ в ИТ-инфраструктуре и фактически доступных
                    триггеров.
            Уровни иерархии ИТ-услуг
            Пример применения функционала по мониторингу ИТ-Услуг:
        Группы услуг и Услуги:
                Каналы
                        Канал УС — Цех 1
                                Доступность
                                Загрузка более 90%
                                Интерфейс включен
                                Ошибки
                        Канал УС — Цех 2
                                Загрузка более 90%
                                Интерфейс включен
                                Ошибки
                Средства ЗИ
                        МЭ-1
                                Высокая загрузка
                                Диск заполнен
                                Недоступен
                        DATAPK
                                Недоступен агент
                                Недоступен
                ИТ-сервисы
                        NTP
                                Недоступен
                        ACS
                                Недоступен
                                Системное время
                        e-mail
                                Недоступен
|*|*|*|
    Основные функции
        UDV ITM осуществляет оперативное получение и автоматический анализ данных о
            производительности компонентов АСУ ТП, их хранение, представление пользователю и
            предоставление смежным системам.
        Отличительными особенностями UDV ITM являются:
            ПК сертифицирован ФСТЭК России по требованиям безопасности информации (Сертификат
                соответствия №4432, от 27.07.2021 г.).
            Трехуровневая иерархическая структура комплекса, оптимизированная для использования
                в территориально распределенных промышленных предприятиях.
        Параметры функционирования и наборы шаблонов мониторинга адаптированы для использования в
            отечественных АСУ ТП в соответствии с требованиями ИБ КИИ.
|*|*|*|
    Оценка объема дисковой подсистемы
        Объем данных в базах данных серверов UDV ITM зависит от множества параметров работы
            серверов и может существенно отличаться в зависимости от конкретных настроек с учетом
            специфики проекта. Настоящая методика расчета может быть использована при проектировании
            систем, функционирующих в типовых рекомендованных режимах работы. 
            Сервер мониторинга ITM-M
            Для укрупненной оценки ожидаемого объема данных при проектировании сервера
                мониторинга UDV-ITM-M можно использовать следующую формулу:
            Объем данных БД ITM-M (Мб) = (Ком*Кэд*Копр*220+Кп*1200)*Кд/1024/1024, где:
                Ком — количество ОМ.
                Кэд — количество параметров мониторинга ОМ (элементов данных). Типовой
                    набор параметров мониторинга включает, как правило, до 10 элементов динамических
                    данных.
                Копр — количество опросов значений параметров ОМ в сутки. По умолчанию,
                    агентный мониторинг осуществляется каждые 15 сек, т.е. Копр=5760, безагентный
                    мониторинг каждые 2 мин, т.е. Копр=720.
                Кп — количество проблем (срабатываний триггеров) в сутки. В нормально
                    функционирующих системах количеством проблем обычно бывает не более 2% от общего
                    количества ОМ.
                Кд — количество дней мониторинга. По умолчанию, история значений
                    контролируемых параметров очищается через 180 дней. После этого периода рост БД
                    существенно замедляется и составляет ориентировочно 10-20% в год.
            Пример расчета:
            Количество ОМ = 100. Агентным способом осуществляется мониторинг 50-ти и 50
                безагентным. Хранение истории значений параметров = 180 дней.
            (50*10*5760+50*0,02*1200)*180/1024/1024 = 108 975,5 Мб
            (50*10*720+50*0,02*1200)*180/1024/1024 = 13 806,5 Мб
            Итого, ожидаемый объем данных в БД сервера = 122 782 Мб
            Сервер удаленного мониторинга ITM-RM
            Расчет ожидаемого объема данных в сервере UDV-ITM-RM осуществляется по формуле: 
            Объем данных БД ITM-RM (Мб) = Ком*Кэд*Копр*220*Кд/1024/1024
            Обозначения и смысл переменных аналогичны использующимся в формуле для сервера
                UDV-ITM-M.
            Пример расчета:
            Количество ОМ = 100. Агентным способом осуществляется мониторинг 50-ти и 50
                безагентным. Хранение истории значений параметров = 3 дня (значение по
                умолчанию).
            50*10*5760*3/1024/1024 = 1 812,7 Мб
            50*10*720*180/1024/1024 = 226,6 Мб
            Итого, ожидаемый объем данных в БД сервера = 2 039,3 Мб
            Сервер визуализации и управления ITM-VM
            Расчет ожидаемого объема данных в сервере UDV-ITM-VM осуществляется по формуле:
            Объем данных БД ITM-VM (Мб) = (Ком*10+Кс*1*Кд+Ксв*7168)/1024, где:
            Ком — количество ОМ. Суммарное количество ОМ, полученных изо всех
                подключенных серверов UDV-ITM-M.
            Кc — количество событий о проблемах ОМ, получаемых из серверов UDV-ITM-M в
                сутки. В нормально функционирующих системах, количеством проблем бывает около 2% от
                общего количества ОМ, однако по каждой проблеме может быть множество событий. Для
                предварительного расчета проектируемой системы рекомендуется считать Кс=Ком.
                В процессе эксплуатации конкретной системы значение может быть уточнено на основе
                фактической статистики.
            Кд — количество дней хранения истории событий в серверах мониторинга. По
                умолчанию, история событий о проблемах ОМ в серверах мониторинга хранится 180
                дней.
            Ксв — количество подключенных серверов мониторинга UDV-ITM-M.
        Пример расчета:
        Количество ОМ = 1500. Количество подключенных серверов мониторинга UDV-ITM-M = 50.
            Хранение истории событий в серверах мониторинга UDV-ITM-M = 180 дней (значение по
            умолчанию).
        (1500*10+1500*1*180+100*7168)/1024 = 978,3 Мб
        Итого, ожидаемый объем данных в БД сервера = 978,3 Мб
|*|*|*|
    Требования к эксплуатирующему персоналу
        ПК DATAPK ITM предназначен для эксплуатации в круглосуточном и непрерывном режиме, за
            исключением периодов проведения технического обслуживания, и не требует постоянного
            наблюдения со стороны обслуживающего персонала.
        Настройку и периодическое обслуживание программного комплекса в целом или отдельных его
            компонент осуществляет специалист, выполняющий роль администратора программного
            комплекса.
        Для выполнения функций администратора ПК DATAPK ITM могут привлекаться специалисты,
            квалификация которых соответствует требованиям профессионального стандарта «Системный
            администратор информационно-коммуникационных систем» для выполнения функций
            «Обслуживание серверных операционных систем информационно-коммуникационной системы».
        Функции обслуживания сервера уровня администрации (DATAPK ITM-VM) и серверов уровня филиала
            (DATAPK ITM-K) могут выполнять разные специалисты разных подразделений, т.к. сервер DATAPK ITM-K
            является самодостаточным средством мониторинга ИТ-инфраструктуры и может использоваться
            самостоятельно, вне общей архитектуры комплекса DATAPK ITM.
        Для эффективной и безопасной эксплуатации ПК администратор комплекса и администраторы
            серверов должны изучить эксплуатационную документацию от разработчика или пройти
            обучение в учебном центре IT Cloud  курс «Развёртывание и администрирование программного комплекса
            мониторинга безопасности и контроля ресурсов DATAPK ITM».
        Внедрение и эксплуатация сертифицированного ПК DATAPK ITM должно осуществляться в
            соответствии с требованиями Технических условий на программный комплекс мониторинга
            безопасности и контроля ресурсов «DATAPK ITM» (УЦЛК.468244.26-ТУ).
|*|*|*|
    Трафик между сервером ITM-VM и серверами ITM-K
            Методика расчета
            Трафик между сервером UDV-ITM-VM и каждым сервером UDV-ITM-M состоит из следующих
                сетевых потоков:
                    Данные о параметрах и инвентарных свойствах ОМ (Том).
                    Объем передаваемых данных о параметрах и инвентарных свойствах ОМ составляет,
                        в среднем, 3,7 Кбайт на один ОМ.
                    Точный объем трафика зависит от количества заполненных полей инвентарных
                        свойств ОМ и размера текстовых значений. 
                    Данные о состоянии ОМ (Тс).
                    Объем передаваемых данных о состоянии функционирования ОМ составляет, в
                        среднем, 0,2 Кбайт на один ОМ.
                    Данные о проблемах функционирования ОМ (Тп).
                    Объем передаваемых данных о проблемах функционирования составляет, в среднем,
                            1,2 Кбайт на одну проблему.
                    Точный объем трафика зависит от размера текстовых описаний в триггерах и
                        проблемах. При передаче данных о большем количестве проблем за один цикл
                        синхронизации, среднее значение трафика на одну проблему уменьшается.
                    Журналы аудита (Та).
                    Объем передаваемых данных журналов аудита составляет, в среднем, 0,56
                            Кбайт на событие.
                    Точный объем трафика зависит от размера текстовых описаний событий. При
                        передаче данных о большем количестве проблем за один цикл синхронизации,
                        среднее значение трафика уменьшается на одно событие.
                    Служебный трафик управления (Тс).
                    Включает в себя запросы системных свойств сервера UDV-ITM-M, запросы
                        синхронизаций счетчиков ОМ и проблем, а так же служебные запросы возникающие
                        после разрывов связи и т.п.
                    Данный поток трафика является незначительным и может меняться в процессе
                        эксплуатации в зависимости от изменения служебных режимов работы комплекса и
                        составляет не более 2% от общего трафика между серверами. 
            Расчет трафика можно выполнить по формуле:
            Трафик (Кб) = (Кц*Ком*3,7+Кц*Ком*0,2+Кц*Кп*1,2+Кц*Кс*0,56)/0,98
            Где Ком — Количество ОМ, Кп — количество проблем, Кс —
                количество событий журнала аудита, Кц — количество циклов синхронизаций.
            Пример расчета
            Параметры системы:
            Количество ОМ, подключенных к серверу UDV-ITM-M = 200 (UDV-ITM-M к которому
                подключено 50 ОМ и 3 сервера UDV-ITM-RM, к каждому их которых подключено по 50
                ОМ).
            Количество проблем = по 1 новой проблеме при каждой синхронизации данных.
            Периодичность синхронизации данных:
                Полных данных об ОМ, мин — 480;
                Данных о состоянии ОМ, мин — 3;
                Данных о проблемах, мин — 1; 
                Журналов аудита, мин — 3;
                Системных свойств, мин — 3. 
            Расчет 
                Данные о параметрах и инвентарные свойства ОМ (1 цикл) = 740 Кбайт;
                Данные о состоянии ОМ (1 час) = 800 Кбайт;
                Данные о проблемах функционирования ОМ (1 час) = 72 Кбайт;
                Журналы аудита (1 час) = 44,8 Кбайт;
                Служебный трафик управления = 2%.
            Итого: 
                Требуемая минимальная полоса пропускания = 2,3 Кбит/с;
                Объем трафика за 1 сутки = 24,1 Мбайт.
|*|*|*|
    Глоссарий
                UDV ITM — программный комплекс мониторинга безопасности и контроля
                    ресурсов. Предназначен для мониторинга IT-инфраструктуры и сервисов предприятий.
                    Включает в себя следующие конфигурации:
                        UDV-ITM-RM — сервер удаленного мониторинга (прокси-сервер).
                                Применяется для: 
                                    сбора данных о производительности с подключенных объектов
                                        мониторинга;
                                    передачи собранных данных на сервер мониторинга.
                        UDV-ITM-M — сервер мониторинга. Применяется для:
                                    сбора данных о производительности с подключенных объектов
                                        мониторинга;
                                    консолидации данных, в т. ч. полученных с сервера удаленного
                                        мониторинга;
                                    передачи консолидированных данных на сервер визуализации и
                                        управления;
                                    визуализации информации об использовании вычислительных
                                        ресурсов и каналов связи объектов мониторинга филиала;
                                    оповещения ответственных лиц в случае выявления сбоя, либо
                                        отклонения показателей функционирования объекта мониторинга
                                        от допустимых.
                        UDV-ITM-VM — сервер визуализации и управления. Применяется
                                    для:
                                    приема данных с сервера консолидации;
                                    анализа данных;
                                    визуализации данных;
                                    предоставления высокоуровневой информации о состоянии
                                        ИТ-ресурсов  предприятия. 
                Автоматизированная система управления технологическим процессом (АСУ ТП)
                    — комплекс программных и программно-аппаратных средств, предназначенных для
                    контроля за технологическим и (или) производственным оборудованием
                    (исполнительными устройствами) и производимыми ими процессами, а также для
                    управления такими оборудованием и процессами.
                Объект мониторинга (ОМ) — узел сети, канал связи, IT-ресурс или сервис,
                    которые подключаются к системе мониторинга для контроля качества их
                    функционирования и предоставляемых услуг.
                Система мониторинга компьютерных инцидентов (СМКИ) — система сбора,
                    анализа и корреляции событий информационной безопасности, созданная на базе
                    решений класса SIEM.
                Система автоматизации процессов обеспечения безопасности (САОБ) —
                    автоматизированная система, предназначенная для автоматизации процессов
                    управления информационной безопасностью.
                Технологический комплекс — объект АСУ ТП нижнего уровня иерархии,
                    является дочерним или подчиненным объектом филиала.
                Техническое обслуживание — комплекс операций по поддержанию
                    работоспособности или исправности производственного оборудования (изделий,
                    деталей) в процессе технической эксплуатации, хранения и транспортировки (ГОСТ
                    18322-2016).
|*|*|*|
    Трафик между сервером ITM-M (ITM-RM) и объектами мониторинга
            Методика расчета
            Объем сетевого трафика между сервером UDV-ITM-M или UDV-ITM-RM и объектом мониторинга
                зависит от:
                    способа мониторинга (агентный или безагентный);
                    количества контролируемых параметров объекта мониторинга (элементов
                        данных);
                    периодичности получения контролируемых параметров.
            Для ориентировочного расчета суммарного трафика мониторинга при проектировании систем
                можно рассчитать размер пакета данных от ОМ к UDV-ITM-M (UDV-ITM-RM) следующим
                образом:
                Заголовочная часть каждого пакета составляет примерно 2.3 Кбайт.
                Полезная нагрузка пакета (собираемые элементы данных) составляет примерно 220
                        байт на каждый элемент данных.
            Таким образом при среднем количестве наблюдаемых элементов данных типового ОМ равном
                10, единичный пакет от ОМ к серверу будет иметь следующий размер:
                    2.3Кбайт+(220байт*10) ≈ 4.5Кбайт 
            Соответственно, мы можем рассчитать требуемую полосу пропускания следующим
                образом:
            (2.3Кбайт +(220байт*[кол-во эл. данных])*([кол-во агентов]*[периодичность для
                    агента в минуту] + [ко-во ОМ без агентов]*[периодичность для ОМ без агентов в
                    минуту])/60.
            Расчет объема трафика системы мониторинга за период может быть выполнен по
                формуле:
            [Полоса пропускания в Кбит/с]*3600
            Если объекты мониторинга подключены к серверу агентов UDV-ITM-RM, то сервер агентов
                UDV-ITM-RM поддерживает сжатие информации, передаваемой на сервер мониторинга. Это
                позволяет снизить общий объём трафика, передаваемый между серверами. 
            Пример расчета
            Параметры системы:
                Объектов мониторинга, всего — 50, из них:
                        Мониторинг агентным способом — 25 ОМ, периодичность — 15 сек.
                        Мониторинг безагентным способом — 25 ОМ, периодичность — 2 мин.
                Количество контролируемых параметров (элементов данных мониторинга) — 10.
            Расчет: 
                Полоса пропускания — (2.3Кбайт +(220байт*10)*(25*4+25*0.5)/60 = 8,4375
                        Кбайт/сек = 67,5 Кбит/с
                Объем трафика за 1 час - 67,5 Кбит/с * 3600 с = 243000 Кбит ≈ 30 МБайт
|*|*|*|
    Сервер визуализации и управления UDV-ITM-VM (уровень администрации)
        Сервер UDV-ITM-VM предназначен для централизованного управления системой мониторинга в
            целом, консолидации данных мониторинга в масштабах всего предприятия и интеграционного
            взаимодействия с корпоративными системами обнаружения компьютерных инцидентов и
            системами автоматизации процессов обеспечения ИБ.
        Сервер предоставляет пользователям обобщенную информации о функционировании как объектов
            защиты, так и средств защиты информации, формирует оповещения о критических ошибках
            функционирования объектов защиты на разных площадках. Сервер является источником
            информации для подразделений ИБ в их деятельности по обнаружению и реагированию на
            компьютерные инциденты и принятию мер по ликвидации их последствий.
        Информация о состоянии параметров функционирования объектов защиты и нарушениях в
            функционировании может передаваться из сервера UDV-ITM-VM в корпоративные системы
            обнаружения компьютерных инцидентов. Данные об объектах защиты для смежных систем
            обогащены идентификаторами и тэгами DATAPK, данными о состоянии технического
            обслуживания, что позволяет снизить количество ложных срабатываний при обнаружении
            компьютерных инцидентов.
        Взаимодействие пользователя с сервером осуществляется с помощью web-интерфейса.
        Взаимодействие UDV-ITM-VM со смежными системами:
            Система мониторинга компьютерных инцидентов СМКИ/SIEM:
                    передаются события информационной безопасности, полученные со всех
                        подключенных серверов ПК:
                            события о проблемах функционирования объектов мониторинга;
                            действия пользователей серверов UDV-ITM-M.
                Системы автоматизации процессов обеспечения информационной безопасности
                    (САОБ):
                        предоставляется информация об объектах мониторинга, их свойствах,
                            инвентарные данные.
            Серверы мониторинга UDV-ITM-M:
                    получение и периодическая актуализация информации об объектах мониторинга и
                        проблемах их функционирования.
|*|*|*|
    Подготовка к внедрению и внедрение серверов мониторинга ITM-M, ITM-RM
        Для успешного внедрения системы мониторинга на базе серверов UDV-ITM-M и UDV-ITM-RM
            необходимо на этапе проектирования или подготовки к внедрению системы мониторинга
            определить основные способы и режимы мониторинга разных типов объектов, определить
            архитектуру и оптимальный состав серверов UDV ITM в соответствии со спецификой
            конкретной ИТ-инфраструктуры защищаемой системы. Состав работ по подготовке к
                внедрению и внедрению сервера мониторинга UDV-ITM-M: 
                Проектирование архитектуры решения:
                        Выбор архитектуры и сетевого размещения серверов — определить
                            оптимальное количество и состав серверов UDV-ITM-M и UDV-ITM-RM,
                            необходимых для создания системы мониторинга с учетом оптимального
                            положения по отношению к объектам мониторинга, количества ОМ,
                            контролируемых параметров, способов и периодичности мониторинга и
                            наличию сетевой доступности, качества каналов связи между территориально
                            распределенными сетевыми сегментами, наличия технического персонала для
                            эксплуатации и других факторов.
                        Выбор оптимальной аппаратной и программной конфигурации серверов с
                            учетом количества ОМ и режимов мониторинга, наличия требований об
                            использовании сертифицированных технических средств в создаваемой
                            системе, а так же требований корпоративной технической политики.
                Монтаж и настройка:
                        Монтаж и пусконаладка серверов UDV-ITM-M и UDV-ITM-RM.
                        Настройка сетевого окружения для обеспечения сетевой доступности с ОМ и
                            смежными системами DATAPK и UDV-ITM-VM.
                Подготовка объектов мониторинга.
                        Определить список ОМ.
                        Выбор способа мониторинга по каждому ОМ — агентный или безагентный.
                            Приоритетные способы мониторинга: Агентный, SNMPv3/v2, IPMI, WMI. 
                        Выбор способа сетевой доступности к каждому ОМ — мониторинг
                            непосредственно сервером UDV-ITM-M или с использованием
                            UDV-ITM-RM.
                        Настройка ОМ.
                                Установка агентов. В процессе установки агента на ОМ нужен
                                    IP-адрес сервера мониторинга UDV-ITM-M или UDV-ITM-RM. 
                                Настройка SNMP.
                                    v.3 (приоритетный в использовании). 
                                    v.2 (только, если v.3 использовать невозможно).
                                        Необходимо использовать параметр community только в
                                        режиме read only.
                                Настройка WMI. Следует использовать только в случае
                                    невозможности использования других способов. Возможно
                                    использование только на сервере UDV-ITM-M.
                                Настройка IPMI.
                Настройка интеграции с DATAPK.
                Подключение объектов мониторинга:
                        Автоматический импорт списка ОМ из DATAPK.
                        Добавление ОМ
                            вручную.
                        Применение шаблонов мониторинга к ОМ в соответствии с их типом и
                            предварительными настройками.
                        Выбор способа мониторинга с использованием сервера UDV-ITM-RM (если
                            требуется).
                Настройка общих параметров сервера UDV-ITM-M в соответствии с потребностями
                    службы эксплуатации: информационные панели, оповещения и т.п.
                Сервер UDV-ITM-M готов к интеграции с UDV-ITM-VM.
        Описание операций по настройкам серверов UDV-ITM-M, UDV-ITM-RM и ОМ приведено в
            Руководствах по эксплуатации соответствующих серверов.
|*|*|*|
    Подготовка к внедрению и внедрение серверов мониторинга ITM-K, ITM-A
        Для успешного внедрения системы мониторинга на базе серверов DATAPK ITM-K и 
            DATAPK ITM-A
            необходимо на этапе проектирования или подготовки к внедрению системы мониторинга
            определить основные способы и режимы мониторинга разных типов объектов, определить
            архитектуру и оптимальный состав серверов ПК DATAPK ITM в соответствии со спецификой
            конкретной ИТ-инфраструктуры защищаемой системы. Состав работ по подготовке к
                внедрению и внедрению сервера мониторинга DATAPK ITM-K: 
                Проектирование архитектуры решения:
                        Выбор архитектуры и сетевого размещения серверов — определить
                            оптимальное количество и состав серверов DATAPK ITM-K и DATAPK ITM-A,
                            необходимых для создания системы мониторинга с учетом оптимального
                            положения по отношению к объектам мониторинга, количества ОМ,
                            контролируемых параметров, способов и периодичности мониторинга и
                            наличию сетевой доступности, качества каналов связи между территориально
                            распределенными сетевыми сегментами, наличия технического персонала для
                            эксплуатации и других факторов.
                        Выбор оптимальной аппаратной и программной конфигурации серверов с
                            учетом количества ОМ и режимов мониторинга, наличия требований об
                            использовании сертифицированных технических средств в создаваемой
                            системе, а так же требований корпоративной технической политики.
                Монтаж и настройка:
                        Монтаж и пусконаладка серверов DATAPK ITM-K и DATAPK ITM-A.
                        Настройка сетевого окружения для обеспечения сетевой доступности с
                                ОМ и смежными системами
                            DATAPK и DATAPK ITM-VM.
                Подготовка объектов мониторинга.
                        Определить список ОМ.
                        Выбор способа мониторинга по каждому ОМ — агентный или безагентный.
                            Приоритетные способы мониторинга: Агентный, SNMPv3/v2, IPMI, WMI. 
                        Выбор способа сетевой доступности к каждому ОМ — мониторинг
                            непосредственно сервером DATAPK ITM-K или с использованием DATAPK
                            ITM-A.
                        Настройка ОМ.
                                Установка агентов. В процессе установки агента на ОМ нужен
                                    IP-адрес сервера мониторинга DATAPK ITM-K или DATAPK ITM-A. 
                                Настройка SNMP.
                                        v.3 (приоритетный в использовании). 
                                        v.2 (только, если v.3 использовать невозможно).
                                            Необходимо использовать параметр community только в
                                            режиме read only.
                                Настройка WMI. Следует использовать только в случае
                                    невозможности использования других способов. Возможно
                                    использование только на сервере DATAPK ITM-K.
                                Настройка IPMI.
                Настройка интеграции с DATAPK.
                Подключение объектов мониторинга:
                        Автоматический импорт списка ОМ из DATAPK.
                        Добавление ОМ
                            вручную.
                        Применение шаблонов мониторинга к ОМ в соответствии с их типом и
                            предварительными настройками.
                        Выбор способа мониторинга с использованием сервера DATAPK ITM-A (если
                            требуется).
                Настройка общих параметров сервера DATAPK ITM-K в
                    соответствии с потребностями службы эксплуатации: информационные панели,
                    оповещения и т.п.
                Сервер DATAPK ITM-K готов к интеграции с
                    DATAPK ITM-VM.
        Описание операций по настройкам серверов DATAPK ITM-K,
            DATAPK ITM-A и ОМ приведено в Руководствах по
            эксплуатации соответствующих серверов.
|*|*|*|
    Подготовка к внедрению и внедрение сервера визуализации и управления ITM-VM
        Состав работ по подготовке к внедрению и внедрению сервера визуализации и
            управления DATAPK ITM-VM:
                Проектирование решения.
                        Выбор сетевого размещения сервера с учетом сетевой доступности к
                            серверам DATAPK ITM-K и смежным системам.
                        Выбор оптимальной аппаратной и программной конфигурации серверов с
                            учетом количества подключаемых серверов DATAPK ITM-K и количества
                            ОМ.
                Монтаж и настройка:
                        Монтаж и пусконаладка сервера.
                        Настройка сетевого окружения для обеспечения сетевой доступности к
                            серверам DATAPK ITM-K и смежным
                            системам.
                Подключение серверов DATAPK ITM-K.
                Настройка интеграций со смежными системами.
        Описание операций по настройкам приведено в Руководствах по эксплуатации.
|*|*|*|
    Трафик между сервером ITM-VM и серверами ITM-K
            Методика расчета
            Трафик между сервером DATAPK ITM-VM и каждым сервером DATAPK ITM-K состоит из
                следующих сетевых потоков:
                    Данные о параметрах и инвентарных свойствах ОМ (Том).
                    Объем передаваемых данных о параметрах и инвентарных свойствах ОМ составляет,
                        в среднем, 3,7 Кбайт на один ОМ.
                    Точный объем трафика зависит от количества заполненных полей инвентарных
                        свойств ОМ и размера текстовых значений. 
                    Данные о состоянии ОМ (Тс).
                    Объем передаваемых данных о состоянии функционирования ОМ составляет, в
                        среднем, 0,2 Кбайт на один ОМ.
                    Данные о проблемах функционирования ОМ (Тп).
                    Объем передаваемых данных о проблемах функционирования составляет, в среднем,
                            1,2 Кбайт на одну проблему.
                    Точный объем трафика зависит от размера текстовых описаний в триггерах и
                        проблемах. При передаче данных о большем количестве проблем за один цикл
                        синхронизации, среднее значение трафика на одну проблему уменьшается.
                    Журналы аудита (Та).
                    Объем передаваемых данных журналов аудита составляет, в среднем, 0,56
                            Кбайт на событие.
                    Точный объем трафика зависит от размера текстовых описаний событий. При
                        передаче данных о большем количестве проблем за один цикл синхронизации,
                        среднее значение трафика уменьшается на одно событие.
                    Служебный трафик управления (Тс).
                    Включает в себя запросы системных свойств сервера DATAPK ITM-K, запросы
                        синхронизаций счетчиков ОМ и проблем, а так же служебные запросы возникающие
                        после разрывов связи и т.п.
                    Данный поток трафика является незначительным и может меняться в процессе
                        эксплуатации в зависимости от изменения служебных режимов работы комплекса и
                        составляет не более 2% от общего трафика между серверами. 
            Расчет трафика можно выполнить по формуле:
            Трафик (Кб) = (Кц*Ком*3,7+Кц*Ком*0,2+Кц*Кп*1,2+Кц*Кс*0,56)/0,98
            Где Ком - Количество ОМ, Кп
                - количество проблем, Кс - количество событий журнала аудита, Кц -
                количество циклов синхронизаций.
            Пример расчета
            Параметры системы:
            Количество ОМ, подключенных к серверу DATAPK ITM-K = 200 (DATAPK ITM-K к которому
                подключено 50 ОМ и 3 сервера DATAPK ITM-A, к каждому их которых подключено по 50
                ОМ).
            Количество проблем = по 1 новой проблеме при каждой синхронизации данных.
            Периодичность синхронизации данных:
                Полных данных об ОМ, мин — 480;
                Данных о состоянии ОМ, мин — 3;
                Данных о проблемах, мин — 1; 
                Журналов аудита, мин — 3;
                Системных свойств, мин — 3. 
            Расчет 
                Данные о параметрах и инвентарные свойства ОМ (1 цикл) = 740 Кбайт;
                Данные о состоянии ОМ (1 час) = 800 Кбайт;
                Данные о проблемах функционирования ОМ (1 час) = 72 Кбайт;
                Журналы аудита (1 час) = 44,8 Кбайт;
                Служебный трафик управления = 2%.
            Итого: 
                Требуемая минимальная полоса пропускания = 2,3 Кбит/с;
                Объем трафика за 1 сутки = 24,1 Мбайт.
|*|*|*|
    Сетевые взаимодействия
        В таблице указаны сетевые потоки между серверами ITM и смежными системами
            Сервер визуализации и управления (ITM-VM, уровень администрации)
                        Источник трафика
                        Узел назначения
                        Протокол и № порта по умолчанию
                        Описание трафика
                        DATAPK ITM-VM
                        DATAPK ITM-K
                        HTTPS (443/TCP)
                            Предоставляется информация об объектах мониторинга и их
                                свойствах.
                            Интерфейс API: Zabbix (JSON-RPC 2.0); DATAPK ITM (REST API,
                                JSON).
                            Объем трафика зависит от количества подключенных ОМ и количества
                                проблем ОМ, рассчитывается в соответствии с методикой. 
                            Сжатие трафика - gzip.
                            Периодичность получения данных в соответствии с настройками.
                        DATAPK ITM-VM
                        СМКИ, SIEM
                        Syslog (514/TCP,UDP)
                            Передаются события информационной безопасности, полученные со всех
                                подключенных серверов:
                                события о проблемах функционирования объектов мониторинга;
                                действия пользователей серверов ПК DATAPK ITM ITM-K.
                            Объем трафика: зависит от количества проблем ОМ и событий аудита,
                                рассчитывается в соответствии с методикой. Отправка данных
                                осуществляется по мере их появления в DATAPK ITM-VM. 
                            Сжатие трафика отсутствует.
                        САОБ
                        DATAPK ITM-VM
                        HTTPS (443/TCP)
                            Предоставляется информация об объектах мониторинга и их
                                свойствах.
                            Интерфейс API - DATAPK ITM (REST API, JSON).
                            Объем трафика зависит от количества ОМ и соответствует методике
                                расчета трафика по передаче всех свойств ОМ, включая инвентарные
                                данные.
                             Сжатие трафика - gzip.
            Сервер мониторинга/консолидации (ITM-K, уровень филиала), cервер агентов (ITM-A,
                уровень ТО)
                        Источник трафика
                        Узел назначения
                        Протокол и № порта по умолчанию
                        Описание трафика
                        DATAPK ITM-K
                        DATAPK
                        HTTPS (443/TCP)
                            Получение данных об объектах защиты и их свойств.
                            Интерфейс API: DATAPK API (REST API, JSON).
                            Объем трафика зависит от количества ОМ и может быть оценен, как
                                половина трафика о параметрах и инвентарные свойства ОМ (Том) между
                                DATAPK ITM-VM и DATAPK ITM-K в соответствии с методикой. 
                            Сжатие трафика - gzip.
                         DATAPK ITM-K (DATAPK ITM-A) 
                        Объекты мониторинга, безагентный сбор
                            SNMP (161/UDP, 162/UDP),
                            SSH (22/TCP),
                            WMI (MSRPC 135/TCP, MSRPC XP 1025-5000/TCP, MSRPC Vista и новее
                                49152-65535/TCP)
                            Получение параметров функционирования и свойств объектов
                                мониторинга.
                            Объем трафика зависит от количества собираемых параметров
                                функционирования и периодичности. Рассчитывается в соответствии с
                                методикой.
                        Объекты мониторинга, агентный сбор
                        10050/TCP
                        DATAPK ITM-K
                        DATAPK ITM-A
                        10051/TCP (пассивный режим)10052/TCP (активный режим)
                            Получение параметров функционирования и свойств объектов мониторинга,
                                подключенных к серверу агентов DATAPK ITM-A.
                            Трафик соответствует суммарному трафику данных от объектов
                                мониторинга со сжатием gzip.
|*|*|*|
    Трафик между сервером ITM-K (ITM-A) и объектами мониторинга
            Методика расчета
            Объем сетевого трафика между сервером DATAPK ITM-K или DATAPK ITM-A и объектом мониторинга зависит
                    от:
                    способа мониторинга (агентный или безагентный);
                    количества контролируемых параметров объекта мониторинга (элементов
                        данных);
                    периодичности получения контролируемых параметров.
            Для ориентировочного расчета суммарного трафика мониторинга при проектировании систем
                можно рассчитать размер пакета данных от ОМ к DATAPK ITM-K(DATAPK ITM-A) следующим образом:
                Заголовочная часть каждого пакета составляет примерно 2.3 Кбайт.
                Полезная нагрузка пакета (собираемые элементы данных) составляет примерно 220
                        байт на каждый элемент данных.
            Таким образом при среднем количестве наблюдаемых элементов данных типового
                    ОМ равном 10, единичный пакет от
                    ОМ к серверу будет иметь следующий
                размер: 2.3Кбайт+(220байт*10) ≈ 4.5Кбайт 
            Соответственно, мы можем рассчитать требуемую полосу пропускания следующим
                образом:
            (2.3Кбайт +(220байт*[кол-во эл. данных])*([кол-во агентов]*[периодичность для
                    агента в минуту] + [ко-во ОМ без агентов]*[периодичность для ОМ без агентов в
                    минуту])/60.
            Расчет объема трафика системы мониторинга за период может быть выполнен по
                формуле:
            [Полоса пропускания в Кбит/с]*3600
            Если объекты мониторинга подключены к серверу агентов DATAPK ITM-A, то сервер агентов
                DATAPK ITM-A поддерживает сжатие информации, передаваемой на сервер мониторинга. Это
                позволяет снизить общий объём трафика, передаваемый между серверами. 
            Пример расчета
            Параметры системы:
                Объектов мониторинга, всего — 50, из них:
                        Мониторинг агентным способом — 25 ОМ, периодичность — 15 сек.
                        Мониторинг безагентным способом — 25 ОМ, периодичность — 2 мин.
                Количество контролируемых параметров (элементов данных мониторинга) — 10.
                Расчет:
                Полоса пропускания — (2.3Кбайт +(220байт*10)*(25*4+25*0.5)/60 = 8,4375
                        Кбайт/сек = 67,5 Кбит/с
                Объем трафика за 1 час - 67,5 Кбит/с * 3600 с = 243000 Кбит ≈ 30 МБайт
|*|*|*|
    Лицензионная политика
            Состав лицензий комплекса DATAPK ITM
                        Код лицензии p/n
                        Наименование
                        Порядок применения
                        DTPK-ITM-M
                        Лицензия на ПК «DATAPK ITM». Сервер
                            управления
                            Требуется 1 лицензия для каждого сервера DATAPK ITM-VM уровня
                                администрации.
                            Лицензируется функционал управления комплексом и интеграций.
                        DTPK-ITM-V
                        Лицензия на ПК «DATAPK ITM». Сервер
                            анализа и визуализации
                            Требуется 1 лицензия для каждого сервера DATAPK ITM-VM уровня
                                администрации.
                            Лицензируется функционал визуализации сводных данных, аналитики и
                                оповещений.
                        DTPK-ITM-K
                        Лицензия на ПК «DATAPK ITM». Сервер
                            консолидации
                            Требуется 1 лицензия для каждого сервера DATAPK ITM-K уровня
                                филиала.
                            Лицензируется функционал мониторинга, интеграции с DATAPK и
                                предоставления интерфейсов для сервера уровня администрации.
                        DTPK-ITM-A
                        Лицензия на ПК «DATAPK ITM». Сервер
                            агентов
                            Требуется 1 лицензия для каждого сервера DATAPK ITM-A уровня
                                технологического объекта.
                            Лицензируется функционал мониторинга и интеграции с сервером уровня
                                филиала.
                        DTPK-ITM-H
                        Лицензия на ПК «DATAPK ITM». 50
                            узлов
                            Пакет лицензий мониторинга 50 объектов мониторинга.
                            Требуется для серверов DATAPK ITM-K или
                                    DATAPK ITM-A.
                            Лицензируется функционал агентного или безагентного мониторинга.
                            Количество узлов в пакетах лицензий должно соответствовать или быть
                                больше количества фактически подключаемых объектов мониторинга.
                            Объектами мониторинга считаются активные узлы сети в разделе
                                Мониторинг → Узлы сети и услуги в разделе Мониторинг → Услуги.
|*|*|*|
    Требования и рекомендации к программному обеспечению
            Сертифицированные версии серверов DATAPK ITM должны функционировать в следующем
                окружении:
                Операционная система (сертифицированная версия):
                    РЕД ОС;
                    Astra Linux Special Edition (Смоленск).
                СУБД Jatoba DB (сертифицированная версия).
            Обязательным условием функционирования сертифицированной версии является выполнение
                требований по безопасной настройке в соответствии с Техническими условиями ТУ
                УЦЛК.468244.26-ТУ и Руководством по эксплуатации.
            При отсутствии требований по использованию сертифицированной версии ПК DATAPK ITM
                возможно использование следующего программного окружения:
                операционная система: Centos*, Red Hat Enterprise Linux*, Oracle Linux*;
                СУБД: PostgreSQL*.
            *Конкретные версии совместимых ОС необходимо уточнять в Руководстве по эксплуатации
                соответствующей версии ПК DATAPK ITM.
|*|*|*|
    Рекомендуемые характеристики аппаратного обеспечения
                Минимальные требования к производительности и характеристикам
                    серверов
                        Вариант исполнения
                        Суммарный объем объектов мониторинга с учетом подчиненных
                            серверов
                            Кол-во CPU (шт.) /
                            кол-во ядер (шт.) / частота (ГГц)
                        Объем ОЗУ
                        Дисковая подсистема*
                        Объем дисковой подсистемы для ОС
                        Сетевой адаптер
                        Малая инсталляция ITM-K, ITM-A,   ITM-VM
                        Менее 250
                        1 CPU / 2 ядра / 2 ГГц
                        16
                        ITM-A — 100 ГБITM-VM — 250 ГБITM-K — 500 ГБ, от 7200
                                SATA
                        120 ГБ
                        1х100/1000 Мбит/с
                        Средняя инсталляция ITM-K, ITM-VM
                        250 - 2500
                        1 CPU / 4 ядра / 2 ГГц
                        32
                        Производительность: от 10K SAS
                            Объем: Кратно объему для
                            малой инсталляции в соответствии с количеством ОМ.
                        240 ГБ
                        1х100/1000 Мбит/с
                        Большая инсталляция ITM-K, ITM-VM
                        2500 - 10000
                        1 CPU / 4 ядра / 2 ГГц
                        64
                        240 ГБ
                        2х1000 Мбит/с
        *Соответствует типовому сценарию использования с параметрами «по умолчанию». При
            проектировании нетиповых решений требуется расчет в соответствии с методикой. 
            Возможно развертывание сервера мониторинга ITM-K (малая инсталляция) и сервера ITM-VM
                на одном физическом сервере, при этом требования к аппаратным ресурсам такого
                сервера следует суммировать.
            Сервер мониторинга ITM-K для мониторинга 250 и более объектов мониторинга
                рекомендуется развертывать на отдельном сервере. 
        Установка DATAPK ITM-K и DATAPK ITM-A на один сервер не реализует
            преимущества использования ITM-A на удаленных площадках и не является
            рекомендованным сценарием применения комплекса.
            Если по каким-то причинам
                действительно требуется установка DATAPK ITM-K и DATAPK ITM-A на один сервер, то
                следует использовать средства виртуализации для изоляции сред функционирования
                этих серверов и требования к аппаратным ресурсам такого сервера равны сумме
                требований для DATAPK ITM-K и DATAPK ITM-A из таблицы «Минимальные требования к
                производительности и характеристикам серверов», а требования к объему дисковой
                подсистемы из той же таблицы увеличиваются в 1.5 раза.
|*|*|*|
    Оценка объема дисковой подсистемы
        Объем данных в базах данных серверов ПК DATAPK ITM зависит от множества параметров работы
            серверов и может существенно отличаться в зависимости от конкретных настроек с учетом
            специфики проекта. Настоящая методика расчета может быть использована при проектировании
            систем, функционирующих в типовых рекомендованных режимах работы. 
            Сервер мониторинга ITM-K
            Для укрупненной оценки ожидаемого объема данных при проектировании сервера
                мониторинга DATAPK ITM-K можно использовать следующую формулу:
            Объем данных БД ITM-K (Мб) = (Ком*Кэд*Копр*220+Кп*1200)*Кд/1024/1024, где:
                Ком — количество ОМ.
                Кэд — количество параметров мониторинга ОМ (элементов данных). Типовой
                    набор параметров мониторинга включает, как правило, до 10 элементов динамических
                    данных.
                Копр — количество опросов значений параметров ОМ в сутки. По умолчанию,
                    агентный мониторинг осуществляется каждые 15 сек, т.е. Копр=5760, безагентный
                    мониторинг каждые 2 мин, т.е. Копр=720.
                Кп — количество проблем (срабатываний триггеров) в сутки. В нормально
                    функционирующих системах количеством проблем обычно бывает не более 2% от общего
                    количества ОМ.
                Кд — количество дней мониторинга. По умолчанию, история значений
                    контролируемых параметров очищается через 180 дней. После этого периода рост БД
                    существенно замедляется и составляет ориентировочно 10-20% в год.
            Пример расчета:
            Количество ОМ = 100. Агентным способом
                осуществляется мониторинг 50-ти и 50 безагентным. Хранение истории значений
                параметров = 180 дней.
            (50*10*5760+50*0,02*1200)*180/1024/1024 = 108 975,5 Мб
            (50*10*720+50*0,02*1200)*180/1024/1024 = 13 806,5 Мб
            Итого, ожидаемый объем данных в БД сервера = 122 782 Мб
            Сервер ITM-A
            Расчет ожидаемого объема данных в сервере DATAPK ITM-A
                осуществляется по формуле: 
            Объем данных БД ITM-A (Мб) = Ком*Кэд*Копр*220*Кд/1024/1024
            Обозначения и смысл переменных аналогичны использующимся в формуле для сервера
                    DATAPK ITM-K.
            Пример расчета:
            Количество ОМ = 100. Агентным способом
                осуществляется мониторинг 50-ти и 50 безагентным. Хранение истории значений
                параметров = 3 дня (значение по умолчанию).
            50*10*5760*3/1024/1024 = 1 812,7 Мб
            50*10*720*180/1024/1024 = 226,6 Мб
            Итого, ожидаемый объем данных в БД сервера = 2 039,3 Мб
            Сервер визуализации и управления ITM-VM
            Расчет ожидаемого объема данных в сервере DATAPK ITM-VM осуществляется по формуле:
            Объем данных БД ITM-VM (Мб) = (Ком*10+Кс*1*Кд+Ксв*7168)/1024, где:
            Ком - количество ОМ. Суммарное количество ОМ, полученных изо всех
                подключенных серверов DATAPK ITM-K.
            Кc - количество событий о проблемах ОМ, получаемых из серверов DATAPK ITM-K в сутки.
                В нормально функционирующих системах, количеством проблем бывает около 2% от общего
                количества ОМ, однако по каждой проблеме может быть множество событий. Для
                предварительного расчета проектируемой системы рекомендуется считать Кс=Ком. В
                процессе эксплуатации конкретной системы значение может быть уточнено на основе
                фактической статистики.
            Кд - количество дней хранения истории событий в серверах мониторинга. По
                умолчанию, история событий о проблемах ОМ в серверах мониторинга хранится 180
                дней.
            Ксв - количество подключенных серверов мониторинга DATAPK ITM-K.
        Пример расчета:
        Количество ОМ = 1500. Количество подключенных
            серверов мониторинга DATAPK ITM-K = 50. Хранение истории
            событий в серверах мониторинга DATAPK ITM-K = 180 дней
            (значение по умолчанию).
        (1500*10+1500*1*180+100*7168)/1024 = 978,3 Мб
        Итого, ожидаемый объем данных в БД сервера = 978,3 Мб
|*|*|*|
    Архитектура
        Архитектура ПК DATAPK ITM разработана для создания комплексных корпоративных система
            мониторинга распределенных ИТ-ресурсов и включает в свой состав готовые тиражируемые
            решения для трех уровней иерархии:
            Уровень администрации предприятия — для централизованного управления системой
                мониторинга в целом и консолидации данных мониторинга в масштабах предприятия.
            Уровень филиала — для осуществления непосредственно мониторинга отдельных
                компонент защищаемых систем на уровне филиала и консолидации данных с нижних
                уровней.
            Уровень технологического объекта — для осуществления необслуживаемого
                мониторинга компонент защищаемых систем на производственных площадках и
                предоставления данных о состоянии их функционирования на уровень филиала.
            Архитектура системы DATAPK ITM
|*|*|*|
    Сервер DATAPK ITM-A (уровень технологического объекта)
        Сервер агентов (прокси-сервер) DATAPK ITM-A предназначен для осуществления необслуживаемого
            мониторинга компонент защищаемых систем на удаленных или изолированных производственных
            площадках и предоставления данных о состоянии их функционирования серверу
                DATAPK ITM-K.
        Использование сервера DATAPK ITM-A позволяет осуществить оптимизацию трафика и потоков сетевого
            взаимодействия с объектами мониторинга, находящимися на промышленных площадках с
            ограниченным сетевым доступом.
        Сервер не имеет собственного Web-интерфейса. Установка и настройка сервера осуществляется
            с помощью командной строки CLI. 
        Настройка параметров мониторинга объектов защиты осуществляется в Web-интерфейсе сервера
            мониторинга DATAPK ITM-K, к которому подключен сервер DATAPK ITM-A.
        Сервер агентов DATAPK ITM-A рекомендуется использовать в
            следующих случаях:
            Если ОМ расположены на удаленных
                объектах, таких как производственные площадки и филиалы, особенно в случаях, когда
                между филиалом и уровнем администрации используются каналы связи с низкой пропускной
                способностью и/или низкой стабильностью.
            Для упрощения конфигурации межсетевого экранирования защищаемых сетей, так как
                сервер DATAPK ITM-A является единой точкой
                взаимодействия между сервером DATAPK ITM-K и объектами
                мониторинга, расположенными на удаленной или изолированной площадке.
            Для снижения нагрузки на сервер мониторинга DATAPK ITM-K.
        Нет необходимости в использовании сервера агентов, если все ОМ подключены к единой сети с
            хорошими каналами связи (100/1000 Мб/с) и производительность сервера мониторинга DATAPK ITM-K
            достаточна для непосредственного мониторинга всех объектов.
|*|*|*|
    Основные функции
        ПК DATAPK ITM осуществляет оперативное получение и автоматический анализ данных о
            производительности компонентов АСУ ТП, их хранение, представление пользователю и
            предоставление смежным системам.
        Отличительными особенностями ПК DATAPK ITM являются:
            ПК сертифицирован ФСТЭК России по требованиям безопасности информации (Сертификат
                соответствия №4432, от 27.07.2021 г.).
            Трехуровневая иерархическая структура комплекса, оптимизированная для использования
                в территориально распределенных промышленных предприятиях.
        Параметры функционирования и наборы шаблонов мониторинга адаптированы для использования в
            отечественных АСУ ТП в соответствии с требованиями ИБ
            КИИ.
        Основными функциями ПК DATAPK ITM являются: 
            Мониторинг параметров функционирования компонентов защищаемых автоматизированных
                систем (объектов защиты), формирование тревог и оповещений при выходе параметров за
                допустимые пределы.
            Мониторинг качества функционирования ИТ-услуг. В качестве ИТ-услуг для мониторинга
                могут подключаться различные системно-значимые ИТ-сервисы, каналы связи, сервисы ИБ
                и т.п.
            Автоматическое получение списков объектов защиты из комплексов DATAPK и
                автоматизированная постановка объектов защиты на мониторинг.
            Консолидация и визуализация на уровне администрации предприятия:
                    Списка объектов защиты в филиалах и технологических объектах, состояния их
                        функционирования, свойств и инвентарных данных.
                    Списка событий нарушений функционирования объектов защиты.
            Предоставление смежным системам ИБ сводных данных о составе и свойствах объектов
                защиты и параметров их функционирования: системам обнаружения компьютерных
                инцидентов, системам автоматизации процессов ИБ, SIEM, SOAR и т.п.
|*|*|*|
    Сервер визуализации и управления DATAPK ITM-VM (уровень администрации)
        Сервер DATAPK ITM-VM предназначен для централизованного управления системой мониторинга в целом,
            консолидации данных мониторинга в масштабах всего предприятия и интеграционного
            взаимодействия с корпоративными системами обнаружения компьютерных инцидентов и
            системами автоматизации процессов обеспечения ИБ.
        Сервер предоставляет пользователям обобщенную информации о функционировании как объектов
            защиты, так и средств защиты информации, формирует оповещения о критических ошибках
            функционирования объектов защиты на разных площадках. Сервер является источником
            информации для подразделений ИБ в их деятельности по обнаружению и реагированию на
            компьютерные инциденты и принятию мер по ликвидации их последствий.
        Информация о состоянии параметров функционирования объектов защиты и нарушениях в
            функционировании может передаваться из сервера DATAPK ITM-VM в корпоративные системы
            обнаружения компьютерных инцидентов. Данные об объектах защиты для смежных систем
            обогащены идентификаторами и тэгами DATAPK, данными о состоянии технического
            обслуживания, что позволяет снизить количество ложных срабатываний при обнаружении
            компьютерных инцидентов.
        Взаимодействие пользователя с сервером осуществляется с помощью web-интерфейса.
        Взаимодействие DATAPK ITM-VM со смежными системами:
            Система мониторинга компьютерных инцидентов СМКИ/SIEM:
                    передаются события информационной безопасности, полученные со всех
                        подключенных серверов ПК:
                            события о проблемах функционирования объектов мониторинга;
                            действия пользователей серверов ПК DATAPK ITM-K.
                Системы автоматизации процессов обеспечения информационной безопасности
                    (САОБ):
                        предоставляется информация об объектах мониторинга, их свойствах,
                            инвентарные данные.
            Серверы мониторинга DATAPK ITM-K:
                    получение и периодическая актуализация информации об объектах мониторинга и
                        проблемах их функционирования.
|*|*|*|
    Сервер мониторинга DATAPK ITM-K (уровень филиала)
        Предназначен для осуществления непосредственно мониторинга отдельных компонент защищаемых
            систем и средств защиты информации на уровне филиала и консолидации данных с серверов
            уровня технологического объекта.
        Является самодостаточным сервером мониторинга, может использоваться службой эксплуатации
            для оперативного мониторинга защищаемой системы и рассылки оповещений.
        Взаимодействие пользователя с сервером осуществляется с помощью Web-интерфейса.
        Возможна установка DATAPK ITM-K на один физический сервер с
            сервером DATAPK ITM-VM. Особенности настройки такого
            развертывания описаны в руководстве по эксплуатации.
        Взаимодействие DATAPK ITM-K со смежными системами:
            Сервер DATAPK:
                    получение данных об объектах защиты и их свойств.
            Сервер агентов DATAPK ITM-A:
                    отправка параметров шаблонов для мониторинга и получение фактических
                        результатов мониторинга объектов, подключенных к серверу .
        Сервер мониторинга ITM-K осуществляет мониторинг параметров функционирования следующих
            компонентов защищаемых автоматизированных систем:
        Автоматизированные рабочие места (АРМ) и серверы на базе ОС Windows и Linux:
        Сбор параметров функционирования осуществляется агентным или безагентным способом с
            использованием протоколов SNMP, IPMI, WMI.
        Периодичность получения параметров функционирования является настраиваемой.
        В стандартный комплект поставки включены шаблоны для мониторинга следующих параметров АРМ
            и серверов:
            состояние сетевой доступности устройства;
            загрузка ЦП;
            загрузка оперативной памяти;
            загрузка HDD: объем свободного и занятого пространства; скорость записи и чтения
                информации с диска;
            загрузка сетевых интерфейсов: объем отправленных и полученных данных.
        Состав контролируемых параметров АРМ и серверов может быть дополнен по предварительному
            согласованию с разработчиком.
        Активное сетевое оборудование (АСО):
        Сбор параметров функционирования осуществляется безагентным способом с использованием
            протокола SNMP.
        Периодичность получения параметров функционирования является настраиваемой.
        В стандартный комплект поставки включены шаблоны для мониторинга следующих
            параметров:
            состояние сетевой доступности устройства,
            загрузка ЦП*;
            загрузка оперативной памяти*;
            загрузка сетевых интерфейсов: объем отправленных и полученных данных*.
        * Мониторинг параметров, по умолчанию, осуществляется с использованием стандартных
            библиотек MIB. Существует возможность загрузки специализированных библиотек MIB от
            производителя.
        Состав контролируемых параметров может быть дополнен по предварительному согласованию с
            разработчиком.
        ПЛК и оборудование инженерной ИТ-инфраструктуры:
        Сбор параметров функционирования осуществляется безагентным способом с использованием
            протокола SNMP. Оборудование должно поддерживать и быть настроено для мониторинга с
            использованием протокола SNMP.
        Периодичность получения параметров функционирования является настраиваемой.
        В стандартный комплект поставки включены шаблоны для мониторинга следующих
            параметров:
            состояние сетевой доступности устройства,
            загрузка ЦП*;
            загрузка оперативной памяти*;
            загрузка сетевых интерфейсов: объем отправленных и полученных данных*;
        * Мониторинг параметров, по умолчанию, осуществляется с использованием стандартных
            библиотек MIB. Существует возможность загрузки специализированных библиотек MIB от
            производителя.
        Состав контролируемых параметров может быть дополнен по предварительному согласованию с
            разработчиком.
|*|*|*|
    Выпуск корневых сертификатов
            Для настройки доступа по сетевому имени к серверам  можно также использовать корневой сертификат,
                выпущенный на сервере . Для этого нужно поместить выпущенные
                на сервере  ключ local_ca.key и
                сертификат local_ca.crt в директорию
                    /opt/itm-k/env/nginx/certs/ настраиваемого сервера , пропустить данный раздел и перейти к разделу
                    . 
            Если на предприятии имеется корневой сертификат, то можно использовать его вместо
                    local_ca.key и local_ca.crt, но необходимо
                знать пароль ключа.
                Перейдите в режим командной строки операционной системы, на которой установлен
                    сервер . 
                Создайте директорию для хранения сертификатов и ключей:
                    mkdir -p /opt/itm-k/env/nginx/certs
                Выпустите ключ для корневого сертификата командой:
                    openssl genrsa -aes256 -out /opt/itm-k/env/nginx/certs/local_ca.key 2048
                Дважды введите пароль для генерируемого ключа.
                Сгенерируйте корневой сертификат командой:
                openssl req -key /opt/itm-k/env/nginx/certs/local_ca.key -new -x509 -days 3650 \
-subj "/C=RU/L=UDV/O=[CompanyName]/OU=CLITM/CN=clitm-ca" -sha256 \
-out /opt/itm-k/env/nginx/certs/local_ca.crtВ
                    этой команде параметр [CompanyName] — название эксплуатирующей
                    организации.
                Для эксплуатирующей организации CyberLympha команда будет выглядеть
                    следующим образом:
                    openssl req -key /opt/itm-k/env/nginx/certs/local_ca.key -new -x509 -days 3650 \
-subj "/C=RU/L=UDV/O=CyberLympha/OU=CLITM/CN=clitm-ca" -sha256 \
-out /opt/itm-k/env/nginx/certs/local_ca.crt
                Введите пароль ключа local_ca.key.
|*|*|*|
    Обновление DATAPK ITM-K с версии 1.6.0.0 до версии 1.6.0.1
            Для обновления сервера 
                 с версии 1.6.0.0 до версии 1.6.0.1:
                Перейдите в рабочую директорию : 
                    cd /opt/itm-k
                Остановите работу сервера:
                    docker-compose down
                Переименуйте старую рабочую директорию 
                    :
                    mv /opt/itm-k /opt/itm-k-bkp
                Создайте директорию для новой версии 
                    :
                    mkdir /opt/itm-k
                Загрузите в директорию /opt/itm-k на сервере 
                     следующие файлы из каталога с обновленным дистрибутивом:
                       datapk_itm-k_v1.6.0.1.tar.gz;
                       docker-compose.release.yaml.
                Перейдите в директорию, куда были перемещены файлы с обновленным дистрибутивом
                    :
                    cd /opt/itm-k
                Установите обновленные образы командой:
                    docker load -i datapk_itm-k_v1.6.0.1.tar.gz
                Скопируйте данные из старой рабочей директории /opt/itm-k-bkp в новую директорию /opt/itm-k:
                    cp -r /opt/itm-k-bkp/.env /opt/itm-k-bkp/env /opt/itm-k
                Запустите контейнеры:
                    docker-compose up -d
                Проверьте результат обновления. Для этого перейдите в веб-интерфейс 
                     по ранее использовавшемуся адресу.
                Если обновление прошло успешно, удалите директорию с предыдущей версией 
                     1.6.0.0:
                    rm -rf /opt/itm-k-bkp/
            Если обновленный сервер мониторинга 
                 был подключен к серверу
                , то  не обнаружит, что версия сервера мониторинга
                изменилась, и продолжит делать запросы, соответствующие старой версии сервера
                мониторинга. Для корректной работы необходимо на  удалить сервер
                мониторинга 
                 и добавить его заново. При
                этом все данные, связанные с сервером мониторинга, будут удалены и появятся только
                при повторном добавлении этого сервера.
|*|*|*|
    Установка DATAPK ITM-K с отдельным томом для БД
        Этот раздел описывает последовательность действий для установки  для случая, когда на сервере используются два тома — первый том для
            операционной системы, второй том для базы данных.
        Если вы планируете использовать только один том, перейдите в раздел 
            .
        Все нижеописанные действия на сервере производятся после настройки RAID на дисках и
            установки операционной системы в соответствии с разделами ,  и .
        В этом разделе:
|*|*|*|
    Установка сервера мониторинга UDV-ITM-M на ОС Centos 8
            Для установки :
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер .
                Создайте директорию для установки :
                    mkdir /opt/itm-k
                Скопируйте следующие файлы в директорию /opt/itm-k:
                        datapk_itm-k_[версия_сервера_консолидации].tar.gz;
                        docker-compose.release.yaml;
                        env_generator.sh;
                        iptables.
                Перейдите в директорию /opt/itm-k:
                    cd /opt/itm-k
                Загрузите образы в операционную систему, на которой установлен сервер :
                    docker load -i datapk_itm-k_[версия_сервера_консолидации].tar.gz
                        Загрузка образов
                        измените пароль пользователя postgres в базе
                            данных:
                            ALTER USER postgres WITH PASSWORD '[пароль]';
                             При создании пароля к учетной записи рекомендуется
                                следовать требованиям парольной политики:
                                    длина — не менее 16 символов;
                                    символы — буквы в нижнем и верхнем регистрах, цифры и
                                        специальные символы;
                                    минимальное количество цифр — 2.
                        создайте пользователя с именем datapkitm и необходимым
                            паролем:
                            CREATE USER datapkitm WITH PASSWORD '[пароль служебного пользователя]';
                        создайте базу данных datapkitm, в качестве
                            распорядителя которой указан пользователь
                            datapkitm:
                            CREATE DATABASE datapkitm OWNER datapkitm;
                        убедитесь, что база данных datapkitm создана:
                            \l
                                Список созданных БД
                        перейдите в режим редактирования файла
                            postgresql.conf: 
                            vi /var/lib/pgsql/14/data/postgresql.conf
                        исправьте значения переменных, чтобы они соответствовали представленным
                            ниже:
                        listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265
shared_buffers = 8GBГде
                                    127.0.0.1 — локальный IP-адрес сервера ;
                                172.17.0.1 — IP-адрес подсети docker0;
                                8GB — 25% от общего объема оперативной памяти сервера.
                            IP-адреса должны быть перечислены через запятую без пробелов.
                                Если IP-адрес подсети docker0 уже
                                используется в вашей инфраструктуре, его нужно изменить. Подробнее
                                см. в разделе 
                                .
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        войдите в режим редактирования файла  с помощью команды:
                            vi /var/lib/pgsql/14/data/pg_hba.conf
                        добавьте следующую строку в раздел «# IPv4 local connections:»
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сет|*|*|*|и/маска в формате CIDR] [метод аутентификации]
                        для базы данных datapkitm, пользователя БД
                                datapkitm, IP-адреса подсети контейнера сервера
                            консолидации по умолчанию 172.16.239.0/24 и метода аутентификации
                                md5 строка будет выглядеть следующим образом:
                            host datapkitm datapkitm 172.16.239.0/24 md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:» и измените ident на md5
                            в строке host all all 127.0.0.1/32 ident.
                                Содержимое файла 
                Для применения настроек в файлах конфигурации перезапустите СУБД:
                    systemctl restart postgresql-14
                     после перезапуска СУБД и автоматического применения настроек из файла
                            pg_hba.conf, команда для входа в режим редактирования
                        базы данных изменится. Она будет иметь следующий вид:
                        psql -p 10265 -h 127.0.0.1 -U [имя пользователя] [имя базы]
                        Где -p 10265 — порт, через который будет произведено
                        подключение к базе данных; -h 127.0.0.1 — подключение к
                        хосту 127.0.0.1; -U [имя пользователя] — подключение от
                        имени указанного пользователя. 
                Проверьте статус СУБД:
                    systemctl status postgresql-14
                        Проверка статуса СУБД
                Установите пакет iptables-services:
                    yum install iptables-services
                Перейдите в каталог, содержащий compose-файлы:
                    cd /opt/itm-k
                 Подготовьте сертификаты для входа в веб-интерфейс. Подробнее см. в разделе
                        .
                Настройте запуск службы СУБД после службы docker. Для этого:
                        Перейдите в режим редактирования службы СУБД:
                            systemctl edit postgresql-14.service
                        Добавьте блок [Unit]:
                            [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
                                Добавление блока Unit
                        Если база данных хранится на отдельном томе, добавьте после блока
                            [Unit] блок [Service]:
                        [Service]
Environment=PGDATA=/storage/baseГде
                                /storage/base — путь к базе данных, который был
                            настроен на шаге  раздела .
                        Для применения изменений в настройках службы СУБД выполните
                            команду:
                            systemctl daemon-reload
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                        Окно авторизации 
                Введите логин и пароль по умолчанию:
                        логин: datapkitm
                        пароль: datapkitm
                Откроется стартовая страница веб-интерфейса . 
                Установите на сервер агент версии 2 согласно инструкции  (за исключением п. , так как межсетевой экран уже был настроен ранее в п. - текущей инструкции). 
                В файле конфигурации агента /etc/zabbix/zabbix_agent2.conf
                    установите параметр =172.16.239.0/24 (адрес подсети контейнеров 
                    ).
|*|*|*|
    Установка и настройка
        В этом разделе:
|*|*|*|
    Установка и настройка
        В этом разделе:
|*|*|*|
    Установка
сервера
визуализации
и
управления
        Перейдите
в режим
командной
строки
операционной
системы, на
которой
будет
установлен
сервер
визуализации
и
управления.
        Создайте
директорию
для
установки 
      mkdir /opt/datapkitm_vm
Скопируйте
следующие
файлы в
директорию /opt/datapkitm_vm:
            .env
            docker-compose.release.yaml
datapk_itm-vm_[версия_сервера_визуализации_и_управления].tar.gz
        Перейдите
в
директорию /opt/datapkitm_vm:
      cd /opt/datapkitm_vm
        Загрузите
образы в
операционную
систему, на
которой
установлен
сервер
визуализации
и
управления:
      docker load -i
datapk_itm-vm_[версия_сервера_визуализации_и_управления].tar.gz
        Измените
пароль
пользователя
базы
данных и
при
необходимости
добавьте
нового
пользователя.
Для этого:
            измените
текущего
пользователя
на postgres:
      su postgres
            войдите в
интерактивный
терминал
для работы
с postgresql:
      psql
или psql -p 10265 -h 127.0.0.1 -U postgres
postgres
            измените
пароль
пользователя postgres,
так как по
умолчанию
пароль не
задан:
      ALTER USER postgres WITH PASSWORD
'[пароль]';
        Подсказка: При
создании
пароля к
учетной
записи
рекомендуется
следовать
требованиям
парольной
политики:
                длина — не
менее 16
символов;
                символы —
буквы в
нижнем и
верхнем
регистрах,
цифры и
специальные
символы;
минимальное
количество
цифр — 2.
            для
работы  не
обязательно
подключаться
к БД под
пользователем postgres,
подойдет
любой
пользователь
с правами
на
создание
БД. При
необходимости
создайте
такого
пользователя
с помощью
команды:
      create user
[имя_пользователя]
with createdb password
'[пароль]';
убедитесь,
что
пользователь datapkitm_vm создан:
      \du
            покиньте
терминал:
      \q
        Убедитесь
в
корректных
значениях
переменных
в файле postgresql.conf.
Для этого:
            перейдите
в режим
редактирования
файла postgresql.conf:
      nano /var/lib/pgsql/14/data/postgresql.conf
            исправьте
значения
переменных,
чтобы они
соответствовали
представленным
ниже:
            listen_addresses = '127.0.0.1,172.17.0.1'
      port = 10265
      Где
                127.0.0.1 —
локальный
IP-адрес
сервера ;
                172.17.0.1 — IP-адрес
подсети docker0;
        Прим.: IP-адреса
должны
быть
перечислены
через
запятую
без
пробелов.
        Подсказка: Если
IP-адрес
подсети docker0
уже
используется
в вашей
инфраструктуре,
его нужно
изменить.
Подробнее
см. в
разделе Конфликт
подсети
контейнеров.
убедитесь,
что
переменные log_timezone и timezone соответствуют
текущему
часовому
поясу;
корректным
значением
для
Екатеринбурга
будет Asia/Yekaterinburg.
            сохраните
файл и
выйдите из
режима
редактирования:
      ctrl+o, ctrl+x
Сгенерируйте
ключ
шифрования
паролей:
      LC_ALL=C tr -dc 'A-Za-z0-9!$%^*' </dev/urandom | head -c 32 ;
echo ''
        Прим.: полученный
ключ нужно
будет
записать в
переменную ITMM_PASSWORD_SECRET_KEY на
следующем
шаге.
Отредактируйте
файл .env для
корректного
подключения
к
веб-интерфейсу
. Для
этого:
            перейдите
в режим
редактирования
файла:
      nano /opt/datapkitm_vm/.env
раскомментируйте
переменную ITMM_DB_HOST,
убрав знак
«#» в начале
строки, и
убедитесь,
что
переменная
имеет
значение host.docker.internal.
раскомментируйте
следующие
переменные
и измените
их
значения:
                ITMM_DB_PORT — порт
СУБД,
должен
совпадать
с
значением
переменной
port= в
файле postgresql.conf.
По
умолчанию
значение 5432;
                ITMM_DB_USER — имя
пользователя
базы
данных;
                ITMM_DB_PASSWORD —
пароль
пользователя
базы
данных;
                ITMM_PASSWORD_SECRET_KEY —
ключ
шифрования
и
дешифрования
паролей,
полученный
на шаге 8.
        Внимание: При
повторном
изменении
или утере
значения
переменной ITMM_PASSWORD_SECRET_KEY локальные
пользователи
не смогут
войти в
веб-интерфес ,
перестанет
работать
синхронизация
с ITM-K, LDAP и SMTP.
            при
необходимости
раскомментируйте
другие
переменные
и измените
их
значения.
        Прим.: Рекомендуемые
и
возможные
значения
переменных
приведены
в разделе Переменные
файла .env.
        Прим.: Если
при
запуске
контейнеров  указать
корректный
IP-адрес
syslog-сервера
спустя
некоторое
время, то на
корректный
IP-адрес
будут
отправлены
только те
события,
которые
возникнут
после
установки
нового
значения
переменной SIEM_SYSLOG_HOST.
            сохраните
файл и
выйдите из
режима
редактирования:
      ctrl+o, ctrl+x
        Настройте
разрешения
по
подключению
docker-контейнера
и
пользователей
к базам
данных. Для
этого:
            войдите в
режим
редактирования
файла pg_hba.conf с
помощью
команды:
      nano /var/lib/pgsql/14/data/pg_hba.conf
        Внимание: при
использовании
двух томов
замените
директорию
файла
на /storage/base.
            найдите
раздел #IPv4 local
connections;
измените ident на md5 в
строке host all all
127.0.0.1/32 ident;
            измените
настройки
ограничений
на
подключение
локальных
и
удаленных
пользователей
к базам
данных. Для
этого
добавьте в
раздел #IPv4 local
connections строки в
следующем
формате:
            host all [имя
пользователя
БД] [IP-адрес
docker-сети/маска
в формате CIDR]
[метод
аутентификации]
      host all [имя
пользователя
БД] [IP-адрес
подсети
docker0/маска в
формате CIDR]
[метод
аутентификации]
      Где:
                all —
значение,
позволяющее
подключиться
к
нескольким
БД: postgres, itmm, user_service, notifier_service;
                [имя
пользователя
БД] — ранее
созданный
пользователь
БД,
которому
разрешен
доступ к
БД;
                [IP-адрес
docker-сети/маска
в формате CIDR]
— IP-адрес
для
удаленного
подключения,
зависит от
переменной ITMM_NETWORK в
файле /opt/datapkitm_vm/.env;
                [IP-адрес
подсети
docker0/маска в
формате CIDR] —
IP-адрес
подсети docker0
для
удаленного
подключения,
по
умолчанию
имеет
значение 172.17.0.1/24.
        Прим.: Отступ
между
колонками
в одной
строке
выполняется
клавишей
«Tab».
      Например,
для
применения
настроек
ко всем
базам
данных (all),
польз|*|*|*|ователя
БД postgres,
IP-адреса
подсети
контейнера
сервера
консолидации
по
умолчанию 172.15.0.1/24,
IP-адреса
подсети docker0
по
умолчанию 172.17.0.1/24 и
метода
аутентификации md5 строки
будут
выглядеть
следующим
образом:
      host all postgres 172.15.0.1/24 md5
      host all postgres 172.17.0.1/24 md5
Рис. 195Содержимое
файла pg_hba.conf
закомментируйте
строки во
всех
разделах,
кроме # IPv4 local
connections:.
            сохраните
и выйдите
из режима
редактирования:
      ctrl+o, ctrl+x
        Настройте
запуск
службы
СУБД после
службы docker.
Для этого:
            Перейдите
в режим
редактирования
службы
СУБД:
      systemctl edit postgresql-14.service
            Добавьте
блок [Unit]:
            [Unit]
            After=docker.service
            BindsTo=docker.service
      ReloadPropagatedFrom=docker.service
            Если база
данных
хранится
на
отдельном
томе,
добавьте
после
блока [Unit]
блок [Service]:
            [Service]
      Environment=PGDATA=/storage/base
      Где /storage/base —
путь к базе
данных,
который
был
настроен
на шаге 1 раздела Настройка
СУБД.
            Для
применения
изменений
в
настройках
службы
СУБД
выполните
команду:
      systemctl daemon-reload
        Для
применения
настроек в
файлах
конфигурации
перезапустите
СУБД с
помощью
команды:
      systemctl restart postgresql-14
        Прим.: после
перезапуска
СУБД и
автоматического
применения
настроек
из
файла pg_hba.conf,
команда
для входа в
режим
редактирования
базы
данных
изменится.
Она будет
иметь
следующий
вид:
      psql -p 10265 -h 127.0.0.1 -U [имя
пользователя]
[имя базы]
      Где -p 10265 —
порт, через
который
будет
произведено
подключение
к базе
данных; -h
127.0.0.1 —
подключение
к хосту 127.0.0.1; -U
[имя
пользователя] —
подключение
от имени
указанного
пользователя.
Последовательно
добавьте в
iptables правила
для
корректной
работы
межсетевого
экрана:
            для
разрешения
существующих
пакетов и
новых
соединений,
связанных
со
старыми:
      iptables -I INPUT 1 -m state --state RELATED,ESTABLISHED -j
ACCEPT
            для
разрешения
входящих
ICMP-соединений:
      iptables -I INPUT 2 -p icmp -j ACCEPT
            для
разрешения
всех
соединений:
      iptables -I INPUT 3 -j ACCEPT
            для
разрешения
соединений
по порту tcp/22:
      iptables -A INPUT -p tcp --dport 22 -j ACCEPT
            для
использования
порта,
указанного
в
файле /var/lib/jatoba/1/data/postgresql.conf:
      iptables -A INPUT -p tcp --dport [ваш
порт] -j ACCEPT
      если был
указан
порт 10265,
команда
будет
выглядеть
следующим
образом:
      iptables -A INPUT -p tcp --dport 10265 -j ACCEPT
            для
сброса
входящих
запрещенных
соединений:
      iptables -A INPUT -j REJECT --reject-with
icmp-host-prohibited
            для
сброса
запрещенных
соединений:
      iptables -A FORWARD -j REJECT --reject-with
icmp-host-prohibited
        Если во
время
настройки
межсетевого
экрана
была
допущена
ошибка,
удалите
правило с
помощью
команды:
      iptables -D [имя
цепочки,
содержащей
команды]
[номер
правила в
цепочке]
      команда
для
удаления
правила
номер 5 в
цепочке INPUT
будет
выглядеть
следующим
образом:
      iptables -D INPUT 5
        Сохраните
настройки
межсетевого
экрана:
      service iptables save
Посмотрите
вывод
правил
межсетевого
экрана с
помощью
команды:
      iptables -nL
      На рисунке
отображаются
настроенные
правила
межсетевого
экрана в
цепочке INPUT.
          https://docs.cyberlympha.com/ITM/14/all/images/ITM_M_prepare_work/itm_m_server_install_input.png
        Рис. 196Настроенная
цепочка INPUT в
межсетевом
экране
        Включите
и добавьте
межсетевой
экран в
автозагрузку:
      systemctl enable iptables --now
Сгенерируйте
сертификат
для входа в
веб-интерфейс:
      domain=127.0.0.1;
      mkdir -p env/nginx/certs;
      openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout
env/nginx/certs/nginx.key -out env/nginx/certs/nginx.crt -subj
"/C=RU/CN=$domain/O=USSC"
      Где в
значении
переменной domain нужно
указать
IP-адрес
сервера
вместо
значения
127.0.0.1.
        Измените
права на
ключ
сертификата:
      chmod 644 env/nginx/certs/nginx.key
        Измените
настройку
выделения
памяти vm.overcommit_memory.
Для этого:
            откройте
для
редактирования
файл /etc/sysctl.conf:
      nano /etc/sysctl.conf
        Подсказка: в
случае
отсутствия
файла /etc/sysctl.conf используйте
эту же
команду
для
создания
файла и
перехода в
режим
редактирования.
            добавьте
в
содержимое
файла
следующее
значение:
      vm.overcommit_memory=1
            сохраните
файл и
выйдите из
режима
редактирования:
      ctrl+o, ctrl+x
перезагрузите
сервер для
применения
изменений.
        Подсказка: Вы
можете
перезагрузить
сервер
сразу либо
после
выполнения
пункта 23.
            в логах
контейнера
itm_m_redis нет
ошибки «WARNING
overcommit_memory is set to 0!»;
              в
файле /etc/sysctl.conf установлено
значение vm.overcommit_memory=1;
            в
файле /proc/sys/vm/overcommit_memory установлено
значение 1.
        Убедитесь
в
корректности
значения
переменной $HOSTNAME:
            Выполните
команду echo $HOSTNAME.
Вывод
команды
должен
совпадать
с сетевым
именем .
            Выполните
команду export.
Убедитесь,
что
переменная $HOSTNAME присутствует
в выводе.
            Если
переменная
отсутствует,
то:
                откройте
файл /etc/profile:
      nano /etc/profile
                в
открывшемся
файле
допишите
строку:
      export $HOSTNAME
                сохраните
файл и
выйдите из
режима
редактирования:
      ctrl+o, ctrl+x
перезапустите
сеанс
пользователя.
        Перейдите
в каталог,
содержащий
compose-файлы:
      cd /opt/datapkitm_vm
        Запустите
контейнеры:
      docker-compose up -d
        Для входа
в
веб-интерфейс
в адресной
строке
введите
IP-адрес .
      Для
первичной
настройки
в окне
авторизации
введите
логин и
пароль
учетной
записи по
умолчанию:
логин: itm;
пароль: P@ssw0rd1234.
      Рис. 197 Окно
авторизации 
        Внимание: При
первой
настройке
комплекса
необходимо
изменить
логин и
пароль
встроенной
учетной
записи
  |*|*|*|
    Установка ОС Centos 8
        Включите сетевой интерфейс.
            Включение сетевого интерфейса
        В «Выбор программ» выберите базовое окружение «Минимальная установка» и дополнительное
          ПО:
            Выбор базового окружения и дополнительного ПО
        В окне «Место установки» выберите конфигурацию устройств хранения «По-своему» и нажмите
          на кнопку «Готово». 
            Выбор конфигурации устройств хранения
        Установите пароль для учетной записи root:
            Установка пароля для учетной записи root
        Создайте пользователя и пароль для него:
            Создание пользователя
        Нажмите «Начать установку».
  |*|*|*|
    Установка сервера мониторинга UDV ITM-M на ОС Astra Linux
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер мониторинга.
                Рассчитайте контрольные суммы для файлов из дистрибутива по инструкции  и сравните полученные контрольные
                    суммы с эталонными, приведенными в документе «УЦЛК.468244.26 30.
                    Формуляр».
                Создайте директорию для файлов :
                    mkdir /opt/itm-k
                Скопируйте следующие файлы в директорию /opt/itm-k:
                        datapk_itm-k_[версия_сервера_консолидации].tar.gz;
                        docker-compose.release.yaml;
                        env_generator.sh.
                Скопируйте файл itm_create_executable_files.sh в директорию
                        /opt.
                Перейдите в директорию /opt/itm-k:
                    cd /opt/itm-k
                Рассчитайте контрольные суммы для исполняемых файлов по инструкции  и сравните полученные
                    контрольные суммы с эталонными, приведенными в документе «УЦЛК.468244.26 30.
                    Формуляр».
                Загрузите образы в операционную систему, на которой установлен сервер
                    мониторинга:
                    docker load -i datapk_itm-k_[версия_сервера_консолидации].tar.gz
                Создайте базу данных, пользователя и пароль для него. Для этого:
                        Войдите в интерактивный терминал для работы с postgresql под
                            пользователем postgres:
                            sudo -u postgres psql
                        Создайте пользователя с именем datapkitm и необходимым
                            паролем:
                            CREATE USER datapkitm WITH PASSWORD '[пароль служебного пользователя]';
                        Создайте базу данных:
                            CREATE DATABASE datapkitm WITH OWNER 'datapkitm' ENCODING 'UTF8' LC_COLLATE = 'ru_RU.UTF-8' LC_CTYPE = 'ru_RU.UTF-8' TEMPLATE template0;
                        Измените пароль пользователя postgres в базе
                            данных:
                            ALTER USER postgres WITH PASSWORD '[пароль]';
                        Убедитесь, что пользователь datapkitm создан:
                            \du
                        Убедитесь, что база данных datapkitm создана:
                            \l
                        Покиньте терминал:
                            \q
                Отредактируйте файл настройки базы данных. Для этого:
                        Откройте файл postgresql.conf: 
                        nano /var/lib/jatoba/[jatoba_version]/data/postgresql.confВ
                            этой команде jatoba_version — первая цифра версии
                            Jatoba.
                        При использовании Jatoba 4.5 выполните
                            команду:nano /var/lib/jatoba/4/data/postgresql.conf
                        Исправьте следующие переменные:
                            listen_addresses = '*'
port = 10265
                        Убедитесь, что значения переменных log_timezone и
                            TimeZone соответствуют текущему часовому
                            поясу.
                        Asia/Yekaterinburg
                        Сохраните изменения и закройте файл. 
                Настройте ограничения подключений к базе данных. Для этого:
                        Откройте для редактирования файл pg_hba.conf: 
                        nano /var/lib/jatoba/[jatoba_version]/data/pg_hba.confВ
                            этой команде jatoba_version — первая цифра версии
                            Jatoba.
                        При использовании Jatoba 4.5 выполните
                            команду:nano /var/lib/jatoba/4/data/pg_hba.conf
                        Добавьте в раздел «IPv4|*|*|*| local connections:» строку:
                        host    datapkitm    datapkitm    172.16.239.1/23    md5Где:
                                datapkitm — пользователь и имя БД, которые были
                                    созданы ранее; 
                                md5 — метод аутентификации, который проверяет
                                    пароль пользователя, производя аутентификацию SCRAM-SHA-256 или
                                    MD5. 
                                172.16.239.1/23 — IP-адрес сети docker. При
                                    изменении сети укажите актуальный IP-адрес.
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                                connections:»и измените ident на
                                md5 в строке «host all all 127.0.0.1/32
                                ident».
                                Содержимое раздела «# IPv4 local connections:» в файле
                                    pg_hba.conf
                        Сохраните изменения и закройте файл.
                        Для применения настроек в файле перезапустите СУБД:
                            systemctl restart jatoba-*
                При необходимости измените часовой пояс в файле .web.env. Для
                    этого: 
                        Откройте файл для редактирования: 
                            nano /opt/itm-k/env/.web.env
                        Измените значение переменной . По умолчанию
                            используется значение =Asia/Yekaterinburg.
                        Сохраните изменения и закройте файл.
                Добавьте межсетевой экран в автозагрузку:
                    ufw enable
                Откройте порт для корректной работы -соединений:
                    sudo ufw allow 22/tcp
                Для корректной работы СУБД откройте в межсетевом экране порт, который был
                    указан в файле postgresql.conf:
                    sudo ufw allow 10265/tcp
                Для корректного приема данных с агентов откройте порты на межсетевом
                    экране:
                    sudo ufw allow 10050/tcp
sudo ufw allow 10051/tcp
                    Настройки межсетевого экрана применяются сразу после ввода команд.
                Просмотрите список правил межсетевого экрана:
                    ufw status
                        Правила межсетевого экрана
                Подготовьте сертификаты для входа в веб-интерфейс. Подробнее см. в разделе
                        .
                Настройте запуск службы СУБД:
                        Откройте для редактирования файл override.conf:
                            systemctl edit postgresql
                        Откроется файл override.conf.
                                Файл override.conf
                        Над строкой ### Lines below this comment will be discarded
                            добавьте строки:
                            [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
                            [Service]
Environment=PGDATA=/base
Environment=PGPORT=10265
                        Примените настройки командой:
                            systemctl daemon-reload
                Перейдите в директорию с compose-файлами:
                    cd /opt/itm-k
                Запустите контейнеры:
                    docker-compose up -d
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                        Окно авторизации 
                Введите логин и пароль по умолчанию:
                        логин: datapkitm
                        пароль: datapkitm
                Откроется стартовая страница веб-интерфейса . 
                Установите на сервер агент версии 2 согласно инструкции 
                    (за исключением п. , так как межсетевой экран уже был настроен ранее в п. - текущей инструкции).
|*|*|*|
    Настройка LDAPS
                Выполните настройки LDAP в веб-интерфейсе . Для этого:
                        Перейдите на страницу  →  на вкладку «Настройки LDAP». 
                        В поле «Хост LDAP» введите имя LDAP-сервера в соответствии с шаблоном
                                [protocol]://[domain_or_IP-address].
                        В поле «Порт» введите значение 636.
                        Нажмите на кнопку «Обновить» для применения настроек.
|*|*|*|
    Выпуск сертификата и ключа для доступа к веб-интерфейсу UDV-ITM-M
                Задайте локальную переменную hn, равную сетевому имени
                        : 
                    hn=$(cat /etc/hostname)
                Создайте файл формата .pem, который будет содержать в себе
                        local_ca.key:
                openssl req -x509 -new -nodes -key /opt/itm-k/env/nginx/certs/local_ca.key -sha256 \
-days 3650 -subj "/C=RU/L=UDV/O=[CompanyName]/OU=CLITM/CN=$hn" \
-out /opt/itm-k/env/nginx/certs/local_ca.pemВ этой команде параметр
                    [CompanyName] — название эксплуатирующей организации.
                Для эксплуатирующей организации CyberLympha команда будет выглядеть
                    следующим образом:
                    openssl req -x509 -new -nodes -key /opt/itm-k/env/nginx/certs/local_ca.key -sha256 \
-days 3650 -subj "/C=RU/L=UDV/O=CyberLympha/OU=CLITM/CN=$hn" \
-out /opt/itm-k/env/nginx/certs/local_ca.pem
                Введите пароль ключа local_ca.key.
                Сгенерируйте ключ для сертификата доступа к веб-интерфейсу :
                    openssl genrsa -out /opt/itm-k/env/nginx/certs/nginx.key 2048
                Создайте файл запроса на генерацию сертификата командой:
                openssl req -new -key /opt/itm-k/env/nginx/certs/nginx.key \
-subj "/C=RU/L=UDV/O=[CompanyName]/OU=CLITM/CN=$hn" -out /opt/itm-k/env/nginx/certs/local.csrВ
                    этой команде параметр [CompanyName] — название эксплуатирующей
                    организации.
                Для эксплуатирующей организации CyberLympha команда будет выглядеть
                    следующим образом:
                    openssl req -new -key /opt/itm-k/env/nginx/certs/nginx.key \
-subj "/C=RU/L=UDV/O=CyberLympha/OU=CLITM/CN=$hn" -out /opt/itm-k/env/nginx/certs/local.csr
                Создайте файл с параметрами, которые будут использоваться при генерации
                    сертификата:
                    echo -e "basicConstraints=CA:FALSE\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = $hn" > /opt/itm-k/env/nginx/certs/local.ext
                Сгенерируйте сертификат для доступа к веб-интерфейсу : 
                    openssl x509 -req -in /opt/itm-k/env/nginx/certs/local.csr -CA /opt/itm-k/env/nginx/certs/local_ca.crt \
-CAkey /opt/itm-k/env/nginx/certs/local_ca.key -CAcreateserial -out /opt/itm-k/env/nginx/certs/nginx.crt \
-days 3650 -sha256 -extfile /opt/itm-k/env/nginx/certs/local.ext
                Введите пароль ключа local_ca.key.
                Удалите лишние файлы:
                    cd /opt/itm-k/env/nginx/certs && rm -f local.csr local.ext local_ca.pem local_ca.srl
                Измените права на ключ сертификата:
                    chmod 644 /opt/itm-k/env/nginx/certs/nginx.key
                Запустите : 
                    cd /opt/itm-k && docker-compose up -d
|*|*|*|
    Настройка безопасности среды функционирования комплекса
        Для обеспечения безопасного использования комплекса в среде
            функционирования:
                Установите пароль на BIOS (UEFI) для предотвращения возможности несанкционированного влияния на  до ее загрузки.
                Используя штатные средства РЕД ОС или ОС Astra Linux, настройте аудит системы.
                    Для этого:
                        Убедитесь, что служба auditd запущена.
                        Убедитесь, что в файле /etc/audit/auditd.conf указаны следующие значения:
                            local_events = yes
write_logs = yes
log_file = [Путь к файлу с событиями аудита]
                Убедитесь, что межсетевой экран iptables запущен и добавлен в автозагрузку.
                Убедитесь, что следующие правила добавлены в iptables:
                        Для работы СУБД Jatoba:
                            iptables -A INPUT -p tcp --dport 10265 -j ACCEPT
                        Для выполнения запросов к пассивным агентам на объектах
                            мониторинга:
                            iptables -A INPUT -p tcp --dport 10050 -j ACCEPT
                        Для приема севером сообщений с локального активного агента и с агентов,
                            установленных на объектах мониторинга:
                            iptables -A INPUT -p tcp --dport 10051 -j ACCEPT
                Убедитесь, что в системе установлены актуальные обновления.
                Ограничьте список узлов, которым разрешается удаленное подключение к СУБД и к
                    отдельным базам данных в СУБД. Для этого: 
                        Перейдите в режим редактирования файла :
                            vi /var/lib/jatoba/1/data/pg_hba.conf
                Убедитесь в наличии учетной записи datapkitm с минимально
                    необходимыми административными правами для осуществления возможности
                    администрирования .
|*|*|*|
    Установка
СУБД PostgreSQL v14
          Установите необходимые пакеты из репозитория:
            sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm
              Установка пакетов
        Отключите модули PostgreSQL:
          sudo dnf -qy module disable postgresql
            Отключение модулей PostgreSQL
        Установите СУБД PostgreSQL v14:
          sudo dnf install -y postgresql14-server
            Установка СУБД
        Инициализируйте БД:
          sudo /usr/pgsql-14/bin/postgresql-14-setup initdb
            Инициализация БД
        Добавьте сервис в автозагрузку и запустите его: 
          systemctl enable postgresql-14 --now
systemctl start postgresql-14
            Добавление сервиса в автозагрузку и его запуск
        Проверьте статус сервиса postgresql:
          systemctl status postgresql-14
            Проверка статуса сервиса postgresql:
  |*|*|*|
    Выпуск сертификата и ключа для доступа к веб-интерфейсу DATAPK ITM-K
                Задайте локальную переменную hn, равную сетевому имени : 
                    hn=$(cat /etc/hostname)
                Создайте файл формата .pem, который будет содержать в себе
                    local_ca.key:
                openssl req -x509 -new -nodes -key /opt/itm-k/env/nginx/certs/local_ca.key -sha256 \
-days 3650 -subj "C=RU/L=UDV/O=[CompanyName]/OU=CLITM/CN=$hn" \
-out /opt/itm-k/env/nginx/certs/local_ca.pemВ
                    этой команде параметр [CompanyName] — название эксплуатирующей
                    организации.
                Для эксплуатирующей организации CyberLympha команда будет выглядеть
                    следующим образом:
                    openssl req -x509 -new -nodes -key /opt/itm-k/env/nginx/certs/local_ca.key -sha256 \
-days 3650 -subj "C=RU/L=UDV/O=CyberLympha/OU=CLITM/CN=$hn" \
-out /opt/itm-k/env/nginx/certs/local_ca.pem
                Введите пароль ключа local_ca.key.
                Сгенерируйте ключ для сертификата доступа к веб-интерфейсу :
                    openssl genrsa -out /opt/itm-k/env/nginx/certs/nginx.key 2048
                Создайте файл запроса на генерацию сертификата командой:
                openssl req -new -key /opt/itm-k/env/nginx/certs/nginx.key \
-subj "C=RU/L=UDV/O=[CompanyName]/OU=CLITM/CN=$hn" -out /opt/itm-k/env/nginx/certs/local.csrВ
                    этой команде параметр [CompanyName] — название эксплуатирующей
                    организации.
                Для эксплуатирующей организации CyberLympha команда будет выглядеть
                    следующим образом:
                    openssl req -new -key /opt/itm-k/env/nginx/certs/nginx.key \
-subj "C=RU/L=UDV/O=CyberLympha/OU=CLITM/CN=$hn" -out /opt/itm-k/env/nginx/certs/local.csr
                Создайте файл с параметрами, которые будут использоваться при генерации
                    сертификата:
                    echo -e "basicConstraints=CA:FALSE\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = $hn" > /opt/itm-k/env/nginx/certs/local.ext
                Сгенерируйте сертификат для доступа к веб-интерфейсу : 
                    openssl x509 -req -in /opt/itm-k/env/nginx/certs/local.csr -CA /opt/itm-k/env/nginx/certs/local_ca.crt \
-CAkey /opt/itm-k/env/nginx/certs/local_ca.key -CAcreateserial -out /opt/itm-k/env/nginx/certs/nginx.crt \
-days 3650 -sha256 -extfile /opt/itm-k/env/nginx/certs/local.ext
                Введите пароль ключа local_ca.key.
                Удалите лишние файлы:
                    cd /opt/itm-k/env/nginx/certs && rm -f local.csr local.ext local_ca.pem local_ca.srl
                Запустите : 
                    cd /opt/itm-k && docker-compose up -d
|*|*|*|
    Установка ОС Astra Linux
            Для установки операционной системы Astra Linux:
                Подключите ISO-образ операционной системы. 
                окно установки откроется автоматически или по нажатию любой клавиши. 
                Выберите язык «Русский» и пункт меню «Установка» и нажмите клавишу «Enter». 
                        Окно установки
                появится окно «Лицензия».
                Прочитайте лицензионное соглашение и нажмите «Да», чтобы согласиться с
                    условиями использования.
                        Окно «Лицензия»
                появится окно «Настройка клавиатуры».
                Установите способ переключения раскладки «Alt+Shift» и нажмите клавишу «Enter»
                    для применения настроек.
                        Окно «Настройка клавиатуры»
                появится окно «Настройка сети».
                Введите имя компьютера и нажмите «Продолжить».
                        Окно «Настройка сети»
                появится окно «Настройка учетных записей пользователей и
                    паролей»
                В окне «Настройка учетных записей пользователей и паролей»:
                        Введите имя учетной записи администратора «datapkitm» и нажмите
                            «Продолжить». 
                                Окно «Настройка учётных записей пользователей и
                                    паролей»
                        Введите пароль для нового администратора и нажмите «Продолжить».
                                Окно ввода пароля
                        Подтвердите пароль и нажмите «Продолжить».
                                Окно подтверждения пароля
                появится окно «Настройка времени».
                Выберите необходимый часовой пояс и нажмите клавишу «Enter».
                        Окно «Настройка времени»
                появится окно «Разметка дисков».
                В окне «Разметка дисков»:
                        Выберите пункт «Авто — использовать весь диск и настроить LVM» и
                            нажмите клавишу «Enter».
                                Метод разметки дисков
                        Выберите диск, на который необходимо установить ОС, и нажмите клавишу
                            «Enter».
                                Выбор диска для разметки
                        В качестве схемы разметки выберите «Все файлы в одном разделе», так как
                                 не использует
                            раздел /home для хранения информации. Нажмите клавишу
                            «Enter». 
                                Выбор схемы разметки дисков
                        Нажмите на кнопку «Да» для подтверждения изменений и записи информации
                            на диск.
                                Подтверждение изменений разметки дисков
                        Ознакомьтесь с применяемыми настройками. Для подтверждения выбора
                            нажмите кнопку «Закончить разметку и записать изменения на диск».
                                Просмотр разметки дисков
                        Нажмите «Да» для повторного подтверждения изменений.
                                Запись изменений на диск
                появится окно «Установка базовой системы».
                Выберите ядро операционной системы, которое будет установлено. 
                        Окно «Установка базовой системы»
                появится окно «Выбор программного обеспечения».
                С помощью клавиши «Пробел» отметьте устанавливаемое программное обеспечение и
                    нажмите «Продолжить».
                        Окно «Выбор программного обеспечения»
                появится окно «Дополнительные настройки ОС».
                Выберите необходимый уровень защищенности устанавливаемой системы.
                        Окно «Дополнительные настройки ОС»
                В окне «[!!] Дополнительные настройки ОС» выбирать параметры не нужно. Нажмите
                    на кнопку «Продолжить».
                        Окно «[!!] Дополнительные настройки ОС»
                откроется окно «Установка системного загрузчика GRUB на жесткий
                    диск».
                В окне «Установка системного загрузчика GRUB на жесткий диск»: 
                        Нажмите «Да», чтобы подтвердить установку GRUB в главную загрузочную
                            запись.
                                Окно «Установка системного загрузчика GRUB на жесткий
                                    диск»
                        Введите пароль для системного загрузчика GRUB и нажмите
                            «Продолжить».
                                Ввод пароля для GRUB
                        Подтвердите пароль для загрузчика GRUB и нажмите «Продолжить».
                                Подтверждение пароля для GRUB
                появится окно «Завершение установки».
                Нажмите «Продолжить» для перезагрузки системы.
                        Окно «Завершение установки»
                появится окно входа в систему.
                Введите имя пользователя и пароль для учетной записи.
                        Первый вход в систему
|*|*|*|
    Обновление DATAPK ITM-K с версии 1.4.0.0 или 1.5.0.0 до версии 1.6.0.1
       Для обновления сервера  с версии 1.4.0.0 или 1.5.0.0 до версии
                1.6.0.1:
                    Перейдите в рабочую директорию : 
                        cd /opt/datapkitm
                Загрузите на сервер  следующие файлы из
                    каталога с обновленным дистрибутивом:
                        datapk_itm-k_v1.6.0.1.tar.gz;
                        docker-compose.release.yaml;
                        iptables.
                Установите обновленные образы командой:
                    docker load -i datapk_itm-k_v1.6.0.1.tar.gz
                    При обновлении с версии 1.4.0.0 выполните настройку iptables. Для этого:
                            Если вы используете ОС Centos, установите пакет
                                iptables-services:
                                yum install iptables-services
                            Если вы не вносили дополнительные изменения в правила iptables (сверх
                                рекомендованных при установке), данный пункт можно пропустить. Если
                                изменения были, нужно перенести их в файл iptables. Для
                                этого:
                                    Сохраните в файл правила iptables, примененные в системе. Для
                                        этого выполните
                                        команду:iptables-save > iptables.bkpВ
                                        результате все правила будут сохранены в файл
                                        iptables.bkp в текущей директории.
                                    Найдите добавленные вами правила и перенесите их из файла
                                        iptables.bkp в файл
                                        iptables из комплекта поставки. Учитывайте,
                                    что нестандартные правила должны добавляться в соответствующую
                                    цепочку iptables и находиться в соответствующей позиции.
                                            Пример: Если ранее было добавлено
                                        нестандартное правило -A INPUT -p tcp -m tcp --dport
                                            25 -j ACCEPT, открывающее порт для пересылки
                                        сообщений по протоколу , то такое правило должно находиться между строчками
                                            -A INPUT -m state --state RELATED,ESTABLISHED -j
                                            ACCEPT и -A INPUT -p tcp -j REJECT
                                            --reject-with tcp-reset.
                            Замените файл /etc/sysconfig/iptables на файл
                                iptables из комплекта поставки:
                                mv iptables /etc/sysconfig/
                            Отредактируйте файл iptables: 
                                    Откройте файл для редактирования с помощью
                                        команды:vi /etc/sysconfig/iptables
                                    Закройте доступ из неиспользуемых подсетей, применяемых в
                                        docker-контейнерах других компонентов. Для этого закомментируйте
                                        строки -A INPUT -s 172.15.0.0/24 -j ACCEPT
                                        (номер 15) и -A INPUT -s 172.16.240.0/24 -j
                                            ACCEPT (номер 21).Включить отображение
                                                номеров строк в файле можно с помощью следующих действий:
                                                    Нажмите клавишу «Esc», чтобы перейти в командный
                                                        режим. 
                                                    Введите :set number или
                                                        :set nu и нажмите «Enter».
                                                    Нажмите клавишу «i», чтобы перевести редактор в
                                                        режим ввода текста.
                                                    После закрытия файла нумерация строк отключится
                                                        автоматически. Чтобы отключить абсолютные номера
                                                        строк на время редактирования файла, перейдите в
                                                        командный режим и выполните команду :set
                                                            nonumber или :set
                                                                nonu.
                                    Если требуется мониторинг сервера с помощью  или по
                                    протоколу , раскомментируйте строки #-A INPUT -p tcp -m tcp
                                        --dport 10050 -j ACCEPT (номер 51) и #-A
                                        INPUT -p udp -m udp --dport 161 -j ACCEPT (номер
                                    48) соответственно.
|*|*|*|                                    Сохраните файл и выйдите из режима
                                        редактирования::wq
                            Проверьте владельца файла и права доступа командой: 
                            ls -l /etc/sysconfig/iptablesВладелец и права
                                должны совпадать с указанными на скриншоте: 
                                    Владелец и права файла iptables
                                В противном случае выполните команду:
                                chown root:root /etc/sysconfig/iptables && chmod 600 /etc/sysconfig/iptables
                                Проверьте, что владелец и права теперь соответствуют указанным на
                                скриншоте. 
                            Чтобы применить новые правила межсетевого экрана, перезапустите службы
                                iptables и docker, выполнив команды:
                                systemctl restart iptables.service
systemctl restart docker.service
                Настройте запуск службы СУБД после службы docker. Для этого:Перейдите в режим редактирования службы СУБД:systemctl edit jatoba-*.serviceЕсли файл не пуст, перейдите к пункту .Добавьте блок [Unit]:[Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.serviceЕсли база данных хранится на отдельном томе, добавьте после блока [Unit] блок [Service]:[Service]
Environment=PGDATA=/storage/baseГде /storage/base — путь к базе данных, который был настроен на шаге 
                            раздела 
                            .Для применения изменений в настройках службы СУБД выполните команду:systemctl daemon-reload
                                Проверьте состояние службы Jatoba:
                                    systemctl status jatoba-*
                                Измените настройки синхронизации с , если ранее они выполнялись для  предыдущей
                                    версии:
                                        Перейдите в веб-интерфейс . 
                                        Перейдите на страницу  → .
                                        Нажмите на имя роли «Sync-itm-m role».
                                        Откроется страница редактирования роли.
                                        В выпадающем меню «Тип пользователя» измените значение на
                                            «Супер-администратор».
                                        В разделе «Доступ к Веб элементам» → «Настройка» активируйте чекбокс
                                            «Услуги».
                                        В разделе «Доступ к API» → «Методы API» добавьте в список разрешений
                                            метод *.get и удалите другие методы.
                                                Настройка списка разрешений
                                        Нажмите на кнопку «Обновить» для сохранения изменений.
                    Установите агент версии 2 согласно инструкции  (за исключением п. , так как межсетевой экран был настроен ранее в п.  текущей инструкции).
                    В файле конфигурации агента /etc/zabbix/zabbix_agent2.conf
                        установите параметр =172.16.239.0/24
                        (адрес подсети контейнеров ).
                    Измените настройки мониторинга сервера, на котором установлен . Для этого: 
                            Перейдите в веб-интерфейс .  
                            Перейдите на страницу  → .
                            Найдите объект мониторинга — сервер , в столбце «интерфейс» у него будет
                                указано «zabbix-agent: 10050».
                                    Cервер  в списке объектов мониторинга
                            Нажмите на имя объекта мониторинга, чтобы перейти к его
                                настройкам.
                            Измените настройки интерфейса объекта мониторинга:
                                    Введите в поле «IP адрес» значение 172.17.0.1
                                        (адрес сервера в подсети docker).
                                    Введите в поле «DNS» значение
                                        host.docker.internal.
                                    Изменение настроек интерфейса 
                            Нажмите на кнопку «Обновить» для сохранения настроек . 
                            Убедитесь, что  стал
                                доступен. 
                Удалите файл .agent.env из директории
                        /opt/itm-k/env: 
                    rm -rf /opt/itm-k/env/.agent.env
            Если обновленный сервер мониторинга  был подключен к серверу , то  не обнаружит, что версия сервера мониторинга изменилась, и продолжит делать
                запросы, соответствующие старой версии сервера мониторинга. Для корректной работы
                необходимо на  удалить сервер мониторинга  и добавить его заново. При этом все данные, связанные с сервером
                мониторинга, будут удалены и появятся только при повторном добавлении этого
                сервера.
|*|*|*|
    Настройка шифрования между DATAPK ITM-K и DATAPK ITM-A 1.3.0.1 в режиме пассивного
        прокси
        Для настройки шифрования между  и  в режиме пассивного
            прокси:
                Перейдите в режим командной строки сервера агентов .
                    Перейдите в директорию с конфигурационными файлами :
                        cd /opt/itm-a
                    Создайте ключ шифрования:
                        openssl rand -hex 32
                    Скопируйте полученное значение ключа шифрования в буфер обмена.
                            Копирование ключа шифрования
                    Перейдите в режим редактирования файла конфигурации прокси-сервера.
                    Для файла конфигурации по умолчанию /opt/itm-a/env
                        /.proxy.env это можно сделать командой:
                        vi env/.proxy.env
                    Отредактируйте следующие переменные: ,
                        , .
                        Если перед именем переменной стоит знак «#», удалите его.
                        Если вы не устанавливали  1.3.0.1 «с нуля», а обновили  до этой версии,
                            данных переменных не будет в конфигурационном файле. В этом случае:
                                Скопируйте переменные ,
                                    ,  в конец конфигурационного
                                файла.
                                Самостоятельно выберите идентификатор ключа шифрования и задайте
                                его в качестве значения переменной .
                                В качестве значения переменной  вставьте значение ключа шифрования, которое было скопировано
                                ранее в буфер обмена.
                        При установке  1.3.0.1 «с нуля»
                        скрипт генерации настроек env_generator.sh предлагает
                        настроить переменные, используемые для настройки шифрования (этап «Указать
                        переменные для настройки шифрования между ITM-A и ITM-K? (Y/n)»). Если был
                        выбран вариант «Y», то указанные переменные уже сгенерированы, в том числе
                        ключ шифрования из пунктов 3-4. В таком случае вы можете не менять значение
                        переменных , .=psk
=[Значение_ключа_шифрования]
=[Идентификатор_ключа_шифрования]
                            Пример значений переменных
                    Перезапустите : 
                        docker-compose down
docker-compose up -d
                В веб-интерфейсе  перейдите на страницу  → .Выберите прокси и кликните на его имени.откроется страница настроек прокси.Перейдите на вкладку «Шифрование».Вкладка «Шифрование» на странице настроек проксиВыберите режим «Подключения к прокси» — «PSK».В поле «Идентификатор PSK» введите название идентификатора, указанное ранее в переменной .
                    В поле «PSK» введите скопированное ранее значение ключа шифрования (значение
                        переменной  в файле
                        .proxy.env).
                            Настройки прокси
                Нажмите на кнопку «Обновить» для применения настроек.
|*|*|*|
    Настройка ОС Astra Linux
        Особенности работы с пользователями: учетная запись администратора
                root по умолчанию отключена.
        Пользователь, установивший систему, может повысить свои права до уровня прав пользователя
                root с помощью команды sudo su. Тогда в дальнейшем
            команды можно вводить без использования sudo.
        Также можно не менять права пользователя и при необходимости запускать команды с
            использованием sudo для повышения привилегий только в момент выполнения
            текущей команды. Рекомендуется использовать этот вариант.
        В этом разделе:
|*|*|*|
    Установка сервера консолидации DATAPK ITM-K на ОС Centos 8
            Для установки :
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер .
                Создайте директорию для установки :
                    mkdir /opt/itm-k
                Скопируйте следующие файлы в директорию /opt/itm-k:
                        datapk_itm-k_[версия_сервера_консолидации].tar.gz;
                        docker-compose.release.yaml;
                        env_generator.sh;
                        iptables.
                Перейдите в директорию /opt/itm-k:
                    cd /opt/itm-k
                Загрузите образы в операционную систему, на которой установлен сервер :
                    docker load -i datapk_itm-k_[версия_сервера_консолидации].tar.gz
                        Загрузка образов
                        Измените пароль пользователя postgres в базе
                            данных:
                            ALTER USER postgres WITH PASSWORD '[пароль]';
                             При создании пароля к учетной записи рекомендуется
                                следовать требованиям парольной политики:
                                    длина — не менее 16 символов;
                                    символы — буквы в нижнем и верхнем регистрах, цифры и
                                        специальные символы;
                                    минимальное количество цифр — 2.
                        Создайте пользователя с именем datapkitm и необходимым
                            паролем:
                            CREATE USER datapkitm WITH PASSWORD '[пароль служебного пользователя]';
                        Создайте базу данных datapkitm, в качестве
                            распорядителя которой указан пользователь
                            datapkitm:
                            CREATE DATABASE datapkitm OWNER datapkitm;
                        Убедитесь, что база данных datapkitm создана:
                            \l
                                Список созданных БД
                        Перейдите в режим редактирования файла
                            postgresql.conf: 
                            vi /var/lib/pgsql/14/data/postgresql.conf
                        Исправьте значения переменных, чтобы они соответствовали представленным
                            ниже:
                        listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265
shared_buffers = 8GBГде
                                127.0.0.1 — локальный IP-адрес сервера DATAPK ITM-K;
                                172.17.0.1 — IP-адрес подсети docker0;
                                8GB — 25% от общего объема оперативной памяти сервера.
                            IP-адреса должны быть перечислены через запятую без пробелов.
                                Если IP-адрес подсети docker0 уже
                                используется в вашей инфраструктуре, его нужно изменить. Подробнее
                                см. в разделе 
                                .
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        Войдите в режим редактирования файла  с помощью команды:
                            vi /var/lib/pgsql/14/data/pg_hba.conf
                        Добавьте следующую строку в раздел «# IPv4 local connections:»
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате C|*|*|*|IDR] [метод аутентификации]
                        для базы данных datapkitm, пользователя БД
                                datapkitm, IP-адреса подсети контейнера сервера
                            консолидации по умолчанию 172.16.239.0/24 и метода аутентификации
                                md5 строка будет выглядеть следующим образом:
                            host datapkitm datapkitm 172.16.239.0/24 md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:» и измените ident на md5
                            в строке host all all 127.0.0.1/32 ident.
                                Содержимое файла 
                Для применения настроек в файлах конфигурации перезапустите СУБД:
                    systemctl restart postgresql-14
                    После перезапуска СУБД и применения настроек из файла
                            pg_hba.conf, команда для входа в режим редактирования
                        базы данных изменится. Она будет иметь следующий вид: sudo -u postgres psql -p 10265 -h 127.0.0.1 -U [имя пользователя] [имя базы]
                        Где:
                            -u postgres — пользователь ОС;
                            -p 10265 — порт, через который будет произведено
                                подключение к базе данных;
                            -h 127.0.0.1 — подключение к хосту 127.0.0.1;
                            -U [имя пользователя] — подключение от имени
                                указанного пользователя.
                Проверьте статус СУБД:
                    systemctl status postgresql-14
                        Проверка статуса СУБД
                Установите пакет iptables-services:
                    yum install iptables-services
                Перейдите в каталог, содержащий compose-файлы:
                    cd /opt/itm-k
                 Подготовьте сертификаты для входа в веб-интерфейс. Подробнее см. в разделе
                        .
                Настройте запуск службы СУБД после службы docker. Для этого:
                        Перейдите в режим редактирования службы СУБД:
                            systemctl edit postgresql-14.service
                        Добавьте блок [Unit]:
                            [Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
                                Добавление блока Unit
                        Если база данных хранится на отдельном томе, добавьте после блока
                            [Unit] блок [Service]:
                        [Service]
Environment=PGDATA=/storage/baseГде
                                /storage/base — путь к базе данных, который был
                            настроен на шаге  раздела .
                        Для применения изменений в настройках службы СУБД выполните
                            команду:
                            systemctl daemon-reload
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                        Окно авторизации 
                Введите логин и пароль по умолчанию (datapkitm/datapkitm).
                Откроется стартовая страница веб-интерфейса . 
                Установите на сервер агент версии 2 согласно инструкции  (за исключением п. , так как межсетевой экран уже был настроен ранее в п. - текущей инструкции). 
                В файле конфигурации агента /etc/zabbix/zabbix_agent2.conf
                    установите параметр =172.16.239.0/24 (адрес подсети контейнеров 
                    ).
|*|*|*|
    Настройка СУБД
                Создайте директорию для хранения базы данных на отдельном томе:
                    mkdir /storage/base
                Установите Jatoba по инструкции от производителя до действия установки
                    пакета-активатора. 
                Продолжите установку пакета-активатора по инструкции от производителя.
|*|*|*|
    Настройка аутентификации через LDAP и LDAPS
    Аутентификация через  или  позволяет войти в веб-интерфейс , используя учетную
        запись Active Directory.
            Чтобы настроить аутентификацию через  или :
                Создайте служебную доменную учетную запись для доступа к Active
                    Directory.
                itm_user
                Нужно добавить учетную запись в группу Domain Users.
                В веб-интерфейсе  перейдите на
                    страницу  → .
                Перейдите на вкладку «Настройки ».
                Настройте следующие параметры:
                        Активация  аутентификации — установите чекбокс.
                        Хост  — доменное имя (не IP-адрес) контроллера домена. Используйте
                            следующий формат:
                                при настройке  — dc.domain.ru;
                                при настройке  — ldaps://dc.domain.ru.
                        Порт — по умолчанию указан порт 389 для . Для настройки  укажите порт 636.
                        База для поиска (Base DN) — DC=domain, DC=ru.
                        Атрибут поиска — sAMAccountName.
                        Имя для подключения (Bind DN) — имя сервисной учетной записи.
                        itm_user@domain.ru
                        Регистрозависимое имя входа — снимите чекбокс.
                        Пароль подключения (Bind password) — пароль сервисной учетной
                            записи.
                        Вход в систему — имя учетной записи , которая будет использована для тестирования аутентификации.
                        Пароль пользователя — пароль учетной записи  для тестирования аутентификации.
                        Настройки LDAP
                Для проверки настроек нажмите на кнопку «Тест».
                    Если появится всплывающее окно «Не удалось привязать к  серверу.», то ошибка в настройках: сервисная учетная запись
                            заблокирована или введен некорректный пароль к ней.
                    Если появится всплывающее окно «Имя пользователя или пароль некорректные.»,
                            то ошибка в имени или пароле тестовой учетной записи.
                Если настройки выполнены корректно, появится сообщение «Успешный вход
                    через ».
                Для сохранения настроек нажмите на кнопку «Обновить».
                Перейдите на вкладку «Аутентификация».
                Установите переключатель «Аутентификация по умолчанию» в положение «».
                    При создании пользователя и назначении ему группы с доступом к интерфейсу
                        по умолчанию будет использоваться параметр аутентификации, который указан на
                        данной странице.
                Примените настройки. Для этого: 
                        Нажмите на кнопку «Обновить». 
                        Появится всплывающее окно с текстом «Переключение метода
                            аутентификации сбросит все сессии исключая эту!
                            Продолжить?».
                        Нажмите на кнопку «ОК».
                        Если настройки выполнены корректно, появится сообщение
                            «Настройки аутентификации обновлены».
                Чтобы избежать ситуаций, когда вход в веб-интерфейс невозможен из-за некорректных настроек
                        аутентификации, рекомендуется создать две группы пользователей — для
                        внутренней аутентификации и аутентификации с .
                Создайте группу пользователей с возможностью внутрен|*|*|*|ней аутентификации на
                    случай проблем с доступностью контроллера домена. Для этого:
                        Перейдите на страницу  → .
                        Нажмите на кнопку «Создать группу пользователей» в верхнем правом
                            углу.
                        Откроется окно «Группы пользователей».
                        Настройте следующие параметры:
                                В поле «Имя группы» введите «Внутренняя аутентификация».
                                В поле «Пользователи» начните вводить существующих
                                    пользователей, которых необходимо добавить в группу, либо
                                    нажмите на кнопку «Выбрать» для вывода списка
                                    пользователей.
                                В выпадающем списке «Доступ к веб-интерфейсу» выберите
                                    «Внутренний».
                                Установите чекбокс «Активировано».
                        Нажмите на кнопку «Добавить» для применения настроек. 
                Создайте группу пользователей с возможностью аутентификации  аналогично шагу .
                При создании группы задайте следующие значения параметров:
                        Имя группы — « аутентификация»;
                        Пользователи — учетные записи пользователей, которым должна быть
                            доступна аутентификация ;
                        Доступ к веб-интерфейсу — «»;
                        Установите чекбокс «Активировано».
                    Если по умолчанию для пользователей используется внутренняя
                        аутентификация, вы можете настроить и использовать аутентификацию  для отдельных групп пользователей, у которых параметр «Доступ к
                        веб-интерфейсу» имеет значение «».
                Добавьте пользователя из Active Directory в . Для этого:
                        Перейдите на страницу  → .
                        Нажмите на кнопку «Создать пользователя» в верхнем правом углу.
                        Во вкладке «Пользователь» настройте следующие параметры:
                                Псевдоним — имя нового пользователя. При использовании
                                    аутентификации  введите то же имя пользователя, что и в Active
                                    Directory.
                                Группы — в зависимости от способа аутентификации пользователя
                                    введите «Внутренняя аутентификация» или « аутентификация».
                                Пароль — не заполняйте, если вы установили переключатель на
                                    странице  →  в положение «». В обратном случае введите пароль для создания внутренней
                                    учетной записи. Добавление пользователя в группу с
                                        доступом к веб-интерфейсу на данном этапе не влияет на
                                        настройки ввода пароля.
                        Назначьте права доступа для пользователя. Для этого:
                                Перейдите на вкладку «Права доступа».
                                В поле «Роли» начните вводить существующие роли, либо нажмите на
                                    кнопку «Выбрать» для вывода списка ролей.
                                Выберите роль пользователя. 
                        На странице появятся тип пользователя и права доступа для
                            выбранной роли.
                        Нажмите на кнопку «Добавить»для применения настроек.
|*|*|*|
    Настройка оповещений
            Оповещения позволяют получать уведомления об обнаруженных проблемах на указанную
                почту. Для настройки оповещения:
            Настройте -сервер:
                Перейдите на страницу  → .
                В списке способов выберите имя «Email» и кликните по нему. 
                Настройте следующие параметры:
                         сервер — имя  сервера.
                         helo — значение, полученное в результате работы команды  helo, обычно имя домена.
                         email — адрес почтового ящика, от чьего имени будут отправлены
                            сообщения.
                        Безопасность подключения — выберите один из протоколов шифрования для
                            подключения:
                                Нет — шифрование и опция CURLOPT_USE_SSL не используются;
                                STARTTLS — используется опция CURLOPT_USE_SSL со значением
                                    CURLUSESSL_ALL, доступно подключение только с использованием
                                    шифрования;
                                SSL/TLS — использование опции CURLOPT_USE_SSL опционально.
                        Аутентификация — выберите способ аутентификации в соответствии с
                            настройками  сервера:
                                Нет — аутентификация не требуется.
                                Имя пользователя и пароль — для аутентификации нужно ввести в
                                    соответствующие поля имя пользователя и пароль, относящееся к
                                    почтовому ящику.
                        Настройка способа оповещений
                Если вы выбрали протокол подключения STARTTLS или SSL/TLS на шаге , настройте
                    следующие параметры:
                        Проверка SSL узла — установите чекбокс для проверки подлинности
                            SSL-сертификата -сервера. Для проверки используется опция curl CURLOPT_SSL_VERIFYPEER.
                        Проверка SSL хоста — установите чекбокс для проверки того, что имя
                            SSL-сертификата совпадает с именем -сервера. Для проверки используется опция curl CURLOPT_SSL_VERIFYHOST.
                Нажмите на кнопку «Обновить».
                Убедитесь, что оповещения настроены корректно. Для этого:
                        Перейдите на страницу .
                        Нажмите на действие «Тест» в строке со способом оповещений
                            «Email».
                        Откроется окно тестирования способа оповещения.
                        В открывшемся окне введите свой Email в поле «Отправлять на», укажите
                            тему и текст сообщения.
                                Окно тестирования способа оповещения
                        Нажмите на кнопку «Тест».
                        Убедитесь, что тестовое сообщение доставлено на Email, указанный ранее
                            в поле «Отправлять на».
                            В случае неудачной отправки убедитесь в отсутствии
                                опечаток во время выполнения предыдущих шагов или проверьте
                                настройки -сервера совместно с системным администратором. 
            Настройте -клиент:
                Перейдите на страницу  → .
                Выберите из списка пользователя для привязки Email-адреса получателя оповещений.
                Перейдите в карточку выбранного пользователя, на вкладку «Оповещения».
                Нажмите на кнопку «Добавить».
                Откроется окно «Оповещения».
                В открывшемся окне настройте следующие параметры:
|*|*|*|                        Тип — «email».
                        Отправлять на — Email получателя сообщения.
                        Когда активен — диапазон времени отправки сообщений в формате 1-7,
                            ЧЧ:ММ-ЧЧ:ММ.
                            Цифрами 1-7 обозначаются дни недели с понедельника по
                                воскресенье.
                        Значение 1-5, 09:00-18:00 означает, что сообщения будут
                            отправляться с понедельника по пятницу с 9 до 18 часов.
                        Использовать, если важность — установите чекбоксы рядом с теми уровнями
                            важности проблем, для которых нужно получать оповещения.
                        Убедитесь, что установлен чекбокс напротив опции «Активировано».
                        Нажмите на кнопку «Добавить».
                        Настройка оповещения
                Нажмите на кнопку «Обновить».
                Убедитесь, что получатели сообщений о проблемах указаны корректно, при
                    необходимости измените настройки. Для этого:
                        Перейдите на страницу  →  → .
                        Откройте карточку правила «Оповещения о проблемах группе
                            администраторов».
                        Перейдите на вкладку «Операции» в раздел «Операции».
                        Убедитесь, что в разделе «Операции» в шаге 1 указано действие отправки
                            сообщений нужной вам группе или пользователю.
                            По умолчанию в разделе «Операции» в шаге 1 указано действие
                                «Отправить сообщение группам пользователей: Администраторы».
                                Оставьте это значение, если пользователи, которым вы настроили
                                Email-адреса, находятся в группе «Администраторы».
                        Чтобы изменить группу получателей сообщений:
                                Нажмите на кнопку «Изменить» в строке с шагом 1 в разделе
                                    «Операции».
                                В открывшемся окне перейдите в раздел «Отправлять группам
                                    пользователей».
                                Нажмите  «Удалить» напрортив указанной там группы.
                                Нажмите «Добавить».
                                В открывшемся окне выберите группы получателей сообщений.
                                Для применения настроек нажмите на кнопку «Обновить».
                        Чтобы отправлять сообщения пользователю без привязки к группе:
                                Нажмите на кнопку «Изменить» в строке с шагом 1 в разделе
                                    «Операции».
                                В открывшемся окне перейдите в раздел «Отправлять
                                    пользователям».
                                Нажмите «Добавить».
                                В открывшемся окне выберите получателей сообщений.
                                Для применения настроек нажмите на кнопку «Обновить».
                        Перейдите на вкладку «Действие». 
                        Убедитесь, что установлен чекбокс «Активировано». 
                        Нажмите на кнопку «Обновить».
                Если необходимо получать оповещения о внутренних действиях, выполните следующие
                    действия:
                        В левом верхнем углу страницы выберите раздел «Внутренние действия».
                        Откройте карточку правила, для которого нужно настроить
                            оповещения.
                        Повторите операции, описанные в шагах -.
|*|*|*|
    Требования к комплексу и его среде функционирования
        В этом разделе:
|*|*|*|
    Установка Jatoba из локального репозитория
            В качестве СУБД для  необходимо использовать СУБД Jatoba,
                сертифицированную во ФСТЭК России. Jatoba построена на базе Postgresql.
                Создайте каталог для файлов локального репозитория СУБД:
                    mkdir /opt/localrepo
                Поместите файлы, необходимые  для установки СУБД «Jatoba», в директорию
                        /home/datapkitm:
                        Файлы для установки СУБД «Jatoba»
                С помощь mc, открытого через sudo, перенесите переданные файлы в
                        /opt/localrepo:
                        Перенос файлов в директорию /opt/localrepo
                Установите открытый ключ репозитория:
                    sudo apt-key add /opt/localrepo/DEB-GPG-KEY-Jatoba
                Создайте файл с описанием локального репозитория в системе:
                    sudo touch /etc/apt/sources.list.d/jatoba-4.list
                Добавьте в созданный файл следующее содержимое:
                    deb file:///opt/localrepo stable non-free
                Обновите описания пакетов:
                    sudo apt-get update
                Установите пакет-активатор:
                    apt-get install gis-activator11
                Установите пакеты СУБД «Jatoba»:
                    apt-get install jatoba4-client jatoba4-contrib jatoba4-libs jatoba4-server
                Выполните команду инициализации СУБД:
                    cd /usr/jatoba-4/bin/
./jatoba-setup initdb jatoba-4
                Запросите лицензионный ключ у поставщика Jatoba.
                Запустите активатор СУБД:
                    ./jactivator
                Следуйте указаниям активатора СУБД.
                        Активация СУБД
                    Онлайн активация подразумевает наличие интернета на компьютере c
                        устанавливаемой СУБД.
                    В качестве директории может быть текущая директория, которая обозначается
                        символом «точка».
                Установите лицензии в каталог данных:
                    cp jatoba.cer /usr/jatoba-4/bin
chown postgres.postgres /usr/jatoba-4/bin/jatoba.cer
ls -la /usr/jatoba-4/bin/jatoba.cer
                Разместите полученный файл лицензии в директории данных, которой по умолчанию
                    является /usr/jatoba-4/bin.
                        Перемещение файла-лицензии в каталог данных
                Включите настройки лицензии Jatoba. Для этого:
                        Откройте файл postgresql.conf:
                            nano /var/lib/jatoba/4/data/postgresql.conf
                        Убедитесь, что в конце конфигурационного файла в разделе «LICENSER
                            OPTION AND PARAMETRS» следующие строки не закомментированы:
                            lic_product_name = 'Jatoba'
lic_file_path = '/usr/jatoba-4/bin/jatoba.cer'
lic_server_addr = 'https://license.gaz-is.ru' 
                        Сохраните изменения и закройте файл.
                Запустите СУБД и добавьте ее в автозагрузку:
                    systemctl enable jatoba-4 --now
                Проверьте состояние службы:
                    systemctl status jatoba-4
                        Состояние службы jatoba-4.service
|*|*|*|
    Установка iptables и Docker
        Установите сервис iptables:
          yum install iptables-services
        Отключите встроенную утилиту для работы с межсетевым экраном firewalld:
          systemctl disable --now firewalld
           утилита для работы с фаерволом - firewalld
        Включите и добавьте межсетевой экран в автозагрузку:
          systemctl enable iptables --now
        Если docker был установлен до установки сервиса iptables, нужно выполнить команду
            systemctl restart docker при выключенных контейнерах для добавления
          правил docker в iptables.
          Добавьте репозиторий docker:
            dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo
        Установите docker:
          dnf install docker-ce --allowerasing
        Запустите службу docker:
          systemctl start docker   
        Добавьте службу docker в автозагрузку:
          systemctl enable --now docker
        Проверьте состояние службы docker:
          systemctl status docker
        Установите docker-compose: 
          wget https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m) 
cd /root
mv docker-compose-Linux-x86_64 /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
        Проверьте версию docker-compose:
           docker-compose –-version
            Проверка версии docker-compose
  |*|*|*|
     Установка и настройка комплекса
        В этом разделе:
|*|*|*|
    Настройка использования дополнительных MIB-файлов
            Для использования дополнительных MIB-файлов:
                Перейдите в директорию, где установлен .
                Остановите контейнеры docker:
                docker-compose down
                Откройте файл docker-compose.release.yaml.
                Проверьте наличие в файле строк
                        ./env/mibs:/var/lib/zabbix/mibs:ro.
                В случае отсутствия этой строки замените файл
                        docker-compose.release.yaml на новый.
                    Новый файл можно скачать из nextcloud.
                Создайте директорию env/mibs в случае ее отсутствия в рабочей
                    директории . 
                Поместите в директорию env/mibs новые MIB-файлы.
                При необходимости установите зависимые MIB-файлы. Для этого:
                        Просмотрите список зависимостей в разделе IMPORTS добавленного
                            MIB-файла.
                            Список зависимостей MIB-файла содержит другие MIB-файлы, которые
                                нужны ему для корректной работы.
                                Раздел IMPORTS MIB-файла
                        При наличии в списке зависимостей других MIB-файлов добавьте их в
                            директорию env/mibs.
                Запустите контейнеры:
                    docker-compose up -d
                Проверьте работоспособность MIB-файлов:
                    snmpwalk -v2c -c public -m ' ./env/mibs/Avaya.mib' 192.168.1.2
|*|*|*|
    Настройка ОМ с ОС Astra Linux по протоколу SNMPv3
            Для настройки безагентного сбора данных на  с помощью протокола :
                Если потребуется импортировать файлы MIB, выполните следующие действия:
                        Откройте для редактирования файл
                            /etc/snmp/snmp.conf:
                            nano /etc/snmp/snmp.conf
                        Закомментируйте следующую строку, добавив символ «#» в начало
                            строки:
                            #mibs :
                        Сохраните изменения и закройте файл.
                Настройте конфигурационный файл /etc/snmp/snmpd.conf: 
                        Откройте файл для редактирования: 
                            nano /etc/snmp/snmpd.conf
                        Измените параметр agentAddress, определяющий
                            разрешенные подключения. По умолчанию разрешены только подключения с
                            локального компьютера. Для разрешения внешних подключений
                            закомментируйте строку agentAddress udp:127.0.0.1:161 и
                            раскомментируйте строку agentAddress
                                udp:161,udp6:[::1]:161.
                        Если не используется IPv6, удалите
                            udp6:[::1]:161.
                        Если IPv6 не используется, а параметр udp6:[::1]:161
                            указан, то служба snmpd не запустится. При попытках обращения к службе
                            будут появляться сообщения «Timeout».
                                Часть конфигурационного файла для приема соединений в сети,
                                    где отсутствует IPv6
                        Создайте пользователя itmsnmp, с паролем
                                [временный_пароль], с типом аутентификации
                                MD5 и протоколом защитного преобразования
                                DES:
                            createUser itmsnmp MD5 [временный_пароль] DES
                        Создайте группу для определения прав доступа пользователя:
                            group MyRWGroup usm itmsnmp
                        Создайте представление (view) для доступа к данным:
                            view viewall included .1
                        Предоставьте созданной группе права доступа к добавленному
                            представлению:
                            access MyRWGroup "" usm priv exact viewall viewall none
                        Установите уровень доступа для только что созданного пользователя и
                            пользователя, который будет создан из шаблона:
                            rwuser itmsnmp priv
rwuser monitor priv
                        Сохраните изменения и закройте файл.
                Перезапустите службу snmpd:
                    sudo systemctl restart snmpd
                Убедитесь в корректности настроек. Для этого выполните команду просмотра дерева
                    OID от имени пользователя itmsnmp:
                snmpget -u itmsnmp -l authPriv -a MD5 -x DES -A [временный_пароль] -X [временный_пароль] [agent_server_ip_address] 1.3.6.1.2.1.1.1.0В
                    этой команде:
                        -u — указание имени пользователя;
                        itmsnmp — существующий пользователь, с шаблона которого
                            будет создан новый пользователь;
                        -l — уровень безопасности для подключения. Доступные
                            значения: 
                                noAuthNoPriv (без аутентификации); 
                                authNoPriv (аутентификация без защитного
                                    преобразования); 
                                authPriv (аутентификация и защитное
                                    преобразование).
                        -a — протокол аутентификации MD5 или SHA;
                        -A [временный_пароль] — пароль аутентификации;
                        -x — протокол безопасности DES или AES. Протокол
                            защитного преобразования обязательно нужно указывать, если в настройках
                            пользователя есть параметр priv.;
                        -X [временный_пароль] — пароль для протокола
                            безопасности. Если указывать этот параметр, то для протокола
                            безопасности будет использоваться заданный ранее пароль
                            аутентификации;
                        [agent_server_ip_address] — IP-адрес сервера, на
                            котором создаётся пользователь, например
                            localhost.
                Разрешите соединение  в межсетевом экране ufw:
                    sudo ufw allow 161:162/udp
                    Настройки межсетевого экрана применяются сразу после ввода команды.
                Просмотрите список правил межсетевого экрана:
                    ufw status
                Создайте пользователя из шаблона с помощью инструмента snmpusm:
                    snmpusm|*|*|*| -u itmsnmp -l authPriv -a MD5 -x DES -A [временный_пароль] -X [временный_пароль] [agent_server_ip_address] create monitor itmsnmp
                В этой команде:
                        все параметры совпадают с пояснениями ранее;
                        monitor — имя нового пользователя, добавленного в файл
                                /etc/snmp/snmpd.conf.
                Появится сообщение «User successfully created».
                Измените пароль пользователя monitor (сейчас
                        monitor использует пароль пользователя
                        itmsnmp):
                snmpusm -u monitor -l authPriv -a MD5 -x DES -A [временный_пароль] -X [временный_пароль] [agent_server_ip_address] passwd [временный_пароль] [новый_пароль]В
                    этой команде все параметры совпадают с пояснениями ранее.
                Появится сообщение « Key(s) successfully changed».
                Убедитесь в корректности настроек пользователя:
                    snmpget -u monitor -l authPriv -a MD5 -x DES -A [пароль] -X [пароль] [agent_server_ip_address] 1.3.6.1.2.1.1.1.0
                Появится сообщение «-MIB::sysDescr.0 = STRING: Linux itm-cert-v16-astra 5.4.0-110-generic
                    #astra35+ci91-Ubuntu SMP Fri Oct 28 16:27:21 UTC 2022 x86_64».
                После создания безопасной учетной записи monitor удалите
                    учетную запись itmsnmp:
                        Откройте для редактирования файл
                            /etc/snmp/snmpd.conf.
                        Найдите и удалите строки, которые вы ранее добавили для ссылки на
                            пользователя. Это нужно, чтобы выполнить рекомендацию, согласно которой
                            в файле snmpd.conf должны отсутствовать директивы
                            createUser. Также это действие удалит привилегии этого временного
                            пользователя:
                            createUser itmsnmp MD5 [временный_пароль] DES
group MyRWGroup usm itmsnmp
view viewall included .1
access MyRWGroup "" usm priv exact viewall viewall none
rwuser itmsnmp priv
                        Сохраните и закройте файл.
                Перезапустите демон :
                    sudo systemctl restart snmpd
                Чтобы полностью удалить пользователя itmsnmp из usmUserTable,
                    выполните следующую команду:
                    snmpusm -u monitor -l authPriv -a MD5 -x DES -A [пароль] -X [пароль] [agent_server_ip_address] delete itmsnmp
                Появится сообщение «User successfully deleted».
                Создайте : 
                        В веб-интерфейсе  перейдите на страницу  → .
                        Нажмите на имя узла сети, для которого производится настройка сбора
                            данных.
                        Откроется страница с подробной информацией об узлес
                            сети.
                        На вкладке «Узел сети» в разделе «Интерфейсы» нажмите на кнопку
                            «Добавить» и выберите .
                        В появившихся полях введите параметры, которые использовались при
                            создании пользователя :
                                Версия  — ;
                                Имя безопасности — datapkitmv3;
                                Уровень безопасности — authPriv.
                        После выбора уровня безопасности authPriv заполните следующие
                            появившиеся параметры:
                                Протокол аутентификации — SHA;
                                Пароль аутентификации — P@ssw0rd;
                                Протокол безопасности — AES;
                                Ключевая фраза безопасности — p@SSW0RD.
                        Если нужно отредактировать параметры:
                                На вкладке «Узел сети» в разделе «Интерфейсы» нажмите на кнопку
                                    «Раскрыть» рядом с «».
                                Отредактируйте параметры. Имя пользователя, пароль и ключ
                                    указаны в полях «Имя безопасности», «Пароль аутентификации» и
                                    «Ключевая фраза безопасности».
                        Добавьте к  шаблоны: 
                                Перейдите на вкладку «Шаблоны».
                                Нажмите на кнопку «Выбрать» напротив поля «Присоединение
                                        новых шаблонов».
                                    Результат шага: Появится список доступных
                                        шаблонов.
                                Установите чекбокс рядом с тем шаблоном, который необходимо
                                        добавить.
                                    Например, Linux .
                                Нажмите на кнопку «Выбрать» для добавления шаблона.
                        Нажмите на кнопку «Добавить» для сохранения изменений.
                            Если нужно сохранить параметры после редактирования, нажмите на
                                кнопку «Обновить».
|*|*|*|
    Настройка сети
                Проверьте имена интерфейсов в системе с помощью команды:
                    ip ad
                        Список сетевых интерфейсов в системе
                Отредактируйте конфигурационный файл с настройкой сетевых интерфейсов:
                        Откройте файл для редактирования: 
                            nano /etc/network/interfaces
                        Введите следующий текст для настройки основного сетевого
                            интерфейса:
                            auto eth0
iface eth0 inet static
address 192.168.243.5/24
gateway 192.168.243.1
dns-nameservers 192.168.12.6
                        Сохраните изменения и закройте файл.
                Создайте конфигурационный файл с указанием DNS-серверов: 
                    nano /etc/resolv.conf
                Введите DNS-адрес сервера вашей локальной сети. 
                nameserver 192.168.12.6 
                Сохраните изменения и закройте файл resolv.conf. 
                Для применения сетевых настроек перезапустите службу:
                    service networking restart
|*|*|*|
    Настройка SELinux
            Настройте SELinux для корректной работы zabbix-agent:
                Откройте конфигурационный файл:
                vi /etc/selinux/config
                Измените строку:
                SELINUX=permissive
                Перезагрузите сервер командой:
                    sudo shutdown -r now
|*|*|*|
    Установка дополнительных пакетов
                Установите docker-ce:
                    apt install docker.io curl docker-compose
                Назначьте права на выполнение файла:
                    chmod +x /usr/local/bin/docker-compose
                Запустите docker и добавьте службу в автозагрузку:
                    systemctl enable --now docker
                Проверьте состояние службы:
                    systemctl status docker
                Для обработки данных по протоколу  установите необходимый пакет с помощью команды:
                    apt install -y fping
                Для сбора данных по протоколу  установите необходимый пакет с помощью
                    команды:
                    sudo apt install -y snmp snmpd snmptt snmptrapd
                Чтобы избежать ошибок «Cannot adopt OID in UCD--MIB», «Undefined identifier: netSnmpObjects», «Unlinked OID in NET--AGENT-MIB:», «Cannot find module (-MPD-MIB)» и аналогичных, установите пакет snmp-mibs-downloader, выполняющий
                    загрузку MIB-файлов. Установка может быть выполнена из репозитория Debian. 
                        При работе с Astra Linux Special Edition РУСБ.10015-01 [версия
                            обновления] 1.6 перед установкой пакета snmp-mibs-downloader загрузите и
                            установите пакет smistrip:
                            wget http://ftp.de.debian.org/debian/pool/main/libs/libsmi/smistrip_0.4.8+dfsg2-16_all.deb
sudo apt install -y ./smistrip_0.4.8+dfsg2-16_all.deb
                            В Astra Linux Special Edition РУСБ.10015-01 [версия обновления]
                                1.7 этот пакет может быть установлен из базового репозитория. Тогда
                                команда для установки будет выглядеть
                                так:sudo apt install -y smistrip
                        Загрузите и установите пакет snmp-mibs-downloader:
                            wget http://ftp.de.debian.org/debian/pool/non-free/s/snmp-mibs-downloader/snmp-mibs-downloader_1.5_all.deb
sudo apt install -y ./snmp-mibs-downloader_*_all.deb                            
|*|*|*|
    Обновление DATAPK ITM-K с версии 1.4.0.0 или 1.5.0.0 до версии 1.6.0.0
        Для обновления сервера  с версии 1.4.0.0 или 1.5.0.0 до версии
            1.6.0.0:
                    Перейдите в рабочую директорию : 
                        cd /opt/datapkitm
                    При обновлении с версии 1.4.0.0 выполните настройку iptables. Для этого:
                            Если вы используете ОС Centos, установите пакет
                                iptables-services:
                                yum install iptables-services
                            Если вы не вносили дополнительные изменения в правила iptables (сверх
                                рекомендованных при установке), данный пункт можно пропустить. Если
                                изменения были, нужно перенести их в файл iptables. Для
                                этого:
                                    Сохраните в файл правила iptables, примененные в системе. Для
                                        этого выполните
                                        команду:iptables-save > iptables.bkpВ
                                        результате все правила будут сохранены в файл
                                        iptables.bkp в текущей директории.
                                    Найдите добавленные вами правила и перенесите их из файла
                                        iptables.bkp в файл
                                        iptables из комплекта поставки. Учитывайте,
                                        что нестандартные правила должны добавляться в соответствующую
                                        цепочку iptables и находиться в соответствующей позиции.
                                        Пример: Если ранее было добавлено
                                            нестандартное правило -A INPUT -p tcp -m tcp --dport
                                                25 -j ACCEPT, открывающее порт для пересылки
                                            сообщений по протоколу SMTP, то такое правило должно
                                            находиться между строчками -A INPUT -m state --state
                                                RELATED,ESTABLISHED -j ACCEPT и -A
                                                    INPUT -p tcp -j REJECT --reject-with
                                                    tcp-reset.
                            Замените файл /etc/sysconfig/iptables на файл
                                iptables из комплекта поставки:
                                mv iptables /etc/sysconfig/
                            Отредактируйте файл iptables: 
                                    Откройте файл для редактирования с помощью
                                        команды:vi /etc/sysconfig/iptables
                                    Закройте доступ из неиспользуемых подсетей, применяемых в
                                        docker-контейнерах других компонентов. Для этого закомментируйте
                                        строки -A INPUT -s 172.15.0.0/24 -j ACCEPT
                                        (номер 15) и -A INPUT -s 172.16.240.0/24 -j
                                            ACCEPT (номер 21).Включить отображение
                                                номеров строк в файле можно с помощью следующих действий:
                                                    Нажмите клавишу «Esc», чтобы перейти в командный
                                                        режим. 
                                                    Введите :set number или
                                                        :set nu и нажмите «Enter».
                                                    Нажмите клавишу «i», чтобы перевести редактор в
                                                        режим ввода текста.
                                                    После закрытия файла нумерация строк отключится
                                                        автоматически. Чтобы отключить абсолютные номера
                                                        строк на время редактирования файла, перейдите в
                                                        командный режим и выполните команду :set
                                                            nonumber или :set
                                                                nonu.
                                    Если требуется мониторинг сервера с помощью  или по
                                        протоколу SNMP, раскомментируйте строки #-A INPUT -p tcp
                                            -m tcp --dport 10050 -j ACCEPT (номер 51) и
                                        #-A INPUT -p udp -m udp --dport 161 -j
                                            ACCEPT (номер 48) соответственно.
                                    Сохраните файл и выйдите из режима
                                        редактирования::wq
       |*|*|*|                     Проверьте владельца файла и права доступа командой: 
                            ls -l /etc/sysconfig/iptablesВладелец и права
                                должны совпадать с указанными на скриншоте: 
                                    Владелец и права файла iptables
                                В противном случае выполните команду:
                                chown root:root /etc/sysconfig/iptables && chmod 600 /etc/sysconfig/iptables
                                Проверьте, что владелец и права теперь соответствуют указанным на
                                скриншоте. 
                            Чтобы применить новые правила межсетевого экрана, перезапустите службы
                                iptables и docker, выполнив команды:
                                systemctl restart iptables.service
systemctl restart docker.service
                Настройте запуск службы СУБД после службы docker. Для этого:Перейдите в режим редактирования службы СУБД:systemctl edit jatoba-*.serviceЕсли файл не пуст, перейдите к пункту .Добавьте блок [Unit]:[Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.serviceЕсли база данных хранится на отдельном томе, добавьте после блока [Unit] блок [Service]:[Service]
Environment=PGDATA=/storage/baseГде /storage/base — путь к базе данных, который был настроен на шаге 
                            раздела 
                            .Для применения изменений в настройках службы СУБД выполните команду:systemctl daemon-reload
                                Проверьте состояние службы Jatoba:
                                    systemctl status jatoba-*
                                Измените настройки синхронизации с , если ранее они выполнялись для  предыдущей
                                    версии:
                                        Перейдите в веб-интерфейс . 
                                        Перейдите на страницу  → .
                                        Нажмите на имя роли «Sync-itm-m role».
                                        Откроется страница редактирования роли.
                                        В выпадающем меню «Тип пользователя» измените значение на
                                            «Супер-администратор».
                                        В разделе «Доступ к Веб элементам» → «Настройка» активируйте чекбокс
                                            «Услуги».
                                        В разделе «Доступ к API» → «Методы API» добавьте в список разрешений
                                            метод *.get и удалите другие методы.
                                                Настройка списка разрешений
                                        Нажмите на кнопку «Обновить» для сохранения изменений.
                    Установите агент версии 2 согласно инструкции  (за исключением п. , так как межсетевой экран был настроен ранее в п.  текущей инструкции).
                    В файле конфигурации агента /etc/zabbix/zabbix_agent2.conf
                        установите параметр =172.16.239.0/24
                        (адрес подсети контейнеров ).
                    Измените настройки мониторинга сервера, на котором установлен . Для этого: 
                            Перейдите в веб-интерфейс .  
                            Перейдите на страницу  → .
                            Найдите объект мониторинга — сервер , в столбце «интерфейс» у него будет
                                указано «zabbix-agent: 10050».
                                    Cервер  в списке объектов мониторинга
                            Нажмите на имя объекта мониторинга, чтобы перейти к его
                                настройкам.
                            Измените настройки интерфейса объекта мониторинга:
                                    Введите в поле «IP адрес» значение 172.17.0.1
                                        (адрес сервера в подсети docker).
                                    Введите в поле «DNS» значение
                                        host.docker.internal.
                                    Изменение настроек интерфейса 
                            Нажмите на кнопку «Обновить» для сохранения настроек . 
                            Убедитесь, что  стал
                                доступен. 
                Удалите файл .agent.env из директории
                        /opt/itm-k/env: 
                    rm -rf /opt/itm-k/env/.agent.env
            Если обновленный сервер мониторинга  был подключен к серверу , то  не обнаружит, что версия сервера мониторинга изменилась, и продолжит делать
                запросы, соответствующие старой версии сервера мониторинга. Для корректной работы
                необходимо на  удалить сервер мониторинга  и добавить его заново. При этом все данные, связанные с сервером
                мониторинга, будут удалены и появятся только при повторном добавлении этого
                сервера.
|*|*|*|
    Настройка SSH
            По умолчанию в состав ОС входит только -клиент. -сервер устанавливается либо через программу первичной установки, либо с помощью
                команды apt install ssh.
                Отредактируйте конфигурационный файл для настройки : 
                        Откройте файл для редактирования:
                            nano /etc/ssh/sshd_config
                        Измените следующие переменные:
                            GSSAPIAuthentication no
UseDNS no                    
                        Сохраните изменения и закройте файл.
                Для применения настроек запустите службу  и добавьте ее в автозагрузку:
                    systemctl start ssh
systemctl enable ssh
                Проверьте состояние сервиса:
                    systemctl status ssh
|*|*|*|
    Настройка АРМ Администратора
                Добавьте в файл C:\Windows\System32\drivers\etc\hosts
                    следующую запись:
                <ip_addr>    <hostname>В этой записи
                        <ip_addr> — IP-адрес сетевого интерфейса управления ,
                        <hostname> — сетевое имя .Если на АРМ Администратора
                        установлена Unix-like ОС, то запись в таком же формате добавьте в файл
                            /etc/hosts.
                Импортируйте выпущенный корневой сертификат local_ca.crt в
                    веб-браузер, в котором будете подключаться к . Для этого:
                        Загрузите с сервера 
                            файл local_ca.crt на АРМ Администратора.
                        Если используется веб-браузер Google Chrome:
                                Перейдите на страницу настроек «Настройка и управление Google
                                    Chrome» → «Настройки» → «Конфиденциальность и безопасность» →
                                    «Безопасность» → «Управление сертификатами устройства».
                                В новом окне откройте вкладку «Доверенные корневые центры
                                    сертификации». Нажмите «Импорт».
                                В открывшемся окне нажмите «Далее». В поле «Имя файла:» нажмите
                                    «Обзор». Выберите файл local_ca.crt,
                                    загруженный с сервера . Нажмите «Далее».
                                Убедитесь, что выбран вариант «Поместить все сертификаты в
                                    следующее хранилище» и в поле «Хранилище сертификатов:» выбрано
                                    «Доверенные корневые центры сертификации». Нажмите «Далее» и
                                    «Готово».
                                В окне предупреждения безопасности импорта сертификата нажмите
                                    «Да» для подтверждения импорта. Закройте окно управления
                                    сертификатами.
                        Если используется веб-браузер Mozilla Firefox:
                                Перейдите на страницу настроек «Открыть меню приложения» →
                                    «Настройки» → «Приватность и защита» → «Просмотр
                                    сертификатов...».
                                Откройте вкладку «Центры сертификации», нажмите «Импортировать».
                                    Выберите файл local_ca.crt, загруженный с
                                    сервера .
                                В окне «Загрузка сертификата» установите чекбокс в поле
                                    «Доверять при идентификации веб-сайтов», нажмите «ОК» два
                                    раза.
                Откройте веб-интерфейс сервера , введя в адресной строке браузера адрес
                        https://<hostname>, где <hostname> —
                    сетевое имя сервера . 
|*|*|*|
    Настройка репозиториев
                Отредактируйте конфигурационный файл с списком репозиториев: 
                        Откройте файл для редактирования:
                            nano /etc/apt/sources.list
                        Раскомментируйте следующие строки:
                            deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-main/ 1.7_x86-64 main contrib non-free
deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-update/ 1.7_x86-64 main contrib non-free
deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-base/ 1.7_x86-64 main contrib non-free
deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-extended/ 1.7_x86-64 main contrib non-free
                        Сохраните изменения и закройте файл.
                Обновите список пакетов в репозитории:
                    sudo apt update
                Установите пакеты для возможности использовать репозитории с подключением по
                        :
                    sudo apt install apt-transport-https ca-certificates
                Обновите установленные пакеты:
                    sudo apt upgrade
|*|*|*|
    Установка агента на ОС Centos 7+ и RedOS 7+
                При установке агента на 
                    «datapkitm server» рекомендуется выбрать версию агента 2 и задать значение
                    переменной =172.16.239.0/24.Для установки агента версии 2 на
                     под управлением операционной
                системы CentOS 7 версии и новее или RedOS 7 версии и новее:
                Запустите установку rpm-пакета агента:
                    rpm -Uvh itm-agent2_[номер версии агента].el[номер версии CentOS].x86_64.rpm
                Внесите изменения в конфигурационный файл  zabbix_agent2.conf.
                    Для этого:
                        Войдите в режим редактирования файла:
                            vi /etc/zabbix/zabbix_agent2.conf
                        Измените файл следующим образом:
                                Присвойте переменной  (и , если используется активный режим
                                    агента) значение IP-адреса сервера  или
                                        , в
                                    зависимости от вашей иерархии. При необходимости
                                        подключения к нескольким серверам мониторинга, перечислите
                                        их IP-адреса через запятую без пробелов.
                                Если в иерархии не будет использоваться режим активного агента,
                                    закомментируйте переменную .
                                Раскомментируйте строку с переменной . Для этого уберите символ «#» в
                                    начале строки.
                                Присвойте переменной  значение,
                                    соответствующее имени текущего .
                    Если в системе используется межсетевой экран, добавьте в него правила для
                        открытия порта агента и примените их.
                            Если используется межсетевой экран firewall-cmd:
                                Если на сервере установлен docker, остановите работу
                                    контейнеров:docker-compose down
                                    Добавьте правило:
                                        firewall-cmd --permanent --zone=public --add-port=10050/tcp
                                    Примените
                                    правило:firewall-cmd --reload
                                    Убедитесь в корректности
                                        настройки:firewall-cmd --permanent --list-all
                                Если на сервере установлен docker:
                                        Перезапустите службу docker для добавления правил в
                                            межсетевой
                                            экран:systemctl restart docker
                                        Запустите работу
                                            контейнеров:docker-compose up -d
                            Если используется межсетевой экран iptables:
                                Если на сервере установлен docker, остановите работу
                                    контейнеров:docker-compose down
                                    Добавьте правило:
                                        iptables -I INPUT [номер строки] -p tcp --dport 10050 -j ACCEPT 
                                    Примените
                                        правило:service iptables save
                                    Убедитесь в корректности
                                        настройки:iptables -nL
                                Если на сервере установлен docker:
                                        Перезапустите службу docker для добавления правил в
                                            межсетевой
                                            экран:systemctl restart docker
                                        Запустите работу
                                            контейнеров:docker-compose up -d
                Добавьте сервис в автозагрузку и запустите агента:
                    systemctl enable zabbix-agent2 --now
                Убедитесь в корректности работы агента:
                    systemctl status zabbix-agent2
|*|*|*|
    Установка агента на ОС Debian и Astra Linux
            При установке агента на 
                «datapkitm server» рекомендуется выбрать версию агента 2 и задать значение
                переменной =172.16.239.0/24. Для установки агента версии 2 на  под
                управлением операционной системы Debian 9 версии и новее или Astra Linux 1.7.5:
                Запустите установку deb-пакета агента:
                    dpkg -i itm-agent2_[номер версии агента].[номер версии ОС]_[разрядность].deb
                    Для ОС Astra Linux 1.7.5 подходит агент
                            itm-agent2_v.1.2.0.debian10_amd64.deb.
                Внесите изменения в конфигурационный файл zabbix_agent2.conf.
                    Для этого:
                        Войдите в режим редактирования файла:
                            vi /etc/zabbix/zabbix_agent2.conf
                        Измените файл следующим образом:
                                Присвойте переменной  (и , если используется активный режим
                                    агента) значение IP-адреса сервера  или
                                        , в
                                    зависимости от вашей иерархии. При необходимости
                                        подключения к нескольким серверам мониторинга, перечислите
                                        их IP-адреса через запятую без пробелов.
                                Раскомментируйте строку с переменной . Для этого уберите символ «#» в
                                    начале строки.
                                Присвойте переменной  значение,
                                    соответствующее имени текущего .
                        Сохраните файл и выйдите из режима редактирования: 
                            :wq
                Если в системе используется межсетевой экран, добавьте в него правила для
                    открытия порта агента и примените их.
                        Если используется межсетевой экран firewall-cmd:
                                Если на сервере установлен docker, остановите работу
                                    контейнеров:docker-compose down
                                Добавьте правило:
                                    firewall-cmd --permanent --zone=public --add-port=10050/tcp
                                Примените
                                    правило:firewall-cmd --reload
                                Убедитесь в корректности
                                    настройки:firewall-cmd --permanent --list-all
                                Если на сервере установлен docker:
                                        Перезапустите службу docker для добавления правил в
                                            межсетевой
                                            экран:systemctl restart docker
                                        Запустите работу
                                            контейнеров:docker-compose up -d
                        Если используется межсетевой экран iptables:
                                Если на сервере установлен docker, остановите работу
                                    контейнеров:docker-compose down
                                Добавьте правило: iptables -I INPUT [номер строки] -p tcp --dport 10050 -j ACCEPT 
                                Примените
                                    правило:service iptables save
                                Убедитесь в корректности
                                    настройки:iptables -nL
                                Если на сервере установлен docker:
                                        Перезапустите службу docker для добавления правил в
                                            межсетевой
                                            экран:systemctl restart docker
                                        Запустите работу
                                            контейнеров:docker-compose up -d
                Добавьте сервис в автозагрузку и запустите агента:
                    systemctl enable zabbix-agent2 --now
                Убедитесь в корректности работы агента:
                    systemctl status zabbix-agent2
                    Подробная настройка объектов мониторинга в
                        веб-интерфейсе описана в разделе .
|*|*|*|
    Настройка агента на ОС Windows 7+
                Для изменения настроек агента версии 2 на 
            Windows 7 версии и новее:
                Перейдите в директорию, куда был установлен агент. По умолчанию это директория
                        C:\Program Files\Zabbix agent 2.
                Откройте с помощью текстового редактора файл
                        zabbix_agent2.conf.
                        Измените один или несколько параметров агента.
                                Для изменения или добавления IP-адреса сервера  или
                                    :
                                        Присвойте переменной  значение
                                            IP-адреса сервера  или
                                                , в зависимости от
                                            вашей иерархии. При необходимости подключения
                                                   к
                                                нескольким серверам мониторинга, перечислите их
                                                IP-адреса через запятую без пробелов.
                                        Закомментируйте переменную , чтобы не использовать
                                            активный режим агента.
                                Для изменения порта подключения к серверу мониторинга:
                                        Раскомментируйте строку с переменной . Для этого уберите символ «#»
                                            в начале строки. Присвойте переменной новое
                                            значение.
                                Для изменения имени узла сети:
                                        Присвойте переменной  новое
                                            значение.
                        Сохраните изменения.
                Для применения настроек агента версии 2 перезапустите службу Zabbix Agent
                    2:
                        Одновременно нажмите клавиши Win+R.
                        Введите команду services.msc.
                        Найдите в появившемся окне в списке служб Zabbix Agent 2 и выделите
                            строку с ней.
                        Нажмите правой кнопкой мыши на строке со службой Zabbix Agent 2.
                        В контекстном меню выберите «Перезапустить».
                            Подробная настройка объектов мониторинга в веб-интерфейсе описана
                        в разделе .
        Если при запросе данных с сервера мониторинга на агент
            возникла ошибка «Get value from agent failed: cannot connect to [[192.168.0.17]:10050]:
            [4] Interrupted system call», см. решение в разделе .
|*|*|*|
    Установка агента на ОС Windows 7+
            Для установки агента версии 2 на  под управлением операционной системы Windows 7 версии и
            новее: 
                Запустите файл агента версии 2 itm-agent2_v.[номер версии
                        агента]-[разрядность ОС]-openssl.msi для  x64. 
                Появится окно установщика агента. 
                    Нажмите «Next».
                    Установите чекбокс «I accept the terms in the License Agreement» и нажмите
                        «Next».
                    Появится окно для настройки данных агента.
                    Запомните значение поля «Hostname», так как указанное там сетевое имя
                        текущего компьютера необходимо будет внести в поле «Имя узла сети» при
                        настройке мониторинга в .
                    Настройте параметры агента. Для этого:
                            В поле «Zabbix server IP/DNS» введите одно из следующих
                                значений:
                                    IP-адрес сервера ,
                                        если агент будет подключаться напрямую к серверу консолидацииконсолидациимониторинга;
                                    IP-адрес сервера ,
                                        если агент будет подключаться к серверу консолидацииконсолидациимониторинга через прокси
                                        (сервер агентовагентовудаленного мониторинга).
                                При необходимости подключения  к нескольким серверам
                                    мониторинга, перечислите их IP-адреса через запятую без
                                    пробелов.
                        В остальных полях оставьте значения по умолчанию.
                    Нажмите «Next».
                    Появится окно выбора компонентов и места для установки
                        агента.
                    Выберите расположение, где будет установлен агент, и нажмите «Next».
                    Нажмите «Install» для начала установки.
                    Дождитесь окончания установки.
|*|*|*|
    Установка и настройка агентов
        После установки агента необходимо настроить объект мониторинга. Подробная настройка
            объектов мониторинга в веб-интерфейсе описана в разделе Объекты мониторинга. Узлы сети.
        В данном разделе:
|*|*|*|
    Настройка ОМ с ОС Windows XP
        Для  с этой ОС
                настройка происходит с помощью протокола .Настройка  на Windows XP настраивается одинаково, независимо от версии service pack (SP1, SP2,
            SP3). 
            Настройка ОМ
            Для настройки ОМ должна быть установлена служба . Подробнее про установку см. в разделе .
                Найдите соответствующие службы в панели управления. Для этого:
                        Зайдите в панель управления. 
                        Перейдите в раздел «Администрирование».
                                Панель управления
                            Результат шага: Откроется окно «Администрирование».
                        В открывшемся окне нажмите на кнопку «Управление компьютером».
                                Управление компьютером
                        В разделе «Службы и приложения» перейдите в раздел «Службы» и найдите в
                            списке «Служба ».
                                Раздел «Службы»
                            Если службы  нет в списке, необходимо ее установить. Подробнее про установку
                                см. в разделе .
                Выполните более детальную настройку  агента. Для этого:
                        Нажмите правой кнопкой мыши на «Служба » и выберите «Свойства».Результат шага: Откроется окно «Служба ».
                        В открывшемся окне откройте вкладку «Безопасность».
                        Нажмите на кнопку «Добавить» в разделе «Приемлемые имена сообществ».
                                    Служба SNMP
                                Результат шага: Откроется окно «Настройка службы ».
                        В открывшемся окне: 
                                выберите права сообщества;Рекомендуемое значение — READ
                                        ONLY.
                                введите имя сообщества;
                                нажмите на кнопку «Добавить».
                                Настройка службы SNMP
                        Нажмите на кнопку «Применить» в окне «Служба ».
                Перезапустите службу .
            Установка службы SNMP
                Зайдите в панель управления.
                Перейдите в раздел «Установка и удаление программ».Результат шага: Откроется
                        окно «Установка и удаление программ».
                В открывшемся окне нажмите на кнопку «Установка компонентов Windows».
                        Окно «Установка и удаление программ»
                    Результат шага: Откроется окно «Мастер компонентов Windows».
                В открывшемся окне выберите компонент «Средства управления и наблюдения» в конце списка.
                        Установка компонента
                Нажмите на кнопку «Состав».Результат шага: Откроется окно с содержимым
                        компонента «Средства управления и наблюдения». 
                В открывшемся окне установите чекбоксы рядом с необходимыми компонентами.
                Нажмите на кнопку «ОК».
                        Окно «Средства управления и наблюдения»
                Нажмите «Далее» в окне «Мастер компонентов Windows». Результат шага: Начнется
                        установка компонента. 
                            Установка компонента
                        В процессе установки вам понадобится вставить диск с дистрибутивом
                            Windows в CD-ROM.
|*|*|*|
    Настройка ОМ с ОС Centos по протоколу SNMPv3
            Для настройки безагентного сбора данных на  с  Centos с помощью
                протокола :
                Перейдите в режим командной строки .
                Остановите сервис snmpd:
                    systemctl stop snmpd
                Создайте пользователя с помощью команды:
                net-snmp-create-v3-user [-ro] [-A authpass] [-a MD5|SHA] [-X privpass] [-x DES|AES] [username]Где:
                        -ro — read-only, права только для чтения;
                        authpass — пароль аутентификации;
                        -a — протокол аутентификации MD5 или SHA;
                        privpass — приватный ключ;
                        -x — протокол безопасности DES или AES;
                        username — пользователь.
                Для пользователя с паролем аутентификации P@ssw0rd, протоколом
                    аутентификации SHA, приватным ключом p@SSW0RD, протоколом безопасности AES и
                    именем datapkitmv3 команда будет выглядеть следующим
                        образом:net-snmp-create-v3-user -ro -A P@ssw0rd -a SHA -X p@SSW0RD -x AES datapkitmv3
                        Создание пользователя
                Данные о пользователе будут записаны в файл
                        /etc/snmp/snmpd.conf, а данные о приватном ключе — в файл
                        /var/lib/net-snmp/snmpd.conf.
                Запустите службу snmpd и добавьте ее в автозагрузку:
                    systemctl enable snmpd --now
                Убедитесь в корректности настроек межсетевого экрана:
                    iptables -nL
                Если в цепочке INPUT отсутствует правило, разрешающее использование порта
                        161/, выполните следующие действия: 
                        Остановите работу контейнеров:
                            docker-compose down
                        Добавьте правило, разрешающее использование порта 161/, для корректной отправки информации по протоколу : 
                            iptables -I INPUT [номер строки] -m state --state NEW -p udp --dport 161 -j ACCEPT
                         Чтобы добавить правило 5 строкой, используйте команду:
                            iptables -I INPUT 5 -m state --state NEW -p udp --dport 161 -j ACCEPT 
                        Сохраните правила межсетевого экрана командой:
                            service iptables save
                        Запустите работу контейнеров:
                            docker-compose up -d
                В командной строке узла сети отправьте запрос к -агенту с помощью утилиты snmpwalk для проверки сделанных настроек:
                snmpwalk -v3 [-a MD5|SHA] [-A authpass] [-x DES|AES] [-X privpass] [-l noAuthNoPriv|authNoPriv|authPriv] [-u username] [IP-address] | moreГде:
                        -v3 — версия ;
                        -a — протокол аутентификации MD5 или SHA;
                        authpass — пароль аутентификации;
                        -x — протокол безопасности DES или AES;
                        privpass — приватный ключ;
                        -l — уровень безопасности noAuthNoPriv, authNoPriv или authPriv;
                        username — пользователь;
                        IP-address — IP-адрес узла сети. Укажите 127.0.0.1, чтобы узел сети
                            отправил запрос сам себе.
                Для пользователя с протоколом аутентификации SHA, паролем аутентификации
                    P@ssw0rd, протоколом безопасности AES, приватным ключом p@SSW0RD, уровень
                    безопасности authPriv и именем datapkitmv3 команда будет выглядеть следующим
                        образом:snmpwalk -v3 -a SHA -A P@ssw0rd -x AES -X p@SSW0RD -l authPriv -u datapkitmv3 127.0.0.1 | more
                        Результат работы утилиты snmpwalk
                Создайте :
                        В веб-интерфейсе  перейдите на страницу
                                 → .
                        Нажмите на имя узла сети, для которого производится настройка сбора
                            данных.
                        Откроется страница с подробной информацией об узле
                            сети.
                        На вкладке «Узел сети» в разделе «Интерфейсы» нажмите на кнопку
                            «Добавить» и выберите .
                        В появившихся полях введите параметры, которые использовались при
                            создании пользователя  на шаге :
                                Версия  — ;
                                Имя безопасности — datapkitmv3; 
                                Уровень безопасности — authPriv.
                            После выбора уровня безопасности authPriv заполните следующие
                            появившиеся параметры:
                                Протокол аутентификации — SHA;
                                Пароль аутентификации — P@ssw0rd;
                                Протокол безопасности — AES;
                                Ключевая фраза безопасности — p@SSW0RD.
                        Если нужно отредактировать параметры:
                                На вкладке «Узел сети» в разделе «Интерфейсы» нажмите на кнопку
                                    «Раскрыть» («  ») рядом с «».
                                Отредактируйте параметры. Имя пользователя, пароль и ключ
                                    указаны в полях «Имя безопасности», «Пароль аутентификации» и
                                    «Ключевая фраза безопасности».
                        Добавьте к 
                            шаблоны:
                                Перейдите на вкладку «Шаблоны».
                                Нажмите на кнопку «Выбрать» напротив поля «Присоединение новых
                                    шаблонов». Результат шага: Появится список доступных
                                        шаблонов.
                                Установите чекбокс рядом с тем шаблоном, который необходимо
                                    добавить. Например, Linux .
                                Нажмите на кнопку «Выбрать» для добавления шаблона.
                        Нажмите на кнопку «Добавить» для сохранения изменений.
                            Если нужно сохранить параметры после редактирования, нажмите на
                                кнопку «Обновить».
|*|*|*|
    Создание ОМ в веб-интерфейсе для безагентного мониторинга по протоколу WMI
        После настройки безагентного сбора на узле сети с
                 Windows с помощью протокола  добавьте этот узел сети в веб-интерфейсе . Для
            этого:
                На вкладке «Узел сети» настройте следующие параметры:
                        Имя узла сети — сетевое имя объекта мониторинга.
                        Видимое имя — имя объекта мониторинга, которое отображается в
                            интерфейсе  (необязательное
                            поле).
                        Группы — принадлежность объекта мониторинга к группе.
                        Интерфейсы — сетевые интерфейсы объекта мониторинга:
                                тип интерфейса — укажите значение «Агент»;
                                IP-адрес — заполните поле;
                                порт — оставьте значение по умолчанию.
                        Описание.
                        Наблюдение через прокси — включите или отключите использование прокси.
                            Если  расположен в сети
                            уровня , выберите в выпадающем списке
                            соответствующий сервер , расположенный в той же сети
                                .
                        Активировано — режим мониторинга .
                Перейдите на вкладку «Шаблоны».
                В поле «Присоединение новых шаблонов» начните вводить «Windows WMI». 
                Выберите «Windows WMI» в выпадающем списке. 
                Убедитесь в работоспособности мониторинга подключенного : 
                        Убедитесь в сетевой доступности : 
                                Перейдите на страницу  → . 
                                Нажмите на подключенный .
                                Выберите в контекстном меню скрипт ping.
                        Откроется окно с результатом команды ping.
                        Убедитесь в получении параметров функционирования подключенного
                                 с использованием
                            протокола :
                                На странице  → 
                                    нажмите на подключенный .
                                Выберите в контекстном меню пункт «Последние данные».
                        Откроется страница «Последние данные» с таблицей, содержащей
                            список параметров функционирования  с указанием времени последней проверки
                            и полученного результата. По ссылке «График» можно просмотреть значения
                            контролируемого параметра в виде графика.
                    Индикаторы статуса доступности объекта мониторинга в столбце «Доступность»
                        на странице «Узлы сети» при
                        мониторинге по  не будут менять цвет. 
|*|*|*|
    Настройка безагентного сбора
        Безагентный мониторинг  и сбор параметров
            их функционирования может быть реализован с использованием протоколов , ,  или .
        Для безагентного мониторинга рекомендуется преимущественно использовать протокол  для всех типов , в том числе
                 с ОС Windows. При отсутствии
            поддержки  объектом мониторинга, возможно использование .
        В этом разделе:
|*|*|*|
    Настройка ОМ с ОС Windows Server 2012
        Для  с этой ОС
            настройка происходит с помощью протокола .
            Настройка ОМ
                Для настройки ОМ должна быть установлена служба . Подробнее про установку см. в разделе .
                Найдите соответствующие службы для последующей настройки. Для этого:
                        Нажмите Win+R. 
                        В появившемся окне введите services.msc.
                        Нажмите на кнопку «OK».
                        Запуск оснастки службы
                Для более детальной настройки  агента:
                        Нажмите правой кнопкой мыши на « Service» и выберите «Properties».
                                Службы
                        На вкладке «Security» создайте имя сообщества. Для этого нажмите на
                            кнопку «Add».
                                Окно «SNMP Service Properties»
                        В открывшемся окне:
                                выберите права сообщества;Рекомендуемое значение — READ
                                        ONLY.
                                введите имя сообщества;
                                нажмите на кнопку «Add».
                                Окно «SNMP Service Configuration»
                        Для применения текущих настроек нажмите на кнопку «Apply».
                                Окно «SNMP Service Configuration»
                Перезапустите службу .
            Установка службы SNMP
                Зайдите в панель «Server Manager». 
                Перейдите в раздел «Add roles and features».
                        Панель «Server manager»
                В открывшемся окне перейдите на вкладку «Server Selection».
                Выберите сервер, на который будет производится установка компонента .
                        Окно «Add Roles and Features Wizard»
                Добавьте компонент « Service». Для этого:
                        Перейдите на вкладку «Features».
                        В выведенном списке установите чекбокс « Service».
                                Выбор SNMP service
                        В появившемся окне нажмите на кнопку «Add features».
                                Добавление компонента
                            Результат шага: Будет установлен чекбокс напротив « Service».
                        Нажмите на кнопку «Next».
                                Переход у установке SNMP Service
                        Для начала загрузки нажмите на кнопку «Install».
                                Начало установки
                            Результат шага: Начнется загрузка. 
                                Запуск оснастки Службы
                        После завершения загрузки нажмите на кнопку «Close».
                                Службы
|*|*|*|
    Настройка ОМ с ОС Windows 2000 
        Для  с этой ОС
            настройка происходит с помощью протокола .
            Настройка ОМ
        Для настройки ОМ должна быть установлена служба . Подробнее про установку см. в разделе .
            Найдите соответствующие службы в панели управления. Для этого:
                    Зайдите в панель управления. 
                    Перейдите в раздел «Администрирование».
                            Панель управления
                        Результат шага: Откроется окно «Администрирование».
                    В открывшемся окне нажмите на кнопку «Управление компьютером».
                            Управление компьютером
                    В разделе «Службы и приложения» перейдите в подраздел «Службы» и найдите в
                            списке «Служба ».
                                Раздел «Службы»
                            Если службы  нет в списке, необходимо ее установить. Подробнее про установку
                                см. в разделе .
            Выполните более детальную настройку  агента. Для этого: 
                        Нажмите правой кнопкой мыши на «Служба » и выберите «Свойства».Результат шага: Откроется окно «Служба ».
                        В открывшемся окне откройте вкладку «Безопасность».
                        Нажмите на кнопку «Добавить» в разделе «Приемлемые имена
                                сообществ».Результат шага: Откроется окно «Настройка службы ».
                        В открывшемся окне: 
                                выберите права сообщества;Рекомендуемое значение — READ
                                        ONLY.
                                введите имя сообщества;
                                нажмите на кнопку «Добавить».
                                Настройка службы SNMP
                        Нажмите на кнопку «ОК» в окне «Служба ».
                Перезапустите службу .
            Установка службы SNMP
                Зайдите в панель управления.
                Перейдите в раздел «Установка и удаление программ».Результат шага: Откроется
                        окно «Установка и удаление программ».
                В открывшемся окне нажмите на кнопку «Добавление и удаление компонентов Windows».
                        Добавление и удаление компонентов Windows
                    Результат шага: Откроется окно «Мастер компонентов Windows».
                В открывшемся окне выберите компонент «Средства управления и наблюдения» в конце
                    списка. 
                        Установка компонента
                Нажмите на кнопку «Состав».Результат шага: Откроется окно с содержимым
                        компонента «Средства управления и наблюдения». 
                Нажмите «ОК» в окне «Средства управления и наблюдения».
                        Окно «Средства управления и наблюдения»
                Нажмите «Далее» в окне «Мастер компонентов Windows». Результат шага: Начнется
                        установка компонента. 
                            Установка компонента
                        В процессе установки вам понадобится вставить диск с дистрибутивом
                            Windows в CD-ROM.
|*|*|*|
    Настройка ОМ с ОС Windows 10 или Windows 7
            Для  с этой ОС
                настройка происходит с помощью протокола .
            Установка SNMP службы
            Способ установки для Windows 7: 
                Зайдите в панель управления. 
                Перейдите в раздел «Программы и компоненты». 
                В открывшемся окне нажмите на иконку «Включение или отключение компонентов
                        Windows».Результат шага: Откроется окно «Компоненты Windows».
                В открывшемся окне установите чекбокс напротив компонента «-протокол» и нажмите «ОК».
                        Окно установки SNMP
                    Результат шага: После окончания установки компонента окна установки
                        закроются автоматически. 
            Способ установки для Windows 10:
            Для данного метода установки нужен выход в интернет.
                Запустите PowerShell от имени администратора. Для этого:
                        Нажмите Win+X.
                        Выберите «Windows PowerShell (администратор)».
                        Запуск PowerShell
                Проверьте наличие -клиента:Get-WindowsCapability -Online -Name "*SNMP*"
                        Проверка наличия SNMP-клиента
                Установите -клиент:Add-WindowsCapability -Online -Name "SNMP.Client~~~~0.0.1.0"
                        Установка SNMP-клиента
                Установите дополнительный компонент для -клиента:Add-WindowsCapability -Online -Name "WMI-SNMP-Provider.Client~~~~0.0.1.0"
                        Установка дополнительного компонента для SNMP-клиента
                Убедитесь, что -клиент и дополнительный компонент установлены:Get-WindowsCapability -Online -Name "*SNMP*"
                        Проверка установки SNMP-клиента и дополнительного компонента
                Перезагрузите компьютер.
            Настройка SNMP службы  
                Для настройки найдите соответствующие службы в консоли управления службами. Для
                    этого:
                        Зайдите в панель управления.
                        Перейдите в раздел «Администрирование».
                        В открывшемся окне нажмите на кнопку «Службы».
                Выполните более детальную настройку  агента. Для этого:
                    Нажмите правой кнопкой мыши на «Служба » и выберите «Свойства».Результат шага: Откроется окно «Служба ».
                    В открывшемся окне откройте вкладку «Безопасность».
                    Нажмите на кнопку «Добавить» в разделе «Приемлемые имена
                        сообществ».Результат шага: Откроется окно «Настройка службы ».
                    В открывшемся окне: 
                        выберите права сообщества;Рекомендуемое значение — READ
                            ONLY.
                        введите имя сообщества;
                        нажмите на кнопку «Добавить».
                        Окно настройки SNMP
                    Для сохранения текущих настроек нажмите на кнопку «Применить».
                Перезапустите службу .
|*|*|*|
    Подготовка к использованию шаблона MySQL.yaml
            Для корректной работы шаблона MySQL.yaml выполните следующие
                действия:
                Установите агент версии 2. Подробнее см. в разделе .
                Создайте пользователя БД MySQL для мониторинга. Для этого:
                        Перейдите в режим командной строки операционной системы, на которой
                            установлен сервер консолидации
                            консолидации
                            мониторинга.
                        Войдите в интерактивный терминал для работы с MySQL.
                        Создайте пользователя с именем zbx_monitor и
                            необходимым паролем:
                            CREATE USER 'zbx_monitor'@'%' IDENTIFIED BY '<password>';
                        Задайте пользователю zbx_monitor права:
                            GRANT REPLICATION CLIENT,PROCESS,SHOW DATABASES,SHOW VIEW ON *.* TO 'zbx_monitor'@'%';
                        Покиньте терминал.
                В веб-интерфейсе 
                     перейдите на
                    страницу  → .
                Нажмите на имя узла сети, к которому нужно присоединить шаблон.
                откроется карточка узла сети.
                Подключите шаблон к объекту мониторинга: 
                        Перейдите на вкладку «Шаблоны».
                        В разделе «Присоединение новых шаблонов» выберите шаблон
                                MySQL.yaml. 
                В карточке узла сети перейдите на вкладку «Макросы» и нажмите на кнопку
                    «Макросы узла сети и унаследованные». 
                Задайте адрес подключения в значении макроса
                    {$MYSQL.DSN}.
                tcp://localhost:3306, tcp://172.16.0.10,
                        unix:/var/run/mysql.sock
                Задайте пользователя и пароль подключения в значениях макросов
                        {$MYSQL.USER} и {$MYSQL.PASSWORD}.
|*|*|*|
    Настройки ОМ, получаемых из DATAPK
            После настройки синхронизации данных об  из системы DATAPK и выполнении первого цикла
                    синхронизации в веб-интерфейсе  отобразятся новые
                        , созданные на основе
                    классифицированных в DATAPK объектов защиты, которые имеют
                        IP-адрес. из категории
                    «Неизвестные» в  не
                        передаются.
                    автоматически добавляются в группу узлов сети «DATAPK». Нельзя удалять эту
                    группу узлов сети и отсоединять от нее , так как при отсоединении  от группы «DATAPK» при последующей
                    синхронизации появится дубликат .
                    При необходимости, к  можно
                    добавить неограниченное количество групп узлов сети, возможность логических
                    объединений остается. К группе узлов сети «DATAPK» нельзя добавлять
                    самостоятельно созданные . в  создаются с параметрами в соответствии с
                    параметрами  в DATAPK:
                    Сетевые интерфейсы для мониторинга — создаются все сетевые интерфейсы
                        объекта защиты из DATAPK.
                    Сетевой интерфейс для мониторинга по умолчанию:
                             — у  типов
                                коммутатор и маршрутизатор, в свойствах интерфейса сохраняется
                                значение community, если оно имеется в DATAPK;
                            Агент — у всех других .
                    Параметры инвентарных данных*:
                            MAC адрес А — MAC адрес сетевого интерфейса по умолчанию в
                                DATAPK;
                            ID объекта в DATAPK — значение host_id объекта защиты в DATAPK;
                            ID DATAPK — значение box_id подключенного DATAPK.
                    Тэг asu_tp* — создается тэг со значением равным значению АСУ ТП, которой
                        принадлежит объект защиты в DATAPK.
                *Перечисленные свойства и тэги нельзя вручную удалять или редактировать.
                    Эти данные используются на старшем уровне иерархии комплексного решения смежными
                    системами — САПУИБ, SIEM.При необходимости, к  можно добавить другие тэги с любыми значениями,
                    необходимыми для эксплуатации.Во время синхронизации имя
                        , написанное на кириллице, сохранится в
                         в латинском написании. Имя
                         в  должно быть уникальным. Если при получении
                    данных об  из DATAPK происходит
                    конфликт имен:
                        К имени  прибавляется имя
                            datapk. Название 
                            принимает следующий вид — <имя_ОМ_в_DATAPK> <box_id или
                            имя_DATAPK>. 
                        Если  по-прежнему не
                            является уникальным, к вышеописанному имени добавляется host_id.
                            Название  принимает
                            следующий вид — <имя_ОМ_в_DATAPK> <box_id_или имя_DATAPK>
                            <host_id>.
                    Привести данное имя в соответствие с правилами именований
                         предприятия необходимо
                    вручную. После первичного изменения имени  пользователем, оно сохранится в системе и не
                    будет изменено при последующих обновлениях данных с DATAPK.Сбор данных с
                синхронизированных  будет осуществлен
                после присоединения к ним шаблонов и настройки на  в зависимости от типа сбора данных — установки
                агентов, настройки  или .
|*|*|*|
    Подключение к веб-интерфейсу
            Для подключения к веб-интерфейсу :
                В браузере в адресной строке введите IP-адрес . 
                отобразится окно входа в веб-интерфейс .
                        Окно авторизации
                В окне входа введите имя пользователя и пароль.
                Для встроенной учетной записи по умолчанию заданы имя пользователя
                        datapkitm и пароль datapkitm. При первой настройке комплекса
                    необходимо изменить логин и пароль встроенной учетной записи.
                В случае 5 неудачных попыток входа учетная запись пользователя блокируется.
                        Обратитесь к администратору системы для разблокировки учетной записи.
                Нажмите на кнопку «Войти».
                выполнен вход на главную страницу веб-интерфейса . 
            Чтобы завершить сеанс работы в веб-интерфейсе , нажмите на кнопку  («Выход»)  в
                нижней части главного меню.
|*|*|*|
    Редактирование узла сети datapk-itm server
             Для редактирования узла сети, собирающего данные о самом себе:
                В боковом меню перейдите в раздел «Настройка» → «Узлы
                    сети».
                Нажмите на имя узла сети datapkitm server для его настройки.
                         Переход в раздел «Узлы сети»
                На вкладке «Узел сети» измените следующие параметры:
                        В поле «Группы» добавьте группу «Агенты Linux»;
                        В поле «Интерфейсы агента» проверьте, что установлено значение
                            DNS-имени «Zabbix-agent» (имя зависит от DNS-имени в контейнере) и
                            активна иконка на «Подключатся через DNS»;
                        Нажмите «Обновить».
                         Вкладка «Узел сети»
                    Через некоторое время после применения настроек доступность изменится с
                        обозначения «Недоступен»  на «Доступен»  .
|*|*|*|
    Настройка профиля и безопасности пользователя
            Первоначальная настройка выполняется с использованием учетной записи, имеющей роль
                «Супер-администратор». При необходимости настройки могут быть применены и для
                учетных записей с ролью «Администратор» или «Пользователь». 
            При активации пользователя guest в веб-интерфейсе ПК DATAPK не
                может продолжать работу в сертифицированном статусе. Рекомендуется не активировать
                данную учетную запись в веб-интерфейсе.
            Для настройки пользователей и ролей: 
                Войдите в веб-интерфейс .
                    Логин и пароль для первичного входа в веб-интерфейс с встроенной учетной
                        записью Супер-администратора: datapkitm/datapkitm.
                В левом нижнем углу выберите пункт меню «Настройки пользователя».
                         Пункт меню «Настройки пользователя»
                Появится страница настроек текущего пользователя.
                Измените пароль текущего пользователя в поле «Пароль». При нажатии на «Изменить
                    пароль» на странице появится поле для ввода пароля и его подтверждения.
                При необходимости измените другие настройки. Доступны следующие поля:
                        Язык — позволяет изменить язык интерфейса.
                        Часовой пояс — позволяет изменить текущий часовой пояс на
                            сервере.
                        Тема — позволяет установить различные виды оформления
                            веб-интерфейса.
                        Авто-вход — позволяет автоматически входить в веб-интерфейс, если ранее
                            были сохранены cookies в браузере.
                            В целях безопасности не рекомендуется устанавливать
                                данную настройку.
                        Авто-выход — позволяет задать интервал, спустя который будет
                            происходить автоматический выход из веб-интерфейса, если пользователь не
                            совершал никаких действий.
                            Поддерживается ввод с использованием суффиксов времени s, m, h, d
                                (минимальное значение 90 секунд, максимальное 1 день). Например,
                                «90s». Есть возможность применить значение без суффикса времени, что
                                по умолчанию соответствует значению в секундах.
                            Рекомендуется активировать настройку и настроить время
                                авто-выхода, равное 30 минутам.
                            Авто-выход не будет выполняться при следующих
                                условиях: 
                                    у пользователя открыта страница меню «Мониторинг» и
                                        настроено фоновое обновление данных на странице; 
                                    пользователь отметил параметр «Запомнить меня на 30 дней»
                                        при входе в систему.
                        Обновить — позволяет задать период обновления графиков, комплексных
                            экранов, простых тестовых данных.
                            Если задать значение равное 0, обновление будет отключено.
                        Строк на странице — максимальное количество строк, отображаемых в
                            таблицах на страницах веб-интерфейса.
                        URL (после входа в систему) — позволяет задать URL, на который  перенаправит пользователя после успешного входа в систему.
                         Вкладка «Профиль пользователя»
                Для сохранения произведенных настроек нажмите на кнопку «Обновить» внизу страницы.
                Перейдите в раздел  → .
                Настройки из раздела  →  недоступны для ролей «Администратор» или «Пользователь».
                Выберите в верхней части страницы вкладку .
                При необходимости измените настройки. Доступны следующие поля:
                        Язык по умолчанию — позволяет изменить язык инт|*|*|*|ерфейса по
                            умолчанию.
                        Часовой пояс по умолчанию — позволяет изменить часовой пояс на сервере
                            по умолчанию.
                        Тема по умолчанию — позволяет изменить оформление веб-интерфейса по
                            умолчанию.
                        Лимит элементов в результатах поиска и фильтрах — позволяет задать
                            максимальное количество элементов, которое отображается в результатах
                            поиска и фильтрах. 
                        Макс. количество колонок и строк в таблицах обзора —  позволяет задать
                            максимальное количество колонок и строк, которое отображается в таблицах
                            обзора.
                        Макс. количество элементов отображаемое в ячейке таблицы — позволяет
                            задать максимальное количество элементов, которое отображается в ячейке
                            таблицы.
                        Показывать предупреждение, если Zabbix сервер недоступен — параметр
                            включает предупреждающее сообщение, которое будет отображаться в окне
                            браузера, если не удается выполнить подключение к серверу .
                            Сообщение остается на экране, даже если был достигнут конец страницы;
                            при наведении курсора мыши сообщение временно исчезает.
                            Рекомендуется активировать параметр.
                        Рабочее время — позволяет задать рабочие дни недели и часы
                            работы.
                        Отображение технических ошибок — позволяет включить или выключить
                            отображение сообщений о технических ошибках.
                        Максимальный период отображения истории — позволяет задать максимальное
                            время, за которое отображается история.
                        Период фильтра времени по умолчанию — период по умолчанию для отображения информации в виде графиков.
                        Макс. период селектора периода времени — максимальный период, доступный
                            для представления информации в виде графиков.
                        Вкладка «Веб-интерфейс»
                Выберите вкладку .
                Появится вкладка для настройки периодов хранения данных и очистки. 
                При необходимости измените настройки. Доступны следующие поля:
                События и оповещения
                        Активировать внутреннюю очистку истории;
                        Период хранения данных триггеров;
                        Период хранения внутренних данных;
                        Период хранения данных о событиях сетевого обнаружения;
                        Период хранения данных авторегистрации.
                Услуги
                        Активировать внутреннюю очистку истории; 
                        Период хранения данных.
                Аудит
                        Активировать внутреннюю очистку истории;
                        Период хранения данных.
                Сессии пользователей
                        Активировать внутреннюю очистку истории;
                        Период хранения данных.
                История
                        Активировать внутреннюю очистку истории;
                        Переопределить период хранения истории элементов данных — позволяет
                            редактирование поля «Период хранения данных»;
                        Период хранения данных.
                Динамика изменений
                        Активировать внутреннюю очистку истории;
                        Переопределить период хранения динамики изменения элементов данных —
                            позволяет редактирование поля «Период хранения данных»;
                        Период хранения данных.
                         Раздел  →  →
                    Время хранения настраивается индивидуально для каждого  исходя
                        из системных характеристик и важности хранимых данных.
|*|*|*|
    Импорт шаблонов
        В комплект поставки  входит набор русскоязычных шаблонов для
            мониторинга, адаптированных для использования в проектах по мониторингу безопасности и
            контролю ресурсов.Описание набора шаблонов приведено на странице .Для
                использования шаблонов на русском языке необходимо заменить имеющиеся встроенные
                шаблоны. Если после импорта русскоязычных шаблонов потребуется обновить один
                    или несколько из них, см. порядок действий в разделе .Для замены встроенных шаблонов на русскоязычные:
                Перейдите на страницу  → . 
                Удалите существующие шаблоны. Для этого:
                        Для выбора всех шаблонов установите чекбокс в верхней левой ячейке
                            таблицы, содержащей список загруженных шаблонов.
                                Страница Шаблоны
                        Если шаблоны занимают несколько страниц, повторите этой действие для каждой страницы.
                        Нажмите кнопку «Удалить» внизу страницы.
                        Появится окно подтверждения действия.
                        Нажмите «ОК» для подтверждения.
                        Все шаблоны будут удалены.
                Загрузите новые шаблоны. Для этого:
                        В верхнем правом углу страницы  нажмите
                            кнопку «Импорт». 
                        Откроется страница «Импорт»
                        Нажмите на кнопку «Выберите файл», найдите в окне проводника
                                Агент.yaml и подтвердите выбор.
                                Страница Импорт
                        Установите чекбоксы в колонке «Создать новый» напротив всех элементов,
                            кроме «Узлы сети».
                            Чекбоксы в колонках «Обновить существующие» и «Удалить
                                отсутствующие» можно не устанавливать, так как ранее все шаблоны
                                были удалены и выбор в данном случае ни на что не повлияет.
                        Нажмите кнопку «Импорт» в нижней части страницы.
                        Появится окно, сообщающее об успешности или обнаруженных проблемах импорта.
                        Загрузите оставшиеся шаблоны в следующем порядке:
                                Windows агентный сбор.yaml;
                                Linux агентный сбор.yaml;
                                Windows WMI.yaml;
                                Сетевое универсальное устройство
                                    SNMP.yaml;
                                Cisco IOS SNMP.yaml;
                                Windows SNMP.yaml;
                                Linux SNMP.yaml
                                Сервер консолидации ITM-K.yaml;
                                Сервер агентов ITM-A.yaml;
                                Docker минимальный.yaml;
                                Datapk.yaml;
                                Общий ПЛК.yaml;
                                APC Smart-UPS.yaml;
                                ИБП Парус Электро.yaml;
                                Eltex MES Общий.yaml;
                                Eltex MES5448.yaml;
                                Postgresql (Jatoba).yaml;
                                MySQL.yaml;
                                Температура ЦПУ Linux.yaml;
                                Сервер Huawei RH5885H V3 (iBMC).yaml;
                                Управляемый блок розеток Rem-MC.yaml;
                                Коммутатор MOXA серии EDS.yaml.
|*|*|*|
    Создание регулярного выражения
    Для фильтрации получаемых данных рекомендуется использование регулярных выражений. 
        Для создания регулярного выражения:
                Нажмите на название категории, которая содержит регулярные выражения.
                «Сетевые интерфейсы для обнаружения».
                Откроется страница со списком регулярных выражений выбранной категории.
                Добавьте новое регулярное выражение. Для этого:
                        Тип «Результат ЛОЖЬ» означает отсутствие совпадения с регулярным
                            выражением.
                        Выражение (Miniport|Teredo) соответствует строкам,
                            которые содержат «Miniport» или «Teredo».
                                Добавление выражения
|*|*|*|
    Подготовка к использованию шаблона Postgresql (Jatoba).yaml
        В этой инструкции рассмотрена подготовка к
                использованию шаблона Postgresql (Jatoba).yaml для ОС RedOS и СУБД
                Jatoba.Для корректной работы шаблона Postgresql (Jatoba).yaml
            выполните следующие действия:
                Установите агент версии 2. Подробнее см. в разделе .
                Создайте пользователя БД postgresql для мониторинга. Для этого:
                        Перейдите в режим командной строки операционной системы, на которой
                            установлен сервер консолидации
                            консолидации
                            мониторинга.
                        Войдите в интерактивный терминал для работы с postgresql под
                            пользователем postgres:
                            sudo -u postgres psql
                        Создайте пользователя с именем zbx_monitor и
                            необходимым паролем:
                            CREATE USER zbx_monitor WITH PASSWORD '<PASSWORD>' INHERIT;
                        Задайте пользователю zbx_monitor роль
                            pg_monitor:
                            GRANT pg_monitor TO zbx_monitor;
                        Покиньте терминал:
                            \q
                Отредактируйте файл pg_hba.conf, чтобы разрешить пользователю
                    мониторинга подключение к БД: 
                        Откройте файл для редактирования:
                            vi /var/lib/jatoba/[jatoba_version]/data/pg_hba.conf
                            В этой команде jatoba_version — первая цифра в версии
                            Jatoba. 
                        Добавьте в раздел «# TYPE DATABASE USER ADDRESS METHOD» строку:
                            host all zbx_monitor localhost md5
                        Сохраните файл и выйдите из режима редактирования:
                            :wq
                Для применения настроек в файлах конфигурации перезапустите СУБД с помощью
                    команды:
                    systemctl restart jatoba-*
                В веб-интерфейсе 
                     перейдите на
                    страницу  → .
                Нажмите на имя узла сети, к которому нужно присоединить шаблон.
                Подключите шаблон к объекту мониторинга: 
                        Перейдите на вкладку «Шаблоны».
                        В разделе «Присоединение новых шаблонов» выберите шаблон
                                Postgresql (Jatoba). 
                Перейдите на вкладку «Макросы», выберите раздел «Макросы узла сети и
                    унаследованные» и отредактируйте для  указанные ниже макросы. Для редактирования
                    конкретного макроса нажмите на кнопку «Изменить» рядом с ним.
                    {$PG.URI} — tcp://localhost:10265
{$PG.USER} — zbx_monitor 
{$PG.PASSWORD} — <PASSWORD>
                            Если агент работает в контейнере, замените
                                    localhost на тот же адрес, что указан в
                                свойствах . 
                            Если агент работает не на сервере ITM, замените
                                    localhost на адрес .
                        Добавление макросов
                Нажмите на кнопку «Обновить» для сохранения изменений.
|*|*|*|
    Монтирование раздела
            Для монтирования раздела:
                Создайте пустую таблицу разделов GPT с помощью команды
                    g.
                        Результат работы команды g
                Создайте раздел с помощью команды n. 
                        Укажите номер раздела 1.
                        В качестве значения первого сектора укажите минимальное число из
                            предложенных.
                        Для записи вида «Первый сектор (2048-4685545438, default 2048)»
                            укажите значение 2048.
                        В качестве значения последнего сектора укажите максимальное число из
                            предложенных, чтобы выделить раздел на весь объем диска.
                        Для записи вида «Последний сектор + число секторов или +
                            размер{K,M,G,T,P} (2048-4685545438, default 4685545438)» укажите
                                значение 4685545438.
                        Результат работы команды p.
                        Результат работы команды mkfs -t ext4 -L storage /dev/sdb1.
                Просмотрите файловые системы и UUID в системе с помощью команды lsblk
                        -f.
                        Результат работы команды lsblk -f
                Для автоматического монтирования тома после запуска системы добавим информацию
                    в конфигурационный файл /etc/fstab:
                        Перейдите в режим редактирования файла
                            /etc/fstab:
                            vi /etc/fstab
                        Добавьте в конец файла строку:
                            /dev/sdb1 /storage ext4 defaults 0 2
                                Содержимое файла /etc/fstab
                        Сохраните изменения и закройте файл:
                            :wq
                        Результат работы команды df -hT
|*|*|*|
    Установка UDV-ITM-M на ОС РЕД ОС
        Установите ОС РЕД ОС 7.3 по инструкции от производителя. В процессе установки ОС:
        В этом разделе:
|*|*|*|
    Установка DATAPK ITM-K на ОС РЕД ОС
        Установите ОС РЕД ОС 7.3 по инструкции от производителя. В процессе установки ОС:
        В этом разделе:
|*|*|*|
    Настройка СУБД
                Создайте директорию для хранения базы данных на отдельном томе:
                    mkdir /storage/base
                Установите Jatoba до действия установки пакета-активатора в соответствии с
                    документацией разработчика СУБД Jatoba. 
                Продолжите установку пакета-активатора согласно разделу в соответствии с
                    документацией разработчика СУБД Jatoba.
|*|*|*|
    Установка сервера консолидации ПК DATAPK ITM-K
        Для установки :
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер консолидации.
                Создайте директорию для установки :
                mkdir /opt/datapkitm
                Скопируйте следующие файлы в директорию :
                        каталог env вместе с содержимым;
                        ;
                        ;
                        .
                Перейдите в директорию :
                    cd /opt/datapkitm
                Загрузите образы в операционную систему, на которой установлен сервер
                    консолидации:
                    docker load -i datapk_itm-k_[версия_сервера_консолидации].tar.gz
                Убедитесь, что адрес подсети контейнеров  не
                    используется в вашей инфраструктуре. Для этого:
                        откройте для редактирования файл
                            /opt/datapkitm/.env:
                            vi /opt/datapkitm/.env
                        найдите и при необходимости измените значение переменной .
                        Подробнее про переменную см. в разделе .
                        исправьте значения переменных, чтобы они соответствовали представленным
                            ниже:
                        listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265                          где
                                127.0.0.1 — локальный IP-адрес сервера ;
                                172.17.0.1 — IP-адрес подсети docker0.
                            IP-адреса должны быть перечислены через запятую без пробелов. 
                            Если IP-адрес подсети docker0 уже используется в вашей
                                инфраструктуре, его нужно изменить. Подробнее см. в разделе .
                Убедитесь, что часовой пояс веб-сервера в файле  соответствует текущему. Для этого:
                        перейдите в режим редактирования файла :
                            vi /opt/datapkitm/env/.web.env
                        найдите переменную ;
                            По умолчанию значение переменной
                                =Asia/Yekaterinburg.
                        если значение переменной не соответствует текущему часовому поясу,
                            измените его;
                Измените значения переменных файла .srv.env для оптимизации
                    работы сервера. Для этого:
                        перейдите в режим редактирования файла .srv.env:
                            vi /opt/datapkitm/env/.srv.env
                        раскомментируйте следующие переменные, убрав символ «#» в начале
                            строки, и измените их значения:
                                =15 — количество экземпляров
                                    пре-форков поллеров.
                                =10 — количество
                                    экземпляров пре-форков поллеров для недоступных узлов сети,
                                    включая IPMI и Java.
                                =10 — максимальное время ожидания
                                    ответа от агента, SNMP устройства или внешней проверки в
                                    секундах.
                                =5 — количество
                                    экземпляров пре-форков поллеров для работы с пассивными
                                    серверами агентов.
                                =3600 — период
                                    отправки данных конфигурации с сервера консолидации 
                                    на сервер агентов  в секундах.
                                =60 — период запроса
                                    данных истории с сервера агентов  сервером
                                    консолидации  в секундах.
                Измените значения переменных файла  для корректного обращения  к базе данных. Для этого:
                        перейдите в режим редактирования файла :
                            vi /opt/datapkitm/env/.db.env
                        измените значения следующих переменных:
                                 — порт СУБД, должен совпадать
                                    с значением переменной port в файле . 
                                 — имя пользователя базы данных
                                    (например, datapkitm).
                                 — пароль пользователя.
                                 — имя базы данных (например,
                                    datapkitm).
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        войдите в режим редактирования файла  с помощью команды:
                            vi /v|*|*|*|ar/lib/jatoba/1/data/pg_hba.conf
                        при необходимости измените настройки ограничений на подключение
                            локальных и удаленных пользователей к базам данных:
                        добавьте следующую строку в раздел «# IPv4 local connections:»
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        для базы данных datapkitm, пользователя БД
                                datapkitm, IP-адреса подсети контейнера сервера
                            консолидации по умолчанию 172.16.239.0/24 и метода аутентификации
                                md5 строка будет выглядеть следующим образом:
                            host datapkitm datapkitm 172.16.239.0/24 md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:» и измените ident на md5
                            в строке host all all 127.0.0.1/32 ident.
                                Содержимое файла 
                При необходимости настройте другие пользовательские значения переменных в файле
                        /opt/datapkitm/.env и в конфигурационных файлах из
                    директории .
                    Рекомендуемые и возможные значения переменных приведены в разделе .
                Последовательно добавьте в iptables правила, разрешающие использование портов
                    для приема данных с агентов:
                    iptables -A INPUT -p tcp --dport 10050 -j ACCEPT
iptables -A INPUT -p tcp --dport 10051 -j ACCEPT
                Убедитесь в корректности произведенных настроек межсетевого экрана:
                iptables -nL   
                Будут отображены настроенные правила межсетевого экрана. 
                        Настроенная цепочка INPUT в межсетевом экране
                Сгенерируйте сертификат для входа в веб-интерфейс:
                    domain=127.0.0.1;
mkdir -p env/nginx/certs;
openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout env/nginx/certs/nginx.key -out env/nginx/certs/nginx.crt -subj "/C=RU/CN=$domain/O=USSC"
                    Где в значении переменной  нужно указать IP-адрес
                        сервера вместо значения 127.0.0.1.
                Убедитесь в корректности значения переменной :
                        Выполните команду echo .
                            Вывод команды должен совпадать с сетевым именем .
                        Выполните команду export. Убедитесь, что переменная
                                 присутствует в выводе.
                        Если переменная отсутствует, то:
                                откройте файл /etc/profile:
                                    vi /etc/profile 
                                в открывшемся файле допишите строку echo .
                                сохраните файл и выйдите из режима редактирования:
                                    :wq
                Настройте запуск службы СУБД после службы docker. Для этого:
                        Если база данных хранится на отдельном томе, добавьте после блока
                            [Unit] блок [Service]:
                        [Service]
Environment=PGDATA=/storage/base                            Где
                                /storage/base — путь к базе данных, который был
                            настроен на шаге  раздела .
                Выполните проверку целостности неизменных исполняемых файлов с использованием
                    скрипта согласно пункту 14.1.7 документа «УЦЛК.468244.26 30. Формуляр». Порядок
                    проверки согласно Формуляру:
                        Перейдите в рабочую директорию ПК .
                        Назначьте скрипту itm_create_executable_files.sh права
                            на исполнение при помощи команды:
                            chmod +x itm_create_executable_files.sh
                            Скрипт itm_create_executable_files.sh
                                предназначен для получения копии исполняемых файлов из развернутых
                                docker-контейнеров ПК .
                        Выполните запуск скрипта:
                        ./itm_create_executable_files.sh -o ./execfiles
                            где execfiles — директория, в которую будет записан результат
                            (директории с названиями модулей-контейнеров ПК DATAPK, содержащие
                            только исполняемые файлы).
                        Выполните расчет контрольных сумм файлов дистрибутива и неизменных установленных файлов с использованием ПО «ФИКС-UNIX» согласно инструкции в «УЦЛК.468244.26 30. Формуляр».
                        Сравните полученные контрольные суммы с эталонными,  приведенными в документе «УЦЛК.468244.26 30. Формуляр».
|*|*|*|
    Порядок установки на ОС Red OS
        Если установка ОС производится с нуля:
        В этом разделе:
|*|*|*|
    Установка сервера мониторинга UDV-ITM-M на ОС РЕД ОС
                  Для установки :
                Установите СУБД Jatoba в соответствии с документацией разработчика Jatoba.
                    Перед установкой СУБД Jatoba необходимо заказать пакет установки и лицензионный
                    ключ у поставщика ПО Jatoba.  
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер .
                Рассчитайте контрольные суммы для файлов из дистрибутива по инструкции  и сравните полученные
                    контрольные суммы с эталонными, приведенными в  документе «УЦЛК.468244.26 30.
                    Формуляр».
                Создайте директорию для установки :
                    mkdir /opt/itm-k
                Скопируйте следующие файлы в директорию /opt/itm-k:
                        ;
                        ;
                        env_generator.sh;
                        iptables.
                Скопируйте файл itm_create_executable_files.sh в директорию /opt.
                Перейдите в директорию /opt/itm-k:
                    cd /opt/itm-k
                Загрузите образы в операционную систему, на которой установлен сервер :
                    docker load -i datapk_itm-k_[версия_сервера_консолидации].tar.gz
                Рассчитайте контрольные суммы для исполняемых файлов по инструкции  и сравните
                    полученные контрольные суммы с эталонными, приведенными в документе
                    «УЦЛК.468244.26 30. Формуляр».
                        cоздайте пользователя с именем datapkitm и необходимым
                            паролем:
                            CREATE USER datapkitm WITH PASSWORD '[пароль служебного пользователя]';
                        создайте базу данных datapkitm, в качестве
                            распорядителя которой указан пользователь
                            datapkitm:
                            CREATE DATABASE datapkitm OWNER datapkitm;
                        убедитесь, что база данных datapkitm создана:
                            \l
                                Список созданных БД
                        исправьте значения переменных, чтобы они соответствовали представленным
                            ниже:
                        listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265
shared_buffers = 8GBГде
                                    127.0.0.1 — локальный IP-адрес сервера ;
                                172.17.0.1 — IP-адрес подсети docker0;
                                8GB — 25% от общего объема оперативной памяти сервера.
                            IP-адреса должны быть перечислены через запятую без пробелов.
                                Если IP-адрес подсети docker0 уже
                                используется в вашей инфраструктуре, его нужно изменить. Подробнее
                                см. в разделе 
                                .
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        при необходимости измените настройки ограничений на подключение
                            локальных и удаленных пользователей к базам данных:
                        добавьте следующую строку в раздел «# IPv4 local connections:»
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        для базы данных datapkitm, пользователя БД
                                datapkitm, IP-адреса подсети контейнера сервера
                            консолидации по умолчанию 172.16.239.0/24 и метода аутентификации
                                md5 строка будет выглядеть следующим образом:
                            host datapkitm datapkitm 172.16.239.0/24 md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:» и измените ident на md5
                            в строке host all all 127.0.0.1/32 ident.
                                Содержимое файла 
                Замените файл /etc/sysconfig/iptables на файл
                        iptables из комплекта поставки:
                    mv /opt/itm-k/iptables /etc/sysconfig/
                Перейдите в каталог, содержащий compose-файлы:
                    cd /opt/itm-k
                Подготовьте сертификаты для входа в веб-интерфейс. Подробнее см. в разделе
                        .
                Настройте запуск службы СУБД после службы docker. Для этого:
                        Если база данных хранится на отдельном томе, добавьте после блока
                            [Unit] блок [Service]:
                        [Service]
Environment=PGDATA=/storage/baseГде
                                /storage/base — путь к базе данных, который был
                            настроен на шаге  раздела .
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                        Окно авторизации 
                Введите логин и пароль по умолчанию:
                        логин: datapkitm
                        пароль: datapkitm
                Откроется стартовая страница веб-интерфейса . 
                Установите на сервер агент версии 2 согласно инструкции  (за исключением п. , так как межсетевой экран уже был настроен ранее в п. - текущей
                    инструкции). 
                В файле конфигурации агента /etc/zabbix/zabbix_agent2.conf
                    установите параметр =172.16.239.0/24 (адрес подсети контейнеров 
                    ).
|*|*|*|
    Установка сервера консолидации ПК DATAPK ITM-K на ОС РЕД ОС
                Для установки :
                Установите СУБД Jatoba в соответствии с документацией разработчика Jatoba.
                    Перед установкой СУБД Jatoba необходимо заказать пакет установки и лицензионный
                    ключ у поставщика ПО Jatoba. 
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер .
                Рассчитайте контрольные суммы для файлов из дистрибутива по инструкции  и сравните полученные
                    контрольные суммы с эталонными, приведенными в  документе «УЦЛК.468244.26 30.
                    Формуляр».
                Создайте директорию для установки :
                    mkdir /opt/itm-k
                Скопируйте следующие файлы в директорию /opt/itm-k:
                        ;
                        ;
                        env_generator.sh;
                        iptables.
                Скопируйте файл itm_create_executable_files.sh в директорию /opt.
                Перейдите в директорию /opt/itm-k:
                    cd /opt/itm-k
                Загрузите образы в операционную систему, на которой установлен сервер :
                    docker load -i datapk_itm-k_[версия_сервера_консолидации].tar.gz
                Рассчитайте контрольные суммы для исполняемых файлов по инструкции  и сравните
                    полученные контрольные суммы с эталонными, приведенными в документе
                    «УЦЛК.468244.26 30. Формуляр».
                        Создайте пользователя с именем datapkitm и необходимым
                            паролем:
                            CREATE USER datapkitm WITH PASSWORD '[пароль служебного пользователя]';
                        Создайте базу данных datapkitm, в качестве
                            распорядителя которой указан пользователь
                            datapkitm:
                            CREATE DATABASE datapkitm OWNER datapkitm;
                        Убедитесь, что база данных datapkitm создана:
                            \l
                                Список созданных БД
                        Исправьте значения переменных, чтобы они соответствовали представленным
                            ниже:
                        listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265
shared_buffers = 8GBГде
                                127.0.0.1 — локальный IP-адрес сервера DATAPK ITM-K;
                                172.17.0.1 — IP-адрес подсети docker0;
                                8GB — 25% от общего объема оперативной памяти сервера.
                            IP-адреса должны быть перечислены через запятую без пробелов.
                                Если IP-адрес подсети docker0 уже
                                используется в вашей инфраструктуре, его нужно изменить. Подробнее
                                см. в разделе 
                                .
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        При необходимости измените настройки ограничений на подключение
                            локальных и удаленных пользователей к базам данных:
                        Добавьте следующую строку в раздел «# IPv4 local connections:»
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        для базы данных datapkitm, пользователя БД
                                datapkitm, IP-адреса подсети контейнера сервера
                            консолидации по умолчанию 172.16.239.0/24 и метода аутентификации
                                md5 строка будет выглядеть следующим образом:
                            host datapkitm datapkitm 172.16.239.0/24 md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:» и измените ident на md5
                            в строке host all all 127.0.0.1/32 ident.
                                Содержимое файла 
                Замените файл /etc/sysconfig/iptables на файл
                        iptables из комплекта поставки:
                    mv /opt/itm-k/iptables /etc/sysconfig/
                Перейдите в каталог, содержащий compose-файлы:
                    cd /opt/itm-k
                Подготовьте сертификаты для входа в веб-интерфейс. Подробнее см. в разделе
                        .
                Настройте запуск службы СУБД после службы docker. Для этого:
                        Если база данных хранится на отдельном томе, добавьте после блока
                            [Unit] блок [Service]:
                        [Service]
Environment=PGDATA=/storage/baseГде
                                /storage/base — путь к базе данных, который был
                            настроен на шаге  раздела .
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                        Окно авторизации 
                Введите логин и пароль по умолчанию (datapkitm/datapkitm).
                Откроется стартовая страница веб-интерфейса . 
                Установите на сервер агент версии 2 согласно инструкции  (за исключением п. , так как межсетевой экран уже был настроен ранее в п. - текущей
                    инструкции). 
                В файле конфигурации агента /etc/zabbix/zabbix_agent2.conf
                    установите параметр =172.16.239.0/24 (адрес подсети контейнеров 
                    ).
|*|*|*|
    Установка дополнительных пакетов в ОС РЕД ОС 7.3
        Для установки дополнительных пакетов:
|*|*|*|
    Настройка синхронизации с DATAPK
        Сервис синхронизации с DATAPK (далее по тексту синхронизатор с DATAPK) передает данные об
                 из ПК DATAPK v1.16, v1.17, v. 1.18 и v. 1.19,
            производит поиск и идентификацию необходимых данных и сохраняет их в . Синхронизатор помещен в контейнер и находится в основном архиве поставки.
            Для сервиса доступно как одноразовое использование, так и периодическая синхронизация по
            заданному расписанию.
        Подробнее про логику работы синхронизации с DATAPK см. в Руководстве по
                эксплуатации  в разделе «Объекты мониторинга,
                полученные в результате автоматической синхронизации с DATAPK».
        В этом разделе:
|*|*|*|
    Изменение имени сервера
        Переменная окружения , даже если она задана, не
            передается автоматически как переменная окружения в контейнер. Если переменная не
            передана, то в качестве имени сервера (hostname)  будет отображаться
            имя контейнера в виде случайного набора символов. Имя сервера присваивается при
                установке ОС и хранится в файле /etc/hostname.Чтобы имя
                сервера было присвоено контейнерам, нужно, чтобы выполнялся экспорт переменной
                окружения , значение которой берется из файла
                    /etc/hostname.По умолчанию, экспорт переменной  уже настроен, убедиться в этом можно, выполнив команду
                    export . В выводе результата команды должна быть переменная  и ее актуальное значение.
                Изменение имени сервера (hostname)
                        Перейдите в режим командной строки.
                        Перейдите в директорию с
                            контейнерами:cd /opt/itm-k
                        Остановите контейнеры:docker-compose down
                        Измените имя
                            сервера:hostnamectl set-hostname [новое имя сервера]
                        Перезагрузите ОС.
                        Запустите контейнеры:docker-compose up -d
                Экспорт переменной окружения HOSTNAME
                Выполняется в случае отсутствия переменной  в выводе
                    команды export. Для экспорта переменной:
                        Откройте файл
                            /etc/profile:vi /etc/profile
                        В конце открывшегося файла добавьте
                            строку:export HOSTNAME
                        Сохраните файл и выйдите из режима
                            редактирования::wq
                        Выйдите из режима командной строки ОС и зайдите заново. Результат
                                    шага:
                                 добавится в экспортируемые переменные.
|*|*|*|
    Нештатные ситуации и способы их устранения
        Дополнительно может потребоваться следующая информация:
                полная техническая информация о системе и логи (используйте скрипт сбора
                    детальной информации о системе, подробнее см. в разделе );
                свободное место на корневом разделе диска; используйте команду
                            df -h /.
                свободная оперативная память, текущий список процессов; используйте команду htop.
                значение Load Average;
                загрузка диска. используйте команду
                        iotop.
            В этом разделе:
|*|*|*|
    Нештатные ситуации и способы их устранения
        Дополнительно может потребоваться следующая информация:
            полная техническая информация о системе и логи (используйте скрипт сбора
                детальной информации о системе, подробнее см. в разделе );
            свободное место на корневом разделе диска; используйте команду
                df -h /.
            свободная оперативная память, текущий список процессов; используйте команду htop.
            значение Load Average;
            загрузка диска. используйте команду
                iotop.
        В этом разделе:
|*|*|*|
    Действия после сбоев и ошибок эксплуатации средства
        В этом разделе:
|*|*|*|
    Ошибка вида «An error has occurred! Check DEFAULT in /usr/lib/zabbix/wmi_cred/wmi.pw!
        rpc_s_access_denied»
                Причина
                Ошибка возникает при сборе данных с конкретного , если имена  в карточке узла сети в веб-интерфейсе и в файле
                         не совпадают.
                Способ устранения
                        В веб-интерфейсе перейдите на страницу  →
                                , кликните по имени нужного вам узла сети в
                            списке.
                        Откроется карточка узла сети.
                        В карточке узла сети найдите поле «Имя узла сети».
                        Откройте конфигурационный файл /opt/itm-k/env/wmi_cred/wmi.pw..
                        Найдите в файле  имя нужного узла сети в формате [Имя].
                        Измените имя узла сети, указанное внутри квадратных скобок в файле
                                , чтобы оно совпало со значением поля «Имя узла сети» в карточке узла
                            сети.
|*|*|*|
    Ошибка вида «Global regular expression <...> does not exist.»
                Причина
                Шаблоны ссылаются на несуществующее регулярное выражение.
                Способ устранения
                Для устранения проблемы добавьте регулярное выражение, указанное в
                    сообщении об ошибке.
                        Нажмите на кнопку «Новое регулярное выражение» в правом верхнем
                            углу.
                        Откроется страница для создания нового регулярного выражения.
                        В поле «Имя» введите название категории регулярного выражения из
                            сообщения об ошибке.
                        Если сообщение об ошибке содержит текст «Global regular expression
                            «Сетевые интерфейсы для обнаружения» does not exist.», введите в поле
                            «Имя» строку «Сетевые интерфейсы для обнаружения».
                        Добавьте одно или несколько регулярных выражений:
                                Тип «Результат ЛОЖЬ» означает отсутствие совпадения с
                                    регулярным выражением.
                                выражение ^Software Loopback Interface
                                    соответствует строке, которая начинается с «Software Loopback
                                    Interface».
                                Для создания еще одного выражения нажмите на ссылку «Добавить»
                                    и повторите шаги a — с.
                                Нажмите на кнопку «Добавить».
                            Создание нового регулярного выражения
|*|*|*|
    Большая очередь ожидающих элементов данных
            В веб-интерфейсе  при сборе данных об  через сервер агентов на странице  →  большое количество элементов
                данных, ожидающих обновления.
                Причина
                Неоптимальные значения переменных в файлах конфигурации сервера агентовагентовудаленного мониторинга и сервера консолидацииконсолидациимониторинга.
                Способ устранения
                        Убедитесь, что к   присоединен шаблон «Сервер консолидации». При необходимости
                            присоедините шаблон.
                        Убедитесь, что к   присоединен шаблон «Сервер агентов». При необходимости
                            присоедините шаблон.
                        Перейдите на страницу  → .
                        Просмотрите проблемы, которые отображаются в списке у   и  .
                        У  
                            обнаружена проблема «Процессы недоступности поллеров заняты более чем на
                            75%».
                        Нажмите левой кнопкой мыши на название проблемы.
                        В появившемся меню выберите пункт «Настройка».
                                Меню триггера
                        Откроется вкладка «Триггеры».
                        Просмотрите значение наблюдаемого параметра в поле «Выражение», чтобы
                            понять, какие переменные нужно изменить.
                        Поле «Выражение» содержит значение:
                            {datapk-itm-to-2:zabbix[process,unreachablepoller,avg,busy].avg(10m)}>75
                                Где:
                                datapk-itm-to-2 — имя сервера, 
                                zabbix[process,unreachable poller,avg,busy] — наблюдаемый
                                    параметр, 
                                avg(10m) — функция, вычисляющая среднее значение элемента данных
                                    за 10 минут. Наблюдаемый параметр содержит значение
                                        «unreachable poller», поэтому нужно изменить значения
                                        переменных, отвечающих за количество экземпляров пре-форков
                                        поллеров для недоступных узлов сети:  и .
                        Отредактируйте переменные в файле конфигурации сервера агентовагентовудаленного мониторинга.
                            Для этого:
                                Перейдите в режим командной строки сервера агентовагентовудаленного
                                        мониторинга.
                                Остановите работу контейнеров:
                                    docker-compose down
                                Откройте конфигурационный файл сервера агентовагентовудаленного мониторинга для
                                    редактирования:
                                    vi /etc/zabbix/zabbix_proxy.conf
                                Раскомментируйте строку с нужной переменной, убрав символ # в
                                    начале строки.
                                    =5
                                Увеличьте значение переменной.
                                    =8
                                Запустите работу контейнеров:
                                    docker-compose up -d
                                Перезапустите службу сервера агентовагентовудаленного мониторинга
                                    командой:
                                    systemctl restart zabbix-proxy
                        Отредактируйте переменные в файле конфигурации сервера консолидацииконсолидациимониторинга. Для
                            этого:
                                Перейдите в режим командной строки сервера консолидацииконсолидациимониторинга.
                                Перейдите в директорию :
                                    cd /opt/itm-k
                                Остановите работу контейнеров:
                                    docker-compose down
                                Откройте конфигурационный файл сервера консолидацииконсолидациимониторинга
                                    для редактирования:
                                    vi /opt/itm-k/env/.srv.env
                                Раскомментируйте строку с переменной, убрав символ # в начале
                                    строки.
                                    =5
                                Увеличьте значение переменной.
                                        Чем масштабнее проблема, тем большее значение потребуется
                                            для ее устранения.
                                        Небольшое увеличение значения не ведет к падению
                                            производительности системы даже на слабых
                                            конфигурациях.
                                        Выставление максимального значения на слабых
                                            конфигурациях ведет к критическому падению
                                            производительности системы.
                                    =15
                                Запустите работу контейнеров:
                                    docker-compose up -d
|*|*|*|
    Ошибки вида «<...>Cannot start service <...>. Bind for
        <ip_address>:<TCP/UDP_port> is ready allocated» при попытке запуска контейнеров 
            Причина
                Указанный в тексте ошибки  или -порт требуется для запуска сервиса , но занят сторонним сервисом или
                    утилитой.
                Способ устранения
                        Измените номер используемого порта для стороннего сервиса в
                            соответствующих настройках сервиса.
                        При невозможности изменения номера порта отключите сторонний
                            сервис, который занимает необходимый порт:
                                Узнайте наименование сервиса, которым занят порт, с помощью
                                    команды:
                                    netstat -tulpn | grep <номер_порта>
                                Узнайте номер процесса, к которому относится сервис:
                                    pidof <имя-сервиса>
                                Остановите процесс с полученным номером:
                                    kill -9 <номер_процесса>
                                При необходимости остановки процесса и его дочерних процессов
                                    используйте команду:
                                    killall <номер_процесса> 
                                Повторите запуск работы контейнеров .
|*|*|*|
    Ошибка сбора данных в шаблоне Postgresql (Jatoba).yaml
            При использовании шаблона Postgresql (Jatoba).yaml возникает ошибка
                вида «Connection failed: failed to connect to `host=localhost user=postgres
                database=postgres`: server error (ВАЖНО: пользователь "postgres" не прошёл проверку
                подлинности (по паролю) (SQLSTATE 28P01)).»
                Причина
                Не выполнены настройки, необходимые для корректной работы шаблона
                        Postgresql (Jatoba).yaml.
                Способ устранения
                        Выполните настройки для корректной работы шаблона по инструкции .
|*|*|*|
    Ошибка вида «Timeout while connecting to <...>.»
            В веб-интерфейсе  индикатор статуса доступности узла сети, подключенного
                по протоколу SNMP, имеет красный цвет: . При наведении курсора на индикатор появляется всплывающая подказка с ошибкой
                вида «Timeout while connecting to <...>.».
                Причина
                Превышено время ожидания ответа от узла сети.
                Способ устранения
                        Откройте командную строку.
                        Убедитесь в доступности узла сети одним из следующих способов:
                                ping XXX.XXX.XXX.XXXГде
                                        XXX.XXX.XXX.XXX — IP-адрес узла
                                    сети.Результат шага: Если отображается сообщение «Превышен интервал
                                        ожидания для запроса», связи с узлом сети нет.
                                snmpwalk -v 2c -c public XXX.XXX.XXX.XXX
                                        Где:
                                        -v 2c — версия протокола;
                                        -c public — имя commmunity;
                                        XXX.XXX.XXX.XXX — IP-адрес узла сети.
                                                Результат шага: Если в командной строке после запуска
                                                  snmpwalk отображается ошибка
                                                «Timeout: No Response from
                                                  XXX.XXX.XXX.XXX» — недостаточно
                                                времени для синхронизации сервера и узла
                                                сети. Если в командной строке после запуска
                                                  snmpwalk отображается
                                                текст «SNMPv2-MIB::sysDescr.0 = STRING:», то узел
                                                ответил на запрос. Если при этом индикатор статуса
                                                доступности в веб-интерфейсе  имеет красный
                                                цвет, сервер  закончил сессию по таймауту и не принял
                                                    запрос от узла сети.
                        Перейдите в режим командной строки операционной системы, на которой
                            установлен .
                        Перейдите в директорию itm-k: 
                            cd /opt/itm-k
                        Откройте файл конфигурации сервера с помощью команды:
                        vi env/.srv.env
                        Измените значение переменной ZBX_TIMEOUT
                        Максимальное поддерживаемое значение 30. 
                            Подробнее о назначении переменных см. в разделе .
                        Сохраните файл и запустите контейнеры командой:
                        docker-compose up -d
                        Дождитесь запуска работы всех контейнеров (3-5 минут).
                        Убедитесь, что при запуске работы контейнеров и при работе в веб-интерфейсе не возникает ошибок.
|*|*|*|
    Ошибки в логах контейнеров: "connection to database ... failed: [0] Важно: оставшиеся
        слоты подключений зарезервированы для подключения суперпользователя".
            При 1000 и более  серверу мониторинга
                не хватает доступного количества одновременных подключений к серверу базы
                данных.
                Причина
                В файле /var/lib/jatoba/1/data/postgresql.conf в переменной
                         указано недостаточное максимальное
                    количество одновременных подключений к серверу базы данных. Значение переменной
                    по умолчанию:  = 100. 
                Способ устранения
                        Остановите контейнеры ITM всех уровней, запущенных на данном сервере: 
                            docker-compose down
                        Увеличьте максимальное количество одновременных подключений к серверу
                            базы данных. Для этого: 
                                Откройте файл конфигурации Jatoba. По умолчанию это файл
                                        /var/lib/jatoba/1/data/postgresql.conf: 
                                    vi /var/lib/jatoba/1/data/postgresql.conf
                                Найдите строчку с переменной  и увеличьте ее значение.
                                Если по умолчанию установлено значение =100, увеличьте количество
                                    подключений до 200.
                                Сохраните изменения и закройте файл:
                                    :wq
                        Перезапустите службу Jatoba:
                            systemctl restart jatoba-*
                        Запустите контейнеры ITM всех уровней, установленных на данном
                            сервере:
                            docker-compose up -d
|*|*|*|
    Ошибка при импорте шаблона вида «<...> Query failed: ERROR: value too long for type
        character varying(255) <...>»
                Причина
                Ошибка возникает, когда  установлен на сервере
                    с ОС Astra Linux, если при создании БД не была указана кодировка UTF-8, а была
                    оставлена кодировка по умолчанию.
                    Ошибка при импортировании
                Способ устранения
                        Перейдите в режим командной строки ОС, на которой установлен сервер . 
                        Повысьте права пользователя до root:
                            sudo su
                        Перейдите в директорию /opt/itm-k:
                            cd /opt/itm-k
                        Остановите контейнеры:
                            docker-compose down
                        Создайте резервную копию БД <datapkitm>*:
                            pg_dump -U postgres -W datapkitm > /tmp/datapkitm.dump -p 10265 -h 127.0.0.1
                        В директории /tmp/ появится резервная копия БД
                                datapkitm.dump.
                        Удалите БД с неподходящей кодировкой:
                            psql -p 10265 -h 127.0.0.1 -U postgres postgres
DROP DATABASE datapkitm;
                                Результат удаления БД
                        Создайте БД с кодировкой UTF-8:
                            CREATE DATABASE datapkitm WITH OWNER 'datapkitm' ENCODING 'UTF8' LC_COLLATE = 'ru_RU.UTF-8' LC_CTYPE = 'ru_RU.UTF-8' TEMPLATE template0;
                                Результат создания БД с кодировкой UTF-8
                        Восстановите БД из резервной копии:
                            psql -U postgres -W datapkitm < /tmp/datapkitm.dump -p 10265 -h 127.0.0.1
                                Восстановление БД из резервной копии
                        Убедитесь, что кодировка БД сохранилась.
                            psql -p 10265 -h 127.0.0.1 -U postgres postgres
\l
                                БД с нужной кодировкой в списке
                        Запустите контейнеры из директории /opt/itm-k:
                            docker-compose up -d
                        Перейдите в веб-интерфейс . 
                        Убедитесь в наличии шаблонов и связанных с ними данных, а также в
                            возможности импорта шаблона, при котором появлялась ошибка.
                                Список шаблонов в веб-интерфейсе
|*|*|*|
Действия после сбоев и ошибок эксплуатации средства
        В этом разделе:
|*|*|*|
    Конфликт подсети контейнеров
                Причина 1
                Адрес подсети контейнеров уже используется в вашей инфраструктуре.
                Способ устранения
               Для устранения проблемы измените подсеть контейнеров
                    Docker:
                        Проверьте и при необходимости отредактируйте файл :
                                Если в файле  не задано значение переменной , добавьте в файл строку:
                                =XXX.XXX.XXX.XXX/XX
                                    Где XXX.XXX.XXX.XXX/XX — новая подсеть. 
                                Если в файле  уже указано значение переменной , задайте ей новое значение.
                        Отредактируйте файл . Для этого:
                                Войдите в режим редактирования файла  с помощью команды:
                                vi /var/lib/jatoba/[jatoba_version]/data/pg_hba.confВ
                                    этой команде jatoba_version — первая цифра
                                    версии Jatoba.
                                При использовании Jatoba 4.5 выполните
                                    команду:vi /var/lib/jatoba/4/data/pg_hba.conf
                                Измените IP-адрес и маску подсети контейнеров Docker в разделе
                                    «# IPv4 local connections:» в строке вида:
                                    host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                                Перезапустите СУБД для применения настроек:
                                    systemctl restart jatoba-*
                        Убедитесь, что в файле .db.env
                             используется корректное значение подсети для обращения к базе
                            данных:
                                Перейдите в режим редактирования файла:
                                    vi env/.db.env
                                Убедитесь, что переменная 
                                    имеет значение 172.17.0.1.
                Причина 2
                Адрес подсети docker0 используется в вашей инфраструктуре.
                Способ устранения 1
                        Остановите и удалите все контейнеры, которые не указаны в
                                docker-compose файлах:
                            docker-compose down --remove-orphans
                        Просмотрите список маршрутов одной из команд:
                                    route -n
                                        Результат работы команды route -n
                                    ip r
                                        Результат работы команды ip r
                        Убедитесь, что в списке маршрутов отсутствуют контейнерные подсети,
                            кроме docker0. Для этого просмотрите список контейнерных подсетей
                            командой: 
                            docker network ls
                        При наличии в списке других подсетей найдите их идентификаторы сети в
                            столбце NETWORK ID.
                                Список контейнерных подсетей
                             В приведенном выше списке идентификатор сети c именем bridge —
                            bf34584f056d.
                        При необходимости удалите контейнерные подсети, кроме docker0: 
                            docker network rm [идентификатор подсети]
                            Рекомендуется удалять контейнерную подсеть только
                                в случае проблем с инициализацией.
                        Создайте файл /etc/docker/daemon.json.
                        Добавьте в файл адрес узла сети и маску сети.
                            {
"bip": "172.17.77.1/24"
}
                        Перезапустите службу docker:
                            systemctl restart docker
                        Убедитесь, что в файле .db.env используется значение
                            новой подсети для обращения к базе данных:
                                Перейдите в режим редактирования файла:
                                    vi env/.db.env
                                Убедитесь, что значение переменной  равно значению docker0, заданному
                                    на шаге .
                        Отредактируйте файл pg_hba.conf. Для этого:
                                Перейдите в режим редактирования файла
                                        pg_hba.conf с помощью команды:
                                    vi /var/lib/jatoba/[jatoba_version]/data/pg_hba.conf
                                В этой команде jatoba_version — первая цифра
                                    версии Jatoba.
                                При использовании Jatoba 4.5 выполните
                                    команду:vi /var/lib/jatoba/4/data/pg_hba.conf
                                Измените IP-адрес и маску подсети контейнеров Docker в разделе
                                    «# IPv4 local connections:» в строке вида:
                                    host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        Отредактируйте файл postgresql.conf. Для этого: 
                                Перейдите в режим редактирования файла
                                        postgresql.conf:
                                vi /var/lib/jatoba/[jatoba_version]/data/postgresql.confВ
                                    этой команде jatoba_version — первая цифра
                                    версии Jatoba.
                                При использовании Jatoba 4.5 выполните
                                    команду:vi /var/lib/jatoba/4/data/pg_hba.conf
                                Измените значение переменной listen_addresses
                                    в разделе «CONNECTIONS AND AUTHENTICATION», чтобы оно
                                    соответствовало представленному ниже: 
                                listen_addresses = '127.0.0.1,172.17.77.1'Где:
                                        127.0.0.1 — локальный IP-адрес сервера ;
                                        172.17.77.1 — IP-адрес подсети docker0, заданный на шаге
                                                 .
                                Перезапустите СУБД для применения настроек:
                                    systemctl restart jatoba-*
                Способ устранения 2
                        Удалите все Docker-контейнеры, включая запущенные контейнеры:
                            docker rm -f $(docker ps -a -q)
|*|*|*|
    Сбой инициализации модуля управления парольными политиками «securityprofile»
            После перезагрузки сервера СУБД или перезапуска службы Jatoba не удается зайти в
                веб-интерфейс  с корректными учетными данными. При
                попытке авторизации в логах СУБД содержится ошибка «FATAL: Extension securityprofile
                need to be initialized by superuser.». Логи находятся в директории
                    /var/lib/jatoba/[jatoba_version]/data/log, где
                    jatoba_version — первая цифра версии Jatoba. 
                Причина
                Модуль управления парольными политиками «securityprofile» не был повторно
                    инициализирован после перезагрузки сервера СУБД или перезапуска службы
                    Jatoba.
                Способ устранения
                Повторно инициализируйте модуль управления парольными политиками
                    пользователей СУБД «securityprofile». Для этого:
                        Войдите в интерактивный терминал для работы с postgresql под
                            пользователем postgres:
                            sudo -u postgres psql -p 10265 -h 127.0.0.1 -U [имя пользователя] [имя базы]
                            Где:
                                -u postgres — пользователь ОС;
                                -p 10265 — порт, через который будет
                                    произведено подключение к базе данных;
                                -h 127.0.0.1 — подключение к хосту
                                    127.0.0.1;
                                -U [имя пользователя] — подключение от имени
                                    указанного пользователя.
                        Инициализируйте модуль «securityprofile» c помощью команды:
                            SELECT SECURITYPROFILE.SYNCHRONIZE();
                        Покиньте терминал:
                            \q
|*|*|*|
    Недоступен узел сети, подключенный через прокси
            В веб-интерфейсе сервера мониторинга индикатор статуса доступности узла сети,
                подключенного через сервер удаленного мониторингаагентовагентов, имеет
                красный цвет. 
                Причина 1
                Ошибка в настройках объекта мониторинга или свойств его подключения.
                Способ устранения
                        Проверьте настройки  и
                            параметры подключения к серверу мониторинга. Подробнее см. в разделе
                                .
                Причина 2
                Параметры конфигурации еще не переданы из сервера  и
                    не применены сервером .
                Способ устранения
                    Дождитесь применения измененной конфигурации на сервере .
                        По умолчанию, сервер 
                            передает обновления конфигурации на подключенные к нему серверы  каждые 900
                            секунд.
                    Совет
                        На этапах пусконаладки может потребоваться более частое обновление
                            конфигураций на серверах . Для этого
                            измените значение переменной  в файле env/.srv.env:
                        Перейдите в режим командной строки сервера мониторинга. 
                        Перейдите в директорию /opt/itm-k:
                            cd /opt/itm-k 
                        Откройте файл конфигурации сервера с помощью команды:
                            vi env/.srv.env
                        Уменьшите значение переменной . 
                            Диапазон допустимых значений — 1-604800 секунд. Подробнее см. в
                                разделе .
                        Запустите контейнеры:
                            docker-compose up -d
                            По окончании пусконаладочных работ установите значение переменной
                                в соответствии с проектным решением.
|*|*|*|
    Действия после сбоев и ошибок эксплуатации средства
            В этом разделе:
                    ;
|*|*|*|
    Ошибка при запуске агента вида «cannot load os dependent items: strconv.Atoi: parsing
        "имя_службы": invalid syntax»
                Причина
                Способ устранения
|*|*|*|
    Ошибка вида «Get value from agent failed: cannot connect to [<...>:10500]: [4]
        interrupted system call»
            В веб-интерфейсе индикатор статуса доступности агента имеет красный цвет: .
                При наведении курсора на индикатор появляется всплывающая подказка с ошибкой вида
                «Get value from agent failed: cannot connect to [<...>:10500]: [4] interrupted
                system call».
                Причина
                Проблемы с подключением к порту 10050.
                Способ устранения для агентов Linux
                        Проверьте наличие и статус порта 10050 на межсетевом экране
                                 и сетевого
                            оборудования. Для этого:
                                Перейдите в режим командной строки /сетевого оборудования и введите
                                    команду:
                                        Если используется межсетевой экран iptables:
                                            iptables -nL
                                        Если используется межсетевой экран firewall-cmd:
                                            firewall-cmd --permanent --list-all
                                Перейдите в режим командной строки компьютера, на котором
                                    установлена утилита nmap, и введите команду:
                                    nmap -p 10050 [IP-адрес узла сети]
                                 Для узла сети с IP-адресом 10.51.16.6 команда будет
                                    выглядеть следующим образом:
                                    nmap -p 10050 10.51.16.6  
                        При необходимости откройте порт 10050/. Для этого:
                                Перейдите в режим командной строки /сетевого оборудования.
                                Если используется межсетевой экран iptables:
                                        Остановите работу
                                            контейнеров:docker-compose down
                                        Добавьте правило:
                                                iptables -I INPUT [номер строки] -p tcp --dport 10050 -j ACCEPT  Данное правило должно быть
                                                добавлено в цепочку INPUT до правила, запрещающего
                                                входящие пакеты:
                                                REJECT all -- 0.0.0.0/0    reject-with icmp-host-prohibited
                                                В обратном случае правила не сработают. 
                                        Примените
                                            правило:service iptables save
                                        Убедитесь в корректности
                                            настройки:iptables -nL
                                        Запустите контейнеры
                                            командой:docker-compose up -d
                                Если используется межсетевой экран firewall-cmd:
                                        Добавьте правило:
                                            firewall-cmd --permanent --zone=public --add-port=10050/tcp 
                                        Примените
                                            правило:firewall-cmd –reload
                                        Убедитесь в корректности
                                            настройки:firewall-cmd --permanent --list-all
                        Убедитесь в корректности настроек сети на сетевом оборудовании.
                        Убедитесь в сетевой доступности между  и . Для этого:
                                Перейдите в режим командной строки .
                                Выполните команду:
                                    ping [IP-адрес ОМ]
                        При отсутствии сетевой доступности между узлами обратитесь к
                            системному администратору организации.
                        Убедитесь, что служба агента запущена, либо перезапустите службу для
                            применения настроек из конфигурационного файла. Для перезапуска
                            службы:
                                Перейдите в режим командной строки агента.
                                Перезапустите службу агента:
                                    systemctl restart zabbix-agent
                        Убедитесь, что на 
                            установлен агент. Подробнее см. в разделе .
                Способ устранения для агентов Windows
                        Убедитесь, что служба Zabbix Agent 2 запущена. Для этого:
                                Одновременно нажмите клавиши Win+R.
                                Введите команду services.msc.
                                Нажмите на кнопку «ОК». 
                                Найдите в появившемся окне в списке служб Zabbix Agent 2 и
                                    убедитесь, что служба выполняется.
                                Если служба Zabbix Agent 2 не выполняется, перезапустите ее.
                                    Для этого: 
                                        Выделите строку со службой.
                                        Нажмите правой кнопкой мыши на выделенной строке.
                                        В контекстном меню выберите «Перезапустить».
                        Создайте правило брандмауэра. Для этого:
                                Запустите PowerShell или CMD от имени администратора.
                                Если вы запустили PowerShell, выполните команды: 
                                        Для создания правила для входящих
                                            соединений:New-NetFirewallRule -DisplayName "Allow TCP 10050 and 10051 for Zabbix 2" -Direction Inbound -Action Allow -EdgeTraversalPolicy Allow -Protocol TCP -LocalPort 10050-10051 –Service "Zabbix Agent 2"
                                        Для создания правила для исходящих
                                            соединений:New-NetFirewallRule -DisplayName "Allow TCP 10050 and 10051 for Zabbix 2" -Direction Outbound -Action Allow -Protocol TCP -LocalPort 10050-10051 –Service "Zabbix Agent 2"
                                Если вы запустили CMD, выполните команду:
                                    netsh advfirewall firewall add rule name="Zabbix Agent 2" dir=in action=allow localport=10050-10051 protocol=TCP enable=yes
                        Если на клиенте установлен антивирус, при необходимости отредактируйте
                            его параметры.
|*|*|*|
    Ошибка вида «Cannot connect to <...>: Timeout.»
            В веб-интерфейсе  индикатор статуса доступности узла
                сети по протоколу  имеет красный цвет: . При наведении курсора на индикатор появляется всплывающая подcказка с ошибкой
                вида «Cannot connect to <...>: Timeout.».
            В качестве причин недоступности узла сети рассмотрены следующие:
                    Закрыты порты 161/ и 162/ на межсетевом экране узла сети.
                    Превышено время ожидания ответа от узла сети.
                Способ устранения
                Способ устранения
                        Перейдите в режим командной строки сервера  или другого компьютера с
                                 Linux и установленными пакетами
                            net-snmp и net-snmp-utils.
                        Отредактируйте значение переменной  в
                            соответствии с найденным значением таймаута. Для этого:
                                Перейдите в режим командной строки сервера .
                                Остановите работу контейнеров:
                                    docker-compose down
                                Перейдите в режим редактирования файла
                                        .srv.env:
                                    vi /opt/itm-k/env/.srv.env
                                Увеличьте значение переменной .
                                    Максимальное возможное значение  равно 30.
                                Сохраните файл и выйдите из режима редактирования:
                                    :wq
                                Запустите контейнеры командой:
                                    docker-compose up -d
|*|*|*|
    Ошибка вида «Get value from agent failed: ZBX_TCP_READ() failed: [104] Connection reset
        by peer»
            В веб-интерфейсе  индикатор статуса доступности агента имеет красный
                цвет: . При наведении курсора на индикатор появляется
                всплывающая подказка с ошибкой вида «Get value from agent failed: ZBX_TCP_READ()
                failed: [104] Connection reset by peer».
                Причина
                Служба агента не была перезапущена после внесения изменений в файл
                    конфигурации.
                Способ устранения для агентов Linux
                        Перезапустите службу агента:
                        systemctl restart zabbix-agent
                Способ устранения для агентов Windows
|*|*|*|
    Ошибка вида «Get value from agent failed: cannot connect to <...>: [111] Connection
        refused»
            В веб-интерфейсе  индикатор статуса доступности агента имеет красный
                цвет: . При наведении курсора на индикатор появляется
                всплывающая подказка с ошибкой вида «Get value from agent failed: cannot connect to
                <...>: [111] Connection refused».
            В качестве причин проблемы с доступностью агента рассмотрены следующие:
                Служба агента не запущена.
                Мониторинг агента, поддерживающего подключение только через DNS, осуществляется
                        через IP.
                Причина 1
                Служба агента не запущена.
                Способ устранения для агентов Linux
                        Запустите службу агента:
                            systemctl start zabbix-agent
                Способ устранения для агентов Windows
                        Запустите службу агента:
                                Одновременно нажмите клавиши Win+R.
                                Введите команду services.msc.
                                Найдите в появившемся окне в списке служб Zabbix Agent и
                                    выделите строку с ней.
                                Нажмите правой кнопкой мыши на строке со службой Zabbix
                                    Agent.
                                В контекстном меню выберите «Запустить».
                Причина 2
                Мониторинг агента, поддерживающего подключение только через DNS, осуществляется
                    через IP.
                Способ устранения
                        В веб-интерфейсе  перейдите на страницу →.
                        Нажмите на имя узла сети с ошибкой.
                        Откроется страница редактирования узла сети.
                        Убедитесь, что мониторинг агента осуществляется через IP-адрес:
                                заполнено поле «IP-адрес»;
                                выбран режим «Подключиться через IP».
                        Заполните поле «DNS имя».
                        Выберите режим «Подключиться через DNS».
                        Нажмите на кнопку «Обновить».
|*|*|*|
    Ошибка вида «Received empty response from Zabbix Agent at <...>. Assuming that agent
        dropped connection because of access permissions»
            В веб-интерфейсе  индикатор статуса доступности агента имеет красный
                цвет: . При наведении курсора на индикатор появляется
                всплывающая подказка с ошибкой вида «Received empty response from Zabbix Agent at
                <...>. Assuming that agent dropped connection because of access permissions».
                Причина
                Некорректный IP-адрес сервера консолидацииконсолидациимониторинга, к которому подключен агент, в файле конфигурации агента в
                    переменной .
                Способ устранения для агентов Linux
                        Откройте файл конфигурации агента для редактирования:
                            vi /etc/zabbix/zabbix_agentd.conf
                        Перезапустите службу агента:
                        systemctl restart zabbix-agent
                Способ устранения для агентов Windows
                        Перейдите в директорию, куда был установлен агент. По умолчанию это
                            директория C:\Program Files\Zabbix agent.
                        Откройте с помощью текстового редактора файл zabbix_agentd.conf.
                        Сохраните изменения.
|*|*|*|
    Список действий пользователя, о которых отправляются события в SIEM
                Cписок действий пользователя в ITM-VM, о которых отправляются события в
                        SIEM
                            Действие
                            Значение поля resource
                            Значение поля action
                            Примечание
                            Создание сервера мониторинга
                            itm_servers
                            0
                            Обновление сервера мониторинга
                            itm_servers
                            1
                            Удаление сервера мониторинга
                            itm_servers
                            2
                            Изменение параметров подключения к серверу мониторинга
                            itm_servers
                            2
                            Успешная авторизация пользователя
                            login
                            3
                            Не успешная авторизация пользователя
                            login
                            7
                                В поле user — придет ip-адрес клиента.
                                В случае, если клиент неправильно ввел логин/пароль 5 раз подряд,
                                    то он его IP-адрес будет заблокирован на 5 минут, в таком случае
                                    в поле severity придет большее значение, чем для простой не
                                    успешной авторизации.
                            Создание пользователя
                            users
                            0
                            Обновление пользователя
                            users
                            1
                            Блокировка пользователя
                            users
                            1
                            Разблокировка пользователя
                            users
                            1
                            Удаление пользователя
                            users
                            2
                            Создание правила уведомления
                            notification_rule
                            0
                            Обновление правила уведомления
                            notification_rule
                            1
                            Удаление правила уведомления
                            notification_rule
                            2
                            Обновление базовых настроек
                            base_settings
                            1
                            Обновление настроек периода сбора данных
                            sync_settings
                            1
                            Обновление длительности сессии
                            session_settings
                            1
|*|*|*|
    Типы данных в событиях для передачи в SIEM
         В этом разделе рассмотрены типы данных, которые используются в сообщениях событий для
            отправки в SIEM:
                Объекты:
                        user_action;
                        problem;
                        Host.
                Строки следующих типов:
                        Enum Action;
                        Enum ItmmResource;
                        Enum ZabbixResource;
                        Enum Severity;
                        Enum ITMLevel.
            Объект user_action
                            Поле
                            Описание
                            Обязательность
                            Тип данных
                            Пример
                            action
                            Действие пользователя
                            ДА
                            string Enum Action
                            "action": "LOGIN"
                        client_ip_address
                        IP-адрес клиента
                        ДА
                        string
                        "client_ip_address":"192.168.243.162"
                            item_id
                            Идентификатор объекта, который изменил пользователь в  или
                            Zabbix
                            НЕТ
                            string
                            "item_id":"1"
                            item_name
                            Название объекта, который изменил пользователь в  или
                            Zabbix
                            НЕТ
                            string
                            "item_name": "itm"
                            itm_k_hostname
                            Имя хоста ,
                            если событие о действии пользователя пришло с  (zabbix)
                                НЕТ для событий с ,
                                ДА для событий с 
                            string
                            "itm_k_hostname": "datapkitm-vm-test"
                            itm_k_ip
                            IP-адрес ,
                            если событие о действии пользователя пришло с  (zabbix)
                                НЕТ для событий с ,
                                ДА для событий с 
                            string
                            "itm_k_ip": "192.168.243.162"
                            resource
                            Ресурс, который изменял пользователь
                            ДА
                            string Enum ZabbixResource или Enum
                                ItmmResource
                            "resource": "USERS"
                            severity
                            Критичность
                            ДА
                            string Enum Severity
                             "severity": "WARNING" Если клиент неправильно ввел
                                логин/пароль 5 раз подряд и его IP-адрес был заблокирован на 5
                                минут, в поле severity придет значение 4
                            user
                            Имя пользователя в  или 
                            ДА
                            string
                            "user": "itm"Если клиент пытается ввести логин
                                несуществующего пользователя, то в событии в поле user  будет
                                указано то значение, которое вводит клиент
                        details
                        Текстовое описание событий
                        ДА
                        string
                        "details":"Пользователь не существует"
                        note
                        Текстовое описание событий
                        ДА
                        string
                        "note":"Ошибка входа "
            Объект problem
                        Поле
                        Описание
                        Обязательность
                        Тип данных
                        Примечание
                        Пример
                        eventid
                        Идентификатор события в zabbix.
                        ДА
                        int
                        "eventid": 27925
                        objectid
                        Идентификатор тригера.
                        ДА
                        int
                        "objectid": 18312
                        severity
                        Критичность.
                        ДА
                        string Enum Severity
                            "severity": "WARNING"
                        acknowledged
                        Проблема была помечена пользователем, как подтвержденная.
                        ДА
                        bool
                        "acknowledged": false
                        clock
                        Время создания проблемы в timestamp в секундах, наносекунды придут в
                            поле ns.
                        ДА
                        int
                        "clock": 1627524433
                        ns
                        Наносекунды времени создания проблемы, основная часть придет в поле
                                clock.
                        ДА
                        int
                        "ns": 639844032
                        name
                        Название тригера, который сработал.
                        ДА
                        string
                        "name": "2-Average-High CPU utilization"
                        opdata
                        Рабочие данные с расширенными макросами.
                        ДА
                        string
   |*|*|*|                     Содержит пустую строку, если тригер не передает расширенные
                            макросы.
                        "opdata": "Текущая утилизация: 0.7178 %"
                        hosts
                        Список узлов, привязанных к проблеме.
                        ДА
                        List[Host]
                            Проблема может быть привязана сразу к нескольким событиям. 
                            Если тригер был удален, то придет пустой список. 
                            Обычно приходит список из одного элемента.
                        "hosts": [{"hostid": "10770", "host": "ADM-PC"}]
                        r_eventid
                        Идентификатор события восстановления.
                        ДА
                        int
                        Равен 0, если не было события восстановления.
                        "r_eventid": 1201
                        r_clock
                        Время создания события восстановления в формате timestamp.
                        ДА
                        int
                        Равен 0, если не было события восстановления.
                        "r_clock": 1627524433
                        r_ns
                        Наносекунды времени создания события восстановления.
                        ДА
                        int
                        Равен 0, если не было события восстановления.
                        "r_ns": 639844032
                        itm_k_hostname
                        Имя хоста , если событие о
                            действии пользователя пришло с 
                            (zabbix).
                            НЕТ для событий с ,
                            ДА для событий с 
                        string
                        "itm_k_hostname": "datapkitm-vm-test"
                        itm_k_ip
                        IP-адрес , если событие о
                            действии пользователя пришло с 
                            (zabbix).
                            НЕТ для событий с ,
                            ДА для событий с 
                        string
                        "itm_k_ip": "192.168.243.162"
                        action
                        Действие, совершенное с проблемой. Возможные значения:
                                "created" — создание проблемы;
                                "updated" — обновление проблемы;
                                "solved" — решение проблемы.
                        ДА
                        string
                        "action": "created"
            Объект Host
                        Поле
                        Описание
                        Обязательность
                        Тип данных
                        Пример
                        hostid
                        Идентификатор узла сети в zabbix.
                        ДА
                        string
                        "hostid": "10770"
                        host
                        Имя хоста.
                        ДА
                        string
                        "host": "ADM-PC"
                Типы строк
                        Тип данных
                        Допустимые значения
                        Enum Action
                                "ADD"
                                "UPDATE"
                                "DELETE"
                                "LOGIN"
                                "LOGOUT"
                                "ENABLE"
                                "DISABLE"
                        Enum ItmmResource
                                "login"
                                "itm_servers"
                                "users"
                                "base_settings"
                                "sync_settings"
                        Enum ZabbixResource
                                USER
                                CONFIGURATION_OF_ZABBIX
                                MEDIA
                                HOST
                                ACTION
                                GRAPH
                                GRAPH_ELEMENT
                                USER_GROUP
                                APPLICATION
                                TRIGGER
                                HOST_GROUP
                                ITEM
                                IMAGE
                                VALUE_MAP
                                SERVICE
                                MAP
                                SCREEN
                                WEB_SCENARIO
                                DISCOVERY_RULE
                                SLIDE_SHOW
                                SCRIPT
                                PROXY
                                MAINTENANCE
                                REGULAR_EXPRESSION
                                MACRO
                                TEMPLATE
                                TRIGGER_PROTOTYPE
                                ICON_MAPPING
                                DASHBOARD
                                EVENT_CORRELATION
                                GRAPH_PROTOTYPE
                                ITEM_PROTOTYPE
                                HOST_PROTOTYPE
                                AUTOREGISTRATION
                                MODULE
                        Enum Severity
                                "NOT_CLASSIFIED"
                                "INFORMATION"
                                "WARNING"
                                "AVERAGE"
                                "HIGH"
                                "DISASTER"
                        Enum ITMLevel
                                "ITM-M"
                                "ITM-K"
|*|*|*|
    Что нового?
        Основные изменения в ПО сервера  v. 1.6.0:
                Новый раздел «Журнал событий», в журнале фиксируются:
                        события о подключении, изменении подключения и удаления подключения
                            сервера мониторинга к ;
                        события, связанные с учетными записями пользователей ;
                        события, связанные с информацией и сервере ;
                        события о проблемах с подключенные серверов мониторинга.
                Раздел «Панель информации»:
                        новые графики: общее количество объектов мониторинга по
                            проблемности;
                        выбор серверов мониторинга (филиал и ТО) для просмотре данных на
                            графиках.
                Настройки:
                        возможность полностью удалять ранее добавленные настройки подключения к
                            LDAP и SMTP-серверам;
                        отключение email-оповещений;
                        настройка периода хранения журнала событий.
                Общие улучшения интерфейса и детализации информации в других разделах.
        Более подробная информация об изменениях указана в таблице ниже.
                Изменения  в версии
                    1.6.0.0
                            Категория
                            Изменения в продукте
                            Разделы документации
                            Совместимость
                            Серверы мониторинга
                            Скрипты, переменные
                            SIEM
|*|*|*|
    Переменные файла .env
        Файл .env содержит переменные окружения.
                Переменные для корректной работы ITM-VM
                            Название переменной
                            Описание
                            Обязательность
                            Значение по умолчанию (жирным) или пример
                        Да
                        docker-compose.release.yaml
                            Выбор уровня детализированности логов, может принимать одно из
                            перечисленных значений:
                                ERROR — логирование ошибок.
                                WARN — логирование ошибок и предупреждений.
                                INFO — логирование ошибок, предупреждений и сообщений.
                                DEBUG — логирование всех событий при отладке.
                                TRACE — логирование всех событий. Не
                                        рекомендуется использовать значение TRACE, так как это
                                        существенно уменьшает производительность приложения.
                            Да
                            INFO
                Переменные для настройки Jatoba
                            Название переменной
                            Описание
                            Обязательность
                            Значение по умолчанию (жирным) или пример
                            Да
                            host.docker.internal
                            Да
                            10265
                            Да
                            itmm_user
                            Да
                            password
                Переменные для настройки 
                            Название переменной
                            Описание
                            Обязательность
                            Значение по умолчанию (жирным) или пример
                        Нет
                        443
                        Нет
                        80
            Переменные для настройки сетей
                        Название переменной
                        Описание
                        Обязательность
                        Значение по умолчанию (жирным) или пример
                        Да
                        172.15.0.0/24
                        Да
                        172.15.0.1
|*|*|*|
    Переменные файла .itmm_password_secret_key
                Переменные для настройки 
                            Название переменной
                            Описание
                            Обязательность
                            Значение по умолчанию (жирным) или пример
                                При повторном изменении или утере значения
                                    переменной 
                                    локальные пользователи не смогут войти в веб-интерфейс ,
                                    перестанет работать синхронизация с ,  и .
                            Да
                            2Fe2e6y9jliJ1wT4ISfVs8imdIAtrllT
|*|*|*|
    Роли пользователей и доступные им интерфейсы
                        Роль
                        Список доступных для роли интерфейсов
                        Список доступных страниц
                        Пользователь
                        Интерфейс авторизации
                        Интерфейс управления
                                 — доступны просмотр и
                                    работа с графиками.
                                 — только просмотр
                                    списка и карточки сервера.
                                 — просмотр списков
                                    и карточек.
                                 — просмотр списка и
                                    карточек ИТ-услуг.
                                 — просмотр списка и
                                    карточки со списком событий.
                                 →  — просмотр списка
                                    и карточек правил; создание, изменение, включение, выключение и
                                    удаление собственных правил оповещений.
                                Окно «Свойства пользователя» при нажатии на кнопку  в нижнем
                                    левом углу — просмотр параметров своей учетной записи, изменение
                                    пароля.
                                Окно «О системе» при нажатии на кнопку  в нижнем левом углу — просмотр
                                    информации
                        Администратор
                        Интерфейс авторизации
                        Интерфейс управления
                        Все разделы со всем функционалом в полном объеме
                        Техническая
                        Техническая учетная запись предназначена для
                            доступа смежных систем к данным по API. Не рекомендуется использовать
                            техническую учетную запись для доступа в веб-интерфейс, так как
                            корректная работа при этом не гарантируется.
                        Оператор мониторинга
                        Интерфейс авторизации
                        Интерфейс управления
                                 — доступны просмотр и
                                    работа с графиками. 
                                Окно «Свойства пользователя» при нажатии на кнопку   в нижнем левом углу — просмотр
                                    параметров своей учетной записи.
                                Окно «О системе» при нажатии на кнопку   в нижнем левом углу — просмотр
                                    информации.
                            Для этой роли время пользовательской сессии не ограничено
|*|*|*|
    Глоссарий
|*|*|*|
    Содержимое файла iptables
        *filter
        #Политики по умолчанию. Сбрасываем все входящие и пересылаемые пакеты. Исходящие
            разрешаем
        :INPUT DROP [0:0]
        :FORWARD DROP [0:0]
        :OUTPUT ACCEPT [0:0]
        #Разрешаем установленные соединения
        -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
        #Разрешаем все icmp-соединения
        -A INPUT -p icmp -j ACCEPT
        #Разрешаем все соединения от используемых подсетей docker. Неиспользуемые
            закомментировать.
        #itm-vm
        -A INPUT -s 172.15.0.0/24 -j ACCEPT
        #itm-k
        -A INPUT -s 172.16.239.0/24 -j ACCEPT
        #itm-a
        -A INPUT -s 172.16.240.0/24 -j ACCEPT
        #Дефолтная подсеть docker
        -A INPUT -s 172.17.0.0/24 -j ACCEPT
        #Разрешаем все соединения на loopback-интерфейс (для подключения консолью к jatob'е)
        -A INPUT -i lo -j ACCEPT
        #Разрешаем соединения на определённые порты с внешнего интерфейса ens32
        #ssh
        -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
        #web (для itm-k или itm-vm)
        -A INPUT -p tcp -m tcp --dport 80 -j ACCEPT
        -A INPUT -p tcp -m tcp --dport 443 -j ACCEPT
        #Доп. порты web для инсталляции itm-k + itm-vm
        #-A INPUT -p tcp -m tcp --dport 8080 -j ACCEPT
        #-A INPUT -p tcp -m tcp --dport 8443 -j ACCEPT
        #zabbix сервер (для itm-k или itm-a)
        -A INPUT -p tcp -m tcp --dport 10051 -j ACCEPT
        #snmp traps (для itm-k или itm-a) 
        -A INPUT -p udp -m udp --dport 162 -j ACCEPT
        #snmp (при необходимости внешнего мониторинга)
        #-A INPUT -p udp -m udp --dport 161 -j ACCEPT
        #zabbix агент (при необходимости внешнего мониторинга)
        #-A INPUT -p tcp -m tcp --dport 10050 -j ACCEPT
        #Всё остальное запрещаем (TCP сбрасываем. UDP - порт недоступен)
        -A INPUT -p tcp -j REJECT --reject-with tcp-reset
        -A INPUT -p udp -j REJECT --reject-with icmp-port-unreachable
        -A INPUT -f -j DROP
        #По умолчанию закрываем пересылку пакетов. Docker сам добавит нужные правила
        -A FORWARD -p tcp -m tcp --tcp-flags SYN,RST SYN -j TCPMSS --clamp-mss-to-pmtu
        -A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT
        -A FORWARD -j REJECT --reject-with icmp-host-unreachable
        COMMIT
|*|*|*|
    Полный список изменений в новой версии UDV-ITM-VM
        На странице представлен полный список изменений  версии 1.7.0.0 (по задачам, для внутреннего использования).
                        Раздел
                        Тип
                        Описание изменений
                        ИТ-услуги
                        Ошибка
                        Серверы мониторинга
                        Ошибка
                        Серверы мониторинга
                        Ошибка
                        Скрипты, переменные
                        Задача
                        Внешний вид
                        Ошибка
                        Отчет о проблемах
                        Задача
                            Изменен шаблон письма с отчетом о проблемах:
                                Добавлены столбцы с нумерацией строк и состоянием
                                    проблемы.
                                Добавлена строка с информацией об общем количестве событий и
                                    о количестве нерешенных проблем
                        Отчет о проблемах
                        Задача
                            Добавлено наименование оповещения в текст письма с отчетом о
                                проблемах
                        Роли пользователей
                        Задача
                        Роли пользователей
                        Задача
                        Email-оповещения, внешний вид
                        Задача
                        Переменные, основные настройки
                        Задача
                        Серверы мониторинга
                        Задача
                        Серверы мониторинга
                        Задача
                            Добавлено автоматическое обновление до новой версии сервера ,
                                подключенного к . После обновления сбор данных с  продолжится
                        Серверы мониторинга
                        Задача
                            Добавлено автоматическое обновление до новой версии сервера Zabbix,
                                подключенного к . После обновления сбор данных с Zabbix продолжится
                        Серверы мониторинга
                        Задача
                        Проблемы, серверы мониторинга, объекты мониторинга
                        Задача
                        Объекты мониторинга
                        Задача
                        Объекты мониторинга
                        Задача
                            На странице :
                                исключено дерево филиалов и ,
                                    теперь по умолчанию в списке отображаются все
                                    ;
                                добавлена возможность фильтрации  по филиалу и
                        Объекты мониторинга
                        Задача
                            Добавлен столбец «Тип » в таблицу на странице 
                        Объекты мониторинга
                        Задача
                        Добавлен столбец «Ссылки» в таблицу на странице 
                        Объекты мониторинга
                        Задача
                            Добавлен счетчик количества  на странице 
                        Объекты мониторинга
                        Задача
                            Добавлена возможность просмотра наиболее критичных проблем
                                выбранного  при
                                нажатии на значение в столбце «Проблемы» на странице 
                        Проблемы
                        Задача
                            Изменен счетчик записей на странице 
                        Проблемы
                        Задача
                            Добавлена возможность сортировки по длительности проблем на
                                странице 
                        Проблемы
                        Задача
                        Добавлена возможность фильтрации списка по состоянию проблем на
                            странице 
                        Проблемы
                        Задача
                            Добавлена возможность фильтрации списка по объектам мониторинга на
                                странице 
                        Проблемы
                        Задача
                            Добавлена возможность поиска   в фильтре «Объект» на странице
                        Оповещения
                        Задача
                        Администрирование, журнал событий
                        Задача
                        Объекты мониторинга, внешний вид
                        Ошибка
                        Внешний вид
                        Задача
                        Обновлен внешний вид окна удаления правила оповещения
                        Внешний вид
                        Задача
                        Обновлен внешний вид окна удаления сервера
                        Внешний вид
  |*|*|*|                      Задача
                        Обновлен внешний вид окна очистки настроек LDAP
                        Внешний вид, панель информации
                        Задача
                            Изменен тип графика «Количество объектов мониторинга по
                                статусу»
                        Внешний вид, панель информации
                        Задача
                        Изменен тип графика «Количество объектов мониторинга по проблемности»
                        Внешний вид, панель информации
                        Задача
                        Изменены пояснения к графику «Количество объектов мониторинга по
                            статусу»
                        Внешний вид, панель информации
                        Задача
                        Изменены пояснения к графику «Количество объектов мониторинга по
                            проблемности»
                        Внешний вид, панель информации
                        Задача
                        Внешний вид, панель информации
                        Задача
                            Изменен внешний вид графика «Изменение количества объектов
                                мониторинга»
                        Внешний вид, панель информации
                        Задача
                            Изменен внешний вид графика «Изменение количества проблем»
                        Внешний вид, панель информации
                        Задача
                            Добавлена возможность изменения размера графика «Количество
                                объектов мониторинга по статусу»
                        Внешний вид, панель информации
                        Задача
                                Добавлена возможность изменения размера графика «Количество
                                    объектов мониторинга по проблемности»
                        Внешний вид, панель информации
                        Задача
                                Добавлена возможность изменения размера графика «Изменение
                                    количества объектов мониторинга»
                        Внешний вид, панель информации
                        Задача
                                Добавлена возможность изменения размера графика «Количество
                                    нерешенных проблем по важности»
                        Внешний вид, панель информации
                        Задача
                                Добавлена возможность изменения размера графика «Изменение
                                    количества проблем»
                        Панель информации
                        Задача
                        Панель информации
                        Задача
                        Панель информации, фильтры
                        Задача
                        Объекты мониторинга
                        Задача
                            В таблице на странице 
                                столбец «Филиал/ТО» разделен на два: «Филиал» и «»
                        Объекты мониторинга
                        Задача
                            В таблице на странице :
                                    добавлена возможность сортировки по филиалу;
                                    изменены настройки сортировки по умолчанию
                        Объекты мониторинга, серверы мониторинга
                        Задача
                                Добавлена возможность просмотра окон «Свойства сервера агентов» и
                                    «Свойства сервера мониторинга» на страницах , .
                                Добавлена возможность просмотра окна «Свойства сервера агентов»
                                    при нажатии в любом месте строки конкретного  на странице 
                        Внешний вид
                        Задача
                            Обновлен внешний вид окна свойств сервера мониторинга
                        Внешний вид
                        Задача
                        Обновлен внешний вид окна изменения свойств сервера
                            мониторинга
                        Внешний вид
                        Задача
                        Обновлен внешний вид окна информации об ИТ-услуге
                        Внешний вид
                        Задача
                        Обновлен внешний вид окна настройки сбора данных
                        Внешний вид
                        Задача
                        Обновлен внешний вид окна просмотра информации об объекте
                            мониторинга
                        Внешний вид
                        Задача
                        Обновлен внешний вид окна очистки настроек email-оповещений
                        Внешний вид
                        Задача
                        Обновлен внешний вид окна подтверждения удаления пользователя
                        Внешний вид
                        Задача
               |*|*|*|         Обновлен внешний вид окна подтверждения изменения периода
                            неактивности пользователя для блокировки сеанса
                        Внешний вид
                        Задача
                        Изменено отображение процесса загрузки данных на странице 
                        Внешний вид
                        Задача
                        Изменено отображение процесса загрузки данных на странице 
                        Внешний вид
                        Задача
                        Изменено отображение процесса загрузки данных на странице 
                        Внешний вид
                        Задача
                        Изменено отображение процесса загрузки данных на странице 
                        Внешний вид
                        Задача
                        Изменено отображение процесса загрузки данных на странице 
                        Внешний вид
                        Задача
                        Изменен внешний вид карточки проблемы на странице 
                        Внешний вид
                        Задача
                        Изменено отображение процесса загрузки страницы авторизации
                        Внешний вид
                        Ошибка
                        Исправлено отображение полосы прокрутки при загрузке данных
                        Фильтры, объекты мониторинга
                        Задача
                        Фильтры, проблемы
                        Задача
                        Добавлена возможность отмены сразу всех фильтров на странице 
                        Внешний вид
                        Задача
                        Изменен внешний вид таблиц при отсутствии данных
                        Внешний вид
                        Задача
                        Изменен внешний вид таблиц при возникновении ошибки 502
                        Внешний вид, объекты мониторинга
                        Задача
                        Изменено отображение состояния в карточке  для объектов мониторинга на техническом
                            обслуживании
                        Синхронизация
                        Ошибка
                        Исправлена ошибка синхронизации метаданных
                        ИТ-услуги
                        Ошибка
                        Исправлена ошибка, возникавшая при попытке пользователя включить
                            ИТ-услугу, отключенную администратором
                        Фильтры, проблемы
                        Задача
                        Добавлена возможность фильтрации по  на странице 
                        Панель информации
                        Ошибка
                        Исправлена ошибка, при которой некорректно отображались подписи к
                            графикам на странице 
                        Внешний вид, серверы мониторинга
                        Задача
                        Во всплывающем окне со статусами синхронизаций на странице  параметр «Системные
                            свойства» переименован в «Свойства сервера мониторинга»
                        Внешний вид
                        Задача
                        Добавлено оповещение «Сервер не отвечает» при отсутствии ответа от
                            сервера в течение 30 секунд
                        Правила оповещений
                        Задача
                        Добавлена иконка, которая показывает состояние работоспособности
                            канала Email-оповещений на странце 
                        Серверы мониторинга
                        Задача
                        Добавлена возможность внеочередного сбора данных с сервера
                            мониторинга на странице 
                        Серверы мониторинга
                        Задача
                        Добавлена возможность свернуть или развернуть сразу все записи в
                            таблице на странице 
                        Серверы мониторинга
                        Задача
                        Добавлена информация о серверах удаленного мониторинга в таблицу на
                            странице 
                        Серверы мониторинга
                        Задача
                        Добавлена возможность просмотра карточки сервера удаленного
                            мониторинга на странице 
                        SIEM
                        Задача
                        Изменено событие о неуспешном входе в систему: если указанный при
                            попытке входа пользователь не существует, информация об этом
                            записывается в поле details объекта user_action
                        SIEM
                        Задача
                        Добавлена возможность настройки подключения к SIEM на странице  → 
                        Объекты мониторинга
                        Задача
                        Серверы мониторинга
                        Задача
|*|*|*|
    Механизм интеграции с SIEM
        Интеграция с SIEM происходит на уровне администрации . Для интеграции
            должно выполняться одно из условий:
                На сервере  происходит действие
                    пользователя, которое ведет к каким-либо изменениям в
                    системе.или
                 получает проблемы и
                    действия пользователей с сервера  в процессе синхронизации. 
        При интеграции с SIEM  создает для проблемы или действия событие
            соответствующего типа:
                AuditLog — для всех действий пользователя в  и , которые ведут к каким-либо изменениям в
                    системе;
                Problems — для всех проблем с .
            Подробнее см. в разделе .
|*|*|*|
    Формат событий для передачи в SIEM
        Передача событий в SIEM разрабатывалась для ПО Ankey SIEM.  отправляет событие
            в SIEM в виде сообщения. 
        Типы событий:
                Действия пользователей, ведущие к изменению (AuditLog). Подробнее см. в разделе
                        .
                Проблемы сервера мониторинга (Problems).
            Заголовок сообщения
            В заголовке сообщения все поля имеют значение по умолчанию, кроме следующих:
                    PRI — это поле для всех событий одинаково, так как не несет важной
                        информации. 
                    fqdn(hostname) — hostname и IP-адрес  в формате
                    {hostname}-{ip}. Например,
                        10.51.30.99-develop99.
        Время, указанное в заголовке — это время появления события.
            Сообщение
            Сообщение — список полей и значений в формате . Поля сообщения описаны в таблице ниже. 
                Поля сообщения
                            Поле
                            Описание
                            Обязательность
                            Тип данных
                            Пример
                            created_at
                            Timestamp в utc, когда сообщение было создано в .
                            ДА
                            int
                            "created_at" : 1635310595
                            itm_level
                            Уровень ITM, с которого пришло событие.
                            ДА
                                string Enum ITMLevel
                                    "ITM-M"
                                    "ITM-K"
                            "itm_level":"ITM-K"
                            user_action
                            Объект, который содержит информацию о действии
                                пользователя.
                            НЕТ, но в событии должен обязательно быть передан объект
                                user_action или problem, причем только один из них.
                            Объект user_action
                            "user_action": {"user": "itm", "severity": "INFORMATION",
                                "action": "LOGIN", "resource": "LOGIN", "item_id": "1", "item_name":
                                "itm"}}
                            problem
                            Объект, который содержит информацию о проблеме.
                            НЕТ, но в событии должен обязательно быть передан объект
                                user_action или problem, причем только один из них.
                            Объект problem
                            "problem": {"itm_k_hostname": "datapkitm-vm-test", "itm_k_ip":
                                "192.168.243.162", "eventid": 27925, "objectid": 18312,
                                "acknowledged": false, "clock": 1627524433, "ns": 639844032, "name":
                                "2-Average-High CPU utilization", "severity": "WARNING", "opdata":
                                "", "hosts": [], "r_eventid": null, "r_clock": null, "r_ns": null,
                                "correlationid": null}}
        Подробное про типы данных см. в разделе .
|*|*|*|
    Окно добавления пользователя
    Перейти к окну добавления пользователя можно на странице  при нажатии на кнопку «Добавить пользователя». В окне
        необходимо выбрать один из вариантов создания пользователя: 
            «Создать локального пользователя»
                    этот вариант установлен по умолчанию при открытии формы создания
                        пользователя;
                    если выбран этот вариант, то отображаются поля окна создания локального
                        пользователя. 
                    Добавление локального пользователя
            «Создать пользователя из LDAP»
                    если выбран этот вариант, то отображаются поля формы создания пользователя
                        из LDAP;
                    этот пункт активен только если включен режим интеграции с LDAP.
                    Добавление пользователя из LDAP
|*|*|*|
    Что нового?
        Обновления в текущей версии документации:
                Обновлены документы:
                Добавлены документы:
        В версии 1.4.0.0 добавлены новые функции:
                На странице :
                        Добавлена возможность отключения автоматического сбора данных с сервера
                            мониторинга на период пусконаладки или технического обслуживания.
                        Для филиалов добавлено отображение имени DATAPK, подключенного к серверу
                            мониторинга.
                        В таблицу  добавлено
                            отображение информации об  и о
                            техническом обслуживании объектов мониторинга.
                        Добавлена возможность внепланового запроса данных об объектах
                            мониторинга с сервера .
                        Добавлена кнопка для обновления страницы.
                На странице  добавлена возможность
                    просмотра имени DATAPK, подключенного к серверу мониторинга.
                На странице  добавлена возможность просмотра
                    списка событий проблемы.
                Страница настроек интеграций переименована в .
                На странице  добавлена возможность
                    настройки периодичности получения с серверов мониторинга системных журналов и
                    системных свойств.
                На странице  добавлена возможность
                    просмотра и изменения роли пользователя.
                На странице  добавлена возможность настройки
                    подключения к LDAP-серверу.
                На странице  добавлена возможность настройки
                    email-оповещений.
                В файл .env добавлены переменные: 
|*|*|*|
    Что нового?
        В версии 1.4.0.1 исправлена ошибка, при которой не отправлялись события о проблемах в
            SIEM.
        Обновления в текущей версии документации:
            Обновлены документы:
            Добавлены документы:
|*|*|*|
    Описание функций
        В этом разделе:
|*|*|*|
    Панель информации
        Раздел основного меню  содержит информацию об
            объектах мониторинга и нерешенных проблемах в виде графиков. Данные графиков собираются
            суммарно по всем серверам мониторинга.
        Данные графиков автоматически обновляются каждую минуту. В верхнем правом углу страницы
            указана дата и время последнего обновления. 
        В фильтре «Филиал/ТК» в верхнем левом углу можно выбрать филиалы и , для которых будут отображаться все графики на странице. Для этого
            установите чекбоксы рядом с нужными объектами в списке и нажмите на области вне фильтра,
            чтобы применить изменения. 
                Выбор филиалов и ТК, для которых будут отображаться данные на
                    графиках
            По умолчанию показаны графики для всех филиалов и входящих в них . При выборе филиала входящие в него  не
            выбираются автоматически. Выбор  доступен независимо от
            того, выбран ли филиал, к которому он относится. Если у филиала 5 или больше вложенных
                , становятся доступны кнопки:
                «Выделить все» — нажмите, чтобы выбрать все ,
                    входящие в филиал.
                «Снять выделение» — нажмите, чтобы отменить выбор всех , входящих в филиал.
            Выбор объектов работает только для данных, полученных после обновления или
                установки  версии 1.6 или выше. Данные,
                накопленные за время работы  до обновления версии,
                отображаются только суммарно по всем серверам мониторинга и .
            Графики  по проблемности будут
                отображаться только для данных, полученных после обновления или установки  версии 1.6 или выше. Данные, накопленные за
                время работы  до обновления версии, на графиках не
                отображаются.
            Перемещение графиков
            Вы можете изменить местоположение графика на странице. Для этого:
                    Наведите курсор на иконку 
                        в верхнем правом углу области с графиком.
                    Зажмите левую кнопку мыши и потяните область с графиком для
                        перемещения.
            Изменение размера графиков
            Вы можете изменить размер любого из графиков. Для этого:
                    Наведите курсор на иконку  в нижнем левом углу области с графиком.
                    Зажмите левую кнопку мыши и потяните область с графиком для изменения
                        размера.
            Выбор отображаемых графиков
            По умолчанию на странице  отображаются
                следующие графики:
                    Количество объектов мониторинга по статусу;
                    Количество объектов мониторинга по проблемности;
                    Изменение количества объектов мониторинга;
                    Количество нерешенных проблем по важности;
                    Изменение количества проблем.
                Вы можете изменить набор отображаемых графиков. Для этого:
                    Нажмите на кнопку «Виджеты» в правом верхнем углу.
                    В появившемся списке: 
                            Установите чекбоксы рядом с виджетами, которые хотите
                                отображать.
                            Снимите чекбоксы рядом с виджетами, которые хотите скрыть.
                        Пример выбора виджетов из списка
                    Нажмите на , чтобы закрыть панель со списком виджетов.
                В текущей реализации настройки выбора отображаемых графиков сбрасываются при
                    обновлении страницы и при переходе на другую страницу.
            Количество объектов мониторинга по статусу
            График, показывающий распределение  по
                статусу на данный момент времени. 
                    График распределения ОМ по статусу
                Над графиком указано общее количество  и количество  на техобслуживании. Области разного цвета
                обозначают количество  в определенном
                    статусе:
                    зеленый цвет —  в статусе
                        «Мониторинг»;
                    красный цвет —  в статусе
                        «Деактивирован»;
                    серый цвет —  в статусе
                        «Недоступен».
                Под графиком указано количество 
                в каждом статусе.
            Количество объектов мониторинга по проблемности
            График, показывающий распределение  по
                наличию у них проблем на данный момент времени. 
                    График распределения ОМ по проблемности
                Над графиком указано общее количество  и количество  на техобслуживании. Области разного цвета
                обозначают количество : 
                    зеленый цвет —  без
                        проблем;
                    красный цвет —  с
                        проблемами.
                Под графиком указано количество 
                каждой проблемности.
        Изменение количества объектов мониторингаВ разделе «Изменение
            количества объектов мониторинга» отображаются разные графики в зависимости от выбора
            значения над графиком.
                    Если выбрать значение «По статусу», отображается график, показывающий
                        изменение количества  в разных
                        статусах относительно указанного промежутка времени. Данные на графике
                        отображаются с момента подключения сервера мониторинга.
                            График изменения количества объектов мониторинга относительно
                                времени по статусу
                        Справа над графиком можно выбрать временной промежуток для отображения
                            данных. При переходе на другую страницу или перезагрузке текущей
                            страницы сохраняется последний выбранный пользователем временной
                            промежуток. Пики графика показывают количество , зафиксированное в ко|*|*|*|нце каждого
                            временного промежутка.Пример: Для временного
                            промежутка длиной 5 минут (с 11:30 до 11:35) будет зафиксировано то
                            количество , которое
                            актуально в 11:35. 
                                Количество ,
                                    зафиксированное в конце временного промежутка
                        На графике на горизонтальной оси указано время, на вертикальной оси —
                            количество . При
                            наведении курсора на точку графика отображается всплывающая подсказка со
                            следующей информацией:
                                дата или время для выбранной точки графика;
                                статус и количество  в этом статусе в указанный момент времени.
                            С помощью чекбоксов над графиком можно выбрать статусы
                             для отображения. По
                        умолчанию включено отображение  во всех статусах. Для отключения отображения  в определенном статусе отмените выбор
                        чекбокса слева от названия этого статуса. 
                    Если выбрать значение «По проблемности», отображается график, показывающий
                        изменение количества 
                        относительно указанного промежутка времени по проблемам. Данные на графике
                        отображаются с момента подключения сервера мониторинга. 
                            График изменения количества объектов мониторинга относительно
                                времени по проблемам
                            Справа над графиком можно выбрать временной промежуток для
                                отображения данных. Пики графика показывают количество
                                    , зафиксированное
                                в конце каждого временного промежутка. 
                        Пример: Для временного промежутка длиной 5 минут (с
                            16:00 до 16:05) будет зафиксировано то количество , которое актуально в 16:05. 
                            Количество ,
                                зафиксированное в конце временного промежутка
                        На графике на горизонтальной оси указано время, на вертикальной оси
                            — количество . При
                            наведении курсора на точку графика отображается всплывающая подсказка со
                            следующей информацией:
                                дата или время для выбранной точки графика;
                                количество  без
                                    проблем и с проблемами, а также суммарное количество
                                         в указанный
                                    момент времени.
                            С помощью чекбоксов над графиком можно выбрать проблемность
                             для отображения. По
                        умолчанию включено отображение  любой проблемности. Для отключения отображения  с наличием или отсутствием проблем отмените
                        выбор соответствующего чекбокса. 
            Количество нерешенных проблем по важности
            Круговая диаграмма, показывающая распределение нерешенных проблем по важности на
                данный момент времени. 
                    Нерешенные проблемы по важности
                В центре графика указано общее количество нерешенных проблем. Области разного
                цвета обозначают количество проблем определенной важности, при наведении курсора на
                каждую область появится всплывающая подсказка с названием уровня важности проблемы.
                Справа от диаграммы указано количество проблем каждого уровня важности.
        Изменение количества проблемГрафик, показывающий количество
            нерешенных проблем относительно времени по важности. Данные на графике отображаются с
            момента подключения сервера мониторинга.
                 График изменения количества проблем
            Справа над графиком можно выбрать временной промежуток для отображения данных.
                При переходе на другую страницу или перезагрузке текущей страницы сохраняется
                последний выбранный пользователем временной промежуток. На графике на
                горизонтальной оси указано время, на вертикальной оси — количество проблем. Данные
                графика отображаются суммарно: значения по вертикальной оси соответствуют сумме
                проблем разной степени важности. Чтобы узнать точное количество проблем
                определенного уровня важности, наведите курсор на точку графика для отображения
                всплывающей подсказки со следующей информацией:
                    дата или время для выбранной точки графика;
                    уровень важности проблемы и количество проблем этого уровня в указанный
                        момент времени;
                    общее количество проблем в указанный момент времени.
                Пики графика показывают количество проблем, зафиксированное в конце каждого
                временного промежутка. Пример:Для временного промежутка длиной
                1 час (с 10:21 до 11:21) будет зафиксировано то количество проблем, которое
                актуально в 11:21. 
                    Количество проблем, зафиксированное в конце временного промежутка
                С помощью чекбоксов над графиком можно выбрать уровни важности проблем для
            отображения. По умолчанию включено отображение проблем всех уровней важности. Для
            отключения отображения проблем определенного уровня важности отмените выбор чекбокса
            слева от названия этого уровня важности. 
        Чтобы наблюдать за графиками длительное время без необходимости совершения действий для
            продления сессии, рекомендуется создать пользователя с ролью «Оператор мониторинга».
            Подробнее см. в разделах  и .
|*|*|*|
    Журнал событий
        Страница  →  содержит список событий и информацию о них. 
        Над списком событий выводится название «Журнал событий» и кнопка обновления данных на
            странице . Через 1 минуту рядом с кнопкой появляется счетчик времени
            с момента обновления страницы. Время отображается только в минутах.
        В списке отображаются следующие типы событий:
            События, связанные с серверами мониторинга.
            События о проблемах с подключенных серверов мониторинга. Этот тип включает в себя
                события о создании, изменении критичности или закрытии проблемы.
            События, связанные с сервером . Этот тип включает в себя
                события об изменении общих сведений о  и события об изменении периода сбора
                данных.
            События об учетных записях сервера . Этот тип включает в себя события о создании,
                изменении, удалении, блокировке и разблокировке пользователя.
        В списке отображаются следующие свойства событий:
                Время — дата и время создания события (используется часовой пояс сервера
                    источника события).
                Важность — уровень критичности события: 
                        ;
                        ; 
                        ; 
                        ;
                        ; 
                        .
                Действие — действие пользователя или событие проблемы.
                Наименование — наименование события, объекта доступа или триггера.
                Данные — дополнительное описание.
                Объект — имя объекта мониторинга, с которым связана проблема. Это поле
                    заполняется только для событий о проблемах.
                Пользователь — пользователь, совершивший действие. Это поле заполняется только
                    для действий пользователя.
                Сервер — IP-адрес сервера источника события.
            Список событий
        Для просмотра полного списка событий используются вертикальная прокрутка списка
            справа.
        По умолчанию события отсортированы по времени: самые новые события отображаются в верху
            списка.
|*|*|*|
    Проблемы объектов мониторинга
        Раздел  отображает информацию обо всех проблемах
            объектов мониторинга со всех серверов уровней филиалов  и
            Zabbix и серверов уровня технологических комплексов .
            Сервер  получает от серверов мониторинга 
             и Zabbix данные обо всех проблемах  периодически по расписанию. 
        В этом разделе:
|*|*|*|
    Просмотр карточки проблемы
        Карточка проблемы появляется при нажатии в любом месте строки конкретной проблемы, кроме
            значений в столбцах «Филиал», «» и «Объект». Карточка
            содержит список событий проблемы.
        Все поля окна выводятся в режиме просмотра без возможности изменения.
            Карточка проблемы
        В окне выводится следующая информация:
                Текстовое описание проблемы.
                Таблица со списком событий по данной проблеме. Таблица содержит колонки:
                        Время — время возникновения проблемы в формате ДД.ММ.ГГГГ ЧЧ:ММ;
                        Время восстановления — время, когда проблема была решена, в формате
                            ДД.ММ.ГГГГ ЧЧ:ММ;
                        Состояние — состояние проблемы. Доступные значения:
                                Проблема;
                                Решено.
                        Длительность — длительность проблемы в формате ХХ д ХХ ч ХХ м;
                        Подтверждено — была ли проблема подтверждена. Доступные значения:
                                Да;
                                Нет.
                            Для подтверждения проблемы необходимо перейти на сервер мониторинга
                                 на страницу «Проблемы».
                            Рекомендуется отмечать как подтвержденные те проблемы, которые уже
                            просмотрены и проанализированы. Также пользователь может оставить
                            комментарий к подтвержденной проблеме. Например, написать о том, что
                            работает над проблемой или предложить варианты решения.   
                    В таблице отображается не более 10 событий. Если событий более 10,
                        внизу окна выводится надпись «Показаны 10 событий. Полный список доступен на
                        сервере мониторинга». На сервер мониторинга можно перейти по ссылке
                        «Подробнее о проблеме».
                Cсылка на страницу с деталями события проблемы на сервере мониторинга.
|*|*|*|
    Список проблем объектов мониторинга
        Список проблем выводится при нажатии в боковом меню на раздел . Для просмотра полного списка проблем используются
            вертикальная прокрутка списка справа.
            Список проблем объектов мониторинга
        Над списком выводится строка общей информации и фильтры.
            Общая информация
            Строка общей информации содержит:
                Счетчик проблем. Если никакие фильтры не применены, счетчик показывает общее
                    количество проблем. Если применены какие-либо фильтры, счетчик показывает
                    количество отфильтрованных проблем/общее количество проблем.
                Кнопку обновления страницы  — при нажатии на кнопку происходит обновление
                    информации о проблемах. При обновлении выбранные фильтры не сбрасываются.
                Количество минут, прошедшее с момента последнего обновления информации о
                    проблемах. Этот параметр появляется через 1 минуту после последнего
                        обновления страницы.
            Фильтры
            На странице есть следующие фильтры:
                «Филиал/ТК» — позволяет отобразить все  выбранных филиалов или .При нажатии на поле фильтра появляется выпадающий список c
                        имеющимися филиалами и . 
                        Фильтр «Филиал/ТК»
                «Объект» — позволяет отобразить проблемы определенных объектов
                        мониторинга.При нажатии на поле фильтра появляется выпадающий список с
                        доступными . 
                            Фильтр «Объект»
                        По умолчанию в этом списке отображаются все . Если проблемы уже отфильтрованы по филиалу, то
                    в списке будут отображаться только  выбранных филиалов и подключенных к ним .Над списком находится строка поиска. Для поиска конкретного объекта
                        начните вводить его название в строку поиска и нажмите на нужный вариант из
                        найденных соответствий. Поиск объектов в списке имеет следующие особенности:
                            не зависит от регистра;
                            осуществляется по любой части слова;
                            результат обновляется после каждого ввода символа.
                «Важность» — позволяет отобразить проблемы с определенным уровнем важности.
                        При нажатии на поле фильтра появляется выпадающий список c уровнями
                        важности. 
                            Фильтр «Важность»
                «Состояние» — позволяет отобразить проблемы в определенном состоянии.При
                        нажатии на поле фильтра появляется выпадающий список c состояниями
                            проблемы.
                            Фильтр «Состояние»
            В списках фильтров можно выбрать одно или несколько значений. Чтобы закрыть список и
                применить фильтр, после выбора всех нужных значений кликните вне области фильтра.
                Чтобы отменить выбор конкретного значения, еще раз кликните по этому значению в
                выпадающем списке. Чтобы сбросить примененный фильтр целиком, нажмите на кнопку
                     в области фильтра. Чтобы сбросить сразу все выбранные
                фильтры, нажмите на кнопку 
                справа от фильтров.
                При обновлении страницы в браузере или переходе на другую
                    страницу выбранные фильтры будут сброшены. При обновлении страницы с помощью
                    кнопки  («Обновить данные») фильтры не сбрасываются.
            Сортировка
            Проблемы в списке можно отсортировать по времени, важности и длительности. По
                умолчанию проблемы отсортированы по времени (сверху самые новые). Одновременно можно
                отсортировать проблемы только по одному столбцу. 
            Сортировка проблем с одинаковой важностью или длительностью работает следующим
                    образом:
                    Если выполнена сортировка по важности/длительности по убыванию, то проблемы
                        с одинаковой важностью/длительностью будут дополнительно отсортированы по
                        времени по убыванию.
                    Если выполнена сортировка по важности/длительности по возрастанию, то
                        проблемы с одинаковой важностью/длительностью будут дополнительно
                        отсортированы по времени по возрастанию.
            При обновлении страницы в браузере или переходе на другую
                страницу выбранная сортировка будет сброшена. При обновлении страницы с помощью
                кнопки  («Обновить данные») сортировка не сбрасывается.
            Свойства проблем ОМ
            В списке отображаются следующие свойства проблем ОМ:
                Время — дата и время фиксации проблемы сервером мониторинга.
                Важность — уровень критичности проблемы: 
                        Уровни важности проблем
                Состояние:
                                    Требует решения 
                                    Проблема решена
                Филиал — наименование филиала. При нажатии на значение этого столбца появится
                    окно свойств сервера мониторинга. Подробнее см. в разделе .
                 — наименование .
                    При нажатии на значение этого столбца появится окно свойств сервера агентовагентовудаленного мониторинга. Подробнее см. в разделе
                        .
                Объект — имя узла сети. При нажатии на значение этого столбца появится окно с
                    информацией об объекте мониторинга. Подробнее см. в разделе .
                Проблема — наименование проблемы.
                Длительность — время с момента обнаружения проблемы.
                Подтверждено — признак подтверждения проблемы пользователем сервера
                    мониторинга.
|*|*|*|
    Изменение свойств подключенного сервера мониторинга
            Для изменения свойств подключенного сервера мониторинга: 
                Перейдите в раздел .
                Нажмите на кнопку «Настройка»  в списке серверов или на кнопку «Изменить» в окне
                    просмотра информации о подключенном сервере.
                    Подробнее про окно информации о сервере см. в разделе .
                Появится окно изменения свойств сервера мониторинга. 
                Измените свойства сервера:
                    Свойства полей соответствуют описанию на странице .
                        Наименование филиала;
                        IP-адрес;
                        Порт;
                        Логин;
                        Пароль;
                        Описание.
                        Окно изменения свойств сервера мониторинга
                    Полное описание свойств сервера см. в разделе .
                Нажмите «Сохранить» для сохранения измененных значений. 
                Если поля в карточке не менялись, то кнопка недоступна для нажатия.
|*|*|*|
    Включение автоматического сбора данных с сервера мониторинга
            Для включения автоматического сбора данных с сервера мониторинга:
                Нажмите на кнопку  для возобновления автоматического сбора данных с
                    сервера мониторинга.
                Нажмите на кнопку «Сохранить».
|*|*|*|
    Просмотр информации о подключенном сервере мониторинга
        Окно просмотра информации о подключенном сервере появляется:
                при нажатии в любом месте строки конкретного сервера мониторинга на странице
                        ;
                при нажатии на значение столбца «Филиал» на страницах  и .
            На страницах  и  все поля карточки выводятся в режиме просмотра без
            возможности изменения.
            Окно просмотра информации о подключенном сервере
        В окне выводится информация о подключенном сервере:
            Наименование сервера;
            Версия ПО — версия подключенного сервера  или Zabbix;
            Наименование филиала;
            Доступность — актуальный статус сервера;
            Сбор данных — результат синхронизаций этого сервера. Возможные значения:
                    Без ошибок — все типы синхронизаций успешны;
                    Нестабильно — синхронизация хотя бы одного типа завершена с ошибкой или ни
                        разу не выполнилась;
                    Отсутствует — все типы синхронизаций завершены с ошибкой или не
                        выполнялись;
                 При наведении курсора на иконку  отображается всплывающая подсказка, где указан
                    статус последней синхронизации и серверное время на момент ее окончания. Если
                    какая-либо из задач синхронизации еще ни разу не завершилась, то на месте
                    статуса и времени синхронизации ставится прочерк. 
                        Подсказка с задачами синхронизации
            Последняя синхронизация — дата и время последнего обновления информации о
                сервере;
            ID — идентификатор сервера  в базе данных сервера ;
            IP-адрес;
            Порт;
            DATAPK — имя DATAPK, подключенного к серверу мониторинга;
            Описание;
            Таблица с параметрами конфигурации сервера мониторинга. В таблице отображаются
                основные параметры актуальной конфигурации сервера:
                    Узлы сети: 
                            Всего — общее количество узлов сети; 
                            Активно — все узлы сети, которые активны для мониторинга на сервере
                                     или Zabbix, в том числе
                                недоступные; 
                            Неактивно — только те узлы сети, которые деактивированы
                                администратором на сервере 
                                или Zabbix.
                    Шаблоны — общее количество шаблонов в столбце «Всего».
                    Элементы данных:
                            Всего;
                            Активно; 
                            Неактивно.
                    Триггеры:
                            Всего;
                            Активно; 
                            Неактивно.
                     ИТ-услуги — общее количество ИТ-услуг в столбце «Всего».
                    Проблемы — общее количество проблем (как решенных, так и нерешенных),
                        которые хранятся в данный момент на сервере . Значение выводится в столбце «Всего»
                        и соответствует количеству проблем этого филиала на странице .
        При переходе по ссылке «Перейти к серверу» открывается страница сервера мониторинга.
        При нажатии на кнопку «Изменить» выполняется переход к окну изменения свойств
            сервера.
|*|*|*|
    Удаление подключенного сервера мониторинга
                Перейдите в раздел .
                Нажмите на кнопку «Удалить»  для удаления сервера мониторинга.
                Появится модальное окно «Удаление сервера».
                Нажмите «Удалить» для подтверждения действия.
                        Окно «Удаление сервера»
                При удалении сервера мониторинга из системы удаляются связанные с ним
                         и проблемы этих
                        .
|*|*|*|
    Серверы мониторинга
        Раздел основного меню  содержит список
            подключенных серверов мониторинга. 
            Список серверов мониторинга
        Строка информации над списком серверов содержит следующие элементы:
            Название «Серверы мониторинга».
                Кнопка обновления — при нажатии на кнопку осуществляется обновление данных
                на странице с сохранением настроенного пользователем представления. Через 1 минуту
                рядом с кнопкой появляется счетчик времени с момента обновления страницы. Время
                отображается только в минутах.
                Блок общей информации о серверах. Серверов мониторинга:
                    активных — отображает количество активных подключенных серверов;
                    всего — отображает общее количество подключенных серверов.
                Кнопка «Добавить сервер» — при нажатии на кнопку появляется окно добавления
                нового сервера мониторинга (см.п. ).
            Кнопка «Настройка сбора данных» — при нажатии на кнопку появляется окно настройки
                периодичности получения данных от подключенных серверов мониторинга  (см.п. ).  
            Строка поиска — предназначена для осуществления поиска по полям «Филиал», «Сервер»,
                «IP-адрес», «Объектов», «Проблем» всех серверов мониторинга, в том числе не
                отображаемых на данной странице (если список серверов занимает несколько
                страниц).
            Кнопка «Свернуть все»/«Развернуть все»: 
                    Если количество записей в таблице меньше 20, то при открытии страницы все
                        записи развернуты, кнопка находится в состоянии «Свернуть все» и позволяет
                        свернуть все записи в таблице.
                    Если количество записей в таблице больше 20, то при открытии страницы все
                        записи свернуты, кнопка в состоянии «Развернуть все»  и позволяет развернуть
                        все записи в таблице.
            В таблице отображается список подключенных серверов мониторинга. Если к серверу
            мониторинга подключен хотя бы один сервер удаленного мониторинга, то в таблице в начале
            строки с этим сервером мониторинга отображается кнопка , а ниже отображаются дополнительные строки с подключенными
            серверами удаленного мониторинга.
                Чтобы скрыть строки с подключенными серверами удаленного мониторинга, нажмите на
                    кнопку . При этом вид кнопки изменится на .
                Чтобы развернуть дополнительные строки с серверами удаленного мониторинга,
                    нажмите на кнопку . При этом вид кнопки изменится на .
            По умолчанию строки с подключенными серверами удаленного мониторинга
            развернуты.
        В таблице отображаются следующие основные свойства серверов:
                Филиал. Значение этого свойства зависит от того, информация о каком сервере
                указана в строке:
                    для сервера мониторинга — наименование филиала, где размещен сервер;
                    для сервера удаленного мониторинга — наименование объекта из свойств сервера
                            ;
                Сервер — наименование сервера;
                Доступность — статус сервера мониторинга:
                    Активен — подключенный сервер мониторинга нормально функционирует. Статус
                        присваивается, если при последнем обмене информацией с сервером мониторинга
                        получены данные без ошибок.
                    Недоступен — при последнем обмене информацией с сервером мониторинга ответ
                        от с|*|*|*|ервера мониторинга не получен. При наведении курсора на ячейку появится
                        всплывающая подсказка с текстом ошибки.
                    Ошибка — при последнем обмене информацией с сервером мониторинга получена
                        ошибка. При наведении курсора на ячейку появится всплывающая подсказка с
                        текстом ошибки.
                    Отключен — обмен информацией с сервером мониторинга отключен
                            администратором.Временное отключение сервера используется для
                            технических целей, таких как проведение технического обслуживания,
                            устранение неисправностей, настройка и т.п.
                    Пустое значение — нет данных о статусе последней синхронизации сервера.
                Для сервера удаленного мониторинга это свойство не заполняется.
            Сбор данных — результат синхронизаций этого сервера мониторинга. Возможные
                    значения:
                     — все типы синхронизаций успешны;
                     — синхронизация хотя бы одного типа завершена с
                        ошибкой или ни разу не выполнилась;
                     — все типы синхронизаций завершены с ошибкой
                        или не выполнялись.
                При наведении курсора на ячейку столбца «Сбор данных»
                    отображается всплывающая подсказка, где указан статус последней синхронизации и
                    серверное время на момент ее окончания. Если какая-либо из задач синхронизации
                    еще ни разу не завершилась, то на месте статуса и времени синхронизации ставится
                    прочерк. 
                        Подсказка с задачами синхронизации
                Для сервера удаленного мониторинга это свойство не заполняется.
                IP-адрес — IP-адрес сервера;
            Версия ПО — версия подключенного сервера мониторинга;Для сервера удаленного мониторинга это свойство не заполняется.
                Объектов — количество объектов мониторинга, подключенных к серверу;
                Проблем — количество проблем объектов мониторинга, подключенных к данному
                серверу;
            Кнопки действий:
                    Кнопка  — при нажатии на кнопку выполняется внеплановый
                        сбор данных с сервера мониторинга. Если в момент нажатия на кнопку уже
                        запущен процесс синхронизации, то выводится ошибка «В настоящий момент
                        обновление данных уже выполняется»;
                    Кнопка  — при нажатии на кнопку открывается окно
                        изменения свойств сервера мониторинга (см. п. );
                    Кнопка  — при нажатии на кнопку осуществляется переход
                        в собственную панель управления сервером  в новой вкладке браузера.
                Для сервера удаленного мониторинга кнопки отсутствуют.
            Можно отсортировать записи таблицы по полям «Филиал», «Сервер», «Доступность», «Сбор
            данных».
            По клику на строку записи таблицы открывается карточка соответствующего сервера
            мониторинга или сервера удаленного мониторинга с подробной информацией о нем (подробнее
            см. в разделах  и ). 
        Если версия подключенного сервера мониторинга будет обновлена,  автоматически обновит версию этого сервера мониторинга во время ближайшей
            синхронизации. После этого сбор данных с подключенного сервера мониторинга продолжится.
            Для успешного обновления  должен поддерживать новую версию
            подключенного сервера мониторинга. Список поддерживаемых версий см. в разделе .
        В этом разделе:
|*|*|*|
    Настройка сбора данных
            Для настройки сбора данных:
                Перейдите в раздел .
                Нажмите на кнопку «Настройка сбора данных».
                Появится окно настройки сбора данных.
                Измените необходимые вам параметры:
                        Полных данных об объектах мониторинга — период получения полных данных,
                            в том числе инвентарных данных об объектах мониторинга, подключенных к
                            серверам мониторинга. Значение по умолчанию — 480 минут. Диапазон
                            допустимых значений: 1 — 1440 минут.
                        Данных о состоянии объектов мониторинга — период получения информации о
                            состоянии (статусах) объектов мониторинга, подключенных к серверам
                            мониторинга. Значение по умолчанию — 3 минуты. Диапазон допустимых
                            значений: 1 — 60 минут.
                        Данных о проблемах — период получения данных о проблемах объектов
                            мониторинга, подключенных к серверам мониторинга. Значение по умолчанию
                            — 1 минута. Диапазон допустимых значений: 1 — 60 минут.
                        Журналов аудита — период синхронизации журналов аудита. Значение по
                            умолчанию — 3 минуты. Диапазон допустимых значений: 1 — 60 минут.
                        Свойств сервера мониторинга — период синхронизации системных параметров
                            серверов . Значение по
                            умолчанию — 3 минуты. Диапазон допустимых значений: 1 — 60 минут.
                        Данных о состоянии ИТ-услуг — период обновления данных о состоянии
                            ИТ-услуг. Значение по умолчанию — 3 минуты. Диапазон допустимых
                            значений: 1 — 60 минут.
                    Значения всех параметров указаны в минутах.Если
                        ввести значение меньше указанного диапазона, оно автоматически будет
                        заменено на минимальное допустимое значение. Значение больше указанного
                        диапазона заменяется на максимальное допустимое.
                        Настройки сбора данных
                Нажмите на кнопку «Сохранить».
|*|*|*|
    Отключение автоматического сбора данных с сервера мониторинга
        Для отключения автоматического сбора данных с сервера мониторинга:
                Нажмите на кнопку  для приостановки автоматического сбора данных с
                    сервера мониторинга.
                Появится всплывающее окно «Отключение сервера».
                Нажмите «Отключить» для подтверждения действия.
                        Окно «Отключение сервера»
                Нажмите на кнопку «Сохранить» в окне изменения свойств сервера
                    мониторинга.
|*|*|*|
    Подключение нового сервера мониторинга к ITM-VM
        В качестве сервера мониторинга можно подключить сервер 
            или сервер с установленным ПО Zabbix, перечень поддерживаемых версий см. в разделе
            . Для
                подключения сервера мониторинга:
                Перейдите в раздел .
                Нажмите на кнопку «Добавить сервер».
                Появится окно подключения сервера мониторинга.
                Заполните следующие поля:
                        IP-адрес — IP-адрес IPv4 сервера мониторинга;
                        Порт — номер  порта для подключения к серверу, значение по умолчанию 443;
                        Логин — логин учетной записи сервера  с правами доступа к API;
                        Пароль — пароль учетной записи сервера  с правами доступа к API.
                        Подключение сервера мониторинга. Авторизация
                Нажмите на кнопку «Подключить» для авторизации на подключаемом сервере.
                Появится окно «Добавление сервера мониторинга». Возможные ошибки и способы их устранения: 
                            «Такой сервер уже подключен» — проверьте и при необходимости
                                исправьте IP-адрес. Если IP-адрес верный, указанный сервер можно
                                найти и настроить в списке серверов.
                            «Ошибка подключения» — проверьте корректность IP-адреса и  порта.
                            «Неверный логин или пароль» — проверьте правильность логина и
                                пароля.
                            «Данная версия ПО не поддерживается» — указанный сервер не может
                                быть подключен, так как его программное обеспечение не
                                поддерживается. Список совместимого ПО см. на странице .
                                Список совместимого ПО см. на странице 
                                    .
                                Список совместимого ПО см. на странице 
                                    .
                В окне «Добавление сервера мониторинга» заполните следующие поля:
                        «Наименование сервера»:
                            Если вы подключаете сервер , то поле будет
                                    автоматически заполнено именем сервера и недоступно для
                                    редактирования.
                                Если вы подключаете сервер с ПО Zabbix, то это поле нужно
                                    заполнить, т.к. это требуется в том числе для событий,
                                    отправляемых в SIEM. Допускаются символы a-z, -., 0-9, - не
                                    может быть первым символом. Максимальная длина 253 символа.
                        «Наименование филиала» — обязательное поле.
                        «Описание» — заполните при необходимости.
                        Добавление сервера мониторинга. Свойства
                Нажмите на кнопку «Подключить» для сохранения информации о подключаемом
                    сервере.
                    Сервер будет подключен и будет запущен процесс полной синхронизации данных.
                        Полный список параметров, которые будут получены с сервера мониторинга,
                        можно увидеть, нажав на кнопку «Настройки сбора данных». В дальнейшем
                        получение данных с сервера будет выполняться в соответствии с указанными
                        параметрами.
|*|*|*|
    Просмотр информации об ИТ-услуге
            Для просмотра подробной информации об ИТ-услуге нажмите на ее имя в списке. В
            результате откроется карточка услуги, которая содержит следующую информацию:
                Название.
                Группа услуг — услуга 1-го уровня вложенности на сервере мониторинга, для
                    которой выбранная услуга является дочерней. Не отображается, если выбранная
                    услуга сама находится на 1 уровне.
                Филиал — филиал, к которому относится выбранная услуга.
                Контроль — переключатель включения и выключения контроля услуги на уровне . Действие
                    переключателя соответствует работе кнопок  («Включить») и  («Отключить») в списке услуг.
                        Во включенном состоянии услуга работает и отображается как обычно. 
                        В выключенном состоянии:
                                услуга отображается в списке, только если включен переключатель
                                    «Показать отключенные»;
                                услуга показана в списке серым цветом.
                Состояние — статус услуги. Доступны значения «ОК» и «Проблема».
                Контролируемые параметры — информация о вложенных услугах и их триггерах в виде
                    таблицы. В таблице отображается следующая информация:
                        Контролируемые параметры — наименование вложенной услуги (обязательно) и
                            наименование триггера (при наличии);
                        Состояние — статус вложенной услуги. Доступны значения «ОК» и
                            «Проблема». Узнать подробнее, как формируется состояние, можно в
                            Руководстве по эксплуатации  в разделе «Настройка услуг» шаг .
                Обновлено — дата и время последнего успешного сбора данных об услуге с сервера
                        мониторингаконсолидацииконсолидации.
                Карточка «ИТ-услуга»
            Для закрытия карточки ИТ-услуги нажмите на кнопку «Закрыть» в нижнем правом углу или
            на кнопку в верхнем правом углу.
        Про изменение параметров услуги можно узнать в разделе Руководства по эксплуатации  «Настройка услуг».
|*|*|*|
    Мониторинг ИТ-услуг
        Страница  содержит список ИТ-услуг, мониторинг
            которых осуществляет подключенный сервер  или zabbix. В
            качестве ИТ-услуг для мониторинга могут подключаться различные системно-значимые
            ИТ-сервисы, каналы связи, сервисы ИБ и т.д. 
        Над списком ИТ-услуг расположены следующие элементы:
                Название «Мониторинг ИТ-услуг» и кнопка обновления страницы . Через 1 минуту рядом с кнопкой появляется счетчик
                    времени с момента обновления страницы. Время отображается только в минутах. 
                Переключатель «Показать отключенные». Позволяет скрыть из списка отключенные
                    услуги, которые вам не нужно контролировать, либо отобразить все услуги, чтобы
                    проверить актуальность списка контролируемых услуг для последующего включения.
                    По умолчанию переключатель выключен, при этом отключенные с помощью кнопки
                         услуги не отображаются в списке. При включении
                    переключателя отключенные услуги отображаются в списке серым цветом.
                Кнопка «Свернуть все»/«Развернуть все»:
                        «Развернуть все» — отображается по умолчанию, при нажатии на кнопку
                            будут развернуты все вложенные группы услуг и услуги и кнопка сменится
                            на «Свернуть все». 
                        «Свернуть все» — отображается, если развернута хотя бы одна строка
                            филиала. При нажатии на кнопку все услуги и группы услуг будут свернуты
                            до уровня филиалов и кнопка сменится на «Развернуть все».
                    Кнопка «Свернуть все»/«Развернуть все» применяется ко всем записям, а
                        не только к записям на текущей странице.
        Список ИТ-услуг содержит следующую информацию:
                Услуга — столбец содержит список услуг, сгруппированный по филиалам и
                        группам.
                        Филиал — наименование филиала, к которому относится сервер мониторинга,
                            с которого получен список услуг. Филиал может содержать группы услуг и
                            услуги. Филиал не отображается в таблице, если не содержит вложенных
                            записей групп услуг или услуг. Список групп услуг и услуг, принадлежащих
                            филиалу, можно свернуть и развернуть с помощью кнопок  и . Настроенное состояние свернутости
                            сохраняется для браузера. По умолчанию строки свернуты. 
                        Группа услуг — услуги 1-го уровня вложенности на сервере мониторинга.
                            Группа услуг не отображается в таблице, если не содержит дочерних услуг.
                            Список дочерних услуг можно свернуть и развернуть с помощью кнопок
                                 и . 
                        Услуга — услуги 2-го уровня вложенности на сервере мониторинга.
                    Услуги с вложенностью больше 2-го уровня в списке не
                        отображаются.
                Состояние — статус услуги. Доступны значения «ОК» и «Проблема».
                SLA — установленный уровень качества, который считается приемлемым для данной
                    услуги. Если фактический уровень  для услуги
                    ниже этого значения, услуга перейдет в состояние «Проблема».
                Кнопка отключения услуги  —  позволяет скрыть или выделить другим цветом
                        услугу:
                        Если переключатель «Показать отключенные» включен, отключенная услуга
                            отображается в списке серым цветом, кнопка меняется на кнопку включения
                                .
                        Если переключатель «Показать отключенные» выключен, отключенная услуга
                            не отображается в списке.
                    При нажатии на кнопку включения  услуга снова отображается в обычном режиме,
                    состояние и свойства услуги обновляются при ближайшей синхронизации и дальше по
                    графику синхронизатора.
                        Включение и отключение услуг доступно только пользователям с ролью
                            «Администратор».
            Страница «ИТ-услуги»
        При нажатии на имя услуги открывается карточка с подробной информацией о ней (подробнее
            см. в разделе ).
        Для просмотра большого списка ИТ-услуг используется вертикальная прокрутка списка
            справа.
|*|*|*|
    Изменение пароля пользователя
            Пользователям с ролью «Администратор» доступно изменение паролей всех учетных
                записей, с ролью «Пользователь» — только изменение пароля своей учетной записи. Для
                изменения пароля:
                Выполните одно из действий: 
                        Для изменения своего пароля нажмите на кнопку «Перейти в профиль
                            пользователя»  в нижнем левом углу главного меню. 
                        Для изменения пароля другого пользователя нажмите на имя этого
                            пользователя в списке на странице  → .
                Откроется окно «Свойства пользователя».
                Нажмите на кнопку «Изменить пароль».
                        Окно «Свойства пользователя»
                Откроется окно «Изменение пароля пользователя».
                В открывшемся окне введите новый пароль и подтвердите его.
                Нажмите на кнопку «Сохранить».
                        Окно «Изменение пароля пользователя»
                Появится окно «Пароль изменен». 
                        Окно «Пароль изменен»
                Нажмите на кнопку «Закрыть» в окнах «Пароль изменен» и «Изменение пароля
                    пользователя». 
                Пароль учетной записи изменится. Сессия, в которой был изменен пароль,
                    останется активной, остальные открытые сессии пользователя с измененным паролем
                    завершатся.
|*|*|*|
    Настройка атрибутов пользователей LDAP или LDAPS
            В разделе «Атрибуты пользователей» необходимо указать базу поиска. Другие атрибуты
                будут автоматически заполнены корректными значениями после редактирования и
                сохранения настроек подключения к  или , но при необходимости их можно изменить.
            Редактирование атрибутов пользователей  или  доступно, только когда указаны настройки подключения  или .
            Для изменения атрибутов пользователей  или : 
                Перейдите на страницу  → .
                Нажмите на кнопку  рядом с заголовком «Атрибуты пользователей».
                атрибуты станут доступны для редактирования.
                В выпадающем списке BaseDN выберите базу поиска — объект каталога, в котором
                    производится поиск учетных записей пользователей. База поиска указывается в
                    формате CN=имя_объекта,DC=класс_объекта_домена. 
                База поиска CN=TestObject,DC=example,DC=ru означает, что
                    поиск будет произведен в объекте с именем TestObject в домене
                        example.ru.
                При необходимости отредактируйте другие атрибуты пользователей:
                        Фильтр пользователей — критерий, по которому выбирается объект из базы
                            поиска. Фильтр влияет на то, какие записи попадут в список
                            пользователей. Примеры доступных фильтров: 
                                вывод списка всех включенных пользователей текущего домена.
                                    Используется как значение по умолчанию в поле «Фильтр
                                    пользователей»:(&(objectCategory=person)(objectClass=user)(!(userAccountControl:1.2.840.113556.1.4.803:=2)))
                                вывод списка пользователей конкретного подразделения и
                                    конкретной группы:
                                    (&(objectCategory=person)(memberOf=cn=TestGroup,ou=TestOU,dc=company,dc=local))
                                    Где: 
                                        OU — подразделение;
                                        DC — домен-контроллер;
                                        TestGroup — наименование группы;
                                        TestOU — наименование подразделения; 
                                        company — наименование поддомена, где
                                            находится подразделение TestOU;
                                        local — наименование домена, где
                                            находится поддомен company.
                                вывод списка пользователей из разных подразделений и групп:
                                    (&(objectCategory=person)(|(memberOf=cn=TestGroup,ou=TestOU,dc=company,dc=local)(memberOf=cn=TestGroup2,ou=TestOU2,dc=company,dc=local)))
                                    Где: 
                                        OU — подразделение;
                                        DC — домен-контроллер;
                                        TestGroup и TestGroup2
                                            — наименование Группы1 и Группы2;
                                        TestOU и TestOU2 —
                                            наименование Подразделения1 и Подразделения2;
                                        company — наименование поддомена, где
                                            находятся подразделения TestOU и
                                                TestOU2;
                                        local — наименование домена, где
                                            находи|*|*|*|тся поддомен company.
                                вывод списка групп, имя которых начинается с «Test»:
                                    (&(objectCategory=group)(cn=Test*)) 
                                вывод списка пользователей, которые находятся в подразделении с
                                    несколькими уровнями
                                    вложенности:&(objectCategory=person)(memberOf=cn=test_inside,ou=Inside_deep,ou=Inside,ou=TestOU,dc=company,dc=local))
                                        Где:
                                        OU — подразделение;
                                        DC — домен-контроллер;
                                        test_inside — наименование группы; 
                                        Inside_deep, Inside,
                                                TestOU — каталоги, которые
                                            составляют путь к подразделению, где находится группа
                                                test_inside;В фильтре
                                                каталоги указываются в обратном порядке, начиная с
                                                  Inside_deep. Путь, который они
                                                составляют —
                                                  TestOU/Inside/Inside_deep.
                                        company — наименование поддомена, где
                                            находится подразделение
                                                TestOU/Inside/Inside_deep;
                                        local — наименование домена, где
                                            находится поддомен company.
                        Атрибут логина — поле, где хранится логин пользователя;
                        Атрибут ФИО — поле, где хранится ФИО пользователя; 
                        Атрибут почты — поле, где хранится адрес электронной почты
                            пользователя; 
                    Параметры полей «Атрибут логина», «Атрибут ФИО», «Атрибут
                        почты» определяются автоматически. Изменение этих значений может
                        потребоваться только в случае, если схема атрибутов пользователей в каталоге
                        подключенного сервера  отличается от стандартной, что проявляется в некорректных значениях в
                        столбцах «Логин», «Полное имя» и «E-mail» списка пользователей. 
                        Редактирование атрибутов пользователей
                Нажмите на кнопку «Сохранить» для применения изменений.
                Просмотрите список пользователей , чтобы убедиться в корректности интеграционной схемы атрибутов пользователей
                    и ее соответствии схеме атрибутов пользователей в каталоге подключенного сервера
                        . Для этого:
                        Нажмите на кнопку «Посмотреть список пользователей».
                        откроется окно со списком пользователей . 
                                Список пользователей LDAP
                        Просмотрите список пользователей. Для каждого пользователя указаны
                            логин, полное имя и e-mail.
                        Для поиска конкретной записи введите начальные символы или полное
                            название одного из параметров в строку поиска и нажмите на кнопку
                                «».
                        в окне появятся записи, соответствующие критерию
                            поиска.
                        Нажмите на кнопку «Закрыть».
        После завершения настроек добавьте учетную запись  для входа в веб-интерфейс . Подробнее см. в разделе
                .
|*|*|*|
    Пользователи
    При нажатии на пункт  →  в основном меню выводится список пользователей
        сервера .
            Список пользователей
        В случае большого списка появляется вертикальная прокрутка справа.
        Строка поиска предназначена для осуществления поиска по всем полям всех
            пользователей.
        В таблице  пользователей выводятся следующие поля:
            ID — уникальный идентификатор пользователя в базе данных сервера ;
            Пользователь — ФИО пользователя;
            Тип УЗ — тип учетной записи пользователя. Возможные значения:
                Локальная — создание локальной учетной записи пользователя ;
                     — подключение учетной записи из каталога .
            Подразделение;
            Логин;
            Роль:
                    Пользователь — пользователь системы, которому доступны основные функции:
                            работа с графиками;
                            просмотр списков и карточек объектов мониторинга, серверов
                                мониторинга, ИТ-услуг, событий, пользователей;
                            создание, изменение, включение, выключение и удаление собственных
                                правил оповещений;
                            просмотр параметров своей учетной записи, изменение своего
                                пароля.
                    Администратор — пользователь системы, которому доступны те же основные
                        функции, что и пользователю, а также функции управления и
                            администрирования:
                            добавление серверов мониторинга;
                            настройка сбора данных;
                            просмотр журнала событий;
                            настройки сервера, параметров пользовательской сессии,
                                email-оповещений, хранения журнала событий, интеграции с SIEM;
                            добавление, изменение и удаление пользователей системы;
                            настройки подключения LDAP;
                            изменение и удаление правил оповещений, созданных другими
                                пользователями.
                    Техническая — учетная запись для предоставления доступа к данным для смежных
                        систем;
                    Оператор мониторинга — пользователь системы, обладающий правами только на
                        просмотр и работу с графиками на странице .
                Подробнее см. в разделе .
            Email — электронный адрес пользователя;
            Статус — статус учетной записи пользователя:
                    Активен — учетная запись пользователя активна, пользователь может
                        пользоваться функциями сервера ;
                    Заблокирован — учетная запись пользователя заблокирована администратором.
            Кнопка «Изменить»  — при нажатии открывается окно изменения свойств
                учетной записи пользователя.
        По умолчанию записи в таблице пользователей отсортированы вначале по статусу (первыми
            указаны активные пользователи, далее заблокированные), потом по ФИО пользователя.
        Записи в таблице пользователей можно отсортировать по столбцам «ID», «Пользователь», «Тип
            УЗ», «Подразделение», «Логин», «Роль» и «Статус».
|*|*|*|
    Правила оповещений
        В разделе основного меню  →  можно создавать, просматривать и
            редактировать правила оповещений о проблемах. Правила оповещений позволяют пользователям
            получать уведомления о появлении или изменении критичности проблем на указанную
            электронную почту. Ограничения на количество правил оповещений нет.
        Рядом с заголовком страницы отображается иконка  или , которая
            показывает состояние работоспособности канала Email-оповещений. Состояние канала
            оповещения проверяется при открытии страницы, для этого:
                Проверяется факт настройки Email-сервера.
                Проверяется наличие ответа на обращение к Email-серверу.
        Возможные состояния канала оповещения:
                    — подключение к Email-серверу настроено и функционирует;
                 — подключение к Email-серверу не настроено или Email-сервер не отвечает.
        Строка информации над списком правил оповещений содержит следующие элементы:
                Название «Правила оповещений»;
                Информация об общем количестве правил оповещений в
                    формате:Правила оповещений: [общее количество добавленных правил] всего [количество правил в статусе «Активно»] активно
                Строка поиска — предназначена для поиска правил в списке по полям «ID»,
                    «Наименование» и «Получатели»;
                Кнопка «Добавить правило» — при нажатии на кнопку появляется окно добавления
                    нового правила оповещений. Подробнее см. в разделе .
        Таблица со списком правил оповещений содержит следующие столбцы:
                ID — идентификатор правила, нужен для сортировки, сопоставления записей в логах
                    при поиске неисправностей и т.п.;Последовательность идентификаторов может
                        содержать пропуски, так как идентификаторы удаленных или несохраненных из-за
                        ошибок правил повторно не используются.
                Наименование;
                Статус — актуальный статус правила оповещений, «Активно» или «Неактивно»;
                Расписание — время отправки оповещений. Доступны следующие варианты:
                        Немедленно — для режима отправки оповещений сразу;
                        Ежедневно в ЧЧ:ММ — для режима отправки оповещений по расписанию.
                Получатели — список адресов электронной почты получателей оповещений;
                Столбец с кнопками действий, которые можно совершить с правилом:
                         — редактировать правило;
                         — выключить правило;
                         — удалить правило.
            Список правил оповещений
        Таблицу можно отсортировать по полям «ID», «Наименование», «Статус», «Расписание». По
            умолчанию записи отсортированы по возрастанию значений поля «ID».
        Количество отображаемых на странице правил оповещений можно изменить, кликнув по
            выпадающему списку в правом нижнем углу. Доступные значения — 10, 20 и 50. Значение по
            умолчанию — 20.
        В этом разделе:
|*|*|*|
    Создание правила оповещений
            Для создания правила оповещений:
                Перейдите на страницу  → . 
                Нажмите на кнопку «Добавить правило» в верхнем левом углу страницы.
                Откроется окно «Создание правила оповещений».
                В открывшемся окне заполните поле «Наименование».
                    Наименование правила обнаружения должно быть уникальным.
                Выберите тип правила оповещений:
                        Отправить сразу — оповещение отправляется сразу при обнаружении или
                            изменении критичности проблемы;
                        Отправлять списком один раз в сутки — отправляется список проблем за
                            сутки в заданное время. При выборе этого варианта укажите серверное
                            время отправки сообщения в формате чч:мм. По умолчанию указано время
                            07:45.
                При необходимости в выпадающем списке «Объекты» выберите филиалы или входящие в
                    них , для  которых будут формироваться оповещения.
                    По умолчанию оповещения формируются для  всех филиалов и входящих в них
                            .
                При выборе филиала входящие в него  не
                    выбираются автоматически. Выбор  доступен
                    независимо от того, выбран ли филиал, к которому он относится. Если у филиала 5
                    или больше вложенных , становятся доступны
                        кнопки:
                        «Выделить все» — нажмите, чтобы выбрать все , входящие в филиал.
                        «Снять выделение» — нажмите, чтобы отменить выбор всех , входящих в филиал.
                В выпадающем списке «Важность» выберите уровень важности проблем. Оповещения
                    будут отправляться для проблем с выбранным и более высокими уровнями важности.
                    Доступны следующие значения: 
                        Критическая — значение по умолчанию;
                        Высокая;
                        Средняя;
                        Предупреждение;
                        Информационная;
                        Не классифицировано.
                Введите один или несколько адресов электронной почты получателей оповещений в
                    поле «Email получателей».
                При необходимости введите описание правила.
                        Окно создания правила оповещений
                Нажмите на кнопку «Сохранить».
                При срабатывании правила оповещения будут приходить в следующем формате:Тема письма: ITM
                        [Критичность] [Наименование оповещения] [Имя ОМ][Была создана новая проблема:] или [У проблемы обновлена критичность:] или [Отчет о проблемах
                        функционирования объектов мониторинга за сутки к [чч:мм (UTC)
                        дд.мм.гггг]:]
                    Всего событий — [Количество проблем], нерешенных — [Количество нерешенных
                        проблем]
                                        №
                                        Время появления
                                        Критичность
                                        Филиал, ТО
                                        Объект
                                        Проблема
                                        Состояние
                                        [Номер]
                                        [Серверное время в формате гггг-мм-дд чч-мм-сс
                                            (UTC)]
                                        [Уровень критичности проблемы]
                                        [Наименование филиала] или [Наименование филиала и
                                            ТО]
                                        [Наименование объекта]
                                        [Наименование проблемы]
                                        «Требует решения» или «Решена [дата и время в формате
                                            гггг-мм-дд чч-мм-сс (UTC)]»
                    Наименование сервера ITM-VM — [Наименование сервера ITM-VM]Оповещение — [ID оповещения], [Наименование оповещения]
|*|*|*|
    Создание учетной записи локального пользователя
        Для создания учетной записи пользователя:
                Перейдите на страницу  → .
                Нажмите на кнопку «Добавить пользователя» над списком пользователей.
                В открывшемся окне выберите вариант «Создать локального пользователя».
                Заполните следующие поля:
                        «Логин»;
                        «Пароль»; 
                        «Подтверждение пароля»;
                        «Роль пользователя».Подробнее см. в разделе .
                При необходимости заполните поля:
                        «ФИО»; 
                        «Email»;
                        «Подразделение».
                        Добавление локального пользователя
                Нажмите на кнопку «Сохранить». 
                При вводе данных и нажатии на кнопку «Сохранить» выполняется проверка
                    корректности значений в полях формы и, в случае ошибок, выводятся ошибки рядом с
                    каждым полем.
|*|*|*|
    Изменение основных свойств сервера
            Для изменения основных настроек сервера:
                Перейдите на страницу  → .
                Для изменения сведений о сервере:
                        Нажмите на кнопку  рядом с заголовком «Сведения о сервере». 
                        поля станут доступны для редактирования.
                        Измените сведения о сервере.
                                Редактирование сведений о сервере
                        Нажмите на кнопку «Сохранить».
                Изменение периода неактивности пользователя для блокировки
                    сеанса приведет к закрытию сессий всех пользователей, авторизованных в
                    системе.
                Для изменения периода неактивности пользователя, после окончания которого сеанс
                    будет заблокирован: 
                        Нажмите на кнопку  рядом с заголовком «Параметры
                            пользовательской сессии». 
                        поле «Период неактивности пользователя для блокировки сеанса,
                            мин» станет доступно для редактирования.
                        Измените период неактивности пользователя.
                            Доступен ввод значений от 2 до 60 минут.
                                Редактирование периода неактивности пользователя для
                                    блокировки сеанса
                        Нажмите на кнопку «Сохранить».
                        откроется окно подтверждения результата.
                        В открывшемся окне нажмите на кнопку «Изменить».
                                Окно подтверждения
                Для изменения параметров хранения журнала событий: 
                        Нажмите на кнопку  рядом с заголовком «Параметры хранения
                            журнала событий». 
                        поля раздела станут доступны для редактирования.
                        Измените нужный период. 
                            Доступен ввод значений от 1 до 1095 дней.
                                Редактирование параметров хранения журнала событий
                        Нажмите на кнопку «Сохранить».
|*|*|*|
    Настройка Email-оповещений
            Для настройки Email-оповещений:
                Перейдите на страницу  → .
                Установите переключатель «Включить оповещения по почте» в положение
                    «Включено».
                кнопка  станет активна.
                Нажмите на кнопку  рядом с заголовком «Настройки
                    Email-оповещений».
                поля станут доступны для редактирования.
                Измените параметры оповещений.
                        Редактирование настроек оповещений
                    Описания всех параметров см. в разделе «Настройки Email-оповещений» на
                        странице .
                Нажмите на кнопку «Сохранить».
|*|*|*|
    Настройка интеграции с SIEM
            Для настройки интеграции сервера  с SIEM:
                Перейдите на страницу  → .
                Установите переключатель «Включить интеграцию» в положение «Включено».
                кнопка  станет активна.
                Нажмите на кнопку  рядом с заголовком «Параметры интеграции с
                    SIEM».
                поля станут доступны для редактирования.
                Измените параметры интеграции с SIEM.
                        Редактирование параметров интеграции с SIEM
                    Описание всех параметров см. в разделе «Параметры интеграции с SIEM» на
                        странице .
                Нажмите на кнопку «Сохранить».
|*|*|*|
    Создание учетной записи пользователя LDAP
            Пользователь сможет входить в веб-интерфейс  с учетной записью  только после выполнения настроек, описанных в разделах  и .Для создания учетной записи пользователя :
                Перейдите на страницу  → .
                Нажмите на кнопку «Добавить пользователя» над списком пользователей.
                В открывшемся окне выберите вариант «Создать пользователя из ».
                    Этот вариант активен, только если включен режим интеграции с . 
                В окне «Добавление пользователя» отобразятся поля формы создания
                    пользователя из .
                        Добавление пользователя из LDAP
                Выберите пользователя из . Для этого:
                        Нажмите на кнопку  в поле «Пользователь из ».
                        Откроется окно «Выбор пользователя ». 
                                Окно «Выбор пользователя LDAP»
                        Выберите пользователя  из списка. Для этого кликните в любой части выбранной строки. 
                             Вы можете воспользоваться поиском по первым символам
                                логина, полного имени или e-mail или прокруткой списка. Записи в
                                списке отсортированы по столбцу «Полное имя» по алфавиту.
                        Выбранная запись будет выделена цветом.
                        Нажмите на кнопку «Продолжить».
                        Окно «Выбор пользователя » закроется, информация в окне «Добавление пользователя» обновится:
                                поле «Пользователь из » будет заполнено значением ФИО выбранного пользователя;
                                появятся поля:
                                        «Логин» — нередактируемое поле, содержит значение логина
                                            выбранного пользователя из каталога ;
                                        «Email» — нередактируемое поле, содержит значение email
                                            выбранного пользователя из каталога .
                Выберите роль пользователя. По умолчанию установлена роль «Пользователь».
                    Подробнее см. в разделе .
                        Добавление пользователя из LDAP
                Нажмите на кнопку «Сохранить». 
                При вводе данных и нажатии на кнопку «Сохранить» выполняется проверка
                    корректности значений в полях формы и, в случае ошибок, выводятся ошибки рядом с
                    каждым полем.
|*|*|*|
    Настройки
        В этом разделе:
|*|*|*|
    Управление правилами оповещений
            Управление правилами оповещений осуществляется на странице  → . Доступны следующие возможности:
                Просмотр правила оповещений. Для просмотра:
                        Нажмите на строку с правилом в списке.
                        Откроется всплывающее окно просмотра свойств правила оповещений. 
                                Окно «Правило оповещений»
                        Нажмите на кнопку «Закрыть» для завершения просмотра. 
                Редактирование правила оповещений. Для редактирования:
                        Нажмите на кнопку «Изменить» в окне просмотра свойств правила
                            оповещений или на кнопку в строке с правилом. 
                        Откроется всплывающее окно «Изменение правила оповещений». 
                                Окно «Изменение правила оповещений»
                        Измените необходимые вам свойства.
                        Если рядом с одним из филиалов в полее «Объект» отображается надпись «сервер удален», этот
                                филиал был удален из списка подключенных серверов мониторинга
                                (подробнее см. в разделе ). Такой филиал можно удалить из списка объектов, но нельзя
                                добавить туда. Удаление филиала из списка подключенных серверов
                                мониторинга не влияет на статус правила.
                        Нажмите на кнопку «Сохранить».
                Включение правила оповещений. Для включения:
                        Нажмите на кнопку .
                        Статус правила сменится на «Активно», оповещения будут
                            отправляться в соответствии с настройками правила.
                Выключение правила оповещений. Для выключения:
                        Нажмите на кнопку .
                        Статус правила сменится на «Неактивно», оповещения перестанут
                            отправляться.
                Удаление правила оповещений. Для удаления:
                        Нажмите на кнопку  в строке с правилом.
                        Появится всплывающее окно «Удаление правила оповещения». 
                                Окно «Удаление правила оповещения»
                        Нажмите на кнопку «Удалить».
|*|*|*|
    LDAP
        Cтраница  → 
            предназначена для настройки подключения к каталогу  и для предоставления пользователям возможности авторизации с использованием
            корпоративной учетной записи . 
        При выключенном  возможна авторизация только с помощью локальных учетных записей, созданных
            администратором в разделе «Пользователи».
        При включенном режиме  администратор может добавить пользователей из корпоративного каталога  (подробнее см. в разделе ) и
            настроить подключение. После этого пользователям будет доступна авторизация с
            использованием корпоративной учетной записи.
            Настройки подключения к LDAP
        Рекомендуемая версия ОС для сервера, где находится каталог  — Windows Server 2008 и выше. Для подключения  к -каталогу и входа в веб-интерфейс  необходимо, чтобы учетная
            запись  имела права на подключение к домену и чтение списка доменных пользователей. В
            большинстве случаев достаточно членства в группе Domain Users (Пользователи домена).
        Права пользователя могут отличаться в зависимости от настроек домена.
        В этом разделе:
|*|*|*|
    Управление учетной записью пользователя
            Управление учетными записями пользователей может осуществляться на странице  → .
                Возможности для управления учетной записью пользователя:
                Изменение учетной записи. Доступно только пользователям с ролью
                    «Администратор». Для изменения:
                        Выполните одно из действий:
                                Для изменения своей учетной записи нажмите на кнопку  («Перейти в профиль пользователя»)
                                    в нижнем левом углу главного меню.
                                Для изменения учетной записи другого пользователя нажмите на
                                    кнопку «Изменить» в окне просмотра свойств для этого
                                    пользователя или на кнопку  в строке с учетной записью.
                        Появится окно «Изменение свойств пользователя».
                        Измените необходимые вам значения полей.
                        При этом осуществляется проверка значений в полях формы и, в случае
                            ошибок, выводится информация об ошибках рядом с каждым полем.
                                Изменение свойств учетной записи пользователя
                                Изменение свойств учетной записи пользователя LDAP
                        Нажмите на кнопку «Сохранить».
                Блокировка пользователя. Для блокировки:
                        Нажмите на кнопку «Изменить» в окне просмотра свойств или на кнопку
                                 в строке с учетной записью.
                        Появится окно «Изменение свойств пользователя».
                        Нажмите на кнопку «Заблокировать пользователя»  ;
                        Статус учетной записи сменится на «Заблокирован». Открытые
                            сессии заблокированного пользователя будут удалены. При попытке
                            авторизации появится сообщение об ошибке «Пользователь
                            заблокирован».
                Разблокировка пользователя. Для разблокировки:
                        Нажмите на кнопку «Изменить» в окне просмотра свойств или на кнопку
                                 в строке с учетной записью.
                        Нажмите на кнопку «Разблокировать пользователя»  ;
                        Статус учетной записи сменится на «Активен». Станет доступна
                            авторизация с использованием этой учетной записи.
                Удаление пользователя. Для удаления:
                        Нажмите на кнопку «Изменить» в окне просмотра свойств или на кнопку
                                 в строке с учетной записью.
                        Появится окно «Изменение свойств пользователя».
                        Нажмите на кнопку «Удалить». 
                        После нажатия на кнопку выводится окно подтверждения удаления учетной
                            записи. 
                                Окно подтверждения удаления учетной записи
                        Нажмите на кнопку «Удалить» в окне подтверждения.
                        Учетная запись будет удалена, при этом открытые сессии
                            пользователя будут завершены.
|*|*|*|
    Очистка настроек Email-оповещений
            В  можно очистить параметры подключения к -серверу. Это может понадобиться для очистки параметров тестового контура,
                перемещения сервера в другой сегмент и т.п. Для очистки настроек:
                Перейдите на страницу  → .
                Установите переключатель «Включить оповещения по почте» в разделе «Настройки
                    Email-оповещений» в положение «Выключено».
                кнопка «Очистить настройки» станет активна.
                    Кнопка «Очистить настройки» при выключенном переключателе оповещений
                Нажмите на кнопку «Очистить настройки».
                появится окно подтверждения.
                В открывшемся окне нажмите на кнопку «Подтвердить».
                        Окно подтверждения очистки настрек
                после подтверждения параметры подключения к -серверу очистятся.
|*|*|*|
    Очистка настроек LDAP
        В  можно очистить параметры подключения к . Это может понадобиться для очистки параметров тестового контура, перемещения
                сервера в другой сегмент и т.п. Для очистки настроек:
                Перейдите на страницу  → .
                Установите переключатель «Включить » в верхней части страницы в положение «Выключено».
                кнопка «Очистить настройки» станет активна.
                        Кнопка «Очистить настройки» при выключенном переключателе
                            LDAP.
                Нажмите на кнопку «Очистить настройки».
                появится окно подтверждения.
                В открывшемся окне нажмите на кнопку «Подтвердить». 
                        Окно подтверждения очистки настрек
                после подтверждения параметры подключения  полностью очистятся.
|*|*|*|
    Подключение к LDAP или LDAPS
            Для настройки подключения к  или :
                Перейдите на страницу  → .
                Установите переключатель «Включить » в верхней части страницы в положение «Включено».
                Настройте подключение к  или  ( over SSL). Для этого:
                        Нажмите на кнопку  рядом с заголовком «Настройки
                            подключения».
                        поля станут доступны для редактирования.
                        Отредактируйте поля с параметрами подключения:
                                Сервер — введите DNS-имя или IP-адрес сервера ;
                                Порт — введите значение 389 для настройки  или 636 для настройки ;
                                Пользователь — введите логин пользователя для подключения к -каталогу;Рекомендуется создать отдельный
                                        аккаунт  (пользователя ), чтобы подключаться к -серверу с минимальными привилегиями в , вместо использования реальных аккаунтов пользователей.
                                        Такой подход более безопасный и не потребует изменения
                                        пароля, если пользователь изменит свой пароль на -сервере.
                                Пароль — введите пароль пользователя для подключения к -каталогу.
                                Редактирование настроек подключения для LDAPS
                        Измените положение переключателя «Использовать SSL»:
                                включите протокол SSL для настройки ;
                                отключите протокол SSL для настройки .
                        Нажмите на кнопку «Подключить».
                        Возможные ошибки: «Невозможно подключиться к серверу », «Не правильный логин или пароль». В случае ошибок необходимо
                            убедиться в корректности введенных данных для подключения. 
                        После успешного подключения к серверу , система автоматически получит список пользователей каталога  и определит используемую схему атрибутов пользователей. Убедитесь в
                            корректности атрибутов пользователей следующим образом:
                                Нажмите на кнопку «Посмотреть список пользователей».Результат
                                        шага: откроется окно со списком пользователей .
                                        Список пользователей LDAP
                                Найдите строку, где значение в поле «Атрибут логина»
                                    соответствует логину известной вам учетной записи (например,
                                    учетной записи, используемой для подключения к каталогу).
                                Убедитесь, что значения атрибутов «Полное имя» и «E-mail»
                                    соответствуют данной учетной записи.
                                Если значения атрибутов в таблице корректные, то интеграция с
                                    сервером  осуществлена успешно, нажмите на кнопку «Закрыть».
                                Если значения атрибутов в таблице некорректные, то интеграция с
                                    сервером  осуществлена не успешно и требуется настройка схемы атрибутов
                                    пользователей. Настройка схемы может быть выполнена в
                                    соответствии с .
|*|*|*|
    Основные настройки
        При переходе в раздел основного меню  →  открывается страница, которая содержит сведения
            о сервере, параметры пользовательской сессии, настройки e-mail оповещений, параметры
            хранения журнала событий и параметры интеграции с SIEM.
            Основные настройки
            Сведения о сервере
            В разделе «Сведения о сервере» выводятся следующие свойства:
                Наименование — наименование сервера, не редактируемое поле;
                Описание — описание сервера, не обязательное поле;
                Эксплуатирующая организация — наименование эксплуатирующей организации,
                    редактируемое поле, не обязательное;
                Место установки — адрес или описание места установки сервера, редактируемое поле, не
                    обязательное.
            Параметры пользовательской сессии
            В разделе «Параметры пользовательской сессии» в поле «Период неактивности
                пользователя для блокировки сеанса, мин» указан период неактивности пользователя,
                после окончания которого сеанс будет заблокирован. Значение параметра по умолчанию —
                15 минут.
            За Х секунд до истечения времени сессии появляется оповещение о скором завершении
                сеанса. Х=10% от значения параметра в поле «Период неактивности пользователя для
                блокировки сеанса, мин».
                Оповещение о скором завершении сеанса
            Например, если в поле «Период неактивности пользователя для блокировки сеанса, мин»
                указан период 10 минут, то оповещение появится за 1 минуту до истечения времени
                сессии.
            Для продолжения сессии необходимо в любой момент до истечения времени сессии выполнить на
                странице одно из действий:
                скроллинг колесом;
                нажатие на кнопки навигации клавиатуры;
                клики или движения мыши;
                смена активности вкладки;
                выполнение пользователем запроса на странице.
            После выполнения действия отсчет времени до блокировки сеанса начнется заново. 
            Если пользователь останется неактивным, то текущий сеанс завершится и откроется страница
                авторизации.
            Настройки Email-оповещений
            В разделе «Настройки Email-оповещений» выводятся следующие элементы:
                Кнопка «Очистить настройки».
                Переключатель «Включить оповещения по почте». По умолчанию находится в положении
                    «Выключено». Событие о включении или выключении переключателя отправляется в
                    SIEM. 
                        В положении «Выключено»:
                                Оповещения не работают.
                                Если настройка ни разу не выполнялась, все поля настроек
                                    пустые.
                                Если настройка выполнялась хотя бы один раз, поля настроек
                                    содержат последние сохраненные значения.
                                Редактирование параметров невозвможно, кнопка  неактивна.
                                Кнопка «Отправить тестовое сообщение» неактивна.
                                Кнопка «Очистить настройки» активна.
                                Заголовки и значения полей серого цвета.
                        В положение «Включено»:
                                Оповещения работают.
                                Кнопка  активна, при нажатии доступно
                                    редактирование полей настроек.
                                Кнопка «Отправить тестовое сообщение» активна, при нажатии
                                    отправляется тестовое письмо.
  |*|*|*|                              Кнопка «Очистить настройки» неактивна.
                                Заголовки и значения полей черного цвета.
                Индикатор состояния подключения к SMTP-сереверу. Доступные значения:
                        Подключение активно;
                        Нет соединения.
                    Если режим оповещений по почте включен, то текущее состояние подключения к
                    SMTP-сереверу проверяется и отображается при каждом открытии страницы.При
                        отключении режима оповещений по почте и при переходе в режим редактирования
                        настроек Email-оповещений индикатор состояния подключения не
                        отображается.
                 сервер — DNS-адрес -сервера.
                Порт  сервера — номер порта -сервера.
                Тип подключения — протокол передачи данных. Доступные значения:
                    RELAY;
                    SMTPS;
                    STARTTLS.
                Почта отправителя — Email отправителя. Поле отображается при выборе типа подключения
                    RELAY.
                Логин — логин пользователя для подключения к -серверу. Поле отображается при выборе типов подключения SMTPS и
                    STARTTLS.
                Пароль — пароль пользователя. Поле отображается при выборе типов подключения SMTPS и
                    STARTTLS.
                Кнопка «Отправить тестовое сообщение». При нажатии на кнопку появляется
                    всплывающее окно для отправки тестового письма. 
                        Отправка тестового сообщения
                     Для отправки сообщения введите адрес электронной почты получателя в поле
                    «Email» и нажмите на кнопку «Отправить». В результате на указанный адрес придет
                    письмо в формате:
                    Тема письма: Тестовое сообщение с сервера [Наименование сервера ITM-VM]
Содержание письма: Тестовое письмо системы оповещений сервера [Наименование сервера ITM-VM] отправлено в [Время отправки письма в формате ЧЧ:ММ ДД.ММ.ГГГГ]
            Параметры хранения журнала событий
            В разделе «Параметры хранения журнала событий» доступна настройка следующих
                    параметров:
                    Период хранения истории в журнале событий, дней — количество дней, в течение
                        которого записи о событиях аудита хранятся в журнале. Значение параметра по
                        умолчанию — 180 дней.
                    Период хранения истории проблем , дней — количество дней, в течение которого хранится история
                        возникновения проблем ,
                        полученных из серверов мониторинга. Значение параметра по умолчанию — 180
                        дней.
                    Период хранения истории синхронизаций, дней — количество дней, в течение
                        которого хранится история синхронизации данных с серверами мониторинга.
                        Значение параметра по умолчанию — 14 дней.
            Все поля раздела являются обязательными. Диапазон допустимых значений для каждого из полей — от 1 до 1095.
            Параметры интеграции с SIEM
            В разделе «Параметры интеграции с SIEM» доступна настройка следующих параметров:
                    IP-адрес syslog-сервера.  
                    Порт syslog-сервера. Диапазон допустимых значений — 1-65535. Значение
                        параметра по умолчанию — 514.
                    Протокол интеграции. Доступные значения — TCP или UDP. Значение параметра по
                        умолчанию — TCP.
                    IP-адрес сервера ITM-VM — IP-адрес сервера ITM-VM, от имени которого
                        отправляются данные на syslog-сервер. 
        В этом разделе:
|*|*|*|
    Просмотр информации об объекте мониторинга
        Окно просмотра информации об объекте мониторинга появляется:
                при нажатии в любом месте строки конкретного  на странице , кроме значений в столбцах «Филиал»,
                    «ТК», «Проблемы» и кнопки в столбце «Ссылки»;
                при нажатии на значение в столбце «Объект» на странице .
             Все поля окна выводятся в режиме просмотра без возможности изменения.
            Окно просмотра информации об объекте мониторинга
        Заголовок окна содержит имя объекта мониторинга.
        Окно содержит следующие поля:
                ID — идентификатор объекта мониторинга;
                Наименование — видимое имя объекта мониторинга;
                Сетевое имя ОМ — сетевое имя объекта мониторинга, соответствует имени узла сети
                    в ; 
                Статус — актуальный статус объекта мониторинга. Соответствует статусу в столбце
                    «Мониторинг» в списке . Доступные
                        значения:
                        Активирован;
                        Недоступен;
                        Деактивирован.
                    Если  находится на
                    техническом обслуживании, информация о дате и времени начала технического
                    обслуживания будет указана рядом со статусом .
                Обновление статуса — дата и время последнего обновления статуса объекта
                    мониторинга. По умолчанию обновление статуса  происходит каждые 3 минуты;
                Филиал — название филиала, где находится объект мониторинга;
                Технологический комплекс — название , где
                    находится объект мониторинга;
                Система — наименование защищаемой ; В
                     значение этого поля записано в теге asu_tp. 
                Тип ОМ — тип объекта мониторинга, указанный в инвентарных данных
                        ; Поле Тип ОМ соответствует типу ОЗ в DATAPK.
                Операционная система — операционная система объекта мониторинга, указанная в
                    карточке инвентарных данных  в
                    ;
                Способ мониторинга — описывает, каким образом осуществляется мониторинг.
                    Возможные значения:
                        Агент — получение данных с объектов мониторинга с применением
                            агентов;
                         — получение данных с объектов мониторинга по протоколу ;
                         — получение данных с объектов мониторинга c использованием технологии
                            JMX;
                         — получение данных с объектов мониторинга c использованием технологии
                                .
                Описание — текстовое описание объекта мониторинга, внесенное на сервере
                    ;
                Обновление свойств ОМ — дата и время последнего полного обновления информации об
                    объекте мониторинга. По умолчанию обновление свойств  происходит каждые 480 минут;
                Внешние ссылки — содержит ссылки, добавленные в качестве значения полей «URL A»,
                    «URL B», «URL C» в инвентарных данных на сервере мониторинга  или Zabbix. В окне
                    отображаются только те поля, которые содержат ссылки. Если на сервере
                    мониторинга не заполнено ни одно из полей «URL A», «URL B», «URL C», то раздел
                    «Внешние ссылки» не будет отображаться.  
                Сетевые интерфейсы — содержит список всех интерфейсов, которые есть у объекта
                    мониторинга. Для каждого интерфейса указан IP-адрес или DNS-имя.
|*|*|*|
    Список объектов мониторинга
        Список выводится при нажатии в боковом меню на раздел . 
                Список объектов мониторинга
            Над списком  выводится название
            «Объекты мониторинга». 
        Рядом с названием отображаются:
                Счетчик объектов мониторинга. Если никакие фильтры не применены, счетчик
                    показывает общее количество . Если
                    применены какие-либо фильтры, счетчик показывает количество отфильтрованных
                        /общее количество
                        .
                Кнопка обновления данных на странице . Через 1 минуту рядом с кнопкой появляется счетчик
                    времени с момента обновления страницы. Время отображается только в минутах.
        Список объектов мониторинга можно отфильтровать или отсортировать.
        При обновлении страницы в браузере или переходе на другую страницу
            выбранные фильтры и сортировка будут сброшены. При обновлении страницы с помощью кнопки
                 («Обновить данные») фильтры и сортировка не
            сбрасываются.
            Фильтры
            Ниже строки с названием находится фильтр «Филиал/»,
                который позволяет отобразить все 
                выбранных филиалов или . При нажатии на поле фильтра
                появляется выпадающий список c имеющимися филиалами и . 
                    Фильтр «Филиал/ТK»
            При выборе филиала входящие в него  не выбираются
                автоматически. Выбор  доступен независимо от того,
                выбран ли филиал, к которому он относится. Если у филиала 5 или больше вложенных
                    , становятся доступны кнопки:
                    «Выделить все» — нажмите, чтобы выбрать все ,
                        входящие в филиал.
                    «Снять выделение» — нажмите, чтобы отменить выбор всех , входящих в филиал.
                В списках фильтров можно выбрать одно или несколько значений. 
                    Чтобы закрыть список и применить фильтр, после выбора всех нужных значений
                        кликните вне области фильтра. 
                    Чтобы отменить выбор конкретного значения, еще раз кликните по этому
                        значению в выпадающем списке. 
                    Чтобы сбросить примененный фильтр целиком, нажмите на кнопку  в области фильтра. 
                    Чтобы сбросить сразу все выбранные фильтры, нажмите на кнопку  справа от фильтра.
            Сортировка
            По умолчанию  отсортированы по
                возрастанию по следующим столбцам:
                    Филиал;
                     (внутри филиала);
                    Наименование (внутри /филиала).
                Можно отсортировать  вручную по
                наименованию или филиалу.
            Свойства объектов мониторинга
            Для просмотра полного списка 
                используется вертикальная прокрутка списка справа.
            В списке отображаются следующие свойства объектов мониторинга: 
                Наименование (отображаемое имя ).
                Мониторинг — индикатор статуса объекта мониторинга. Возможные значения:
                         Активирован — активирован и доступен по
                            одному из каналов мониторинга. Статус «Активирован» не отображается при
                            использовании мониторинга по протоколу .
                         Недоступен — объект мониторинга недоступен
                            ни по одному из каналов мониторинга
                         Деактивирован — объект мониторинга
                            деактивирован администратором сервера мониторинга.
                Филиал — наименование сервера мониторинга, к которому подключен
                        . При нажатии на значение
                    этого столбца открывается окно «Свойства сервера мониторинга». Подробнее см. в
                    разделе .
                 — наименование сервера агентовагентовудаленного мониторинга, к которому подключен . При нажатии на значение этого столбца
                    открывается окно «Свойства сервера агента». Подробнее см. в разделе .
                Проблемы — количество проблем .
                    При нажатии на количество проблем появится всплывающее окно со списком проблем.
                        Окно со списком проблем ОМ
                    Проблемы в списке отсортированы по уровню критичности, сверху расположены
                    наиболее важные. В списке отображается не более 5 проблем. Внизу окна
                        находится ссылка «Открыть полный список проблем». При нажатии на ссылку в
                        новой вкладке откроется страница  с
                        фильтрацией по выбранному  и
                        состоянию («Требует решения»). Отфильтрованные проблемы также будут
                        отсортированы по важности по убыванию.Чтобы закрыть окно со списком
                        проблем, нажмите на кнопку .
                АСУ ТП — соответствует значению тега asu_tp. Поле не заполняется, если тег
                    отсутствует.
                IP-адрес — IP-адрес интерфейса ,
                    по которому осуществляется мониторинг.
                ОС — операционная система .
                 — 
                    . Если  находится в состоянии технического
                            обслуживания:
                            поле содержит дату начала технического обслуживания
                                    ;
                            все значения строки этого  серого цвета. 
                        Если  не находится
                        в состоянии технического обслуживания:
                            поле не заполняется;
                            все значения строки этого  черного цвета. 
                Тип  — тип объекта мониторинга,
                    указанный в инвентарных данных .
                        Поле Тип ОМ соответствует типу ОЗ в
                        DATAPK.
                Обновлен — дата и время последнего успешного обновления статуса
                         или полных данных об
                        .
                Ссылки — если на сервере мониторинга  или Zabbix в разделе инвентарных данных
                    заполнено хотя бы одно из полей «URL A», «URL B», «URL C», то в этом разделе
                    отобразится кнопка . При нажатии на кнопку 
                    откроется окно со списком ссылок.
                        Окно, содержащее ссылку из поля «URL A»
                    При нажатии на ссылку указанный веб-сайт откроется в новой вкладке
                    браузера.
|*|*|*|
    Общие элементы веб-интерфейса
            Кнопка «Отменить»
            Во всех редактируемых экранных формах веб-интерфейса при нажатии на кнопку «Отменить»
                форма закрывается без сохранения данных. В случае наличия несохраненных данных в
                форме выводится предупреждение.
                Предупреждение о наличии несохраненных изменений
            В редактируемых экранных формах нажатие на кнопку 
                соответствует действию нажатия на кнопку «Отменить». Это значит, что при нажатии на
                     редактируемая форма также закрывается без сохранения данных, при этом в случае
                наличия несохраненных данных в форме выводится предупреждение. 
            Сортировка значений в таблицах
            В таблицах реализована возможность сортировки записей по определенным столбцам.
|*|*|*|
    Главное меню веб-интерфейса
            Главное (боковое) меню веб-интерфейса содержит следующие разделы:
                    . Содержит функции просмотра
                        обобщенной информации об объектах мониторинга и нерешенных проблемах в виде
                        графиков (см. раздел ).
                    . Содержит функции подключения
                        серверов мониторинга уровня филиалов и управления ими (подключение,
                        отключение и т.п.) (см. раздел ).
                    . Содержит функции просмотра
                        списков объектов мониторинга, подключенных к серверам мониторинга (см.
                        раздел ).
                    . Содержит функции просмотра и
                        настройки списка ИТ-услуг (см. раздел ).
                    . Содержит функции просмотра списков
                        проблем объектов мониторинга (см. раздел ).
                        . Содержит функции просмотра списка событий
                        (см. раздел ).
                    . Содержит функции по настройке
                        сервера  (см. раздел ).
                Боковое меню имеет две формы — полную и свернутую. По умолчанию боковое меню
                развернуто. Чтобы свернуть боковое меню, нажмите на кнопку  внизу боковой панели. Чтобы развернуть боковое меню,
                нажмите на кнопку  внизу боковой панели. Настроенное состояние свернутости
                меню сохраняется локально для браузера.
        В нижней части боковой панели отображается дата и время на сервере с указанием часового
            пояса и кнопки:
                 («Перейти в профиль
                    пользователя») — при нажатии на кнопку откроется окно со свойствами текущего
                    пользователя, в котором можно изменить пароль или данные пользователя. Подробнее
                    см. в разделе .
                 («О системе») — при нажатии на кнопку откроется
                    окно, которое содержит информацию о системе: название и версию продукта,
                    информацию о производителе. 
                        Окно с информацией о системе
                 («Выйти») — при нажатии на кнопку текущая сессия
                    пользователя будет завершена, на экране появится форма авторизации.
|*|*|*|
    Главный экран и элементы веб-интерфейса
        Главный экран веб-интерфейса сервера визуализации и управления  состоит из
            основного (бокового) меню и раздела для отображения контента соответствующего раздела. 
            Главный экран интерфейса сервера 
            Главный экран интерфейса сервера 
            Главный экран интерфейса сервера 
        В этом разделе:
                Главное меню веб-интерфейса
                Общие элементы
                    веб-интерфейса
|*|*|*|
    Единицы измерения элементов данных
        Если в настройках элемента данных указан символ единицы измерения, к этому
                элементу будет добавлена последующая обработка полученного значения и этот элемент
                данных будет отображаться с заданным постфиксом единицы измерения.Доступны
            следующие единицы измерения:
                B — байты. Если значение делится на 1024, оно будет автоматически преобразовано
                    в KB. Например, 1024B будет отображаться как 1KB. 
                KB — килобайты.
                Bps — байты в секунду. Если значение делится на 1024, оно будет автоматически
                    преобразовано в KBps. Например, 1024Bps будет отображаться как 1KBps. 
                KBps — килобайты в секунду.
                unixtime — переводится в «гггг.мм.дд чч:мм:сс». Для корректного перевода
                    возвращаемое значение должно быть с типом данных «Числовой (целое
                    положительное)».
                uptime — переводится в «чч:мм:сс» или в «N дней, чч:мм:сс». Например, если вы
                    получили значение равное 881764 (секунд), оно отобразится как «10 дней,
                    04:56:04».
                    s — переводится в «ггг ммм ддд ччч ммм ссс мс»; параметр рассматривается как
                        количество секунд.
                    Например, если вы получили значение равное 881764 (секунд), оно будет
                        отображаться как «10д 4ч 56м». Отображаются только 3 верхних основы, такие
                        как «1м 15д 5ч» или «2ч 4м 46с». Если нет дней, то отображаются только два
                        уровня — «1м 5ч» (минуты, секунды или миллисекунды не будут отображаться).
                        Если значение меньше чем 0.001, оно отображается как «< 1 ms».
                если единица измерения представлена с ! префиксом, тогда к
                    значениям элементов данных префиксы/обработка единиц измерения применяться не
                    будут. См. раздел Черный список
                        единиц измерения.
        Черный список единиц измерения
        По умолчанию, указывая единицу измерения элементу данных, можно увидеть добавленный
            префикс множителя — например, значение 2048 с единицей измерения B будет отображаться
            как 2KB.
        Однако, используя префикс «!», можно избежать конвертации любой единицы измерения,
            например !B. 
        Примеры значений и единиц измерения:
            1024 !B → 1024 B
            1024 B → 1 KB
            61 !s → 61 s
            61 s → 1m 1s
            0 !uptime → 0 uptime
            0 uptime → 00:00:00
            0 !! → 0 !
            0 ! → 0
        Правильным способом внесения единиц измерения в черный список будет !ms, !rpm, !RPM,
            !%.
|*|*|*|
    Формат ключа элемента данных
        Ключ — это параметр элемента данных, который определяет, какого рода данные будут
            собираться с узла сети. 
        Ключ имеет формат:keyname[parameters]Где:
                keyname — имя ключа. Разрешенные символы имени:
                        все цифры;
                        все буквы в нижнем регистре;
                        все буквы в верхнем регистре;
                        подчеркивание;
                        дефис;
                        точка.
                parameters — параметры ключа. Ключ элемента данных может принимать несколько
                    параметров, которые должны быть разделены запятой. Параметры указываются в
                    квадратных скобках. Виды параметров:
                        Строка в кавычках: 
                                Разрешен любой символ в Юникод. 
                                Если строка ключевого параметра содержит запятую, этот параметр
                                    должен быть заключен в кавычки.
                                Если строка ключевого параметра содержит кавычки, этот параметр
                                    должен быть заключен в кавычки, а каждая кавычка, являющаяся
                                    частью строки параметра, должна экранироваться символом обратной
                                    косой черты (\).
                            Используйте для параметров ключа элемента данных двойные
                                кавычки. Одинарные кавычки не поддерживаются.
                        Строка без кавычек:
                                Разрешен любой символ в Юникод, за исключением запятой и правой
                                    квадратной скобки (]). 
                                Параметр, который не заключен в кавычки, не может начинаться с
                                    левой квадратной скобки ([).
                        Массив: 
                                Должен быть заключен в квадратные скобки, в которых каждый
                                    индивидуальный параметр следует один за другим, согласно
                                    правилам и синтаксису. 
                            Многоуровневые массивы параметров, например
                                    [a,[b,[c,d]],e], не поддерживаются.
                    Параметр можно оставить пустым, тогда будет использоваться значение по
                    умолчанию. В этом случае нужно добавить соответствующее количество запятых, если
                    какой-то из дальнейших параметров все же нужно задать. Например, ключ элемента
                    данных icmpping[,,200,,500] будет указывать на то, что период проверки
                    ping 200 миллисекунд, время ожидания - 500 миллисекунд, а все остальные
                    параметры будут заполнены значениями по умолчанию.
        Ключ должен быть уникальным в пределах одного узла сети.
        Если тип ключа «агент», «агент (активный)», «простая проверка» или «агрегированный», то
            значение ключа должно поддерживаться агентом или сервером.
|*|*|*|
    Глоссарий
|*|*|*|
    Макросы
        Макросы позволяют автоматически подставить изменяемое значение в парметр, где они
            используются. Пример: для триггера {New host:
                system.cpu.load[percpu,avg1].last()}>5 имя «Загрузка процессора превышает
            $1 на {HOST.NAME}» будет автоматически изменено на «Загрузка процессора превышает 5 на
            New host». 
                    Макросы, поддерживаемые в 
                                Макрос
                                Где поддерживается
                                Описание
                                {HOST.HOST}
                                Имя триггера, URL триггера, описание триггера, теги событий,
                                    подписи к иконкам на картах сети
                                Имя узла сети
                                {HOST.NAME}
                                Имя триггера, URL триггера, описание триггера, теги событий,
                                    подписи к иконкам на картах сети
                                Видимое имя узла сети
                                {HOST.CONN}
                                Имя триггера, URL триггера, описание триггера, теги событий,
                                    подписи к иконкам на картах сети
                                IP или DNS имя узла сети, в зависимости от настроек узла
                                    сети
                                {HOST.DNS}
                                Имя триггера, URL триггера, описание триггера, теги событий,
                                    подписи к иконкам на картах сети
                                DNS имя узла сети
                                {HOST.IP}
                                Имя триггера, URL триггера, описание триггера, теги событий,
                                    подписи к иконкам на картах сети
                                IP-адрес узла сети
                                {ITEM.VALUE}
                                Имя триггера, URL триггера, описание триггера, теги
                                    событий
                                Последнее значение N-го элемента данных:
                                        из истории, если используется в контексте изменения
                                            состояния триггера;
                                        из выражения триггера, если используется не в контексте
                                            изменения состояния триггера.
                                {ITEM.LASTVALUE}
                                Имя триггера, URL триггера, описание триггера, теги
                                    событий
                                Последнее значение N-го элемента данных из выражения
                                    триггера, который вызвал оповещение.
                                {$MACRO}
                                Имя триггера, URL триггера, описание триггера, теги
                                    событий
                                Пользовательский макрос. Должен начинаться с символа «$»,
                                    «MACRO» — название, заданное пользователем.
                                $NГде N — число от 1 до 9.
                                Имя триггера, описание триггера
                                Ссылка на N-ую константу из выражения.
                                {TRIGGER.ID}
                                URL триггера
                                ID триггера, который вызвал действие.
                                {MAP.ID}
                                URL карты сети
                                ID карты сети.
                                {HOSTGROUP.ID}
                                URL карты сети
                                ID группы узлов сети.
                                {HOST.ID}
       |*|*|*|                         URL карты сети
                                ID узла сети.
                                {HOST.DESCRIPTION}
                                Подписи к иконкам на картах сети
                                Описание узла сети.
                                {TRIGGER.EVENTS.ACK}
                                Подписи к иконкам на картах сети
                                Количество подтвержденных событий у элемента карты на картах
                                    сети или в оповещениях на триггер, который сгенерировал текущее
                                    событие.
                                {TRIGGER.EVENTS.PROBLEM.ACK}
                                Подписи к иконкам на картах сети
                                Количество подтвержденных ПРОБЛЕМА событий у всех триггеров
                                    вне зависимости от их состояния.
                                {TRIGGER.EVENTS.PROBLEM.UNACK}
                                Подписи к иконкам на картах сети
                                Количество неподтвержденных ПРОБЛЕМА событий у всех триггеров
                                    вне зависимости от их состояния.
                                {TRIGGER.EVENTS.UNACK}
                                Подписи к иконкам на картах сети
                                Количество неподтвержденных событий у элемента карты на карте
                                    сети или в оповещениях на триггер, который сгенерировал текущее
                                    событие.
                                {TRIGGER.PROBLEM.EVENTS.PROBLEM.ACK}
                                Подписи к иконкам на картах сети
                                Количество подтвержденных ПРОБЛЕМА событий у триггеров в
                                    состоянии ПРОБЛЕМА.
                                {TRIGGER.PROBLEM.EVENTS.PROBLEM.UNACK}
                                Подписи к иконкам на картах сети
                                Количество неподтвержденных ПРОБЛЕМА событий у триггеров в
                                    состоянии ПРОБЛЕМА.
                                {TRIGGERS.UNACK}
                                Подписи к иконкам на картах сети
                                Количество неподтвержденных триггеров у элемента карты
                                    независимо от состояния триггеров. Триггер считается
                                    неподтвержденным, если по крайней мере одно из всех его ПРОБЛЕМА
                                    событий не подтверждено.
                                {TRIGGERS.PROBLEM.UNACK}
                                Подписи к иконкам на картах сети
                                Количество неподтвержденных триггеров в состоянии ПРОБЛЕМА у
                                    элемента карты сети. Триггер считается неподтвержденным, если по
                                    крайней мере одно из всех его ПРОБЛЕМА событий не
                                    подтверждено.
                                {TRIGGERS.ACK}
                                Подписи к иконкам на картах сети
                                Количество подтвержденных триггеров у элемента карты сети
                                    независимо от состояния триггеров. Триггер считается
                                    подтвержденным, если все его ПРОБЛЕМА события являются
                                    подтвержденными.
                                {TRIGGERS.PROBLEM.ACK}
                                Подписи к иконкам на картах сети
                                Количество подтвержденных триггеров в состоянии ПРОБЛЕМА у
                                    элемента карты сети. Триггер считается подтвержденным, если все
                                    его ПРОБЛЕМА события являются подтвержденными.
|*|*|*|
    Режим отладки
        Режим отладки предназначен для диагностики проблем производительности на страницах
            веб-интерфейса.
        Режим отладки можно активировать для отдельной группы пользователей. Подробнее см. в
            разделе .
        При активации режима отладки для группы пользователей становится доступна кнопка
            «Отладка» в нижнем правом углу экрана. При нажатии на кнопку «Отладка» ниже содержимого
            страницы откроется новое окно, которое содержит статистику SQL-страницы, а также список
            API-вызовов и отдельные SQL-запросы. 
            Активированный режим отладки негативно сказывается на
                производительности веб-интерфейса.
|*|*|*|
    Глоссарий
|*|*|*|
    UDV-ITM-M
    UDV-ITM-M — сервер мониторинга.Применяется для:
                сбора данных о производительности с подключенных объектов мониторинга;
                консолидации данных, в т. ч. полученных с сервера агентовагентовудаленного мониторинга;
                передачи консолидированных данных на сервер визуализации и управления;
                визуализации информации об использовании вычислительных ресурсов и каналов связи
                    объектов мониторинга филиала;
                оповещения ответственных лиц в случае выявления сбоя, либо отклонения
                    показателей функционирования объекта мониторинга от допустимых.
            *В ранних версиях использовалось название Сервер консолидации,
        ITM-K.
|*|*|*|
    ПК DATAPK ITM
    ПК DATAPK ITM — программный комплекс мониторинга безопасности и контроля ресурсов.
        Предназначен для мониторинга IT-инфраструктуры и сервисов предприятий. Включает в себя
        следующие конфигурации:
             — сервер агентов (прокси-сервер). Применяется для: 
                        сбора данных о производительности с подключенных объектов
                            мониторинга;
                        передачи собранных данных на сервер консолидации.
             — сервер консолидации. Применяется для:
                        сбора данных о производительности с подключенных объектов
                            мониторинга;
                        консолидации данных, в т. ч. полученных с сервера агентов;
                        передачи консолидированных данных на сервер визуализации и
                            управления;
                        визуализации информации об использовании вычислительных ресурсов и
                            каналов связи объектов мониторинга филиала;
                        оповещения ответственных лиц в случае выявления сбоя, либо отклонения
                            показателей функционирования объекта мониторинга от допустимых.
             — сервер визуализации и управления. Применяется для:
                        приема данных с сервера консолидации;
                        анализа данных;
                        визуализации данных;
                        предоставления высокоуровневой информации о состоянии ИТ-ресурсов  предприятия. 
|*|*|*|
    DB Syncer
            DB Syncer – процесс, используемый для передачи данных из кэшей  в БД.
            Если время от времени эти процессы используют большое количество ресурсов ОС, это
            означает, что на  отправляется большой объем данных. Чаще всего подобное
        происходит, когда  теряет связь с  и при
            повторном подключении один или несколько прокси отправляют все собранные данные на
            сервер.
|*|*|*|
    Выпуск SSL-сертификатов
        В этом разделе рассмотрен выпуск доверенных сертификатов для доступа к веб-интерфейсу  по сетевому имени. 
        Перед выпуском сертификатов остановите 
            командой:cd /opt/itm-vm && docker-compose down
        Выпуск сертификатов для  состоит из следующих этапов:
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
                Добавлены разделы:
                Часть информации со страницы  перенесена в новые разделы  и .
                Часть информации со страницы  перенесена в новые разделы  и .
                Обновлены разделы:
|*|*|*|
    Глоссарий
|*|*|*|
    Что нового?
        Основные изменения в ПО сервера  v.1.7.0.0:
            Изменения в версии 1.7.0.0
                        Категория
                        Изменения в продукте
                        Разделы документации
                        Шаблоны
                         Изменены следующие шаблоны:
                                Агент.yaml — добавлены инвентарные поля к
                                    некоторым из собираемых данных.
                                Windows агентный сбор.yaml — изменена панель
                                    «Производительность системы», добавлен график для оперативной
                                    памяти.
                                Linux агентный сбор.yaml — изменена панель
                                    «Производительность системы». 
                                Сетевое универсальное устройство SNMP.yaml —
                                    отредактированы правила предобработки.
                                Windows SNMP.yaml — добавлены инвентарные поля
                                    к некоторым из собираемых данных. Исправлено имя макроса в
                                    присоединенном к Windows SNMP.yaml шаблоне
                                        SNMP MIB. Ресурсы узла.
                                Linux SNMP.yaml — добавлены инвентарные поля к
                                    некоторым из собираемых данных.
                                Сервер агентов ITM-A.yaml — исправлена опечатка
                                    в имени элемента данных.
                                Общий ПЛК.yaml — добавлены элементы данных для
                                    мониторинга узлов с помощью ICMP. 
                                APC Smart-UPS.yaml — отредактированы правила
                                    предобработки. 
                                Eltex MES SNMPv2.yaml — отредактированы правила
                                    предобработки. Исправлен мониторинг коммутаторов в стеке
                        Шаблоны, Элементы данных, Графики
                        ,
                        Шаблоны
                        , , , 
|*|*|*|
    Обновление UDV-ITM-M с версии 1.6.0.0 до версии 1.6.0.1
            Для обновления сервера 
                 с версии 1.6.0.0 до версии 1.6.0.1:
                Перейдите в рабочую директорию : 
                    cd /opt/itm-k
                Остановите работу сервера:
                    docker-compose down
                Переименуйте старую рабочую директорию 
                    :
                    mv /opt/itm-k /opt/itm-k-bkp
                Создайте директорию для новой версии 
                    :
                    mkdir /opt/itm-k
                Загрузите в директорию /opt/itm-k на сервере 
                     следующие файлы из каталога с обновленным дистрибутивом:
                        datapk_itm-k_v1.6.0.1.tar.gz;
                        docker-compose.release.yaml.
                Перейдите в директорию, куда были перемещены файлы с обновленным дистрибутивом
                    :
                    cd /opt/itm-k
                Установите обновленные образы командой:
                    docker load -i datapk_itm-k_v1.6.0.1.tar.gz
                Скопируйте данные из старой рабочей директории /opt/itm-k-bkp в новую директорию /opt/itm-k:
                    cp -r /opt/itm-k-bkp/.env /opt/itm-k-bkp/env /opt/itm-k
                Запустите контейнеры:
                    docker-compose up -d
                Проверьте результат обновления. Для этого перейдите в веб-интерфейс 
                     по ранее использовавшемуся адресу.
                Если обновление прошло успешно, удалите директорию с предыдущей версией 
                     1.6.0.0:
                    rm -rf /opt/itm-k-bkp/
            Если обновленный сервер мониторинга 
                 был подключен к серверу
                , то  не обнаружит, что версия сервера мониторинга
                изменилась, и продолжит делать запросы, соответствующие старой версии сервера
                мониторинга. Для корректной работы необходимо на  удалить сервер
                мониторинга 
                 и добавить его заново. При
                этом все данные, связанные с сервером мониторинга, будут удалены и появятся только
                при повторном добавлении этого сервера.
|*|*|*|
    Обновление UDV-ITM-M с версии 1.4.0.0 или 1.5.0.0 до версии 1.6.0.1
            Для обновления сервера  с версии 1.4.0.0 или 1.5.0.0 до версии
                1.6.0.1:
                    Перейдите в рабочую директорию : 
                        cd /opt/datapkitm
                Загрузите на сервер  следующие файлы из
                    каталога с обновленным дистрибутивом:
                        datapk_itm-k_v1.6.0.1.tar.gz
                        docker-compose.release.yaml
                        iptables
                Установите обновленные образы командой:
                    docker load -i datapk_itm-k_v1.6.0.1.tar.gz
                    При обновлении с версии 1.4.0.0 выполните настройку iptables. Для этого:
                            Если вы используете ОС Centos, установите пакет
                                iptables-services:
                                yum install iptables-services
                            Если вы не вносили дополнительные изменения в правила iptables (сверх
                                рекомендованных при установке), данный пункт можно пропустить. Если
                                изменения были, нужно перенести их в файл iptables. Для
                                этого:
                                    Сохраните в файл правила iptables, примененные в системе. Для
                                        этого выполните
                                        команду:iptables-save > iptables.bkpВ
                                        результате все правила будут сохранены в файл
                                        iptables.bkp в текущей директории.
                                    Найдите добавленные вами правила и перенесите их из файла
                                        iptables.bkp в файл
                                        iptables из комплекта поставки. Учитывайте,
                                        что нестандартные правила должны добавляться в соответствующую
                                        цепочку iptables и находиться в соответствующей позиции.
                                        Пример: Если ранее было добавлено
                                            нестандартное правило -A INPUT -p tcp -m tcp --dport
                                                25 -j ACCEPT, открывающее порт для пересылки
                                            сообщений по протоколу SMTP, то такое правило должно
                                            находиться между строчками -A INPUT -m state --state
                                                RELATED,ESTABLISHED -j ACCEPT и -A
                                                    INPUT -p tcp -j REJECT --reject-with
                                                    tcp-reset.
                            Замените файл /etc/sysconfig/iptables на файл
                                iptables из комплекта поставки:
                                mv iptables /etc/sysconfig/
                            Отредактируйте файл iptables: 
                                    Откройте файл для редактирования с помощью
                                        команды:vi /etc/sysconfig/iptables
                                    Закройте доступ из неиспользуемых подсетей, применяемых в
                                        docker-контейнерах других компонентов. Для этого закомментируйте
                                        строки -A INPUT -s 172.15.0.0/24 -j ACCEPT
                                        (номер 15) и -A INPUT -s 172.16.240.0/24 -j
                                            ACCEPT (номер 21).Включить отображение
                                                номеров строк в файле можно с помощью следующих действий:
                                                    Нажмите клавишу «Esc», чтобы перейти в командный
                                                        режим. 
                                                    Введите :set number или
                                                        :set nu и нажмите «Enter».
                                                    Нажмите клавишу «i», чтобы перевести редактор в
                                                        режим ввода текста.
                                                    После закрытия файла нумерация строк отключится
                                                        автоматически. Чтобы отключить абсолютные номера
                                                        строк на время редактирования файла, перейдите в
                                                        командный режим и выполните команду :set
                                                            nonumber или :set
                                                                nonu.
                                    Если требуется мониторинг сервера с помощью  или по
                                        протоколу SNMP, раскомментируйте строки #-A INPUT -p tcp
                                            -m tcp --dport 10050 -j ACCEPT (номер 51) и
                                        #-A INPUT -p udp -m udp --dport 161 -j
                           |*|*|*|                 ACCEPT (номер 48) соответственно.
                                    Сохраните файл и выйдите из режима
                                        редактирования::wq
                            Проверьте владельца файла и права доступа командой: 
                            ls -l /etc/sysconfig/iptablesВладелец и права
                                должны совпадать с указанными на скриншоте: 
                                    Владелец и права файла iptables
                                В противном случае выполните команду:
                                chown root:root /etc/sysconfig/iptables && chmod 600 /etc/sysconfig/iptables
                                Проверьте, что владелец и права теперь соответствуют указанным на
                                скриншоте. 
                            Чтобы применить новые правила межсетевого экрана, перезапустите службы
                                iptables и docker, выполнив команды:
                                systemctl restart iptables.service
systemctl restart docker.service
                Настройте запуск службы СУБД после службы docker. Для этого:Перейдите в режим редактирования службы СУБД:systemctl edit jatoba-*.serviceЕсли файл не пуст, перейдите к пункту .Добавьте блок [Unit]:[Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.serviceЕсли база данных хранится на отдельном томе, добавьте после блока [Unit] блок [Service]:[Service]
Environment=PGDATA=/storage/baseГде /storage/base — путь к базе данных, который был настроен на шаге 
                            раздела 
                            .Для применения изменений в настройках службы СУБД выполните команду:systemctl daemon-reload
                                Проверьте состояние службы Jatoba:
                                    systemctl status jatoba-*
                                Измените настройки синхронизации с , если ранее они выполнялись для  предыдущей
                                    версии:
                                        Перейдите в веб-интерфейс . 
                                        Перейдите на страницу  → .
                                        Нажмите на имя роли «Sync-itm-m role».
                                        Откроется страница редактирования роли.
                                        В выпадающем меню «Тип пользователя» измените значение на
                                            «Супер-администратор».
                                        В разделе «Доступ к Веб элементам» → «Настройка» активируйте чекбокс
                                            «Услуги».
                                        В разделе «Доступ к API» → «Методы API» добавьте в список разрешений
                                            метод *.get и удалите другие методы.
                                                Настройка списка разрешений
                                        Нажмите на кнопку «Обновить» для сохранения изменений.
                    Установите агент версии 2 согласно инструкции  (за исключением п. , так как межсетевой экран был настроен ранее в п.  текущей инструкции).
                    В файле конфигурации агента /etc/zabbix/zabbix_agent2.conf
                        установите параметр =172.16.239.0/24
                        (адрес подсети контейнеров ).
                    Измените настройки мониторинга сервера, на котором установлен . Для этого: 
                            Перейдите в веб-интерфейс .  
                            Перейдите на страницу  → .
                            Найдите объект мониторинга — сервер , в столбце «интерфейс» у него будет
                                указано «zabbix-agent: 10050».
                                    Cервер  в списке объектов мониторинга
                            Нажмите на имя объекта мониторинга, чтобы перейти к его
                                настройкам.
                            Измените настройки интерфейса объекта мониторинга:
                                    Введите в поле «IP адрес» значение 172.17.0.1
                                        (адрес сервера в подсети docker).
                                    Введите в поле «DNS» значение
                                        host.docker.internal.
                                    Изменение настроек интерфейса 
                            Нажмите на кнопку «Обновить» для сохранения настроек . 
                            Убедитесь, что  стал
                                доступен. 
                Удалите файл .agent.env из директории
                        /opt/itm-k/env: 
                    rm -rf /opt/itm-k/env/.agent.env
            Если обновленный сервер мониторинга  был подключен к серверу , то  не обнаружит, что версия сервера мониторинга изменилась, и продолжит делать
                запросы, соответствующие старой версии сервера мониторинга. Для корректной работы
                необходимо на  удалить сервер мониторинга  и добавить его заново. При этом все данные, связанные с сервером
                мониторинга, будут удалены и появятся только при повторном добавлении этого
                сервера.
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
            Добавлены разделы:
            Разделы  и  перенесены в раздел . 
            Изменены разделы:
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
            Добавлены разделы:
            Исключены разделы:
                    Настройка LDAPS в ОС сервера ;
                    Ошибка при подключении  к  из-за
                        недопустимых символов в имени ;
                    Переменные файла .agent.env;
                    Рекомендации по использованию переменных файла .agent.env;
            Изменены разделы:
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
                Добавлены разделы:
                Обновлены разделы:
                Обновлены рекомендации по использованию переменной  в разделах  и
                    .
                Добавлены новые способы устранения нештатных ситуаций:
                        Причина 9 в разделе 
                В разделы  и  добавлена
                    информация об установке  и  на один сервер.
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
                Добавлены разделы: 
                Обновлены разделы:
                Исключены разделы:
                        «Создание резервной копии всех БД и файлов журналов БД Jatoba»
                        «Восстановление резервной копии всех БД и файлов журналов БД
                            Jatoba»
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
            Добавлены разделы:
            Добавлены способы устранения нештатных ситуаций:
                    .
            Изменены разделы:
            Исключены разделы:
                    «Создание резервной копии всех БД и файлов журналов БД Jatoba»
                    «Восстановление резервной копии всех БД и файлов журналов БД Jatoba»
|*|*|*|
    Что нового?
        Основные изменения в ПО сервера  v.1.7.0.0:
            Изменения в версии 1.7.0.0
                        Категория
                        Изменения в продукте
                        Разделы документации
                        Шаблоны
                         Изменены следующие шаблоны:
                                Агент.yaml — добавлены инвентарные поля к
                                    некоторым из собираемых данных.
                                Windows агентный сбор.yaml — изменена панель
                                    «Производительность системы», добавлен график для оперативной
                                    памяти, добавлены инвентарные поля к некоторым из собираемых
                                    данных, название элемента данных «Описание системы» изменено на
                                    «Системная информация».
                                Linux агентный сбор.yaml — изменена панель
                                    «Производительность системы», добавлены инвентарные поля к
                                    некоторым из собираемых данных, деактивирован элемент данных
                                    «Список установленных пакетов», название элемента данных
                                    «Описание системы» изменено на «Системная информация». 
                                Сетевое универсальное устройство SNMP.yaml —
                                    отредактированы правила предобработки.
                                Windows SNMP.yaml — добавлены инвентарные поля
                                    к некоторым из собираемых данных, исправлено имя макроса в
                                    присоединенном к Windows SNMP.yaml шаблоне
                                        SNMP MIB. Ресурсы узла, деактивирован
                                    элемент данных «Идентификатор системного объекта».
                                Linux SNMP.yaml — добавлены инвентарные поля к
                                    некоторым из собираемых данных, деактивирован элемент данных
                                    «Идентификатор системного объекта».
                                Сервер агентов ITM-A.yaml — исправлена опечатка
                                    в имени элемента данных.
                                Общий ПЛК.yaml — добавлены элементы данных для
                                    мониторинга узлов с помощью ICMP. 
                                APC Smart-UPS.yaml — отредактированы правила
                                    предобработки. 
                                Eltex MES SNMPv2.yaml — отредактированы правила
                                    предобработки. Исправлен мониторинг коммутаторов в стеке
                        , 
                        Шаблоны
                        , 
                        Шаблоны
                        —
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
                Добавлены разделы: 
                Обновлены разделы:
|*|*|*|
    Что нового?
        Основные изменения в ПО сервера  версии 1.7.0.0:
                Изменения  версии
                    1.7.0.0
                            Категория
                            Изменения в продукте
                            Разделы документации
                            ИТ-услуги
                            —
                            Серверы мониторинга
                            —
                            Серверы мониторинга
                            —
                            Скрипты, переменные
                            —
                            Внешний вид
                            —
                            Отчет о проблемах
                            Изменен шаблон письма с отчетом о проблемах:
                                    Добавлены столбцы с нумерацией строк и состоянием
                                        проблемы.
                                    Добавлена строка с информацией об общем количестве событий и
                                        о количестве нерешенных проблем.
                                    Добавлено наименование оповещения
                            Роли пользователей
                            Роли пользователей
                            —
                            Email-оповещения, внешний вид
                            Переменные, основные настройки
                            , , 
                            Серверы мониторинга
                            Серверы мониторинга
                            Добавлено автоматическое обновление до новой версии серверов
                                мониторинга, подключенных к . После обновления сбор данных
                                с серверов мониторинга продолжится
                            Серверы мониторинга
                            , , , , 
                            Проблемы, серверы мониторинга, объекты мониторинга
                            , , , 
                            Объекты мониторинга
                            Объекты мониторинга
                            На странице :
                                    исключено дерево филиалов и ,
                                        теперь по умолчанию в списке отображаются все
                                            ;
                                    добавлена возможность фильтрации  по филиалу и
                                            ;
                                    в таблицу со списком  добавлены столбцы «Тип
                                            » и
                                        «Ссылки»;
                                    добавлен счетчик количества ;
                                    добавлена возможность просмотра наиболее критичных проблем
                                        выбранного 
                                        при нажатии на значение в столбце «Проблемы» на странице
                                            ;
                                    столбец таблицы «Филиал/ТО» разделен на два: «Филиал» и
                                            «»;
                                    добавлена возможность сортировки по филиалу;
                                    изменены настройки сортировки по умолчанию
                            , 
                            Проблемы
                                На странице :
                                        Изменен счетчик записей;
                                        Добавлена возможность сортировки по длительности
                                            проблем;
                                        Добавлена возможность фильтрации списка по состоянию
                                            проблем и по объектам мониторинга;
                                        Добавлена возможность поиска  в фильтре «Объект»
                            Оповещения
                            —
                            Администрирование, журнал событий
                            , 
                            Объекты мониторинга, внешний вид
                            —
                            Внешний вид
                            Обновлен внещний вид ряда всплывающих окон:
                                    окно удаления правила оповещения;
                                    окно удаления сервера;
                                    окно очистки настроек LDAP;
                                    окно свойств сервера мониторинга;
                                    окно изменения свойств сервера мониторинга;
                                    окно информации об ИТ-услуге;
                                    окно настройки сбора данных;
                                    окно просмотра информации об объекте мониторинга;
                                    окно очистки настроек email-оповещений;
                                    окно подтверждения удаления пользователя;
                                    окно подтверждения изменения периода неактивности
                                        пользователя для блокировки сеанса;
                                    карточка проблемы
                            , , , , , , , , , , , 
                            Внешний вид, панель информации
                                    Изменен тип графиков «Количество объектов мониторинга по
                                        статусу» и «Количество объектов мониторинга по
                                        проблемности», а также пояснения к этим графикам
                            Внешний вид, панель информации
                                Изменен внешний вид график|*|*|*|ов:
                                        «Количество нерешенных проблем по важности»;
                                        «Изменение количества объектов мониторинга»;
                                        «Изменение количества проблем»
                            , 
                            Внешний вид, панель информации
                            Добавлена возможность изменения размера графиков: 
                                    «Количество объектов мониторинга по статусу»;
                                    «Количество объектов мониторинга по проблемности»;
                                    «Изменение количества объектов мониторинга»;
                                    «Количество нерешенных проблем по важности»;
                                    «Изменение количества проблем»
                            Панель информации
                            Панель информации
                            Панель информации, фильтры
                            Объекты мониторинга, серверы мониторинга
                                        Добавлена возможность просмотра окон «Свойства сервера
                                            агентов» и «Свойства сервера мониторинга» на страницах
                                                , .
                                        Добавлена возможность просмотра окна «Свойства сервера
                                            агентов» при нажатии в любом месте строки конкретного
                                                 на странице 
                            , , , , , , , 
                            Внешний вид
                            Изменено отображение процесса загрузки данных на следующих
                                    страницах:
                                    ;
                                    ;
                                    ;
                                    ;
                                    ;
                                    страница авторизации
                            —
                            Внешний вид
                            Исправлено отображение полосы прокрутки при загрузке
                                данных
                            —
                            Фильтры, объекты мониторинга
                            Добавлена возможность отмены сразу всех фильтров на страницах:
                                    ;
                            , 
                            Внешний вид
                            Изменен внешний вид таблиц при отсутствии данных и при
                                возникновении ошибки 502
                            —
                            Внешний вид, объекты мониторинга
                            Изменено отображение состояния в карточке  для объектов мониторинга на
                                техническом обслуживании
                            Синхронизация
                            Исправлена ошибка синхронизации метаданных
                            —
                            ИТ-услуги
                            Исправлена ошибка, возникавшая при попытке пользователя включить
                                ИТ-услугу, отключенную администратором
                            —
                            Фильтры, проблемы
                            Добавлена возможность фильтрации по  на странице 
                            Панель информации
                            Исправлена ошибка, при которой некорректно отображались подписи к
                                графикам на странице 
                            —
                            Внешний вид, серверы мониторинга
                            Во всплывающем окне со статусами синхронизаций на странице  параметр «Системные
                                свойства» переименован в «Свойства сервера мониторинга»
                            Внешний вид
                            Добавлено оповещение «Сервер не отвечает» при отсутствии ответа
                                от сервера в течение 30 секунд
                            —
                            Правила оповещений
                            Добавлена иконка, которая показывает состояние работоспособности
                                канала Email-оповещений на странце 
                            Серверы мониторинга
                            Добавлена возможность внеочередного сбора данных с сервера
                                мониторинга на странице 
                            Серверы мониторинга
                            Добавлена возможность свернуть или развернуть сразу все записи в
                                таблице на странице 
                            Серверы мониторинга
                            На странице :
                                    в таблицу добавлена информация о серверах удаленного
                                        мониторинга;
                                    добавлена возможность просмотра карточки сервера удаленного
                                        мониторинга
                            SIEM
                            Изменено событие о неуспешном входе в систему: если указанный при
                                попытке входа пользователь не существует, информация об этом
                                записывается в поле details объекта user_action
                            SIEM
                            Добавлена возможность настройки подключения к SIEM на странице
                                     → 
                            , 
                            Объекты мониторинга
                            Серверы мониторинга
|*|*|*|
    Что нового?
        Основные изменения в ПО сервера  v.1.7.0.0:
            Изменения в версии 1.7.0.0
                        Категория
                        Изменения в продукте
                        Разделы документации
                        Шаблоны
                         Изменены следующие шаблоны:
                                Агент.yaml — добавлены инвентарные поля к
                                    некоторым из собираемых данных.
                                Windows агентный сбор.yaml — изменена панель
                                    «Производительность системы», добавлен график для оперативной
                                    памяти.
                                Linux агентный сбор.yaml — изменена панель
                                    «Производительность системы». 
                                Сетевое универсальное устройство SNMP.yaml —
                                    отредактированы правила предобработки.
                                Windows SNMP.yaml — добавлены инвентарные поля
                                    к некоторым из собираемых данных. Исправлено имя макроса в
                                    присоединенном к Windows SNMP.yaml шаблоне
                                        SNMP MIB. Ресурсы узла.
                                Linux SNMP.yaml — добавлены инвентарные поля к
                                    некоторым из собираемых данных.
                                Сервер агентов ITM-A.yaml — исправлена опечатка
                                    в имени элемента данных.
                                Общий ПЛК.yaml — добавлены элементы данных для
                                    мониторинга узлов с помощью ICMP. 
                                APC Smart-UPS.yaml — отредактированы правила
                                    предобработки. 
                                Eltex MES SNMPv2.yaml — отредактированы правила
                                    предобработки. Исправлен мониторинг коммутаторов в стеке
                        , 
                        Шаблоны
                        , 
|*|*|*|
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер мониторинга.
                Рассчитайте контрольные суммы для файлов из дистрибутива по инструкции  и сравните полученные контрольные
                    суммы с эталонными, приведенными в документе «УЦЛК.468244.26 30.
                    Формуляр».
                Создайте директорию для файлов :
                    mkdir /opt/itm-k
                Скопируйте следующие файлы в директорию /opt/itm-k:
                        datapk_itm-k_[версия_сервера_консолидации].tar.gz;
                        docker-compose.release.yaml;
                        env_generator.sh.
                Скопируйте файл itm_create_executable_files.sh в директорию
                        /opt.
                Перейдите в директорию /opt/itm-k:
                    cd /opt/itm-k
                Рассчитайте контрольные суммы для исполняемых файлов по инструкции  и сравните полученные
                    контрольные суммы с эталонными, приведенными в документе «УЦЛК.468244.26 30.
                    Формуляр».
                Загрузите образы в операционную систему, на которой установлен сервер
                    мониторинга:
                    docker load -i datapk_itm-k_[версия_сервера_консолидации].tar.gz
                Создайте базу данных, пользователя и пароль для него. Для этого:
                        Войдите в интерактивный терминал для работы с postgresql под
                            пользователем postgres:
                            sudo -u postgres psql
                        Создайте пользователя с именем datapkitm и необходимым
                            паролем:
                            CREATE USER datapkitm WITH PASSWORD '[пароль служебного пользователя]';
                        Создайте базу данных:
                            CREATE DATABASE datapkitm WITH OWNER 'datapkitm' ENCODING 'UTF8' LC_COLLATE = 'ru_RU.UTF-8' LC_CTYPE = 'ru_RU.UTF-8' TEMPLATE template0;
                        Измените пароль пользователя postgres в базе
                            данных:
                            ALTER USER postgres WITH PASSWORD '[пароль]';
                        Убедитесь, что пользователь datapkitm создан:
                            \du
                        Убедитесь, что база данных datapkitm создана:
                            \l
                        Покиньте терминал:
                            \q
                Отредактируйте файл настройки базы данных. Для этого:
                        Откройте файл postgresql.conf: 
                        nano /var/lib/jatoba/[jatoba_version]/data/postgresql.confВ
                            этой команде jatoba_version — первая цифра версии
                            Jatoba.
                        При использовании Jatoba 4.5 выполните
                            команду:nano /var/lib/jatoba/4/data/postgresql.conf
                        Исправьте следующие переменные:
                            listen_addresses = '*'
port = 10265
                        Убедитесь, что значения переменных  и
                                 соответствуют текущему часовому
                            поясу.
                        Asia/Yekaterinburg
                        Сохраните изменения и закройте файл. 
                Настройте ограничения подключений к базе данных. Для этого:
                        Откройте для редактирования файл pg_hba.conf: 
                        nano /var/lib/jatoba/[jatoba_version]/data/pg_hba.confВ
                            этой команде jatoba_version — первая цифра версии
                            Jatoba.
                        При использовании Jatoba 4.5 выполните
                            команду:nano /var/lib/jatoba/4/data/pg_hba.conf
                        Добавьте в раздел «IPv4 local connections:» строку:
                        host    datapkitm    datapkitm    172.16.239.1/23    md5Где:
                                datapkitm — пользователь и имя БД, которые были
                                    созданы ранее; 
                                md5 — метод аутентификации, который проверяет
                                    пароль пользователя, производя аутентификацию SCRAM-SHA-256 или
                                    MD5. 
                                172.16.239.1/23 — IP-адрес сети docker. При
                                    изменении сети укажите актуальный IP-адрес.
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                                connections:»и измените ident на
                                md5 в строке «host all all 127.0.0.1/32
                                ident».
                                Содержимое раздела «# IPv4 local connections:» в файле
                                    pg_hba.conf
                        Сохраните изменения и закройте файл.
                        Для применения настроек в файле перезапустите СУБД:
                            systemctl restart jatoba-*
                При необходимости измените часовой пояс в файле .web.env. Для
                    этого: 
                        Откройте файл для редактирования: 
                            nano /opt/itm-k/env/.web.env
                        Измените значение переменной . По умолчанию
                            используется значение =Asia/Yekaterinburg.
                        Сохраните изменения и закройте файл.
                Добавьте межсетевой экран в автозагрузку:
                    ufw enable
                Откройте порт для корректной работы -соединений:
                    sudo ufw allow 22/tcp
                Для корректной работы СУБД откройте в межсетевом экране порт, который был
                    указан в файле postgresql.conf:
                    sudo ufw allow 10265/tcp
                Для корректного приема данных с агентов откройте порты на межсетевом
                    экране:
                    sudo ufw allow 10050/tcp
sudo ufw allow 10051/tcp
                    Настройки межсетевого экрана применяются сразу после ввода команд.
                Просмотрите список правил межсетевого экрана:
                    ufw status
                        Правила межсетевого экрана
                Подготовьте сертификаты для входа в веб-интерфейс. Подробнее см. в разделе
                        .
                Перейдите в директорию с compose-файлами:
                    cd /opt/itm-k
                Запустите контейнеры:
                    docker-compose up -d
|*|*|*|
    tech_support_info_intro
        При выявлении нештатного функционирования ПО сервера  рекомендуется
                изучить документацию и воспользоваться рекомендациями по устранению неисправностей
                из настоящего раздела.Для получения технической поддержки необходимо оформить заявку в сервисный центр в соответствии с
                регламентом.
            При обращении в сервисный центр рекомендуется предоставить техническую информацию о параметрах сервера и его конфигурации.
            Перечень технической информации, необходимой для диагностики функционирования сервера :
|*|*|*|
    tech_support_info
            версия ;
            общее количество , проблем
                функционирования  и ИТ-услуг на момент
                обращения;
            количество подключенных серверов нижних уровней иерархии;
            краткое словесное описание ошибки;
            подробное пошаговое описание действий, которые привели к ошибке;
            скриншот ошибки в web-интерфейсе;
            результаты ошибочных запросов (см. панель разработчика в браузере, вкладка response
                у проблемного запроса);
            логи сопутствующих контейнеров;
            данные по аппаратной платформе (сервер, процессор, объем оперативной памяти, объем
                дискового пространства, тип дисков);
            версия ОС;
            используемая СУБД, версия.
|*|*|*|
    Что нового?
        Основные изменения в ПО сервера  v.1.7.0.0:
            Изменения в версии 1.7.0.0
                        Категория
                        Изменения в продукте
                        Разделы документации
                        Шаблоны
                         Изменены следующие шаблоны:
                                Агент.yaml — добавлены инвентарные поля к
                                    некоторым из собираемых данных.
                                Windows агентный сбор.yaml — изменена панель
                                    «Производительность системы», добавлен график для оперативной
                                    памяти.
                                Linux агентный сбор.yaml — изменена панель
                                    «Производительность системы». 
                                Сетевое универсальное устройство SNMP.yaml —
                                    отредактированы правила предобработки.
                                Windows SNMP.yaml — добавлены инвентарные поля
                                    к некоторым из собираемых данных. Исправлено имя макроса в
                                    присоединенном к Windows SNMP.yaml шаблоне
                                        SNMP MIB. Ресурсы узла.
                                Linux SNMP.yaml — добавлены инвентарные поля к
                                    некоторым из собираемых данных.
                                Сервер агентов ITM-A.yaml — исправлена опечатка
                                    в имени элемента данных.
                                Общий ПЛК.yaml — добавлены элементы данных для
                                    мониторинга узлов с помощью ICMP. 
                                APC Smart-UPS.yaml — отредактированы правила
                                    предобработки. 
                                Eltex MES SNMPv2.yaml — отредактированы правила
                                    предобработки. Исправлен мониторинг коммутаторов в стеке
                        Шаблоны, Элементы данных, Графики
                        ,
                        Шаблоны
                        , , , 
|*|*|*|
    Что нового?
        Основные изменения, касающиеся администрирования ПО сервера  версии 1.7.0.0:
                Изменения  версии
                    1.7.0.0
                            Категория
                            Изменения в продукте
                            Разделы документации
                        Роли пользователей
                                Для авторизованных пользователей исключена возможность перехода
                                    на страницу авторизации без завершения текущей сессии.
                                    Для роли «Пользователь» добавлены
                                        следующие возможности:
                                            просмотр списка и карточек пользователей на странице
                                                   → ;
                                            просмотр списка и карточек правил оповещений на
                                                странице  →
                                                  ;
                                            создание, изменение, включение, выключение и
                                                удаление собственных правил оповещений на странице
                                                   → 
                        Скрипты, переменные
                        —
                        Переменные, основные настройки
                            Исключены переменные ITMM_PROBLEM_AGE_IN_DAYS и
                                    ITMM_SYNC_HISTORY_LIFETIME_IN_DAYS, которые
                                раньше отвечали за настройку этих параметров 
                        Оповещения
                        —
                        Синхронизация
                        Исправлена ошибка синхронизации метаданных
                        —
                        SIEM
                        Изменено событие о неуспешном входе в систему: если указанный при
                            попытке входа пользователь не существует, информация об этом
                            записывается в поле details объекта user_action
|*|*|*|
    Что нового?
        Основные изменения, касающиеся эксплуатации ПО сервера  версии
            1.7.0.0:
                Изменения  версии
                    1.7.0.0
                            Категория
                            Изменения в продукте
                            Разделы документации
                            Серверы мониторинга
                            На странице :
                                    В таблицу добавлена информация о серверах удаленного
                                        мониторинга.
                                    Добавлена возможность просмотра карточки сервера удаленного
                                        мониторинга.
                                    Добавлена возможность свернуть или развернуть сразу все
                                        записи в таблице.
                                    Добавлена возможность внеочередного сбора данных с сервера
                                        мониторинга.
                                    Добавлена возможность настройки сбора данных. В связи с этим
                                        исключен раздел «Настройки» → «Сбор данных». 
                                    Добавлено автоматическое обновление до новой версии серверов
                                        мониторинга, подключенных к .
                                        После обновления сбор данных с серверов мониторинга
                                        продолжится.
                                    Исправлена ошибка, при которой можно было добавить несколько
                                        одинаковых серверов при повторном нажатии кнопки
                                        «Подключить» в окне «Подключение сервера мониторинга».
                                    Исправлена ошибка в названии версии , при которой
                                        некорректно работала сортировка в столбце «Версия ПО».
                                В карточке сервера мониторинга:
                                    Добавлена таблица с параметрами конфигурации сервера
                                        мониторинга.
                                    Добавлена ссылка для перехода на страницу этого сервера
                                        мониторинга.
                                Во всплывающем окне со статусами синхронизаций на странице
                                параметр «Системные свойства» переименован в «Свойства сервера
                                мониторинга»
                            , , , , , 
                            Объекты мониторинга
                            На странице :
                                    Исключено дерево филиалов и ,
                                        теперь по умолчанию в списке отображаются все
                                            .
                                    Добавлена возможность фильтрации  по филиалу и
                                            .
                                    В таблицу со списком  добавлены столбцы «Тип
                                            » и
                                        «Ссылки».
                                    Добавлен счетчик количества .
                                    Добавлена возможность просмотра наиболее критичных проблем
                                        выбранного 
                                        при нажатии на значение в столбце «Проблемы».
                                    Столбец таблицы «Филиал/ТО» разделен на два: «Филиал» и
                                            «».
                                    Добавлена возможность сортировки по филиалу.
                                    Изменены настройки сортировки по умолчанию.
                                В карточке :
                                    Параметр «Состояние» переименован в «Статус».
                                    Добавлены параметры «Обновление статуса» и «Обновление
                                        свойств ОМ».
                                    Исключен параметр «Дата обновления».
                                    Добавлена возможность отображения внешних ссылок,
                                        добавленных в качестве значения полей «URL A», «URL B», «URL
                                        C» в инвентарных данных 
                                        или Zabbix.
                                    Исправлено отображение IP-адресов с 12 символами. 
                                    Изменено отображение состояния для объектов мониторинга на
                                        техническом обслуживании
                            , , 
                            Объекты мониторинга, серверы мониторинга, проблемы
                                        Добавлена возможность просмотра окон «Свойства сервера
                                удаленного мониторинга» и «Свойства сервера мониторинга» на
                                страницах , .
                                        Добавлена возможность просмотра окна «Свойства сервера
                                удаленного мониторинга» при нажатии в любом месте строки конкретного
                                     на странице .
                                        Изменено поведение на странице :
                                                При нажатии на значение в столбце «Филиал,
                                                  » выводится окно
                                                  просмотра свойств сервера мониторинга.
                                                При нажатии на значение в столбце «Объект»
                                                  выводится окно просмотра информации об объекте
                                                  мониторинга
                            , , , , , , , , 
                            Проблемы
                                На странице :
                                        Изменен счетчик записей.
                                        Добавлена возможность сортировки по длительности
                                            проблем.
                                        Добавлена возможность фильтрации списка по состоянию
                                            проблем и по объектам мониторинга.
                                        Добавлена возможность поиска  в фильтре «Объект»
                            Отчет о проблемах
                            Изменен шаблон письма с отчетом о проблемах:
                                    Добавлены столбцы с нумерацией строк и состоянием
                                        проблемы.
                                    Добавлена строка с информацией об общем количестве событий и
                                        о количестве нерешенных проблем.
               |*|*|*|                     Добавлено наименование оповещения
                            ИТ-услуги
                                    Исправлена ошибка, возникавшая при попытке пользователя
                                        включить ИТ-услугу, отключенную администратором.
                                        Исправлена ошибка, при которой на
                                            странице 
                                            отключалось несколько услуг вместо одной
                            —
                            Роли пользователей
                                    Для авторизованных пользователей исключена возможность
                                        перехода на страницу авторизации без завершения текущей
                                        сессии.
                                    Для роли «Пользователь» добавлены следующие возможности:
                                        просмотр списка и карточек правил оповещений на странице
                                                 → ;
                                        создание, изменение, включение, выключение и удаление
                                            собственных правил оповещений на странице  → 
                            Email-оповещения, внешний вид
                            Переменные, основные настройки
                             На страницу  →  добавлена возможность настройки
                            параметров: 
                                Период хранения истории проблем , дней; 
                                Период хранения истории синхронизаций, дней  
                            , 
                            Оповещения
                            —
                            Администрирование, журнал событий
                            , 
                            Панель информации
                            На странице :
                                    Добавлена возможность изменения размера графиков: 
                                            «Количество объектов мониторинга по статусу»;
                                            «Количество объектов мониторинга по
                                                проблемности»;
                                            «Изменение количества объектов мониторинга»;
                                            «Количество нерешенных проблем по важности»;
                                            «Изменение количества проблем».
                                    Изменен внешний вид графиков:
                                            «Количество нерешенных проблем по важности»;
                                            «Изменение количества объектов мониторинга»;
                                            «Изменение количества проблем».
                                    Изменен тип графиков «Количество объектов мониторинга по
                                        статусу» и «Количество объектов мониторинга по
                                        проблемности», а также пояснения к этим графикам.
                                        Добавлена возможность выбора
                                            отображаемых графиков.
                                        Добавлена возможность перемещения
                                            графиков.
                                    Исправлена ошибка, при которой некорректно отображались
                                        подписи к графикам
                            , 
                            Внешний вид
                                    Изменено отображение процесса загрузки данных на следующих
                                            страницах:
                                            ;
                                            ;
                                            ;
                                            ;
                                            ;
                                            страница авторизации.
                                    Исправлено отображение полосы прокрутки при загрузке
                                        данных.
                                    Изменен внешний вид таблиц при отсутствии данных и при
                                        возникновении ошибки 502.
                                    Добавлено оповещение «Сервер не отвечает» при отсутствии
                                        ответа от сервера в течение 30 секунд.
                                    Обновлен внещний вид ряда всплывающих окон:
                                            окно удаления правила оповещения;
                                            окно удаления сервера;
                                            окно очистки настроек LDAP;
                                            окно свойств сервера мониторинга;
                                            окно изменения свойств сервера мониторинга;
                                            окно информации об ИТ-услуге;
                                            окно настройки сбора данных;
                                            окно просмотра информации об объекте
                                                мониторинга;
                                            окно очистки настроек email-оповещений;
                                            окно подтверждения удаления пользователя;
                                            окно подтверждения изменения периода неактивности
                                                пользователя для блокировки сеанса;
                                            карточка проблемы.
                                        Исправлена ошибка во всплывающей
                                            подсказке к полю «Пароль» в окне «Добавление
                                            пользователя»
                            , , , , , , , , , , , 
                            Фильтры, панель информации
                            Фильтры, объекты мониторинга, проблемы
                            Добавлена возможность отмены сразу всех фильтров на страницах:
                                    ;
                            , 
                            Фильтры, проблемы
                            Добавлена возможность фильтрации по  на странице 
                            Правила оповещений
                            Добавлена иконка, которая показывает состояние работоспособности
                                канала Email-оповещений на странце 
                            Синхронизация
                            Исправлена ошибка синхронизации метаданных
                            —
                            Настройки, SIEM
                            Добавлена возможность настройки подключения к SIEM на странице
                                     → 
                            , 
|*|*|*|
    Обновления документации
        Обновления в текущей версии документации:
            Добавлены разделы:
            Исключены разделы:
                    Настройка LDAPS в ОС сервера ;
                    Добавление фигур;
                    Добавление линий;
                    Очередность фигур и лини;.
                    Ручной режим;
                    Автоматический режим;
                    Построение инвентарных данных;
            Изменены разделы:
|*|*|*|
    add_server_name_err_remedy
                Перейдите в режим командной строки . 
                Задайте серверу  новое значение hostname без
                    использования заглавных букв:
                    hostnamectl set-hostname [name]
                Перезапустите сервер  для применения
                    значения hostname:
                    reboot
                После запуска сервера перейдите в рабочий каталог :
                    cd /opt/datapkitm
                Перезагрузите и пересоздайте контейнер synchronizer:
                    docker-compose up -d --force-recreate synchronizer
                Убедитесь, что все контейнеры запущены:
                    docker ps
                При необходимости запустите контейнеры с помощью команды:
                    docker-compose up -d
|*|*|*|
    add_server_name_err_condition
        Не удается подключить  к 
            v1.5.0.0, в веб-интерфейсе  в окне «Добавление сервера
            мониторинга» отображается ошибка «Допускаются символы a-z, -., 0-9; - не может быть первым символом».
|*|*|*|
    Перейдите в директорию C:\WINDOWS\system32:cd C:\WINDOWS\system32Сохраните параметры реестра счетчика производительности в файле perf backup1.txt:lodctr /s:"perf backup1.txt"Команда lodctr позволяет зарегистрировать или сохранить имя счетчика производительности и параметры реестра в файле и назначить доверенные службы. Ключ /s:"[filename]" указывает имя файла, в котором сохраняются параметры реестра счетчика производительности. Выполните команду: lodctr /RКоманда lodctr позволяет зарегистрировать или сохранить имя счетчика производительности и параметры реестра в файле и назначить доверенные службы.Ключ /R позволяет заново создать строки реестра и информацию о производительности на основе текущих параметров реестра и архивных ini-файлов.Повторно выполните команду:lodctr /RС помощью службы WMI зарегистрируйте библиотеки производительности компьютера в WMI:WINMGMT.EXE /RESYNCPERFОстановите службу агента:net stop "Zabbix Agent"Запустите службу агента:net start "Zabbix Agent"
|*|*|*|
                Подключите шаблон к объекту мониторинга. Для этого: 
                    В веб-интерфейсе 
                         перейдите на страницу  → .Нажмите на имя узла сети, к которому нужно присоединить шаблон.Перейдите на вкладку «Шаблоны».В разделе «Присоединение новых шаблонов» выберите шаблон Температура ЦПУ Linux.yaml. Нажмите на кнопку «Обновить» для сохранения изменений.
|*|*|*|
                Перейдите в режим командной строки сервера , который будет собирать данные с
                        .
                    Войдите в режим редактирования файла :
                        vi /opt/itm-k/env/wmi_cred/wmi.pw
                    Введите учетные данные  по
                        следующему шаблону:
[hostname]
Username=user_name
Password=password
Domain=domain_name
Где:hostname — имя ;user_name — логин ;password — пароль ;domain_name — домен, под которым происходит подключение к . Если это локальная учетная запись, то в качестве домена введите имя .
                        При полном совпадении данных учетных записей в одном домене
                            вы можете добавить их в блок [DEFAULT].
                    Сохраните конфигурационный файл и выйдите из режима редактирования:
                        :wq
|*|*|*|
    Для проверки корректности настройки  на  Windows вы можете отправить тестовый запрос как
            локально, так и удаленно. Для этого:Введите wbemtest и нажмите Enter.Окно «Выполнить»Появится окно «Тестер инструментария управления Windows».Нажмите «Подключить».Окно «Тестер инструментария управления Windows»Появится окно «Подключение».В зависимости от типа подключения выберите пространство имен:root\CIMV2 для локального подключения;\\[целевой IP-адрес]\root\CIMV2 для удаленного подключения.Нажмите «Подключить».Окно «Подключение» Появится окно «Тестер инструментария управления Windows» с заданным пространством имен.Выберите «Запрос».Окно «Тестер инструментария управления Windows» с заданным пространством именПоявится окно «Запрос».Введите тестовый запрос списка пользователей:Select Caption,Description,Disabled,FullName,LocalAccount,Lockout,PasswordChangeable,PasswordExpires,PasswordRequired,SID from Win32_UserAccountНажмите «Применить».Окно «Запрос»
                    В случае успешного выполнения запроса откроется окно «Результат
                        запроса» со списком обнаруженных объектов, иначе будет выведено сообщение об
                        ошибке. 
                            Результат запроса
                    Для просмотра более подробной информации об объекте нажмите на его имя в
                        списке. 
                    Откроется окно с информацией об объекте.
                            Подробная информация о найденном объекте
                Работоспособность  можно проверить также в режиме командной строки с помощью команды
                    wmic. Например, wmic process list brief для
                локальной проверки или wmic /user:"Administrator" /password:"P@ssw0rd"
                    /node:"192.168.243.23" process list brief для удаленной
                проверки.
|*|*|*|
         Для  с этой ОС
            настройка происходит с помощью протокола SNMP v2.Для данного метода установки нужен выход в интернет. Для установки:
                Запустите PowerShell от имени администратора. Для этого:
                        Нажмите Win+X
                        Выберите «Windows PowerShell (администратор)»
                    Запуск PowerShell
                Проверьте наличие SNMP-клиента:Get-WindowsCapability -Online -Name "*SNMP*"
                    Проверка наличия SNMP-клиента
                Установите SNMP-клиент:Add-WindowsCapability -Online -Name "SNMP.Client~~~~0.0.1.0"Установка SNMP-клиентаУстановите дополнительный компонент для SNMP-клиента:Add-WindowsCapability -Online -Name "WMI-SNMP-Provider.Client~~~~0.0.1.0"Установка дополнительного компонента для SNMP-клиентаУбедитесь, что SNMP-клиент и дополнительный компонент установлены:Get-WindowsCapability -Online -Name "*SNMP*"Проверка установки SNMP-клиента и дополнительного компонентаПерезагрузите компьютер.После установки найдите соответствующие службы для последующей настройки. Для этого: нажмите Win+R;в появившемся окне введите services.msc;нажмите на кнопку «OK».
|*|*|*|
    Для настройки безагентного сбора данных на  с  Centos с помощью протокола SNMP v3:Перейдите в режим командной строки .Остановите сервис snmpd:systemctl stop snmpd
                    Создайте пользователя с помощью команды:
                    net-snmp-create-v3-user [-ro] [-A authpass] [-a MD5|SHA] [-X privpass] [-x DES|AES] [username]Где:
                            -ro — read-only, права только для чтения;
                            authpass — пароль аутентификации;
                            -a — протокол аутентификации MD5 или SHA;
                            privpass — приватный ключ;
                            -x — протокол безопасности DES или AES;
                            username — пользователь.
                    Для пользователя с паролем аутентификации P@ssw0rd,  протоколом
                        аутентификации SHA, приватным ключом p@SSW0RD, протоколом безопасности AES и
                        именем datapkitmv3 команда будет выглядеть следующим
                            образом:net-snmp-create-v3-user -ro -A P@ssw0rd -a SHA -X p@SSW0RD -x AES datapkitmv3
                            Создание пользователя
                    Данные о пользователе будут записаны в файл
                            /etc/snmp/snmpd.conf, а данные о приватном ключе — в
                        файл /var/lib/net-snmp/snmpd.conf.
                Запустите службу snmpd и добавьте ее в автозагрузку:systemctl enable snmpd --nowУбедитесь в корректности настроек межсетевого экрана:iptables -nLЕсли в цепочке INPUT отсутствует правило, разрешающее использование порта 161/UDP, выполните следующие действия: Остановите работу контейнеров:docker-compose downДобавьте правило, разрешающее использование порта 161/UDP, для корректной отправки информации по протоколу SNMP: iptables -I INPUT [номер строки] -m state --state NEW -p udp --dport 161 -j ACCEPT Чтобы добавить правило 5 строкой, используйте команду: iptables -I INPUT 5 -m state --state NEW -p udp --dport 161 -j ACCEPT Сохраните правила межсетевого экрана командой:service iptables saveЗапустите работу контейнеров:docker-compose up -d
                    В командной строке узла сети отправьте запрос к SNMP-агенту с помощью
                        утилиты snmpwalk для проверки сделанных настроек:
                    snmpwalk -v3 [-a MD5|SHA] [-A authpass] [-x DES|AES] [-X privpass] [-l noAuthNoPriv|authNoPriv|authPriv] [-u username] [IP-address] | moreГде:
                            -v3 — версия SNMP;
                            -a — протокол аутентификации MD5 или SHA;
                            authpass — пароль аутентификации;
                            -x — протокол безопасности DES или AES;
                            privpass — приватный ключ;
                            -l — уровень безопасности noAuthNoPriv, authNoPriv или
                                authPriv;
                            username — пользователь.
                            IP-address — IP-адрес узла сети. Укажите 127.0.0.1, чтобы узел сети
                                отправил запрос сам себе.
                    Для пользователя с протоколом аутентификации SHA, паролем
                        аутентификации P@ssw0rd, протоколом безопасности AES, приватным ключом
                        p@SSW0RD,  уровень безопасности authPriv и именем datapkitmv3 команда будет
                        выглядеть следующим
                            образом:snmpwalk -v3 -a SHA -A P@ssw0rd -x AES -X p@SSW0RD -l authPriv -u datapkitmv3 127.0.0.1 | more
                            Результат работы утилиты snmpwalk
                    Создайте :
                            В веб-интерфейсе  перейдите на
                                страницу  → .
                            Нажмите на имя узла сети, для которого производится настройка сбора данных.
                            Откроется страница с подробной информацией об узле сети.
                            На вкладке «Узел сети» в разделе «Интерфейсы» нажмите на кнопку «Добавить» и выберите SNMP.
                            В появившихся полях введите параметры, которые использовались при создании пользователя SNMP v3 на шаге :
                                    Версия SNMP — SNMP v3;
                                    Имя безопасности — datapkitmv3; 
                                    Уровень безопасности — authPriv.
                                После выбора уровня безопасности authPriv заполните следующие
                                появившиеся параметры:
                                    Протокол аутентификации — SHA;
                                    Пароль аутентификации — P@ssw0rd;
                                    Протокол безопасности — AES;
                                    Ключевая фраза безопасности — p@SSW0RD.
                            Если нужно отредактировать параметры:
                                    На вкладке «Узел сети» в разделе «Интерфейсы» нажмите на
                                        кнопку «Раскрыть» («  ») рядом с «SNMP».
                                    Отредактируйте параметры. Имя пользователя, пароль и ключ
                                        указаны в полях «Имя безопасности», «Пароль аутентификации»
                                        и «Ключевая фраза безопасности».
                            Добавьте к 
                                шаблоны:
                                    Перейдите на вкладку «Шаблоны».
                                    Нажмите на кнопку «Выбрать» напротив поля «Присоединение
                                        новых шаблонов». Результат шага: Появится список
                                            доступных шаблонов.
                                    Установите чекбокс рядом с тем шаблоном, который необходимо
                                        добавить. Например, Linux SNMP.
                                    Нажмите на кнопку «Выбрать» для добавления шаблона.
                            Нажмите на кнопку «Добавить» для сохранения изменений.
                                Если нужно сохранить параметры после редактирования, нажмите
                                    на кнопку «Обновить».
|*|*|*|
         Для  с этой ОС
            настройка происходит с помощью протокола SNMP v2.
                В открывшемся окне нажмите на кнопку «Добавление и удаление компонентов Windows».Добавление и удаление компонентов WindowsОткроется окно «Мастер компонентов Windows».В открывшемся окне выберите компонент «Средства управления и наблюдения» в конце списка. Установка компонентаНажмите на кнопку «Состав».Откроется окно с содержимым компонента «Средства управления и наблюдения». Нажмите «ОК» в окне «Средства управления и наблюдения». Окно «Средства управления и наблюдения»Нажмите «Далее» в окне «Мастер компонентов Windows». Начнется установка компонента. Установка компонента В процессе установки вам понадобится вставить диск с дистрибутивом Windows в CD-ROM. После установки найдите соответствующие службы в панели управления. Для этого:Зайдите в панель управления. Перейдите в раздел «Администрирование».Панель управленияОткроется окно «Администрирование».В открывшемся окне нажмите на кнопку «Управление компьютером».Управление компьютеромВ разделе «Службы и приложения» перейдите в подраздел «Службы» и найдите в списке «Служба SNMP».Раздел «Службы»
                    Перезапустите службу SNMP.
|*|*|*|
    Протокол  для мониторинга функционирования 
                рекомендуется использовать только при отсутствии возможности мониторинга по
                протоколу SNMP., на котором ранее был настроен сбор по  для DATAPK, не требует дополнительной настройки  для .Для настройки безагентного сбора на  Windows с помощью
            протокола :Зайдите в интерфейс объекта мониторинга.
                Добавьте пользователя для безагентного сбора по протоколу . Для этого:
                        Введите compmgmt.msc и нажмите Enter.
                        Появится окно «Управление компьютером». 
                                Окно «Управление компьютером»
                        В левой части окна перейдите в директорию Служебные программы →
                            Локальные пользователи → Пользователи.
                        В центральной части окна нажмите правой кнопкой мыши.
                                Меню страницы «Пользователи»
                        Выберите «Новый пользователь».
                        Появится окно создания нового пользователя.
                                    Окно создания нового пользователя
                        Введите логин в поле «Пользователь».
                        Введите и подтвердите пароль.
                        Снимите выбор чекбокса «Требовать смены пароля при следующем входе в
                            систему».
                        Нажмите на кнопку «Создать».
                Установите необходимые права созданному пользователю:
                        В окне «Управление компьютером» установите курсор на Службы и
                            приложения → Управляющий элемент .
                        Нажмите правую кнопку мыши и выберите «Свойства».
                                Выбор свойств управляющего элемента WMI
                        Появится окно «Свойства. Управляющий элемент ».
                        Перейдите на вкладку «Безопасность».
                        Откроется вкладка «Безопасность».
                                Окно «Свойства. Управляющий элемент WMI», вкладка
                                    «Безопасность»
                        Выберите пространство Root и нажмите кнопку «Безопасность» в нижней
                            правой части окна.
                        Появится окно «Безопасность для Root».
                                Окно «Безопасность для Root»
                        Добавьте в список созданного пользователя:
                                Нажмите «Добавить».
                                В открывшемся окне выберите созданного пользователя
                                Нажмите «ОК».
                        Установите пользователю разрешения «Выполнение методов», «Включить
                            учетную запись», «Включить удаленно».
                        Нажмите на кнопку «Применить».
                Разрешите передавать трафик по протоколу  через стандартный межсетевой экран (брандмауэр). Для этого:
                        Введите cmd и нажмите Enter.
                        В зависимости от языка системы введите:
                                Если в системе установлен русский язык:
                                    netsh advfirewall firewall set rule group="инструментарий управления windows (wmi)" new enable=yes
                                Если в системе установлен английский язык:
                                    netsh advfirewall firewall set rule group="windows management instrumentation (wmi)" new enable=yes
                    При наличии другого межсетевого экрана настройте его так, чтобы
                        он не блокировал трафик по протоколу .
                    Отключите контроль учетных записей пользователя. Для этого:
                            Перейдите в раздел «Учетные записи пользователей» панели управления.
                            Откроется окно «Учетные записи пользователей»
                                    Окно «Учетные записи пользователей»
                            Выберите пункт «Изменение параметров контроля учетных записей».
                            Появится окно «Параметры управления учетными записями пользователей».
                                    Окно «Параметры управления учетными записями пользователей»
                            Установите значение «Никогда не уведомлять».
                            В левой части окна перейдите в директорию HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System.
                                    Окно «Редактор реестра»
                            В правой части окна дважды нажмите левой кнопкой мыши на имя элемента LocalAccountTokenFilterPolicy.
                            Появится окно «Изменение параметра».
                                    Окно «Изменение параметра»
                             Измените значение LocalAccountTokenFilterPolicy на 1 (тип DWORD). 
                            Перезагрузите операционную систему и войдите в систему с настроенной для сбора учетной записью.
                    Добавьте  в список доверенных узлов. Для этого:
                            Введите powershell и нажмите Ctrl + Shift + Enter для запуска от имени администратора.
                            Появится окно powershell.
                            Перейдите в директорию client:
                                cd wsman:\l|*|*|*|ocalhost\client
                        Добавьте  в список
                            доверенных:
                            set-item trustedhosts [сетевое имя ]
                    Разрешите вызовы DCOM:
                            Введите DCOMCNFG и нажмите Enter.
                            Появится окно «Службы компонентов».
                            Найдите пункт «Службы компонентов» и нажмите на него.
                            В центральной части окна перейдите в директорию Компьютеры → Мой компьютер.
                             Нажмите правой кнопкой мыши на надпись «Мой компьютер» и выберите в контекстном меню «Свойства».
                                    Окно «Службы компонентов»
                            Появится окно «Свойства: Мой компьютер».
                            Перейдите на вкладку «Безопасность COM».
                            Откроется вкладка «Безопасность COM».
                                    Окно «Свойства: Мой компьютер», вкладка «Безопасность COM»
                            В разделе «Права доступа» выберите «Изменить ограничения».
                            Появится окно «Права доступа». 
                            Добавьте созданного пользователя и установите ему разрешения «Локальный доступ» и «Удаленный доступ».
                                    Окно «Права доступа»
                            В разделе «Разрешения на запуск и активацию» окна «Свойства: Мой компьютер» выберите «Изменить ограничения».
                            Появится окно «Разрешение на запуск и активацию».
                            Добавьте созданного пользователя и установите ему разрешения «Локальный запуск», «Удаленный запуск», «Локальная активация» и «Удаленная активация».
                                    Окно «Разрешение на запуск и активацию»
                            Убедитесь, что на вкладке «Свойства по умолчанию» установлен чекбокс «Разрешить использование DCOM на этом компьютере»;
                                    Вкладка «Свойства по умолчанию»
                            Нажмите на кнопку «Применить».
                            Появится окно подтверждения выбора.
                                    Окно подтверждения выбора
                            Нажмите на кнопку «Да».
                            Вернитесь в окно «Службы компонентов».
                            В директории Мой компьютер → Настройка DCOM выберите Windows Management and Instrumentation.
                            Нажмите правую кнопку мыши и выберите «Свойства».
                                    Выбор свойств Windows Management and Instrumentation
                            Появится окно «Свойства: Windows Management and Instrumentation».
                            Перейдите на вкладку «Безопасность».
                            Откроется вкладка «Безопасность».
                                Вкладка «Безопасность» окна «Свойства: Windows Management and
                                    Instrumentation»
                            Убедитесь, что для всех разрешений установлен пункт «Настроить» и созданному пользователю даны все разрешающие права.
                    Настройте CIMOM. Для этого:
                            В левой части окна перейдите в директорию HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WBEM\CIMOM.
                                    Окно «Реестр изменений»
                            В правой части окна дважды нажмите левой кнопкой мыши на имя элемента AllowAnonymousCallback.
                            Появится окно «Изменение параметра».
                                    Окно «Изменение параметра»
                            Измените значение AllowAnonymousCallback на 1 (тип DWORD).
                    Убедитесь, что созданному пользователю предоставлен доступ к компьютеру из сети. Для этого:
                            Введите gpedit.msc и нажмите Enter.
                            Появится окно «Редактор групповой локальной политики».
                            В левой части окна перейдите в директорию Конфигурация компьютера → Конфигурация Windows → Параметры безопасности → Локальные политики → Назначение прав пользователя.
                            Откроется каталог «Назначение прав пользователя».
                                    Окно «Редактор локальной групповой политики»
                            Найдите в списке политику «Доступ к компьютеру из сети» и дважды нажмите на нее левой кнопкой мыши.
                            Появится окно «Свойства: доступ к компьютеру из сети». 
                                Окно «Свойства: доступ к компьютеру из сети»
                            Убедитесь, что созданный пользователь присутствует в списке. Если пользователя там нет, добавьте его.
                    Убедитесь, что служба «Инструментарий управления Windows» запущена автоматически. Для этого:
                            Введите services.msc и нажмите Enter.
                            Появится окно «Службы».
                                    Окно «Службы»
                            Найдите в списке службу «Инструментарий управления Windows».
                            Убедитесь, что в состояние службы «Работает», а тип запуска «Автоматически».
                    Перезагрузите операционную систему объекта мониторинга.
            Подробная настройка объектов мониторинга в веб-интерфейсе описана в разделе .
|*|*|*|
    Для  с этой ОС
                        настройка происходит с помощью протокола SNMP v2.Настройка SNMP v2 на
                    Windows XP настраивается одинаково, независимо от версии service pack (SP1, SP2,
                    SP3). Для настройки:В открывшемся окне нажмите на кнопку «Установка компонентов Windows».Окно «Установка и удаление программ»Откроется окно «Мастер компонентов Windows».В открывшемся окне выберите компонент «Средства управления и наблюдения» в конце списка. Установка компонентаНажмите на кнопку «Состав».Откроется окно с содержимым компонента «Средства управления и наблюдения». 
                    В открывшемся окне установите чекбоксы рядом с необходимыми
                        компонентами.
                    Нажмите на кнопку «ОК». 
                            Окно «Средства управления и наблюдения»
                Нажмите «Далее» в окне «Мастер компонентов Windows». Начнется установка компонента. Установка компонента В процессе установки вам понадобится вставить диск с дистрибутивом Windows в CD-ROM. 
                    После установки найдите соответствующие службы в панели управления. Для
                        этого:
                            Зайдите в панель управления. 
                            Перейдите в раздел «Администрирование».
                                    Панель управления
                            Откроется окно «Администрирование».
                            В открывшемся окне нажмите на кнопку «Управление
                                компьютером».
                                    Управление компьютером
                            В разделе «Службы и приложения» перейдите в раздел «Службы» и
                                найдите в списке «Служба SNMP».
                                    Раздел «Службы»
                Выполните более детальную настройку SNMP агента. Для этого: Нажмите правой кнопкой мыши на «Служба SNMP» и выберите «Свойства».Откроется окно «Служба SNMP».В открывшемся окне откройте вкладку «Безопасность».Нажмите на кнопку «Добавить» в разделе «Приемлемые имена сообществ».Служба SNMPОткроется окно «Настройка службы SNMP».В открывшемся окне: выберите права сообщества;Рекомендуемое значение — READ ONLY.введите имя сообщества;нажмите на кнопку «Добавить».Настройка службы SNMPНажмите на кнопку «Применить» в окне «Служба SNMP».
                    Перезапустите службу SNMP.
|*|*|*|
            Для  с этой ОС
            настройка происходит с помощью протокола SNMP v2.
                Зайдите в панель «Server Manager». Перейдите в раздел «Add roles and features».Панель «Server manager»В открывшемся окне перейдите на вкладку «Server Selection». Выберите сервер, на который будет производится установка компонента SNMP.Окно «Add Roles and Features Wizard»Добавьте компонент «SNMP Service». Для этого:Перейдите на вкладку «Features».В выведенном списке установите чекбокс «SNMP Service».Выбор SNMP serviceВ появившемся окне нажмите на кнопку «Add features».Добавление компонентабудет установлен чекбокс напротив «SNMP Service».Нажмите на кнопку «Next».Переход у установке SNMP ServiceДля начала загрузки нажмите на кнопку «Install».Начало установкиНачнется загрузка. Запуск оснастки Службы
                            После завершения загрузки нажмите на кнопку «Close».
                                    Службы
                    Найдите
                        соответствующие службы для последующей настройки. Для
                        этого:
                             нажмите Win+R; 
                            в появившемся окне введите services.msc;
                            нажмите на кнопку «OK».
                            Свойства службы SNMP
                Для более детальной настройки SNMP агента:Нажмите правой кнопкой мыши на «SNMP Service» и выберите «Properties». Начало установкиНа вкладке «Security» создайте имя сообщества. Для этого нажмите на кнопку «Add».Окно «SNMP Service Properties»В открывшемся окне:выберите права сообщества;Рекомендуемое значение — READ ONLY.введите имя сообщества;нажмите на кнопку «Add».Окно «SNMP Service Configuration»
                            Для применения текущих настроек нажмите на кнопку «Apply».
                                    Окно «SNMP Service Configuration»
                    Перезапустите службу SNMP.
|*|*|*|
            Для  с этой ОС
                настройка происходит с помощью протокола SNMP v2.
        Зайдите в панель управления. Перейдите в раздел «Программы и компоненты». В открывшемся окне нажмите на иконку «Включение или отключение компонентов Windows».Откроется окно «Компоненты Windows».В открывшемся окне установите чекбокс напротив компонента «SNMP-протокол» и нажмите «ОК».Окно установки SNMPПосле окончания установки компонента окна установки закроются автоматически. Для последующей настройки найдите соответствующие службы в консоли управления службами. Для этого:Зайдите в панель управления.Перейдите в раздел «Администрирование».В открывшемся окне нажмите на кнопку «Управление компьютером».Выполните более детальную настройку SNMP агента. Для этого: Нажмите правой кнопкой мыши на «Служба SNMP» и выберите «Свойства».Откроется окно «Служба SNMP».В открывшемся окне откройте вкладку «Безопасность».Нажмите на кнопку «Добавить» в разделе «Приемлемые имена сообществ».Откроется окно «Настройка службы SNMP».В открывшемся окне: выберите права сообщества;Рекомендуемое значение — READ ONLY.введите имя сообщества;нажмите на кнопку «Добавить».Окно настройки SNMP
                            Для сохранения текущих настроек нажмите на кнопку
                                «Применить».
|*|*|*|
    Для настройки безагентного сбора данных на  с
                     Centos с помощью протокола :Перейдите в режим командной строки .Перейдите в режим редактирования файла snmpd.conf:vi /etc/snmp/snmpd.confУбедитесь, что следующая строка закомментирована (в начале строки есть символ «#»):#com2sec notConfigUser    default    publicОтредактируйте или добавьте следующие строки:Для определения имен, которым сопоставляется IP-адрес и группа для подключения, с помощью директивы com2sec:com2sec local    localhost    datapkitm
com2sec mynetwork NETWORK/24    datapkitmГде:NETWORK/24 — IP-адрес локальной сети с подходящей маской;datapkitm — имя группы, которая будет использоваться для подключения.Для определения групп, которым сопоставляются созданные имена, с помощью директивы group:group MyRWGroup v2c    local
group MyROGroup v2c    mynetworkДля определения идентификаторов объектов, к которым будет предоставлен доступ, с помощью директивы view:view all    included .1    80Для предоставления группам прав доступа на чтение и запись с помощью директивы access:access MyROGroup ""    v2c    noauth    exact   all    none    none
access MyRWGroup ""    v2c    noauth    exact   all    all    all
                Перезапустите службу  для сохранения изменений и добавьте ее в автозагрузку:
                    systemctl enable snmpd --now
            Убедитесь в корректности настроек межсетевого экрана:iptables -nL
                Если в цепочке INPUT отсутствует правило, разрешающее использование порта
                        161/, выполните следующие действия: 
                        Остановите работу контейнеров:
                            docker-compose down
                        Добавьте правило, разрешающее использование порта 161/, для корректной отправки информации по протоколу : 
                            iptables -I INPUT [номер строки] -m state --state NEW -p udp --dport 161 -j ACCEPT
                         Чтобы добавить правило 5 строкой, используйте команду:
                            iptables -I INPUT 5 -m state --state NEW -p udp --dport 161 -j ACCEPT 
                        Запустите работу контейнеров:
                            docker-compose up -d
            Сохраните правила межсетевого экрана командой:service iptables save
|*|*|*|
        Настройте права доступа на чтение для группы (community) public v1,  или 
             в зависимости от версии, поддерживаемой оборудованием. В
            качестве имени community, вместо public можно использовать другое значение, в
            зависимости от настроек оборудования.
        Если данное устройство подключено к DATAPK, то синхронизатор будет брать уже заведенное в
            DATAPK имя community и передавать его для сбора данных в . Во избежание
            расхождений в настройках рекомендуется использовать имя community, которое было заведено
            в DATAPK для сбора данных по .
            Если для данного устройства в DATAPK сбор данных осуществлялся по , то в  можно использовать любое имя community.
        Подробная настройка объектов мониторинга в веб-интерфейсе описана в разделе 
            «Объекты мониторинга. Узлы сети».
|*|*|*|
            Рекомендуется создать отдельного пользователя для синхронизации с DATAPK и дальнейшего использования в качестве технической учетной записи. Создайте группу пользователей «Синхронизатор c datapk». Для этого:В поле «Имя группы» введите «Синхронизатор c datapk». В выпадающем меню «Доступ к веб-интерфейсу» выберите значение «Внутренний».Вкладка «Группа пользователей»Настройте права доступа для группы узлов сети «DATAPK». Для этого: Перейдите на вкладку «Права доступа».Выберите группу узлов сети «DATAPK». Установите для группы узлов сети «DATAPK» права «Чтение-запись». Вкладка «Права доступа» Нажмите на кнопку «Добавить» .Нажмите на кнопку «Добавить» .Создайте роль пользователя «Sync-dpk role». Для этого:В поле «Имя» введите «Sync-dpk role».В выпадающем меню «Тип пользователя» выберите значение «Администратор».Добавьте пользователя «sync-dpk». Для этого:В поле «Псевдоним» введите «sync-dpk».Назначьте пользователю группу «Синхронизатор с datapk». Задайте и подтвердите пароль пользователя.Вкладка «Пользователь»Перейдите на вкладку «Права доступа». Выберите роль «Sync-dpk role». Нажмите на кнопку «Добавить» для применения настроек.Вкладка «Права доступа»Пользователь для синхронизации с DATAPK создан.Выполните настройку синхронизации , указав имя и пароль созданного пользователя в переменных  и  в файле .env. Подробнее см. в разделе .
|*|*|*|
    Для синхронизации на локальном сервере используется порт 443/.Рекомендуется использовать регулярную синхронизацию с небольшим интервалом во время первичной настройки  и с бо́льшим интервалом во время эксплуатации, если есть вероятность появления новых  в сети.Для настройки автоматической синхронизации по расписанию:Остановите работу контейнеров:docker-compose downОткройте  файл для настройки регулярной синхронизации:vi /opt/itm-k/.envНайдите и отредактируйте следующие переменные: — IP-адрес DATAPK.для IP-адреса 192.168.1.1 значение переменной будет =https://192.168.1.1. — номер порта для подключения. — версия API DATAPK. Совпадает с версией DATAPK. Уточнить значение можно в веб-интерфейсе DATAPK в разделе Настройка и мониторинг → Основные, в поле «Информация об изготовителе».Соотношение версии DATAPK и значения переменной Версия DATAPKЗначение переменной 1.19.0.2-fstec19_fstec1.19.X.X191.18.X.X181.17.X.X171.16.X.X16 — имя пользователя в веб-интерфейсе DATAPK. — пароль пользователя в веб-интерфейсе DATAPK. — имя пользователя  для синхронизации с DATAPK. Подробнее про создание пользователя см. в разделе .  — пароль пользователя  для синхронизации с DATAPK. — период синхронизации в секундах. Значение по умолчанию — 3600 секунд.При пусконаладке для ускорения синхронизации рекомендуем использовать команду, которая одноразово запускает синхронизацию:docker-compose run synchronizer python3 -m synchronizer.synchronization — включение или отключение синхронизации с DATAPK. Для включения синхронизации задайте значение true. Cохраните файл и выйдите из режима редактирования: :wq.Запустите работу контейнеров командой:docker-compose up -dУбедитесь, что синхронизатор включен. Для этого:Просмотрите список запущенных контейнеров:docker psЕсли в списке не обнаружится контейнера synchronizer, включите его:docker start synchronizer
|*|*|*|
       может регулярно получать данные об  из DATAPK. Для этого нужно настроить автоматическую синхронизацию   с DATAPK, подробнее см. в разделе . При первой синхронизации в веб-интерфейсе    отобразятся все ОЗ, которые присутствуют на DATAPK и имеют IP-адрес.  автоматически добавляются в группу узлов сети «DATAPK». Для корректной работы    запрещаются следующие действия с группой узлов сети «DATAPK»:удаление группы;отсоединение  от группы;добавление  к группе вручную.При необходимости эти же  можно добавить и в другие группы, так как любой  может быть участником неограниченного количества групп узлов сети.В таблице ниже показано заполнение свойств  в    на основе данных из DATAPK.Заполнение свойств  в    на основе данных из DATAPKСвойство  в    Данные DATAPKКомментарийИнтерфейс для сбора данныхТип сетевого интерфейса ОЗДля коммутаторов и маршрутизаторов передаются сетевые интерфейсы с типом «», для остальных типов ОЗ — с типом «Агент», с сохранением всех интерфейсов, добавленных в карточке ОЗ DATAPKПоле «MAC адрес A» на вкладке «Инвентаризация»MAC-адрес ОЗ—Имя communitycommunityЭто свойство заполняется только для  с типом сбора Тег asu_tpИмя группы Если в  вручную создать тег asu_tp для ОЗ, который поступил из DATAPK, то при последующем присвоении этому ОЗ метки АСУ ТП в DATAPK тег в  будет перезаписан. Подробнее про изменение тегов см. в разделе  пункт  Руководстве по эксплуатации  в разделе «Редактирование узлов сети» Руководстве администратора  в разделе «Редактирование узлов сети»Поле «ID объекта в DATAPK» на вкладке «Инвентаризация»host_idhost_id — это уникальный идентификатор ОЗ в DATAPKНе рекомендуется удалять и редактировать поля «ID объекта в DATAPK» и «ID DATAPK», так как они используются для уникальной идентификации  в смежных системахПоле «ID DATAPK» на вкладке «Инвентаризация»box_idbox_id — это уникальный идентификатор сервера DATAPKПосле синхронизации с DATAPK пользователь может изменить имена полученных . Во время синхронизации имена  формируется автоматически по следующим правилам:Имя ОЗ, написанное на кириллице, сохранится в    на латинице.Если имя полученного  не является уникальным, то:К имени  прибавляется имя или box_id того DATAPK, с которым  был синхронизирован. Пример: при синхронизации с DATAPK с именем Datapk_1 был получен  с именем Engineer_pc. Если  с таким именем уже есть в   , полученный  получит имя Engineer_pc Datapk_1.Если имя  по-прежнему не является уникальным, к этому имени добавляется host_id.Пример: если  с именем Engineer_pc Datapk_1 тоже есть в   , полученный при синхронизации  получит имя Engineer_pc Datapk_1 d61799ecf77360a42er169ed4d951b97, где d61799ecf77360a42er169ed4d951b97 — значение host_id ОЗ в DATAPK.
|*|*|*|
    Рекомендуется использовать разовую синхронизацию в случаях, когда нет необходимости в регулярных обновлениях.Однократная синхронизация запускает контейнер для передачи данных, а затем останавливает его.Для запуска однократной синхронизации:Убедитесь, что контейнер синхронизатора находится в состоянии «выключен». Для этого:Просмотрите список запущенных контейнеров:docker psЕсли в списке обнаружится контейнер synchronizer, остановите его:docker stop synchronizerЗапросите получение списка :docker-compose run synchronizer python3 -m synchronizer.synchronizationВ процессе выполнения команды будут отображены отправляемые и получаемые синхронизатором команды.Если произошла ошибка при синхронизации и в логах встречается сообщение "DBEXECUTEERROR", то запустите синхронизацию еще раз.После выполнения команды контейнер будет остановлен автоматически.
|*|*|*|
    Сервис синхронизации с DATAPK (далее по тексту синхронизатор с DATAPK) передает данные об  из ПК DATAPK v1.16, v1.17, v. 1.18 и v. 1.19, производит поиск и идентификацию необходимых данных и сохраняет их в . Синхронизатор помещен в контейнер и находится в основном архиве поставки. Для сервиса доступно как одноразовое использование, так и периодическая синхронизация по заданному расписанию.Подробнее про логику работы синхронизации с DATAPK см. в Руководстве по эксплуатации  в разделе «Объекты мониторинга, полученные в результате автоматической синхронизации с DATAPK».В этом разделе:
|*|*|*|
    В веб-интерфейсе  не отображаются проблемы с сервера консолидации  1.2.0.0. В логах контейнера itm_m_zabbix_connector встречаются ошибки вида «Ошибка синхронизации сервера ITM-K_№1. Непредвиденная ошибка: 0, message='Attempt to decode JSON with unexpected mimetype: text/html; charset=utf-8', url=URL('https://192.168.243.2:443/itm_k_meta')».ПричинаНесовместимость версий  и .Способ устраненияОбновите  с версии 1.2.0.0 до последней версии.
|*|*|*|
    В веб-интерфейсе  не отображаются проблемы с сервера
                         1.2.0.0. В логах
                    контейнера itm_m_zabbix_connector встречаются ошибки вида «Ошибка синхронизации
                    сервера ITM-K_№1. Непредвиденная ошибка: 0, message='Attempt to decode JSON with
                    unexpected mimetype: text/html; charset=utf-8',
                    url=URL('https://192.168.243.2:443/itm_k_meta')».ПричинаНесовместимость версий  и .Способ устраненияОбновите  с версии 1.2.0.0 до последней версии.
|*|*|*|
    database error step 5
                        Проверьте и, в случае необходимости,
                            откорректируйте файлы , , , , .
|*|*|*|
        Отредактируйте файл . Для этого:
                        Перейдите в режим редактирования файла pg_hba.conf с
                            помощью команды:
                            vi /var/lib/jatoba/1/data/pg_hba.conf
                        Измените IP-адрес и маску подсети контейнеров Docker в разделе «# IPv4
                            local connections:» в строке вида:
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        Перезапустите СУБД для применения настроек:
                            systemctl restart jatoba-1*
|*|*|*|
                        Перейдите на вкладку «Присоединенные шаблоны».
                            Вкладка «Присоединенные шаблоны»
                        Начните печатать название шаблона в поле «Присоединение новых шаблонов».
                        Появится список шаблонов.
                        Прокрутив список, выберите необходимый шаблон.
                        При необходимости присоедините другие шаблоны.
                        При присоединении шаблонов наследуются их элементы данных, триггеры, графики.
|*|*|*|
                        Измените файл следующим образом:
|*|*|*|
    Для обновления сервера  с версии 1.6.0.0 до версии 1.7.0.0:
                Перейдите в рабочую директорию :
                    cd /opt/itm-vm
                Остановите работу сервера:
                    docker-compose down
                Переименуйте старую рабочую директорию : 
                    mv /opt/itm-vm /opt/itm-vm-bkp
                Создайте директорию для новой версии : 
                    mkdir /opt/itm-vm
                Загрузите в директорию/opt/itm-vm на сервере  следующие файлы из
                    каталога с обновленным дистрибутивом:
                        ussc_itm-vm_1.7.0.0.tar.gzudv_itm-vm_1.7.0.0.tar.gzudv_itm-vm_1.7.0.0.tar.gz;
                        docker-compose.release.yaml.
                Перейдите в директорию, куда были перемещены файлы с обновленным дистрибутивом
                        : 
                    cd /opt/itm-vm
                Установите обновленные образы командой:
                    docker load -i udv_itm-vm_1.7.0.0.tar.gz
                Скопируйте данные из старой рабочей директории /opt/itm-vm-bkp
                    в новую директорию /opt/itm-vm:
                    cp -r /opt/itm-vm-bkp/.env /opt/itm-vm-bkp/env /opt/itm-vm-bkp/.itmm_password_secret_key /opt/itm-vm
                Удалите из файла .env переменные, которые теперь будут
                    настраиваться в веб-интерфейсе.   
                    Если вы изменяли значения переменных на отличные от значений по
                        умолчанию, зафиксируйте их перед изменением файла .env и
                        потом укажите эти значения в интерфейсе.
                        Откройте файл .env для редактирования: 
                            vi .env
                        Удалите переменную «Срок хранения проблем»: 
                        ITMM_PROBLEM_AGE_IN_DAYS=180
                        Удалите переменную для обозначения часового пояса
                            TZ=.
                            Значение часового пояса устанавливается автоматически на основе
                                данных из ОС.
                        Удалите переменную «Срок хранения истории задач синхронизации»:
                            ITMM_SYNC_HISTORY_LIFETIME_IN_DAYS=4
                        Удалите переменные для настройки интеграции с SIEM:
                            #----------Настройка интеграции с SIEM----------
SIEM_INTEGRATION=true
SIEM_SYSLOG_HOST=127.0.0.1
SIEM_SYSLOG_PORT=514
SIEM_SYSLOG_PROTOCOL=TCP
ITMM_IP_ADDRESS=
                        Сохраните и закройте файл:
                            :wq
                Запустите контейнеры:
                    docker-compose up -d
                Проверьте результат обновления. Для этого перейдите в веб-интерфейс  по ранее
                    использовавшемуся адресу.
                Если обновление прошло успешно, удалите директорию с предыдущей версией  1.6.0.0: 
                    rm -rf /opt/itm-vm-bkp/
                Настройте в веб-интерфейсе следующие параметры, если в  версии 1.6.0.0 меняли их значения в файле
                        .env:
                        Настройка интеграции с SIEM. Подробнее см. в Руководстве по эксплуатации
                                 в разделе
                            «Настройка интеграции с SIEM».
                        Период хранения истории проблем. Подробнее см. в Руководстве по
                            эксплуатации  в
                            разделе «Изменение основных свойств сервера».
                        Период хранения истории синхронизаций. Подробнее см. в Руководстве по
                            эксплуатации  в
                            разделе «Изменение основных свойств сервера».
|*|*|*|
        При установке  и  на один сервер  будет доступен по адресу
                https://[ip-адрес]:8443.
|*|*|*|
                Проверьте наличие и статус портов 161/ и 162/ на межсетевом экране одним из следующих способов:
                        Перейдите в режим командной строки узла сети и введите команду:
                                Если используется межсетевой экран iptables:
                                        iptables -nL
                                        Результат работы команды 
                                Если используется межсетевой экран firewall-cmd:
                                    firewall-cmd --permanent --list-all
                        Перейдите в режим командной строки компьютера, на котором установлена
                            утилита nmap, и введите команду:
                            nmap -sU -p 161,162 [IP-адрес узла сети]
                        Для узла сети с IP-адресом 10.51.16.6 команда будет выглядеть
                            следующим образом:
                                nmap -sU -p 161,162 10.51.16.6 
                                Результат работы команды
                При необходимости откройте порты 161/ и 162/. Для этого:
                        Перейдите в режим командной строки узла сети.
                        Если используется межсетевой экран iptables:
                                Остановите работу
                                    контейнеров:docker-compose down
                                Добавьте правило:
                                        iptables -I INPUT [номер строки] -p udp --dport [номер порта] -j ACCEPT 
                                Примените
                                    правило:service iptables save
                                Убедитесь в корректности
                                    настройки:iptables -nL
                                Запустите контейнеры
                                    командой:docker-compose up -d
                        Если используется межсетевой экран firewall-cmd:
                                Добавьте правило:
                                    firewall-cmd --permanent --zone=public --add-port=[номер порта]/udp 
                                Примените
                                    правило:firewall-cmd –reload
                                Убедитесь в корректности
                                    настройки:firewall-cmd --permanent --list-all
|*|*|*|
    При установке  и 
         на один сервер совпадающие настройки 
        и  (кроме подготовки
            сертификатов) достаточно выполнить один раз.
|*|*|*|
    Для настройки шифрования между  и  в режиме пассивного
                    прокси:
                    Перейдите в режим командной строки сервера .
                Измените значения следующих переменных:=psk
=/etc/zabbix/key.psk
=[Название_идентификатора]=TESTPSKПерезапустите сервис zabbix-proxy для применения новой конфигурации прокси: systemctl restart zabbix-proxyПолучите содержимое ключа безопасности:cat /etc/zabbix/key.pskВ результате выполнения команды в консоли отображается ключ: e87e4daf1568e43e52e7596a3570e1b4114127cb51fe72c8eacadd510b7560b5Скопируйте строку ключа безопасности в буфер обмена.В веб-интерфейсе  перейдите на страницу  → .Выберите прокси и кликните на его имени.Откроется страница настроек прокси.Перейдите на вкладку «Шифрование».Вкладка «Шифрование» на странице настроек проксиВыберите режим «Подключения к прокси» — «PSK».В поле «Идентификатор PSK» введите название идентификатора, указанное ранее в переменной .В поле «PSK» введите скопированное ранее значение ключа безопасности.Настройки проксиНажмите на кнопку «Обновить» для применения настроек.
|*|*|*|
    При первичном запуске  в логах itm_m_zabbix_connector появляется ошибка: «в  нет записи для компьютера "172.15.0.4", пользователя "itmm", базы "postgres", SSL выкл.»ПричинаНет доступа к базе данных postgres, из-за этого не создаются другие базы данных и не запускается .Способ устраненияДобавьте значения postgres в файл . Для этого:добавьте в этот раздел строки:host postgres,itmm,user_service,notifier_service,event_sender [имя пользователя] 172.15.0.1/24 md5
host postgres,itmm,user_service,notifier_service,event_sender [имя пользователя] 172.17.0.1/24 md5Значения postgres,itmm,user_service,notifier_service,event_sender можно заменить на all. Тогда строки, которые нужно добавить, будут иметь вид:host all [имя пользователя] 172.15.0.1/24 md5
host all [имя пользователя] 172.17.0.1/24 md5
|*|*|*|
    Для установки :
                    Перейдите в режим командной строки операционной системы, на которой будет
                        установлен сервер .
                Создайте директорию для установки :mkdir /opt/itm-kСкопируйте следующие файлы в директорию /opt/itm-k:env_generator.shdocker-compose.release.yamldatapk_itm-k_[версия_сервера_консолидации].tar.gziptablesdb_config.shПерейдите в директорию /opt/itm-k:cd /opt/itm-k
                    Загрузите образы в операционную систему, на которой установлен сервер :
                        docker load -i datapk_itm-k_[версия_сервера_консолидации].tar.gz
                            Загрузка образов
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        Войдите в режим редактирования файла  с помощью команды:
                            vi /var/lib/pgsql/14/data/pg_hba.conf
                        Убедитесь, что в файле присутствует правило:
                        local    all    all    trustЕсли этого правила
                            нет, добавьте его в файл. Это правило должно располагаться выше всех
                            остальных правил.
                        Добавьте следующую строку в раздел «# IPv4 local connections:»
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        для базы данных datapkitm, пользователя БД
                                datapkitm, IP-адреса подсети контейнера сервера  по умолчанию
                            172.16.239.0/24 и метода аутентификации md5 строка
                            будет выглядеть следующим образом:
                            host datapkitm datapkitm 172.16.239.0/24 md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:» и измените ident на md5
                            в строке host all all 127.0.0.1/32 ident.
                                Содержимое файла 
                        Сохраните файл и выйдите из режима редактирования:
                            :wq
            Для применения настроек в файлах конфигурации перезапустите СУБД:systemctl restart postgresql-14 после перезапуска СУБД и автоматического применения настроек из файла pg_hba.conf, команда для входа в режим редактирования базы данных изменится. Она будет иметь следующий вид: psql -p 10265 -h 127.0.0.1 -U [имя пользователя] [имя базы] Где -p 10265 — порт, через который будет произведено подключение к базе данных; -h 127.0.0.1 — подключение к хосту 127.0.0.1; -U [имя пользователя] — подключение от имени указанного пользователя. 
                Создайте базу данных, пользователя и пароль для него.
                    Способ 1: Выполните настройку с помощью скрипта
                            db_config.sh, который будет выложен вместе с
                        дистрибутивом. Для этого:
                            Перейдите в директорию
                                /opt/itm-k:cd /opt/itm-k
                            Назначьте скрипту db_config.sh полные права
                                доступа:chmod +x db_config.sh
                            Запустите скрипт
                                db_config.sh:./db_config.sh
                    Способ 2: Выполните настройку вручную. Для этого:
                            Измените текущего пользователя на
                                postgres:su postgres
                            Войдите в интерактивный терминал для работы с
                                postgresql:psql
                            Измените пароль пользователя postgres в базе данных:ALTER USER postgres WITH PASSWORD '[пароль]';
                            Созд|*|*|*|айте пользователя с именем datapkitm и
                                необходимым
                                паролем:CREATE USER datapkitm WITH PASSWORD '[пароль служебного пользователя]';
                            Убедитесь, что пользователь создан:\du
                            Создайте базу данных datapkitm, в качестве распорядителя которой
                                указан пользователь
                                datapkitm:CREATE DATABASE datapkitm OWNER datapkitm;
                             Убедитесь, что база данных datapkitm создана:\l
                                    Список созданных БД
                            Покиньте терминал:\q
                            Для выхода из пользователя postgres введите
                                    exit.
            перейдите в режим редактирования файла postgresql.conf: vi /var/lib/pgsql/14/data/postgresql.confисправьте значения переменных, чтобы они соответствовали представленным ниже:listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265
shared_buffers = 8GB                    Где
                                    127.0.0.1 — локальный IP-адрес сервера ;
                                    172.17.0.1 — IP-адрес подсети docker0;
                                    8GB — 25% от общего объема оперативной памяти сервера.
                                IP-адреса должны быть перечислены через запятую без
                                    пробелов. Если IP-адрес подсети docker0
                                    уже используется в вашей инфраструктуре, его нужно изменить.
                                    Подробнее см. в разделе 
                                    .
                Измените метод аутентификации для всех баз данных и пользователей в файле
                        . Для этого: 
                        Войдите в режим редактирования файла  с помощью команды:
                            vi /var/lib/jatoba/1/data/pg_hba.conf
                            При использовании двух томов замените директорию
                                файла на /storage/base.
                        Замените правило local all all trust на local
                                all all md5.
                        Сохраните файл и выйдите из режима редактирования:
                            :wq
                        Перезапустите СУБД с помощью команды: 
                            systemctl restart postgresql-14
            Проверьте статус СУБД:systemctl status postgresql-14Проверка статуса СУБД
        Установите пакет iptables-services:yum install iptables-services
        Перейдите в каталог, содержащий compose-файлы:cd /opt/itm-k Подготовьте сертификаты для входа в веб-интерфейс:Настройте запуск службы СУБД после службы docker. Для этого:Перейдите в режим редактирования службы СУБД:systemctl edit postgresql-14.serviceДобавьте блок [Unit]:[Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.serviceДобавление блока UnitЕсли база данных хранится на отдельном томе, добавьте после блока [Unit] блок [Service]:[Service]
    Environment=PGDATA=/storage/base Где /storage/base — путь к базе данных, который был настроен на шаге  раздела .Для применения изменений в настройках службы СУБД выполните команду:systemctl daemon-reloadДля входа в веб-интерфейс в адресной строке введите IP-адрес .Окно авторизации Введите логин и пароль по умолчанию (datapkitm/datapkitm).Откроется стартовая страница веб-интерфейса . 
                Установите на сервер агент версии 2 согласно инструкции  (за исключением п. , так как межсетевой экран уже был настроен ранее в п. - текущей инструкции). 
                В файле конфигурации агента /etc/zabbix/zabbix_agent2.conf
                    установите параметр =172.16.239.0/24 (адрес подсети контейнеров 
                    ).
|*|*|*|
    extra_package_step1
                Установите docker 20 версии и пакеты к нему:
                    yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
                    yum install http://mirror.centos.org/centos/7/extras/x86_64/Packages/container-selinux-2.107-3.el7.noarch.rpm
                    yum install http://mirror.centos.org/centos/7/extras/x86_64/Packages/slirp4netns-0.4.3-4.el7_8.x86_64.rpm
                    yum install http://mirror.centos.org/centos/7/extras/x86_64/Packages/fuse3-libs-3.6.1-4.el7.x86_64.rpm
                    yum install http://mirror.centos.org/centos/7/extras/x86_64/Packages/fuse-overlayfs-0.7.2-6.el7_8.x86_64.rpm
                    yum install docker-ce
curl -L https://github.com/docker/compose/releases/download/1.29.2/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose
|*|*|*|
                Чтобы найти оптимальное значение таймаута, увеличивайте время опроса и количество попыток, пока соединение с узлом сети не будет восстановлено. 
                    Для этого используйте ключи -t (timeout) и -r (retries):
                        Для :
                            snmpwalk -v 2c -c [имя сообщества] -t [время опроса] -r [количество попыток] [IP-адрес]
                            snmpwalk -v 2c -c public -t 10 -r 2 10.51.244.22
                        Для :
                            snmpwalk -v3 -a [MD5|SHA] -A [пароль аутентификации] -x [DES|AES] -X [пароль шифрования] -l authPriv -u [имя пользователя] [IP-адрес] -t [время опроса] -r [количество попыток]
                            snmpwalk -v3 -a SHA -A P@ssw0rd -x AES -X p@SSW0RD -l authPriv -u datapkitm3 10.51.16.6 -t 20 -r 2
                По умолчанию snmpwalk отправляет 5 запросов по 1 секунде каждый.
|*|*|*|
    jatoba_lisence_move
                Установите полученный в результате активации файл лицензии в директории данных,
                    которой по умолчанию является :
                    chown postgres.postgres /var/lib/jatoba/1/data/jatoba.cer
ls -la /var/lib/jatoba/1/data/jatoba.cer
                        Перемещение файла-лицензии в каталог данных
|*|*|*|
            Этот раздел описывает последовательность действий для установки  для случая, когда на сервере используются два тома — первый том для операционной системы, второй том для базы данных.
           Если вы планируете использовать только один том, перейдите в следующий раздел.
            Все нижеописанные действия на сервере производятся после настройки RAID на дисках и
                установки операционной системы в соответствии с разделами 
                ,  и .
|*|*|*|
            Проверьте наличие пакетов из списка ниже с помощью приведенных команд (и в случае отсутствия какого-либо пакета установите его оффлайн, скачав установочный файл в локальную ОС и передав его на ОС, в которой будет выполняться установка ПК ):rpm -qa | grep gdal-libs
rpm -qa | grep geos
rpm -qa | grep hdf5
rpm -qa | grep libicu-devel
rpm -qa | grep proj
rpm -qa | grep perl
rpm -qa | grep libxslt
rpm -qa | grep xerces-c
rpm -qa | grep openssl-libs
rpm -qa | grep libcurl 
rpm -qa | grep python2-libs
rpm -qa | grep python3-libs
rpm -qa | grep json-c
|*|*|*|
    Для изменения названия  сервера агентовагентовудаленного мониторинга:
                Откройте окно «Свойства сервера агентов» одним из способов:
                        Нажмите в любом месте строки конкретного сервера агентовагентовудаленного мониторинга на странице .
                        Нажмите на значение столбца «» на
                            странице  или .
                В окне свойств сервера агентовагентовудаленного
                        мониторинга нажмите на кнопку  рядом с полем «Наименование объекта».
                Поле станет доступно для редактирования.
            Измените название .Изменение названия объекта сервера агентовагентовудаленного мониторингаНажмите на кнопку  для сохранения изменений.Для отмены изменений нажмите на кнопку .Нажмите на кнопку «Закрыть».
|*|*|*|
                    Перейдите на вкладку «Макросы».
                            Вкладка «Макросы»
                    Введите макрос в поле «Макрос».
                    Введите значение макроса в поле «Значение».
                    Выберите тип значения.
                    При необходимости введите описание макроса.
                    Нажмите на кнопку «Добавить»: .
                    Строка с макросом будет добавлена в список на вкладке «Макросы».
                    Чтобы просмотреть и изменить глобальные макросы и макросы из присоединенных шаблонов, выберите опцию «Унаследованные и макросы из шаблонов».
|*|*|*|
            Добавление активного сервера удаленного мониторинга
            Для добавления активного сервера удаленного
                    мониторингаагентовагентов в веб-интерфейсе :
                Перейдите в раздел боковой панели «Администрирование» → «Прокси».
                 Нажмите на кнопку «Создать прокси». 
                Настройте атрибуты сервера удаленного
                        мониторингаагентовагентов:
                        Имя прокси — Имя сервера удаленного
                                мониторингаагентовагентов, должно совпадать со значенем
                            переменной  в файле конфигурации сервера удаленного мониторингаагентовагентов;
                        Режим прокси — Активный;При использовании
                                активного сервера удаленного
                                    мониторинга
                                агентов
                                агентов в режиме подключения «Без
                                шифрования» данные конфигурации могут стать доступны лицам, имеющим
                                доступ к порту траппера сервера . 
                        Адрес прокси — IP-адрес сервера удаленного
                                мониторингаагентовагентов;
                        Описание.
                Нажмите на кнопку «Добавить».
                Укажите узлы сети, которые будут наблюдаться через сервер удаленного мониторингаагентовагентов в диалоге настройки узла сети.
                        Подробнее см. в разделе  шаг . Настройка доступна через массовое обновление узлов сети.
            Добавление пассивного сервера удаленного мониторинга
            Для добавления пассивного сервера удаленного
                    мониторингаагентовагентов в веб-интерфейсе :
            Перейдите в раздел боковой панели «Администрирование» → «Прокси».
             Нажмите на кнопку «Создать прокси». 
            Настройте атрибуты сервера удаленного мониторингаагентовагентов:
                    Имя прокси — Имя сервера удаленного
                            мониторингаагентовагентов, должно совпадать со значенем переменной
                             в файле конфигурации сервера удаленного мониторингаагентовагентов;
                    Режим прокси — Пассивный.
            Настройте данные сервера удаленного мониторингаагентовагентов в разделе
                    «Интерфейс»:
                    IP адрес;
                    DNS имя;
                    Подключаться через —выберите способ подключения:
                            IP — подключение к серверу удаленного мониторингаагентовагентов по IP-адресу
                                (рекомендуется);
                            DNS — подключение к серверу удаленного мониторингаагентовагентов по DNS
                                имени.
                    Порт —  или  порт;
                    Описание.
            Настройте шифрование соединений с сервером удаленного
                    мониторингаагентовагентов:
                    Подробнее про настройку с использованием PSK см. в разделе  или
                                    «Настройка шифрования между  и » в
                                Руководстве администратора . 
                    Для подключения сервера  к пассивному
                        серверу удаленного мониторинга
                        агентов
                        агентов с использованием сертификата заполните
                            поля:
                            Издатель — разрешенный издатель сертификата. Необязательное поле.
                                Предназначено для использования в случае, если  использует
                                сертификаты от нескольких центров сертификации. 
                            Субъект — разрешенный субъект сертификата. Если поле пустое, тогда
                                принимается любой сертификат, подписанный настроенным центром
                                сертификации.
                        Сертификат должен быть действителен и подписан
                            центром сертификации.
            Нажмите на кнопку «Добавить».
            Укажите узлы сети, которые будут наблюдаться через сервер удаленного мониторингаагентовагентов в диалоге настройки узла сети.
                    Подробнее см. в разделе  шаг . Настройка доступна через массовое обновление узлов сети.
|*|*|*|
    zbx_proxyconfig_frequency_info
    Период отправки данных конфигурации с сервера  на сервер  в секундах.
        Используется только с сервером , который работает в
                пассивном режиме.
|*|*|*|
    Переменная окружения , даже если она задана, не передается
                автоматически как переменная окружения в контейнер. Если переменная не передана, то
                в качестве имени сервера (hostname)  или  будет отображаться имя контейнера в виде случайного
                набора символов. Имя сервера присваивается при установке ОС и хранится в файле
                        /etc/hostname.Чтобы имя сервера было присвоено
                    контейнерам, нужно, чтобы выполнялся экспорт переменной окружения , значение которой берется из файла
                        /etc/hostname.По умолчанию, экспорт переменной
                         уже настроен, убедиться в этом можно, выполнив
                    команду export . В выводе результата команды должна быть переменная
                         и ее актуальное значение.
                    Изменение имени сервера (hostname)  или 
                            Перейдите в режим командной строки.
                            Перейдите в директорию с контейнерами:
                                    для :cd /opt/itm-vm
                                    для :cd /opt/itm-k
                            Остановите
                                контейнеры:docker-compose down
                            Измените имя
                                сервера:hostnamectl set-hostname <новое имя сервера>
                            Перезагрузите ОС.
                            Запустите
                                контейнеры:docker-compose up -d
                    Экспорт переменной окружения HOSTNAME
                    Выполняется в случае отсутствия переменной  в
                        выводе команды export. Для экспорта переменной:
                            откройте файл
                                /etc/profile:vi /etc/profile
                            в конце открывшегося файла добавьте
                                строку:export $HOSTNAME
                            сохраните файл и выйдите из режима
                                редактирования::wq
|*|*|*|
    Этот раздел описывает последовательность действий для установки  для случая, когда на сервере используются два тома — первый том для 
        операционной системы, второй том для базы данных.
        Если вы планируете использовать только один том, перейдите в раздел .
        Все нижеописанные действия на сервере производятся после настройки RAID на дисках и
            установки операционной системы в соответствии с разделами 
            ,
                 и
                . 
        В этом разделе:
|*|*|*|
            Настройте лицензию Jatoba. Для этого:
                        Откройте файл :
                            vi /var/lib/jatoba/1/data/postgresql.conf
                        В конце конфигурационного файла, в разделе «LICENSER OPTION AND
                            PARAMETRS» отредактируйте и раскомментируйте строки, убрав символ
                            «#»:
                            lic_product_name = 'Jatoba'
lic_file_path = '/usr/jatoba-1/bin/jatoba.cer'
lic_server_addr = 'https://license.gaz-is.ru'
|*|*|*|
    server_install_step17
                Последовательно добавьте в iptables правила для корректной работы межсетевого
                    экрана:
                        для входа в режим редактирования базы данных с помощью команды
                                psql -p 10265 -h 127.0.0.1 -U [имя пользователя] [имя
                                базы]. Это правило нужно для внесения допольнительных
                            правок после первичной настройки:
                            iptables -I INPUT 3 -s [IP-адрес docker-сети/маска в формате CIDR] -j ACCEPT
                            iptables -I INPUT 3 -s 127.0.0.1/32 -j ACCEPT
                        для подсетей docker. Если значения подсетей отличаются от стандартных,
                            можно посмотреть установленное значение в файле .env.
                            Выполните по очереди команды:  
                                iptables -I INPUT 4 -s [IP-адрес docker-сети/маска в формате CIDR] -j ACCEPT
                         Пример:
                                        iptables -I INPUT 4 -s 172.17.0.0/24 -j ACCEPT
                                    iptables -I INPUT 4 -s 172.16.239.0/24 -j ACCEPT
|*|*|*|
    sort_table
        Для сортировки записей кликните левой кнопкой мыши по названию
            интересующего столбца таблицы. 
                По первому клику осуществляется сортировка по возрастанию, иконка рядом с
                    названием столбца имеет вид .
                По второму клику — сортировка по убыванию, иконка рядом с названием столбца
                    имеет вид .
                По третьему клику — возврат к сортировке по умолчанию, иконка рядом с названием
                    столбца имеет вид .
|*|*|*|
        Для установки :
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер визуализации и управления.
                Создайте директорию для установки 
                    mkdir /opt/itm-vm
                Скопируйте следующие файлы в директорию /opt/itm-vm:
                        env_prod_generator.sh
                        iptables
                Перейдите в директорию /opt/itm-vm:
                    cd /opt/itm-vm
                Загрузите образы в операционную систему, на которой установлен сервер
                    визуализации и управления:
                    docker load -i datapk_itm-vm_[версия_сервера_визуализации_и_управления].tar.gz              
                        измените пароль пользователя postgres в базе
                            данных:
                            ALTER USER postgres WITH PASSWORD '[пароль]';
                             При создании пароля к учетной записи рекомендуется
                                следовать требованиям парольной политики:
                                    длина — не менее 16 символов;
                                    символы — буквы в нижнем и верхнем регистрах, цифры и
                                        специальные символы;
                                    минимальное количество цифр — 2.
                        создайте пользователя с именем datapkitm и необходимым
                            паролем:
                            CREATE USER datapkitm WITH PASSWORD '[пароль служебного пользователя]';
                        создайте базу данных datapkitm, в качестве
                            распорядителя которой указан пользователь
                            datapkitm:
                            CREATE DATABASE datapkitm OWNER datapkitm;
                        убедитесь, что база данных datapkitm создана:
                            \l
                                Список созданных БД
                        перейдите в режим редактирования файла
                            postgresql.conf: 
                            vi /var/lib/pgsql/14/data/postgresql.conf
                        исправьте значения переменных, чтобы они соответствовали представленным
                            ниже:
                        listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265
shared_buffers = 8GB                         Где
                                127.0.0.1 — локальный IP-адрес сервера DATAPK ITM-K;
                                172.17.0.1 — IP-адрес подсети docker0;
                                8GB — 25% от общего объема оперативной памяти сервера.
                            IP-адреса должны быть перечислены через запятую без пробелов.
                                Если IP-адрес подсети docker0 уже
                                используется в вашей инфраструктуре, его нужно изменить. Подробнее
                                см. в разделе 
                                .
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        войдите в режим редактирования файла  с помощью команды:
                            vi /var/lib/pgsql/14/data/pg_hba.conf
                        добавьте следующую строку в раздел «# IPv4 local connections:»
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        для базы данных datapkitm, пользователя БД
                                datapkitm, IP-адреса подсети контейнера сервера
                            консолидации по умолчанию 172.16.239.0/24 и метода аутентификации
                                md5 строка будет выглядеть следующим образом:
                            host datapkitm datapkitm 172.16.239.0/24 md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:» и измените ident на md5
                            в строке host all all 127.0.0.1/32 ident.
                                Содержимое файла 
                Для применения настроек в файлах конфигурации перезапустите СУБД:
                    systemctl restart postgresql-14
                     после перезапуска СУБД и автоматического применения настроек из файла
                            pg_hba.conf, команда для входа в режим редактирования
                        базы данных изменится. Она будет иметь следующий вид:
                        psql -p 10265 -h 127.0.0.1 -U [имя пользователя] [имя базы]
                        Где -p 10265 — порт, через который будет произведено
                        подключение к базе данных; -h 127.0.0.1 — подключение к
                        хосту 127.0.0.1; -U [имя пользователя] — подключение от
                        имени указанного пользователя. 
                Проверьте статус СУБД:
                    systemctl status postgresql-14
                        Проверка статуса СУБД
                 Подготовьте сертификаты для входа в веб-интерфейс:
                        перезагрузите сервер для применения изменений.
                            Вы можете перезагрузить сервер сразу либо после
                                выполнения пункта .
                        в логах контейнера itm_m_redis нет ошибки «WARNING overcommit_memory is
                            set to 0!»;
                        в файле /etc/sysctl.conf установлено значение
                                vm.overcommit_memory=1;
                                Содержимое файла sysctl.conf
                        в файле /proc/sys/vm/overcommit_memory установлено
                            значение 1.
                Перейдите в каталог, содержащий compose-файлы:
                    cd /opt/itm-vm
                Запустите контейнеры:
                    docker-compose up -d
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                Для первичной настройки в окне авторизации введите логин и пароль учетной
                    записи по умолчанию:
                        логин: itm;
                        пароль: P@ssw0rd1234. 
                        Окно авторизации ITM-VM
                    При первой настройке комплекса необходимо изменить логин
                        и пароль встроенной учетной записи.
|*|*|*|
    database error connection
            Причина:
                Описание ошибки - Database error: Error connecting to database.
                Способы устранения:
|*|*|*|
    Рекомендуется создать отдельного пользователя для синхронизации с  и дальнейшего использования в качестве технической учетной записи.Создайте группу пользователей «Синхронизатор c itm-vm». Для этого:В поле «Имя группы» введите «Синхронизатор c itm-vm». В выпадающем меню «Доступ к веб-интерфейсу» выберите значение «Внутренний».Вкладка «Группа пользователей»Настройте права доступа. Для этого:Перейдите на вкладку «Права доступа».Добавьте все группы узлов сети.Выберите права «Чтение-запись».Установите чекбокс «Включая подгруппы».Вкладка «Права доступа»Нажмите на кнопку «Добавить» .Нажмите на кнопку «Добавить».При создании новой группы для узлов сети и шаблонов добавьте ее в группу пользователя «Синхронизатор c itm-vm», иначе  не будут передаваться по иерархии в .Создайте роль пользователя «Sync-itm-m role». Для этого:Перейдите на страницу  → . Нажмите на кнопку «Создать роль пользователей» в верхнем правом углу.Откроется страница «Роли пользователей».В поле «Имя» введите «Sync-itm-m role».В выпадающем меню «Тип пользователя» выберите значение «Супер-администратор».Отмените выбор всех чекбоксов, кроме следующих: В разделе «Доступ к Веб элементам» → «Настройка» чекбоксы:«Группы узлов сети»;«Узлы сети»;«Услуги».  Чекбоксы в разделе «Доступ к Веб элементам» → «Настройка» В разделе «Доступ к API» чекбокс «Активировано». Чекбокс «Активировано» Установите список разрешений в разделе «Доступ к API» → «Методы API»:Выберите опцию «Список разрешений».Добавьте в список метод *.get.Добавление метода APIСоздайте пользователя. Для этого:В поле «Псевдоним» введите «sync-itm-m».Назначьте пользователю группу «Синхронизатор с itm-vm». Задайте и подтвердите пароль пользователя.Добавление пользователяПерейдите на вкладку «Права доступа». Выберите роль «Sync-itm-m role».Добавление роли пользователяНажмите на кнопку «Добавить» для применения настроек.Добавьте сервер  в веб-интерфейсе . Для этого:Перейдите в веб-интерфейс сервера , на который добавленный ранее пользователь будет отправлять данные. В боковом меню перейдите на страницу . Нажмите на кнопку «Добавить сервер». Откроется окно «Подключение сервера мониторинга».В открывшемся окне введите IP-адрес для подключения, а также логин и пароль пользователя, созданного на сервере  для синхронизации с . Добавление IP-адреса сервера, пользователя и пароляВ открывшемся окне заполните поле «Название филиала». Нажмите на кнопку «Добавить».После первой синхронизации на странице  в веб-интерфейсе  появится сервер , а также сервер DATAPK, если ранее была настроена его синхронизация с добавленным .
|*|*|*|
    RedOS_installation_steps
        Если установка ОС производится с нуля:
                В разделе «Раскладка клавиатуры» рекомендуется выбрать английскую раскладку
                    клавиатуры как значение по умолчанию для удобства ввода команд в консоли.
                В разделе «Выбор программ» рекомендуется выбрать базовое окружение «Сервер
                    минимальный» и выбрать следующие дополнения для выбранного окружения:
                        Perl для веб-разработки;
                        Python;
                        Библиотеки совместимости.
                При автоматической разметке дисков с размером более 50 ГБ автоматически
                    создается раздел /home/. Рекомендуется удалить данный раздел.
                    Для его удаления необходимо в меню «Разметка вручную» нажать на кнопку «-»,
                    затем выбрать корневой раздел «/» и в поле «Требуемый размер» ввести «100%» для
                    расширения дискового пространства.
|*|*|*|
                Настройте лицензию Jatoba. Для этого:
                        Откройте файл postgresql.conf:
                        vi /var/lib/jatoba/1/data/postgresql.confВ конце конфигурационного файла, в разделе «LICENSER OPTION AND PARAMETRS» раскомментируйте строки, убрав символ «#»:lic_product_name = 'Jatoba'
lic_file_path = 'jatoba.cer'
lic_server_addr = 'https://license.gaz-is.ru'
                                Раздел LICENSER OPTION AND PARAMETRS файла postgresql.confх
                        Сохраните изменения и закройте файл:
                        :wq
|*|*|*|
        Назначьте СУБД нестандартный каталог для хранения баз данных и конфигурационных файлов. Для этого:
                        Перейдите в режим редактирования службы СУБД:
                            systemctl edit jatoba-*.service
                        Введите следующий текст для обозначения нового каталога:
                            [Service]
Environment=PGDATA=/storage/base
|*|*|*|
    Необязательный параметр, который задает элемент данных «Zabbix агент»,
            используемый для получения метаданных узла сети. Этот параметр используется, только если
            не определен параметр . Поддерживаются параметры
                 и . Поддерживается
            system.run[] независимо от значения параметра . Метаданные узла сети используются
            только в процессе автоматической регистрации узлов сети (активный агент). В процессе
            запроса авторегистрации агент запишет в журнал предупреждение, если полученное значение
            от указанного элемента данных больше 255 символов. Значение, полученное от указанного
            элемента данных, должно являться UTF-8 строкой, в противном случае оно будет
            игнорироваться.
|*|*|*|
                Причина
                Страница в веб-интерфейсе была активна, когда произошло отключение контейнера zabbix-server.
                Способ устранения
                        Перейдите в рабочий каталог 
                            и просмотрите состояние docker-контейнеров (по умолчанию путь к рабочей директории 
                             — 
                            ).
                        Для этого выполните команды:
                                cd /[путь к рабочей директории ] docker psВсе
                                контейнеры в полученном списке должны быть в состоянии
                                    up (колонка «Status»). Среди контейнеров в
                                списке должен присутствовать zabbix-server. 
                        Если какие-либо контейнеры не запущены или имеют статус «Restarting», то остановите работу контейнеров без удаления данных следующей 
                            командой: docker-compose downДождитесь остановки работы всех контейнеров.
                        Проверьте и, в случае необходимости, откорректируйте файлы
                                .[имя модуля].env,
                                docker-compose.yaml.
                        Запустите работу контейнеров командой: 
                        docker-compose up -d
                        Проверьте состояние docker-контейнеров с помощью команды:
                        docker ps
                        Если среди docker-контейнеров не появился zabbix-server, запустите его с помощью команды:
                                    docker-compose up -d zabbix-server
|*|*|*|
            Для установки :
                    Перейдите в режим командной строки операционной системы, на которой будет
                        установлен сервер .
                    Создайте директорию для установки :
                        mkdir /opt/itm-k
                    Скопируйте следующие файлы в директорию /opt/itm-k:
                            env_generator.sh
                            iptables
                            db_config.sh
                    Перейдите в директорию /opt/itm-k:
                        cd /opt/itm-k
                    Загрузите образы в операционную систему, на которой установлен сервер :
                        docker load -i datapk_itm-k_[версия_сервера_консолидации].tar.gz
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        Войдите в режим редактирования файла  с помощью команды:
                            vi /var/lib/jatoba/1/data/pg_hba.conf
                            При использовании двух томов замените директорию
                                файла на /storage/base.
                        Убедитесь, что в файле присутствует правило:
                            local    all    all    trust
                        Если этого правила нет, добавьте его в файл. Это правило должно
                            располагаться выше всех остальных правил.
                        При необходимости измените настройки ограничений на подключение
                            локальных и удаленных пользователей к базам данных:
                                найдите раздел «# IPv4 local connections:»;
                                укажите базы данных, ранее созданных пользователей БД, которым
                                    разрешен доступ к ним, и IP-адреса для удаленного подключения в
                                    следующем
                                        формате:host [имя_БД1],[имя_БД2],… [пользователь1],[пользователь2],… 
[диапазон IP-адресов разрешенных серверов в формате «IP/маска»] md5Отступ
                                        между колонками в одной строке выполняется клавишей
                                        «Tab».
                        Добавьте следующую строку в раздел «# IPv4 local connections:»
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        для базы данных datapkitm, пользователя БД
                                datapkitm, IP-адреса подсети контейнера сервера  по умолчанию
                            172.16.239.0/24 и метода аутентификации md5 строка
                            будет выглядеть следующим образом:
                            host datapkitm datapkitm 172.16.239.0/24 md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:» и измените ident на md5
                            в строке host all all 127.0.0.1/32 ident.
                                Содержимое файла pg_hba.conf
                        Сохраните файл и выйдите из режима редактирования:
                            :wq
                Создайте базу данных, пользователя и пароль для него. 
                    Способ 1: Выполните настройку с помощью скрипта
                            db_config.sh, который будет выложен вместе с
                        дистрибутивом. Для этого:
                            Перейдите в директорию
                                /opt/itm-k:cd /opt/itm-k
                            Назначьте скрипту db_config.sh полные права
                                доступа:chmod +x db_config.sh
                            Запустите скрипт
                                db_config.sh:./db_config.sh
                    Способ 2: Выполните настройку вручную. Для этого:
                            Измените текущего пользователя на
                                postgres:su postgres
                            Войдите в интерактивный терминал для работы |*|*|*|с
                                postgresql:psql
                            Измените пароль пользователя postgres в базе данных:ALTER USER postgres WITH PASSWORD '[пароль]';
                            Создайте пользователя с именем datapkitm и
                                необходимым
                                паролем:CREATE USER datapkitm WITH PASSWORD '[пароль служебного пользователя]';
                            Убедитесь, что пользователь создан:\du
                            Создайте базу данных datapkitm, в качестве распорядителя которой
                                указан пользователь
                                datapkitm:CREATE DATABASE datapkitm OWNER datapkitm;
                             Убедитесь, что база данных datapkitm создана:\l
                                    Список созданных БД
                            Покиньте терминал:\q
                            Для выхода из пользователя postgres введите
                                    exit.
                            исправьте значения переменных, чтобы они соответствовали
                                представленным ниже:
                            listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265
shared_buffers = 8GB                        Где
                                    127.0.0.1 — локальный IP-адрес сервера ;
                                    172.17.0.1 — IP-адрес подсети docker0;
                                    8GB — 25% от общего объема оперативной памяти сервера.
                                IP-адреса должны быть перечислены через запятую без
                                    пробелов. Если IP-адрес подсети docker0
                                    уже используется в вашей инфраструктуре, его нужно изменить.
                                    Подробнее см. в разделе 
                                    .
                Измените метод аутентификации для всех баз данных и пользователей в файле
                        . Для этого: 
                        Войдите в режим редактирования файла  с помощью команды:
                            vi /var/lib/jatoba/1/data/pg_hba.conf
                            При использовании двух томов замените директорию
                                файла на /storage/base.
                        Замените правило local all all trust на local
                                all all md5.
                        Сохраните файл и выйдите из режима редактирования:
                            :wq
                        Перезапустите СУБД с помощью команды: 
                            systemctl restart jatoba-*
                    Замените файл /etc/sysconfig/iptables на файл
                            iptables из комплекта поставки:
                        mv /opt/itm-k/iptables /etc/sysconfig/
                    Перейдите в каталог, содержащий compose-файлы:
                        cd /opt/itm-k
                    Подготовьте сертификаты для входа в веб-интерфейс:
                    Настройте запуск службы СУБД после службы docker. Для этого:
                            Если база данных хранится на отдельном томе, добавьте после блока
                                [Unit] блок [Service]:
                            [Service]
    Environment=PGDATA=/storage/base                            Где
                                    /storage/base — путь к базе данных, который был
                                настроен на шаге  раздела .
                    Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                            Окно авторизации 
                    Введите логин и пароль по умолчанию (datapkitm/datapkitm).
                    Откроется стартовая страница веб-интерфейса . 
                Установите на сервер агент версии 2 согласно инструкции  (за исключением п. , так как межсетевой экран уже был настроен ранее в п. - текущей инструкции). 
                В файле конфигурации агента /etc/zabbix/zabbix_agent2.conf
                    установите параметр =172.16.239.0/24 (адрес подсети контейнеров 
                    ).
|*|*|*|
        Причина 2Адрес подсети docker0 используется в вашей инфраструктуре.Способ устранения 1
                        Остановите и удалите все контейнеры, которые не указаны в
                                docker-compose файлах:
                            docker-compose down --remove-orphans
                    Просмотрите список маршрутов одной из команд:route -nРезультат работы команды route -nip rРезультат работы команды ip r
                        Убедитесь, что в списке маршрутов отсутствуют контейнерные подсети,
                            кроме docker0. Для этого просмотрите список контейнерных подсетей
                            командой: 
                            docker network ls
                        При наличии в списке других подсетей найдите их идентификаторы сети в
                            столбце NETWORK ID.
                                Список контейнерных подсетей
                             В приведенном выше списке идентификатор сети c именем bridge —
                            bf34584f056d.
                    При необходимости удалите контейнерные подсети, кроме docker0: docker network rm [идентификатор подсети]рекомендуется удалять контейнерную подсеть только в случае проблем с инициализацией.Создайте файл /etc/docker/daemon.json.Добавьте в файл адрес узла сети и маску сети.{
"bip": "172.17.77.1/24"
}Перезапустите службу docker:systemctl restart docker
                        Убедитесь, что в файла  используется значение новой подсети для обращения к базе
                            данных:
                                перейдите в режим редактирования файла:
                                    vi env/.db.env
                                убедитесь, что значение переменной  равно первому адресу сети из файла
                                        /etc/docker/daemon.json.
|*|*|*|
    При попытке зайти в веб-интерфейс  выводится сообщение «Внутренняя ошибка сервера». При вызове окна «инструменты разработчика» через F12 выводятся сообщения о некорректном шлюзе. При этом контейнеры не перезапускаются, в контейнере itm_m_user_service ошибка вида: "Не удалось подключиться к БД postgresql+asyncpg//postgres:**********@host.docker.internal:10265/user_service - 
в pg_hba.conf нет записи для компьютера "172.15.0.6", пользователя "itmm_user", базы "user_service", SSL выкл."ПричинаВ файле  указано следующее значение для подключения: host itmm itmm_user 172.15.0.1/24 md5Это значение подходит только для одной базы данных, нужно разрешить подключение для нескольких баз данных.Способ устраненияОтредактируйте файл :перейдите в режим редактирования файла:vi /var/lib/jatoba/1/data/pg_hba.confнайдите строку, вызывающую ошибку:host itmm [имя пользователя БД] 172.15.0.1/24 md5для пользователя itmm_user строка будет иметь вид: host itmm itmm_user 172.15.0.1/24 md5
                                отредактируйте строку, чтобы установить подключение к
                                    нескольким БД:
                                    host all [имя пользователя БД] 172.15.0.1/24 md5
|*|*|*|
                Для применения настроек в файлах конфигурации перезапустите СУБД с помощью команды:
                    systemctl restart jatoba-* После перезапуска СУБД и применения настроек из файла , команда для входа в режим редактирования базы данных изменится. Она
                        будет иметь следующий вид:
                        sudo -u postgres psql -p 10265 -h 127.0.0.1 -U [имя пользователя] [имя базы]
                        Где: 
                            -u postgres — пользователь ОС;
                            -p 10265 — порт, через который будет произведено
                                подключение к базе данных;
                            -h 127.0.0.1 — подключение к хосту 127.0.0.1;
                            -U [имя пользователя] — подключение от имени
                                указанного пользователя.
|*|*|*|
    database_error_1
                        Перейдите в режим командной строки операционной системы, на которой
                            установлен .
                        Проверьте статус службы СУБД Jatoba с помощью команды:
                                systemctl status jatoba-*
                        СУБД должна иметь статус active (running)
                        Если служба СУБД имеет статус inactive (dead), то используйте следующую
                            команду для запуска СУБД: systemctl start
                            jatoba-*
                        Если служба СУБД запущена, но ошибка не исчезает, проверьте и, в случае
                            необходимости, откорректируйте файлы , , , , .
                        Для применения настроек в отредактированных файлах перезапустите службу
                            СУБД и docker-контейнеров с помощью команд:
                            systemctl restart jatoba-*
cd /opt/itm-k && docker-compose down && docker-compose up -d              
|*|*|*|
                Просмотрите файловые системы и UUID в системе одним из следующих способов:
                        с помощью команды lsblk -f:
                        Результат работы команды lsblk -f
                        с помощью команды blkid:
                        Результат работы команды blkid
|*|*|*|
    Окно просмотра информации о сервере агентовагентовудаленного мониторинга появляется:
                при нажатии в любом месте строки конкретного сервера агентовагентовудаленного мониторинга на странице ;
                при нажатии на значение столбца «» на страницах
                         и .
        Свойства сервера агентовагентовудаленного мониторингаОкно содержит следующие свойства: Наименование сервера — имя сервера агентовагентовудаленного мониторинга
                    ;Наименование объекта — имя , где находятся  сервера агентовагентовудаленного
                        мониторинга; IP-адрес — IP-адрес сервера агентовагентовудаленного мониторинга;DNS-имя — DNS-имя сервера агентовагентовудаленного мониторинга;Описание — описание сервера агентовагентовудаленного мониторинга.
|*|*|*|
            Проинициализируйте установленную версию. Для этого:
                    Перейдите в директорию расположения исполняемых файлов СУБД:
                    cd /usr/jatoba-*/bin
                    Выполните команду инициализации СУБД: 
                    ./jatoba-setup initdb jatoba-*
                        После инициализации СУБД основной каталог с конфигурационными файлами располагается в /storage/base.
|*|*|*|
            Если в системе используется межсетевой экран, добавьте в него правила для открытия порта агента и примените их.
                Если используется межсетевой экран firewall-cmd:
                            Остановите работу
                                контейнеров:docker-compose down
                            Добавьте правило: firewall-cmd --permanent --zone=public --add-port=10050/tcp
                            Примените правило:firewall-cmd –reload
                            Убедитесь в корректности
                                настройки:firewall-cmd --permanent --list-all
                            Запустите работу
                                контейнеров:docker-compose up -d
                Если используется межсетевой экран iptables:
                            Остановите работу
                                контейнеров:docker-compose down
                            Добавьте правило:
                                    iptables -I INPUT [номер строки] -p tcp --dport 10050 -j ACCEPT 
                            Примените правило:service iptables save
                            Убедитесь в корректности
                                настройки:iptables -nL
                            Запустите работу
                                контейнеров:docker-compose up -d
|*|*|*|
    Сервер удаленного мониторингаагентовагентов
                 предназначен для сбора данных о
                производительности и доступности от имени  сервера. Применение сервера удаленного мониторингаагентовагентов позволяет организовать
                территориально распределенную систему мониторинга и при этом снизить нагрузку на
                сервер .
        Сервер удаленного мониторингаагентовагентов можно использовать для сбора данных
            в локальном масштабе от имени централизованного  сервера, а затем
            отправлять данные на сервер мониторингаконсолидацииконсолидации.
        Сервер удаленного мониторингаагентовагентов не имеет веб-интерфейса и
            используется только вместе с .Сервер  целесообразно использовать для:мониторинга объектов на территориально удаленных площадках;мониторинга объектов на площадках с каналами передачи данных невысокой надежности или пропускной способности;снижения нагрузки на сервер  при мониторинге большого количества устройств.Сервер удаленного мониторингаагентовагентов требует только одно -соединение к серверу , поэтому потребуется настроить только одно правило
            в брандмауэре.
             и  должны использовать разные базы данных. Если
                     использует ту же базу данных, что , то конфигурация будет испорчена.
        Перед отправкой данные хранятся на сервере удаленного
                мониторингаагентовагентов в течение периода, указанного в переменной , по умолчанию период равен 1 часу.Если сервер  передает собранные данные серверу , но на сервере  данные не обновляются, уменьшите значение
            переменной .Возможности сервера удаленного мониторингаагентовагентовФункцияПоддержка сервера удаленного мониторингаагентовагентовПроверки через 
                                         агент
                                    ДаПроверки через  агент (активный)ДаЧтобы агент запрашивал активные проверки у сервера удаленного мониторинга
                                агентов
                                агентов, а не у сервера мониторингаконсолидацииконсолидации,
                                IP-адрес прокси должен быть указан в параметре ServerActive
                                        файла конфигурации агента.Простые проверкиДаЭлементы данных траппераДа проверкиДа трапыДа проверкиДа
                            проверкиДаМониторинг файлов журналовДаВнутренние проверкиДаПроверки через ДаПроверки через ДаВнешние проверкиДаЗависимые элементы данныхДаПредобработка значений элементов данных на стороне  сервера необходима для
                                извлечения требуемого значения с данных мастер элемента
                                данных.Встроенный веб-мониторингДаОбнаружение сетиДаНизкоуровневое обнаружениеДаУдаленные командыДаВычисление триггеровНетОбработка событийНетКорреляция событийНетОтправка оповещенийНетПредобработка значений элементов данныхНет
    |*|*|*|
        Для установки :
                Перейдите в режим командной строки операционной системы, на которой будет
                    установлен сервер визуализации и управления.
                Создайте директорию для установки :
                    mkdir /opt/itm-vm
                Скопируйте следующие файлы из комплекта поставки в директорию
                        /opt/itm-vm:
                        env_prod_generator.sh
                        iptables
                Перейдите в директорию /opt/itm-vm:
                    cd /opt/itm-vm
                Загрузите образы в операционную систему, на которой установлен сервер
                    визуализации и управления:
                    docker load -i datapk_itm-vm_[версия_сервера_визуализации_и_управления].tar.gz              
                        cоздайте пользователя с именем datapkitm и необходимым
                            паролем:
                            CREATE USER datapkitm WITH PASSWORD '[пароль служебного пользователя]';
                        создайте базу данных datapkitm, в качестве
                            распорядителя которой указан пользователь
                            datapkitm:
                            CREATE DATABASE datapkitm OWNER datapkitm;
                        убедитесь, что база данных datapkitm создана:
                            \l
                                Список созданных БД
                        исправьте значения переменных, чтобы они соответствовали представленным
                            ниже:
                        listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265
shared_buffers = 8GB                         Где
                                127.0.0.1 — локальный IP-адрес сервера DATAPK ITM-K;
                                172.17.0.1 — IP-адрес подсети docker0;
                                8GB — 25% от общего объема оперативной памяти сервера.
                            IP-адреса должны быть перечислены через запятую без пробелов.
                                Если IP-адрес подсети docker0 уже
                                используется в вашей инфраструктуре, его нужно изменить. Подробнее
                                см. в разделе 
                                .
                Настройте разрешения по подключению docker-контейнера и пользователей к базам
                    данных. Для этого:
                        при необходимости измените настройки ограничений на подключение
                            локальных и удаленных пользователей к базам данных:
                        добавьте следующую строку в раздел «# IPv4 local connections:»
                            host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
                        для базы данных datapkitm, пользователя БД
                                datapkitm, IP-адреса подсети контейнера сервера
                            консолидации по умолчанию 172.16.239.0/24 и метода аутентификации
                                md5 строка будет выглядеть следующим образом:
                            host datapkitm datapkitm 172.16.239.0/24 md5
                        Закомментируйте строки во всех разделах, кроме «# IPv4 local
                            connections:» и измените ident на md5
                            в строке host all all 127.0.0.1/32 ident.
                                Содержимое файла 
                Подготовьте сертификаты для входа в веб-интерфейс:
                        перезагрузите сервер для применения изменений.
                            Вы можете перезагрузить сервер сразу либо после
                                выполнения пункта .
                        в логах контейнера itm_m_redis нет ошибки «WARNING overcommit_memory is
                            set to 0!»;
                        в файле /etc/sysctl.conf установлено значение
                                vm.overcommit_memory=1;
                        в файле /proc/sys/vm/overcommit_memory установлено
                            значение 1.
                Перейдите в каталог, содержащий compose-файлы:
                    cd /opt/itm-vm
                Для входа в веб-интерфейс в адресной строке введите IP-адрес .
                Для первичной настройки в окне авторизации введите логин и пароль учетной
                    записи по умолчанию:
                        логин: itm;
                        пароль: P@ssw0rd1234. 
                        Окно авторизации ITM-VM
                    При первой настройке комплекса необходимо изменить логин
                        и пароль встроенной учетной записи.
|*|*|*|
            Способ устранения 1
                    Остановите все контейнеры:
                        docker-compose down --remove-orphans
                    Просмотрите список маршрутов одной из команд:
                                route -n
                                    Результат работы команды route -n
                                ip r
                                    Результат работы команды ip r
                    Убедитесь, что отсутствуют контейнерные подсети, кроме docker0. Для этого просмотрите список контейнерных подсетей командой: 
                        docker network ls
                    При наличии в списке других подсетей найдите их идентификаторы.
                    При необходимости удалите контейнерные подсети, кроме docker0: 
                        docker network rm [идентификатор подсети]
                        рекомендуется удалять контейнерную подсеть только в случае проблем с инициализацией.
                    Создайте файл /etc/docker/daemon.json.
                    Добавьте в файл адрес узла сети и маску сети.
                        {
"bip": "172.17.77.1/24"
}
                    Перезапустите службу docker:
                        systemctl restart docker
|*|*|*|
            Запустите скрипт одним из способов:
                    Способ 1:
                    Запустите скрипт, указав абсолютный путь к директории с конфигурационными
                        файлами в качестве первого аргумента
                        скрипта:bash logs_collector.sh [ваш путь]
                    Способ 2:
                            Переместите скрипт в директорию с конфигурационными файлами.
                            Запустите скрипт
                                командой:bash logs_collector.sh
|*|*|*|
    Список директорий  и их описание представлены в таблице ниже.Директории Директория (Файл)Назначениеopt/itm-kОсновная рабочая директория /opt/itm-k/envДиректория для хранения файлов конфигурации/var/lib/jatoba/1/data/Директория данных СУБД Jatoba по умолчанию/storage/baseДиректория для хранения базы данных на отдельном томеenv/nginx/certs/Директория для хранения сертификатов
|*|*|*|
                    Перейдите на вкладку «Теги».
                            Вкладка «Теги»
                        Введите имя тега в поле «Имя».
                        Введите значение тега в поле «Значение».
                        Нажмите на кнопку «Добавить»: .
                        Строка с тегом будет добавлена в список на вкладке «Теги».
|*|*|*|
        Настройте запуск службы СУБД после службы docker. Для этого:Перейдите в режим редактирования службы СУБД: systemctl edit jatoba-1.serviceДобавьте блок [Unit]:[Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.serviceЕсли база данных хранится на отдельном томе, добавьте после блока [Unit] блок [Service]:[Service]
Environment=PGDATA=/storage/base                            Где
                            /storage/base — путь к базе данных, который был
                        настроен на шаге  раздела .Для применения изменений в настройках службы СУБД выполните команду:systemctl daemon-reload
|*|*|*|
    ntp_steps
                В файле :
                        добавьте строку server [IP адрес NTP сервера];
                        закомментируйте или удалите неиспользуемые записи (например, server
                            ntp1.vniiftri.ru).
                Запустите сервис NTP и добавьте его в автозагрузку:
                    systemctl enable ntpd --now
                Дождитесь полного запуска сервиса (15-20 минут). 
                Убедитесь в корректности произведенных настроек. Для этого выполните
                        команду:
                ntpq -pn
                        Пример успешного вывода команды ntpq -pn
                    Символ «*» в начале строки свидетельствует о корректности произведенной
                        настройки, но появиться он может не ранее 15-20 минут после запуска
                        сервиса.
|*|*|*|
    Для корректного сбора данных с  и подключенных к нему серверов  присоедините созданные ранее шаблоны:Перейдите в меню  → .Выберите узел сети datapkitm server.Откроется страница «Узлы сети».Перейдите во вкладку «Шаблоны».
                Нажмите кнопку «Выбрать».
                Откроется окно выбора шаблонов.
                Установите чекбокс возле следующих шаблонов:
                        «Сервер консолидации ITM-K» для узла сети сервера  или «Сервер
                            сбора ITM-A» для узла сети сервера ;
                        «Linux агентный сбор».
                Нажмите на кнопку «Обновить».
                         Добавление шаблонов узлу сети 
|*|*|*|
    Database error: Сonnection refused
            Причина:
                Описание ошибки - Database error: Сonnection refused.
                Способы устранения:
                        Проверьте, что порты, указанные в конфигурационных файлах, совпадают с
                            открытыми портами в МЭ.
                        Если данные пункты не помогли восстановить работоспособность –
                            обратитесь к документации СУБД Jatoba.
|*|*|*|
            При использовании функционала модуля парольной политики «securityprofile» в составе
                СУБД Jatoba, его настройку следует осуществлять в соответствии с документацией от
                разработчика. Имейте в виду, что при использовании модуля парольной политики
                «securityprofile» после каждой перезагрузки сервера необходимо повторно
                инициализировать модуль «securityprofile» путем перезапуска службы. Подробнее о
                возможной ошибке см. в разделе Сбой инициализации модуля управления парольными
                    политиками «securityprofile».
|*|*|*|
        Установите ОС РЕД ОС 7.3 по инструкции от производителя. В процессе установки ОС: В этом разделе:
|*|*|*|
    zbx_proxydata_frequency_info
    Период запроса данных истории, доступности узлов сети, обнаружения и авторегистрации с сервера
                     сервером  в секундах. 
        Используется только с сервером , который работает в
                пассивном режиме.
|*|*|*|
    Для настройки шифрования между сервером  и агентами (на примере  с  Linux):Перейдите в режим командной строки .Перейдите в режим редактирования файла конфигурации агента:Для файла конфигурации по умолчанию /etc/zabbix/zabbix_agentd.conf это можно сделать командой: vi /etc/zabbix/zabbix_agentd.confИзмените значения следующих переменных:=psk
=psk
=/etc/zabbix/key.psk
=[Название_идентификатора]=TESTPSKПерезапустите сервис zabbix-proxy для применения новой конфигурации агента: systemctl restart zabbix-agentПолучите содержимое ключа безопасности:cat /etc/zabbix/key.pskВ результате выполнения команды в консоли отображается ключ: e87e4daf1568e43e52e7596a3570e1b4114127cb51fe72c8eacadd510b7560b5Скопируйте строку ключа безопасности в буфер обмена.В веб-интерфейсе  перейдите на страницу  → .Выберите узел сети и кликните на его имени.Откроется страница настройки агента.Перейдите на вкладку «Шифрование».Вкладка «Шифрование» на странице настроек агентаВыберите режим «Подключения к узлу сети» — «PSK».Для соединения с узлом сети установите чекбокс рядом с режимом «PSK».Отмените выбор остальных чекбоксов.В поле «Идентификатор PSK» введите название идентификатора, указанное ранее в переменной .В поле «PSK» введите скопированное ранее значение ключа безопасности.Настройки проксиНажмите на кнопку «Обновить» для применения настроек. 
|*|*|*|
    Список директорий  и их описание представлены в таблице ниже.Директории Директория (Файл)Назначениеopt/itm-vmОсновная рабочая директория /opt/itm-vm/envДиректория для хранения файлов конфигурации/var/lib/jatoba/1/data/Директория данных СУБД Jatoba по умолчанию/storage/baseДиректория для хранения базы данных на отдельном томеenv/nginx/certs/Директория для хранения сертификатов
|*|*|*|
            Настройте параметры фильтра:
                    Введите макрос для фильтра.
                    Выберите, будет ли фильтр искать совпадающие элементы.
                    Введите @[Название категории, содержащей новое регулярное выражение].
            Например, «{#IFNAME} совпадает @Сетевые интерфейсы для обнаружения».
                    Настройка параметров фильтра
|*|*|*|
    datapk synchro approve
            Убедитесь в корректности работы синхронизатора. Для этого: 
                        Перейдите в веб-интерфейс на страницу  →
                                .
                        Выберите группу узлов сети DATAPK, которая должна быть изменена в
                            результате работы синхронизатора.
                        Просмотрите содержимое группы.
|*|*|*|
    В таблице указаны поддерживаемые версии компонентов решения для  v. 1.7.0.Совместимость компонентов решения для Компонент решенияВерсия ПОПримечаниеПодключаемые серверы мониторинга v. 1.6*; 1.5; 1.4; 1.3Zabbix v. 5.2; 5.0; 4.0При подключении Zabbix v. 4.0 отсутствует сбор данных журналов аудита.Операционная системаРЕД ОС v. 7.3*; 7.2CentOS v. 8.4Astra Linux Special Edition (Смоленск) v. 1.6СУБДJatoba v. 4.5*; 1.14PostgreSQL v. 14ВиртуализацияDocker v. 20Где * — рекомендованная версия, обеспечивающая весь доступный функционал и стабильность работы.
|*|*|*|
    В этом разделе:
|*|*|*|
                Проинициализируйте установленную версию СУБД. Для этого:
                        Перейдите в директорию расположения исполняемых файлов СУБД, выполнив
                            команду:
                            cd /usr/jatoba-1/bin
                        Выполните команду инициализации СУБД:
                            ./jatoba-setup initdb jatoba-1
                                Инициализация СУБД
|*|*|*|
                    в случае установки  и  на один сервер раскомментируйте следующие переменные и измените их значения: =8080 — HTTP-порт, по которому будет доступен веб-интерфейс ;=8443 —  HTTPS-порт, по которому будет доступен веб-интерфейс .
|*|*|*|
                Убедитесь, что превышено время ожидания ответа от узла сети. Для этого введите команду:
                        Для :
                            snmpwalk -v 2c -c [имя сообщества] [IP-адрес узла сети]
                                Результат работы команды
                        Для :
                        snmpwalk -v3 -a [MD5|SHA] -A [пароль аутентификации] -x [DES|AES] -X [пароль шифрования] -l authPriv -u [имя пользователя] [IP-адрес]
                            Где 
                                [MD5|SHA] — протокол аутентификации (MD5 или SHA);
                                [DES|AES] — протокол шифрования (DES или AES).
                                Результат работы команды
|*|*|*|
    Настройка синхронизации времени (NTP)
        Если файл  или служба ntpd отсутствуют, то необходимо установить ntp с
                помощью команды yum –y install ntp. 
        Для настройки клиента NTP:
                в файле  добавьте строку: server <IP адрес NTP сервера> и
                    закомментируйте или удалите неиспользуемые записи (например server
                    ntp1.vniiftri.ru, …).
                Запустите сервис ntp командой systemctl start ntpd.
                Добавьте в автозагрузку командой systemctl enable ntpd.
                Для проверки выполните команду ntpq -pn.
                В примере корректного вывода на рисунке * перед строкой свидетельствует об
                        успешной настройке, но она появляется не сразу – минут через 15-20, такая
                        строка без * сразу после настройки – хорошо.
                        Просмотр состояния подключения к ntp-серверам
|*|*|*|
    zbx_start_pollers_note
            В системах с большим количеством 
                возможно образование очереди элементов данных, ожидающих обновления после потери и
                восстановления связи одновременно с большим количеством , например, при временном отключении канала связи к
                серверу мониторинга. Для такой системы следует увеличить значение переменной.
                Подобрать оптимальное значение можно путем итерационного постепенного увеличения
                значения и проверкой стабильности работы системы. 
            Присвоение чрезмерно большого значения на слабых аппаратных конфигурациях может
                привести к критическому падению производительности системы.
|*|*|*|
    server_install_step22
                        Сгенерируйте сертификат для входа в веб-интерфейс:
                        domain=127.0.0.1;
mkdir -p env/nginx/certs;
openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout env/nginx/certs/nginx.key -out env/nginx/certs/nginx.crt -subj "/C=RU/CN=$domain/O=USSC"Где в значении переменной  нужно указать IP-адрес сервера вместо значения
                                127.0.0.1.
                        Если в вашей организации есть удостоверяющий центр сертификатов, вы можете
                            сгенерировать сертификат с его помощью. При этом необходимо задать значения
                            полей CN=IP-адрес сервера и O=USSC,
                            остальные настройки выполняются по усмотрению организации.
|*|*|*|
                        Войдите в режим редактирования файла pg_hba.conf с
                            помощью команды:
                            vi /var/lib/jatoba/[jatoba_version]/data/pg_hba.conf
                            В этой команде jatoba_version — первая цифра в
                                версии Jatoba.
                        Для Jatoba версии 4.5 выполните команду:
                            vi /var/lib/jatoba/4/data/pg_hba.conf
                                При использовании двух томов замените
                                    директорию файла на /storage/base.
|*|*|*|
    В таблице указаны поддерживаемые версии компонентов решения для  v. 1.6.0.Совместимость компонентов решения для Компонент решенияВерсия ПОИсточник данных об DATAPK v. 1.19*, включая сертифицированную 1.19.0.2-fstec*; 1.18; 1.17; 1.16Cервер агентовагентовудаленного мониторинга v. 1.3*; 1.2; 1.1Операционная системаРЕД ОС v. 7.3*; 7.2CentOS v. 8.4Astra Linux Special Edition (Смоленск) v. 1.7; 1.6СУБДJatoba v. 4.5*; 1.14PostgreSQL v. 14ВиртуализацияDocker v. 20Где * — рекомендованная версия, обеспечивающая весь доступный функционал и стабильность работы.
|*|*|*|
                        Измените пароль пользователя postgres в базе
                            данных:
                            ALTER USER postgres WITH PASSWORD '[пароль]';
|*|*|*|
                        Перейдите в режим редактирования файла : 
                            vi /var/lib/jatoba/[версия jatoba]/data/postgresql.conf
                            В этой команде [версия jatoba] — первая цифра в
                                версии Jatoba.
                        Для Jatoba версии 4.5 выполните
                            команду:vi /var/lib/jatoba/4/data/postgresql.conf
                            При использовании двух томов замените директорию
                                файла на /storage/base.
|*|*|*|
                Отредактируйте файл postgresql.conf. Для этого: 
                        перейдите в режим редактирования файла postgresql.conf:
                        vi /var/lib/jatoba/1/data/postgresql.conf
                        измените значение переменной listen_addresses в разделе «CONNECTIONS AND AUTHENTICATION», чтобы оно соответствовало представленному ниже: 
                        listen_addresses = '127.0.0.1,172.17.77.1'Где127.0.0.1 — локальный IP-адрес сервера ;172.17.77.1 — новый IP-адрес подсети docker0.
                        перезапустите СУБД для применения настроек:
                        systemctl restart jatoba-1*
|*|*|*|
    Веб-интерфейс  недоступен, в логах содержится ошибка одного из следующих видов: «**** PostgreSQL server is not available. Waiting 5 seconds...»;«cannot load certificate key "/etc/ssl/nginx/nginx.key": .... SSL: error:0200100D:system library:fopen:Permission denied:fopen('/etc/ssl/nginx/nginx.key','r')»;«please increase CacheSize configuration parameter».В качестве причин недоступности веб-интерфейса  рассмотрены следующие:Опечатки в значениях IP-адресов в в файле pg_hba.conf.Опечатки в значении порта в файле postgresql.conf.Неверные учетные данные для подключения к БД в конфигурационном файле
                    .db.env.Некорректная инициализация контейнеров docker. не до конца инициализировался после запуска
                    работы контейнеров.Недоступность сервера.Проблема с загрузкой ключа сертификата.Переполнение кэша из-за разового скачка нагрузки.Запуск службы docker после службы СУБД.Причина 1Опечатки в значениях IP-адресов в в файле pg_hba.conf.Способ устраненияПерейдите в режим редактирования файла pg_hba.conf: vi /var/lib/jatoba/[jatoba_version]/data/pg_hba.confВ этой команде
                                jatoba_version — первая цифра версии Jatoba.
                        При использовании Jatoba 4.5 выполните
                            команду:vi /var/lib/jatoba/4/data/pg_hba.confПроверьте и при необходимости исправьте IP-адрес.Причина 2Опечатки в значении порта в файле postgresql.conf.Способ устраненияПерейдите в режим редактирования файла postgresql.conf:vi /var/lib/jatoba/[jatoba_version]/data/postgresql.conf
                        В этой команде jatoba_version — первая цифра версии
                            Jatoba.
                        При использовании Jatoba 4.5 выполните
                            команду:vi /var/lib/jatoba/4/data/postgresql.confПроверьте и при необходимости исправьте значение порта.Причина 3Неверные учетные данные для подключения к БД в конфигурационном файле .db.env.Способ устраненияПерейдите в режим редактирования файла .db.env:vi env/.db.envПроверьте, что учетные данные в файле .db.env совпадают с учетными данными для подключения. При необходимости исправьте данные.Причина 4Некорректная инициализация контейнеров.Способ устраненияПерейдите в режим командной строки операционной системы, на которой установлен .Перейдите в рабочую директорию  и просмотрите состояние docker-контейнеров (по умолчанию путь к рабочей директории  — /opt/itm-k). Для этого выполните команды:
                                cd [путь к рабочей директории ] docker ps                     Если какие-либо контейнеры не запущены или имеют статус Restarting, остановите работу контейнеров без удаления данных следующей командой:docker-compose downДождитесь остановки работы всех контейнеров.Проверьте и при необходимости откорректируйте файлы конфигурации из папки env и файл .Дождитесь запуска работы всех контейнеров (3-5 минут). При запуске ошибок или предупреждений быть не должно.Причина 5 не до конца инициализировался после запуска работы контейнеров.Способ устраненияПодождите 3-5 минут после запуска контейнеров.При повторяющихся ошибках перейдите в рабочий каталог и выполните команду:docker psПричина 6Сервер недоступен.Способ устраненияПосмотрите логи контейнеров сервера и веб-интерфейса с помощью команды:docker logs zabbix-frontВ логах есть ошибка «**** PostgreSQL server is not available. Waiting 5 seconds...».Посмотрите подсеть docker с помощью команды:ip ad | grep dockerПроверьте, что в файле env/.db.env значение переменной DB_SERVER_HOST совпадает с подсетью docker. Если подсети не совпадают, измените значение переменной DB_SERVER_HOST на подсеть docker.Запустите работу контейнеров командой:docker-compose up -dДождитесь запуска работы всех контейнеров (3-5 минут). При запуске ошибок или предупреждений быть не должно.Причина 7Проблема с загрузкой ключа сертификата. В логах zabbix-front содержится ошибка вида: «cannot load certificate key "/etc/ssl/nginx/nginx.key": .... SSL: error:0200100D:system library:fopen:Permission denied:fopen('/etc/ssl/nginx/nginx.key','r')».Способ устраненияИзмените права на ключ сертификата:chmod 644 env/nginx/certs/nginx.keyПричина 8Переполнение кэша из-за разового скачка нагрузки. В логах zabbix-server содержится ошибка вида:
                    «out of memory (requested 24 |*|*|*|bytes) please increase CacheSize configuration
                    parameter». Также в логах могут содержаться ошибки вида
                    «/usr/sbin/zabbix_server: poller #14 [got 33 values in 0.001236 sec, getting
                    values]» или «/usr/sbin/zabbix_server: unreachable poller #3 [got 1 values in
                    10.006150 sec, getting values]».Способ устраненияУвеличьте размер кэша. Для этого:Перейдите в режим командной строки операционной системы, на которой установлен .Перейдите в директорию с конфигурационными env-файлами:cd /opt/itm-k/envОтредактируйте переменную . Для этого:
                                Перейдите в режим редактирования файла
                                        .srv.env:
                                    vi .srv.env
                                Раскомментируйте переменную ,
                                    убрав символ «#» в начале строки. 
                                Увеличьте значение переменной . 
                                Разрешенный диапазон значений  — 128K-8G. Оптимальное значение переменной зависит от
                                    нагрузки сервера.
                                Если в логах есть запись вида «/usr/sbin/zabbix_server: poller
                                    #»: 
                                        Раскомментируйте переменную , убрав символ «#» в
                                            начале строки.
                                        Увеличьте значение переменной .
                                    Увеличение значения переменной необходимо для обработки тех
                                        данных, которые могли прийти на сервер с , пока  был недоступен.
                                Если в логах есть запись вида «/usr/sbin/zabbix_server:
                                    unreachable poller #»:
                                        Раскомментируйте переменную , убрав
                                            символ «#» в начале строки.
                                        Увеличьте значение переменной .
                                Увеличение значения переменной необходимо для обработки тех
                                    данных, которые могли прийти на сервер с , пока
                                         был
                                    недоступен.
                            Дождитесь запуска работы всех контейнеров (3-5 минут). Убедитесь, что контейнер zabbix-server находится в состоянии up. Для этого просмотрите состояние контейнеров:docker psПросмотрите логи контейнера zabbix-server: docker logs zabbix-server --tail [количество логов, которое необходимо показать]Если в логах контейнера zabbix-server есть сообщение «please increase CacheSize configuration parameter», снова увеличьте значение переменной . Отсутствие сообщения говорит о корректном значении . Причина 9Запуск службы docker после службы СУБД.Способ устраненияУбедитесь, что причина проблемы в запуске службы docker после службы СУБД. На это указывают следующие признаки: 
                                При проверке статуса службы СУБД командой systemctl
                                        status jatoba-* выясняется, что служба не запущена.
                                Появляется сообщение «СООБЩЕНИЕ: не удалось привязаться к
                                    адресу IPv4 "172.16.239.1": Cannot assign requested address
                                    ПРЕДУПРЕЖДЕНИЕ: не удалось создать принимающий сокет для
                                    "172.16.239.1"».
                            При запуске команды lsof -i -P -n в выводе нет сокета для 172.16.239.1. Настройте запуск службы СУБД после службы docker. Для этого:Перейдите в режим редактирования службы СУБД:systemctl edit jatoba-*.serviceДобавьте блок [Unit]:[Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.serviceЕсли база данных хранится на отдельном томе, добавьте после блока [Unit] блок [Service]:[Service]
Environment=PGDATA=/storage/baseГде /storage/base — путь к базе данных, который был настроен на шаге  раздела .Для применения изменений в настройках службы СУБД выполните команду:systemctl daemon-reload
                        Проверьте состояние службы Jatoba:
                            systemctl status jatoba-*
|*|*|*|
    В соответствии политикой антивирусной защиты предприятия (Политика АВЗ) может потребоваться установка программного обеспечения антивирусной защиты (ПО АВЗ).ПО АВЗ, устанавливаемое на серверы , ,  следует настраивать с учетом следующих рекомендаций:Ограничьте использование оперативной памяти во время выполнения задач антивирусной проверки (на минимальном уровне в соответствии с рекомендациями разработчика ПО АВЗ).Включите режим низкого приоритета процессов АВЗ по отношению другим программам.Отключите участие ПО АВЗ в сервисах типа Security Network.Отключите задачи поведенческого анализа системы в постоянном режиме работы.Включите другие режимы оптимизации производительности, предусмотренные разработчиком ПО АВЗ (например, исключение повторных проверок проверенных и неизмененных файлов и т.п.).Установите расписание для обновлении баз и модулей ПО АВЗ в часы наименьшей нагрузки.Проводите полное антивирусное сканирование системы под контролем администратора системы с
                    периодичностью в соответствии с Политикой АВЗ предприятия в часы наименьшей
                    нагрузки. Первое полное сканирование следует выполнить сразу после завершения
                    установки системы. При выполнении первого полного сканирования измерьте влияние
                    ПО АВЗ на систему по показателям производительности защищаемой системы. В случае
                    существенного влияния ПО АВЗ на защищаемую систему (более 10% по показателю
                    загрузки процессора и заметном снижении производительности в интерфейсе),
                    выполняйте полное антивирусное сканирование системы в периоды технического
                    обслуживания.
|*|*|*|
    Для обновления сервера  с версии 1.4.0.0 или 1.5.0.0 до версии
                1.6.0.0:
                Перейдите в рабочую директорию : 
                    cd /opt/datapkitm
                При обновлении с версии 1.4.0.0 выполните настройку iptables. Для этого:
                        Если вы используете ОС Centos, установите пакет
                            iptables-services:
                            yum install iptables-services
                        Если вы не вносили дополнительные изменения в правила iptables (сверх
                            рекомендованных при установке), данный пункт можно пропустить. Если
                            изменения были, нужно перенести их в файл iptables. Для
                            этого:
                                Сохраните в файл правила iptables, примененные в системе. Для
                                    этого выполните
                                    команду:iptables-save > iptables.bkpВ
                                    результате все правила будут сохранены в файл
                                        iptables.bkp в текущей директории.
                                Найдите добавленные вами правила и перенесите их из файла
                                        iptables.bkp в файл
                                        iptables из комплекта поставки. Учитывайте,
                                    что нестандартные правила должны добавляться в соответствующую
                                    цепочку iptables и находиться в соответствующей позиции.
                                            Пример: Если ранее было добавлено
                                        нестандартное правило -A INPUT -p tcp -m tcp --dport
                                            25 -j ACCEPT, открывающее порт для пересылки
                                        сообщений по протоколу SMTP, то такое правило должно
                                        находиться между строчками -A INPUT -m state --state
                                            RELATED,ESTABLISHED -j ACCEPT и -A
                                            INPUT -p tcp -j REJECT --reject-with
                                        tcp-reset.
                        Замените файл /etc/sysconfig/iptables на файл
                                iptables из комплекта поставки:
                            mv iptables /etc/sysconfig/
                        Отредактируйте файл iptables: 
                                Откройте файл для редактирования с помощью
                                    команды:vi /etc/sysconfig/iptables
                                Закройте доступ из неиспользуемых подсетей, применяемых в
                                    docker-контейнерах других компонентов. Для этого закомментируйте
                                    строки -A INPUT -s 172.15.0.0/24 -j ACCEPT
                                    (номер 15) и -A INPUT -s 172.16.240.0/24 -j
                                        ACCEPT (номер 21).Включить отображение
                                        номеров строк в файле можно с помощью следующих действий:
                                            Нажмите клавишу «Esc», чтобы перейти в командный
                                                режим. 
                                            Введите :set number или
                                                  :set nu и нажмите «Enter».
                                            Нажмите клавишу «i», чтобы перевести редактор в
                                                режим ввода текста.
                                            После закрытия файла нумерация строк отключится
                                                автоматически. Чтобы отключить абсолютные номера
                                                строк на время редактирования файла, перейдите в
                                                командный режим и выполните команду :set
                                                  nonumber или :set
                                                nonu.
                                Если требуется мониторинг сервера с помощью  или по
                                    протоколу SNMP, раскомментируйте строки #-A INPUT -p tcp
                                        -m tcp --dport 10050 -j ACCEPT (номер 51) и
                                        #-A INPUT -p udp -m udp --dport 161 -j
                                        ACCEPT (номер 48) соответственно.
            |*|*|*|                    Сохраните файл и выйдите из режима
                                    редактирования::wq
                        Проверьте владельца файла и права доступа командой: 
                        ls -l /etc/sysconfig/iptablesВладелец и права
                            должны совпадать с указанными на скриншоте: 
                                Владелец и права файла iptables
                            В противном случае выполните команду:
                            chown root:root /etc/sysconfig/iptables && chmod 600 /etc/sysconfig/iptables
                            Проверьте, что владелец и права теперь соответствуют указанным на
                            скриншоте. 
                        Чтобы применить новые правила межсетевого экрана, перезапустите службы
                            iptables и docker, выполнив команды:
                            systemctl restart iptables.service
systemctl restart docker.service
            Настройте запуск службы СУБД после службы docker. Для этого:Перейдите в режим редактирования службы СУБД:systemctl edit jatoba-*.serviceЕсли файл не пуст, перейдите к пункту .Добавьте блок [Unit]:[Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.serviceЕсли база данных хранится на отдельном томе, добавьте после блока [Unit] блок [Service]:[Service]
Environment=PGDATA=/storage/baseГде /storage/base — путь к базе данных, который был настроен на шаге 
        раздела 
        .Для применения изменений в настройках службы СУБД выполните команду:systemctl daemon-reload
                Проверьте состояние службы Jatoba:
                    systemctl status jatoba
                Измените настройки синхронизации с , если ранее они выполнялись для  предыдущей
                    версии:
                        Перейдите в веб-интерфейс . 
                        Перейдите на страницу  → .
                        Нажмите на имя роли «Sync-itm-m role».
                        Откроется страница редактирования роли.
                        В выпадающем меню «Тип пользователя» измените значение на
                            «Супер-администратор».
                        В разделе «Доступ к Веб элементам» → «Настройка» активируйте чекбокс
                            «Услуги».
                        В разделе «Доступ к API» → «Методы API» добавьте в список разрешений
                            метод *.get и удалите другие методы.
                                Настройка списка разрешений
                        Нажмите на кнопку «Обновить» для сохранения изменений.
                Установите агент версии 2 согласно инструкции  (за исключением п. , так как межсетевой экран был настроен ранее в п.  текущей инструкции).
                В файле конфигурации агента /etc/zabbix/zabbix_agent2.conf
                    установите параметр =172.16.239.0/24
                    (адрес подсети контейнеров ).
                Измените настройки мониторинга сервера, на котором установлен . Для этого: 
                        Перейдите в веб-интерфейс .  
                        Перейдите на страницу  → .
                        Найдите объект мониторинга — сервер , в столбце «интерфейс» у него будет
                            указано «zabbix-agent: 10050».
                                Cервер  в списке объектов мониторинга
                        Нажмите на имя объекта мониторинга, чтобы перейти к его
                            настройкам.
                        Измените настройки интерфейса объекта мониторинга:
                                Введите в поле «IP адрес» значение 172.17.0.1
                                    (адрес сервера в подсети docker).
                                Введите в поле «DNS» значение
                                        host.docker.internal.
                                Изменение настроек интерфейса 
                        Нажмите на кнопку «Обновить» для сохранения настроек . 
                        Убедитесь, что  стал
                            доступен. 
            Если обновленный сервер мониторинга  был подключен к серверу , то  не обнаружит, что версия сервера мониторинга изменилась, и продолжит делать
            запросы, соответствующие старой версии сервера мониторинга. Для корректной работы
            необходимо на  удалить сервер мониторинга  и добавить его заново. При этом все данные, связанные с сервером
            мониторинга, будут удалены и появятся только при повторном добавлении этого
            сервера.
|*|*|*|
            Проверьте наличие пакетов из списка ниже с помощью приведенных команд (и в случае
                отсутствия какого-либо пакета установите его оффлайн, скачав установочный файл в
                локальную ОС и передав его на ОС, в которой будет выполняться установка ПК
                    ):
                rpm -qa | grep gdal-libs
rpm -qa | grep geos
rpm -qa | grep hdf5
rpm -qa | grep libicu-devel
rpm -qa | grep proj
rpm -qa | grep perl
rpm -qa | grep libxslt
rpm -qa | grep xerces-c
rpm -qa | grep openssl-libs
rpm -qa | grep libcurl 
rpm -qa | grep python2-libs
rpm -qa | grep python3-libs
rpm -qa | grep json-c
|*|*|*|
    Убедитесь в корректности настроек в файле postgresql.conf. Для этого: Откройте файл для редактирования: vi /var/lib/jatoba/[jatoba_version]/data/postgresql.confВ этой команде jatoba_version — первая цифра версии Jatoba.При использовании Jatoba 4.5 выполните команду:vi /var/lib/jatoba/4/data/postgresql.confУбедитесь, что в разделе # WRITE-AHEAD LOG переменные имеют следующие значения, в ином случае измените их:wal_level = replica
max_wal_size = 1GB
min_wal_size = 80MB
archive_mode = on
archive_command = 'test ! -f /var/lib/jatoba/[jatoba_version]/backups/%f && cp %p/var/lib/jatoba/[jatoba_version]/backups/%f 'Параметр wal_level со значением replica определяет, что в журнал записываются данные, необходимые для поддержки архивирования WAL (Write ahead log — журнал предзаписи) и репликации. Параметры min и max_wal_size регулируют размер WAL-файла. Включенный параметр archive_mode передает полные сегменты WAL в хранилище архива командой archive_command. Параметр archive_command содержит команду для архивации завершенного сегмента WAL. Данная команда кроме копирования осуществляет контроль наличия файла — если файл находится в директории для хранения резервных копий, то команда копирования не выполнится и существующий файл не будет перезаписан. Убедитесь, что указанные в команде пути для создания резервной копии WAL-файлов существуют — они могут отличаться в зависимости от версии СУБД.jatoba_version — первая цифра версии Jatoba.Сохраните изменения и закройте файл::wqУбедитесь, что в файле  есть строка с правами replication для пользователя postgres. При необходимости раскомментируйте строку и измените метод аутентификации с ident на md5:host replication postgres 127.0.0.1/32 md5Для применения изменений в файлах postgresql.conf и  перезапустите службу СУБД:systemctl restart jatoba-*Создайте резервную копию файлов СУБД Jatoba от имени пользователя баз данных с правами супер-пользователя:pg_basebackup -p <port> -h <host> -U <db_user> -D <dir> -Ft -z -Xf -P -vГде:port — порт подключения;host — имя или IP-адрес компьютера, на котором работает сервер;db_user — имя пользователя;dir — директория, где будет хранится копия файлов из каталога «data» СУБД Jatoba.Подробную информацию о параметрах pg_basebackup можно узнать с помощью команды: pg_basebackup --helpКоманда для создания резервной копии файлов БД с портом 10265, IP-адресом сервера 127.0.0.1 и пользователем postgres в директории /opt/backupdb будет выглядеть следующим образом:pg_basebackup -p 10265 -h 127.0.0.1 -U postgres -D /opt/backupdb -Ft -z -Xf -P -vГде ключи, используемые в команде, означают:-p — порт для подключения;-h — имя или IP-адрес компьютера, на котором работает сервер;-U — пользователь, под которым осуществляется подключение к базе данных;-D — целевая директория для записи данных;-Ft — упаковка резервной копии в .tar-архив;-z — упаковка резервной копии в архив формата .gz;-Xf — включает все необходимые файлы журналов предзаписи (файлы WAL) в резервную копию. Файлы журнала предзаписи собираются в конце процесса копирования;-P — отчет о прогрессе;-v — информация о статусе резервного копирования.Убедитесь, что все содержимое директории /var/lib/jatoba/[jatoba_version]/data, где jatoba_version — первая цифра версии Jatoba, принадлежит пользователю postgres: chown postgres:postgres -R /var/lib/jatoba/[jatoba_version]/dataВведите пароль пользователя postgres для доступа к базе данных. После успешного ввода начнется создание резервной копии файлов СУБД. Каталог для резервных копий файлов будет создан автоматически. 
|*|*|*|
    Способ 2: развертывание резервной копии с текстовым форматомСпособ подходит для резервных копий, которые были созданы с помощью команды pg_dump без использования дополнительных ключей.Создайте базу, в которую будут скопированы данные из резервной копии:Войдите в интерактивный терминал для работы с postgresql под пользователем postgres:sudo -u postgres psqlСоздайте базу данных для восстановления данных из резервной копии, в качестве распорядителя которой указан пользователь db_user:CREATE DATABASE [db_name] WITH OWNER '[db_user]';В этой команде:db_name — наименование базы данных;db_user — имя пользователя.Убедитесь, что база данных [db_name] создана:\lПокиньте терминал:\qВосстановите базу данных Jatoba из файла архива с текстовым форматом, созданного командой pg_dump:psql -h [host] -p [port] -U [db_user] [db_name] < [dir]/[db_archive].dumpВ этой команде:host — имя или IP-адрес компьютера, на котором работает сервер;port — порт подключения;db_user — имя пользователя;db_name — наименование базы данных;dir — директория для сохранения архива базы данных;db_archive — наименование архива базы данных.В качестве пользователя для развертывания рекомендуется указать пользователя с правами супер-администратора. Права на базу будут соответствовать пользователю, от чьего имени база была создана, либо пользователю, который был указан в значении ключа WITH OWNER. Пример: Команда для выгрузки БД datapkitm с пользователем postgres, IP-адресом сервера 127.0.0.1 и портом 10265 в архив с именем datapkitm в директории /opt будет выглядеть следующим образом:psql -h 127.0.0.1 -p 10265 -U postgres datapkitm < /opt/datapkitm.dump Введите пароль пользователя для доступа к базе данных.Результат шага: После успешного ввода пароля начнется создание файла с базой данных.
|*|*|*|
    Действия ниже описаны для случая, когда нужно создать и восстановить резервную копию файлов СУБД на одном и том же сервере. Если нужно создать резервную копию на одном сервере, а восстановить на другом, перенос файлов будет осуществляться между этими серверами, в остальном действия совпадают.Убедитесь, что на сервере для восстановления находится каталог с файлами, полученный в результате работы pg_basebackup. Чтобы исключить запись в базу данных во время восстановления из копии, отключите  командой:docker-compose downЕсли резервная копия находится в архиве .tar.gz, разархивируйте ее:tar -xvzf /opt/backupdb/base.tar.gz -C /opt/backupdb/Для снижения риска ошибок при восстановлении исключите из резервной копии файлы в подкаталоге /opt/backupdb/pg_wal/ и перенесите их в другую директорию: mkdir /opt/tmp_wal_arch
mv /opt/backupdb/pg_wal/archive_status/* /opt/tmp_wal_arch/Содержимое каталогов pg_dynshmem/, pg_notify/, pg_serial/, pg_snapshots/, pg_stat_tmp/ и pg_subtrans/ (но не сами эти каталоги) можно исключить из резервной копии (/opt/backupdb), так как оно будет инициализировано при запуске главного процесса.Для начала операции резервного копирования остановите службу Jatoba:systemctl stop jatoba-*Убедитесь, что на сервере достаточно свободного места для копирования текущего каталога кластера баз данных и всех табличных пространств. Скопируйте весь текущий каталог кластера баз данных и все табличные пространства во временный каталог:mkdir /var/lib/jatoba/[jatoba_version]/old_data/
cp -r /var/lib/jatoba/[jatoba_version]/data/* /var/lib/jatoba/[jatoba_version]/old_data/     В этой команде jatoba_version — первая цифра версии Jatoba.При использовании Jatoba 4.5 выполните команды:mkdir /var/lib/jatoba/4/old_data/
cp -r /var/lib/jatoba/4/data/* /var/lib/jatoba/4/old_data/Удалите все существующие файлы и подкаталоги из каталога кластера /var/lib/jatoba/[jatoba_version]/data и из корневых каталогов табличных пространств:rm -rf /var/lib/jatoba/[jatoba_version]/data/*В этой команде jatoba_version — первая цифра версии Jatoba.Восстановите файлы базы данных из резервной копии файлов:cp -r /opt/backupdb/* /var/lib/jatoba/[jatoba_version]/data/В этой команде jatoba_version — первая цифра версии Jatoba.При использовании Jatoba 4.5 выполните команду:cp -r /opt/backupdb/* /var/lib/jatoba/4/data/Скопируйте незаархивированные файлы с сегментами WAL из каталога с кластером баз данных до восстановления в новый каталог с помощью команды:cp -r /var/lib/jatoba/[jatoba_version]/old_data/pg_wal/0* /var/lib/jatoba/[jatoba_version]/data/pg_wal/В этой команде jatoba_version — первая цифра версии Jatoba.При использовании Jatoba 4.5 выполните команду:cp -r /var/lib/jatoba/4/old_data/pg_wal/0* /var/lib/jatoba/4/data/pg_wal/При возникновении проблем с диском вы можете использовать файлы с сегментами WAL из резервной копии.Для корректного запуска службы Jatoba задайте права доступа к файлам для пользователя, запускающего сервер, с помощью команд:chown -R postgres:postgres /var/lib/jatoba/[jatoba_version]/data
chmod 750 /var/lib/jatoba/[jatoba_version]/data     В этой команде jatoba_version — первая цифра версии Jatoba.При использовании Jatoba 4.5 выполните команду:chown -R postgres:postgres /var/lib/jatoba/4/data
chmod 750 /var/lib/jatoba/4/dataЗапустите службу сервера баз данных :systemctl start jatoba-*Просмотрите логи текущего дня: ls -la var/lib/jatoba/[jatoba_version]/data/logВ этой команде jatoba_version — первая цифра версии Jatoba.Названия файлов логов Jatoba соответствуют дню недели.При использовании Jatoba 4.5 выполните команду:ls -la var/lib/jatoba/4/data/logВ файле логов после перезапуска должно быть сообщение об успешном старте: «система БД готова принимать подключения».Включите  с помощью команд:cd /opt/itm-k
docker-compose up -d
                После проверки работоспособности сервисов удалите директорию
                        /var/lib/jatoba/[jatoba_version]/data/old_data, где
                        jatoba_version — первая цифра версии Jatoba.
            Переместите обратно в каталог с резервной копией либо удалите директорию /opt/tmp_wal_arch/.
|*|*|*|
    Способ 1: развертывание резервной копии с форматом «custom»Способ подходит для резервных копий, которые были созданы с помощью команды pg_dump -Fc и имеют пользовательский формат.Убедитесь, что на сервере для восстановления находится файл архива, полученный в результате работы pg_dump. Восстановите базу данных Jatoba из файла архива, созданного командой
                        pg_dump:psql -U [db_user] -h [host] -p [port] [db_name] < [db_dump_path]В
                        этой команде:
                            db_user — имя пользователя;
                            host — имя или IP-адрес компьютера, на котором работает сервер;
                            port — порт подключения;
                            db_name — наименование базы данных;
                            db_dump_path - путь до резервной копии.
                        Пример: Команда для восстановления БД с пользователем
                                itmm_user, IP-адресом сервера
                                127.0.0.1, портом 10265,
                            наименованием itmm_db и путем для резервной копии
                                /opt/itmm_db_260723.dump будет выглядеть следующим
                            образом:psql -U itmm_user -h 127.0.0.1 -p 10265 itmm_db < /opt/itmm_db_260723.dumpВведите пароль пользователя для доступа к базе данных.После успешного ввода пароля начнется восстановление из файла с выгруженной базой данных.
|*|*|*|
    Создайте архив с резервной копией БД:pg_dump -Fc <db_name> -U <db_user> -h <host> -p <port> -f <dir>/<db_archive>.dumpГде:db_name — наименование базы данных;db_user — имя пользователя;host — имя или IP-адрес компьютера, на котором работает сервер;port — порт подключения;dir — директория для сохранения архива базы данных;db_archive — наименование архива базы данных;-Fc — гибкий формат резервных файлов типа «custom». Команда для выгрузки БД itmk_db с пользователем itmk_user, IP-адресом сервера 127.0.0.1 и портом 10265 в архив с именем itmbackup3010 в директории /opt будет выглядеть следующим образом:pg_dump -Fc itmk_db -U itmk_user -h 127.0.0.1 -p 10265 -f /opt/itmbackup3010.dumpПодробную информацию о параметрах pg_dump можно узнать с помощью команды:pg_dump --helpВведите пароль пользователя для доступа к базе данных. После успешного ввода пароля начнется создание файла с базой данных.
        Если вам необходимо сделать резервные копии нескольких БД, повторите указанные выше
                шаги для каждой базы данных.
|*|*|*|
    Для изменения настроек агента на  Windows 7 версии и новее:
                    Перейдите в директорию, куда был установлен агент. По умолчанию это
                        директория C:\Program Files\Zabbix agent для агента версии
                        1 и C:\Program Files\Zabbix agent 2 для агента версии
                        2.
                    Откройте с помощью текстового редактора файл zabbix_agentd.confдля агента версии 1 или  zabbix_agent2.conf для агента
                        версии 2.
                Измените один или несколько параметров агента.Для изменения или добавления IP-адреса сервера  или :Присвойте переменной  значение IP-адреса сервера  или , в зависимости от вашей иерархии. При необходимости подключения  к нескольким серверам мониторинга, перечислите их IP-адреса через запятую без пробелов.Закомментируйте переменную , чтобы не использовать активный
                                        режим агента.Для изменения порта подключения к серверу мониторинга:Раскомментируйте строку с переменной . Для этого уберите символ «#» в начале строки. Присвойте переменной новое значение.Для изменения имени узла сети:Присвойте переменной  новое значение.Сохраните изменения.
                    Для применения настроек агента перезапустите службу Zabbix Agent для агента
                        версии 1 или Zabbix Agent 2 для агента версии 2:
                            Одновременно нажмите клавиши Win+R.
                            Введите команду services.msc.
                            Найдите в появившемся окне в списке служб Zabbix Agent или Zabbix
                                Agent 2 и выделите строку с ней.
                            Нажмите правой кнопкой мыши на строке со службой Zabbix Agent или
                                Zabbix Agent 2.
                            В контекстном меню выберите «Перезапустить».
                                Подробная настройка объектов
                                        мониторинга в веб-интерфейсе описана в разделе «».
|*|*|*|
    Для установки агента на  под управлением операционной системы Windows 7 версии и новее: 
                    Запустите файл агента версии 1 itm-agent_v.[номер версии
                            агента]-[разрядность ОС]-openssl.msi  или агента версии 2
                            itm-agent2_v.[номер версии агента]-[разрядность
                            ОС]-openssl.msi для  x64. 
                    Появится окно установщика агента. 
    Нажмите «Next».Установите чекбокс «I accept the terms in the License Agreement» и нажмите «Next».Появится окно для настройки данных агента.Запомните значение поля «Hostname», так как указанное там сетевое имя текущего компьютера необходимо будет внести в поле «Имя узла сети» при настройке мониторинга в .Настройте параметры агента. Для этого:В поле «Zabbix server IP/DNS» введите одно из следующих значений:IP-адрес сервера , если
                                    агент будет подключаться напрямую к серверу консолидацииконсолидациимониторинга;IP-адрес сервера , если
                                    агент будет подключаться к серверу консолидацииконсолидациимониторинга
                                    через прокси (сервер агентовагентовудаленного мониторинга).При необходимости подключения  к нескольким серверам мониторинга, перечислите их IP-адреса через запятую без пробелов.
                        В остальных полях оставьте значения по умолчанию.
                    Нажмите «Next».Появится окно выбора компонентов и места для установки агента.
                    Выберите расположение, где будет установлен агент, и нажмите «Next».
                Нажмите «Install» для начала установки.Дождитесь окончания установки.
|*|*|*|
    Для установки агента на  под управлением операционной системы Debian 9 версии и новее:Запустите установку deb-пакета агента::
                            для агента версии 1:
                                dpkg -i agent_deb_[версия Debian]_[разрядность].deb
                            для агента версии 2:
                                dpkg -I zabbix-agent2_[номер версии агента]+[версия Debian]_[разрядность].deb
        Внесите изменения в конфигурационный файл zabbix_agentd.conf. Для этого:
                Измените файл следующим образом:
|*|*|*|
    Для мониторинга функционирования АРМ и серверов с ОС Windows 2000 необходимо установить агента
                    версии 1.8. Для установки агента на Windows 2000:Перейдите в режим командной строки операционной системы, на которой происходит установка агента. Создайте каталог zabbix в директории C:\Program Files:md C:\Program Files\zabbixПерейдите в созданную директорию:cd C:\Program Files\zabbixНастройте параметры агента. Для этого: 
                        Создайте конфигурационный файл с названием
                                zabbix_agentd.conf.
                        Добавьте в него следующие параметры:
                            Server=[IP-адрес сервера ]
Hostname=[имя компьютера]
ListenPort=10050
LogFile=C:\Program Files\zabbix\zabbix_agentd.log
LogFileSize=10
                            Чтобы узнать имя компьютера, введите в командной строке
                                    echo %COMPUTERNAME%.
                        Для компьютера с IP-адресом 192.168.243.93 и
                            именем Win2000 нужно добавить следующие
                            строки:Server=192.168.243.93
Hostname=Win2000
ListenPort=10050
LogFile=C:\Program Files\zabbix\zabbix_agentd.log
LogFileSize=10
                    Поместите установочные файлы версии 1.8 zabbix_agentd.exe, zabbix_get.exe, zabbix_sender.exe в текущий каталог C:\Program Files\zabbix.В командной строке перейдите в текущий каталог: cd C:\Program Files\zabbixУстановите агента как службу Windows: zabbix_agentd.exe --config "C:\Program Files\zabbix\zabbix_agentd.conf" --installЗапустите агента: zabbix_agentd.exe --config "C:\Program Files\zabbix\zabbix_agentd.conf" --startСлужба агента должна появиться в списке служб Windows.
|*|*|*|
    Для установки агента на  под управлением
                    операционной системы CentOS 7 версии и новее или RedOS 7.2:
                    Запустите установку rpm-пакета агента:
                            для агента версии 1:
                                rpm -Uvh itm-agent_v.[номер версии агента].el[номер версии CentOS].x86_64.rpm
                            для агента версии 2:
                                rpm -Uvh zabbix-agent2-[номер версии агента].el[номер версии CentOS].x86_64.rpm
                    Внесите изменения в конфигурационный файл zabbix_agentd.conf для агента версии 1 или zabbix_agent2.conf для агента
                        версии 2. Для этого:
                            Измените файл следующим образом:
                                    Если в иерархии не будет использоваться режим активного
                                        агента, закомментируйте переменную .
|*|*|*|
    Добавлена возможность перемещения графиков на странице 
                        Объекты мониторинга, серверы мониторинга
                                    Добавлена возможность просмотра окон «Свойства сервера
                                        агентов» и «Свойства сервера мониторинга» на страницах , .
                                    Добавлена возможность просмотра окна «Свойства сервера
                                        агентов» при нажатии в любом месте строки конкретного
                                             на странице 
                        , , , , , , , 
|*|*|*|
    centos_increase_root_dir
                Увеличьте размер корневого раздела. Для этого:
                        В окне «Разметка вручную» выберите корневой раздел
                            /.
                                Разметка разделов вручную
                         В поле «Требуемый размер» введите значение «100%» для расширения
                            дискового пространства.
                        Установите курсор на любой другой раздел.
                        значения полей обновятся, и инсталляция займет все свободное
                            место.
                        Нажмите на кнопку «Готово».
                        появится окно «Обзор изменений».
                        Убедитесь в корректности произведенных изменений.
                        Нажмите на кнопку «Принять изменения».
|*|*|*|
            При наличии в директории /opt/datapkitm файлов docker-compose.mapping.yaml и base.py отредактируйте файл .env: 
                Откройте файл для редактирования:
                    vi .env
                    Установите следующее значение переменной:
                    COMPOSE_FILE=docker-compose.release.yaml
                    Сохраните файл и выйдите из режима редактирования
                    :wq
|*|*|*|
                        Отмените выбор всех чекбоксов, кроме следующих: 
                            «Группы узлов сети» в разделе «Доступ к Веб элементам» → «Настройка»;
                            «Узлы сети» в разделе «Доступ к Веб элементам» → «Настройка»; 
                                    Чекбоксы «Группы узлов сети» и «Узлы сети»
                            «Активировано» в разделе «Доступ к API». 
                                    Чекбокс «Активировано»
|*|*|*|
        Сгенерируйте env-файл и настройте переменные. Для этого:Назначьте права на выполнение скрипта:chmod +x env_prod_generator.shЗапустите скрипт:./env_prod_generator.shОткроется всплывающее окно для настройки переменных. Окно настройки переменных .env Выполните настройку переменных:Чтобы перейти к настройке блока переменных, нажмите клавишу «Y».
                            Чтобы пропустить блок настроек и перейти к следующему блоку
                                переменных, нажмите клавишу «n». Чтобы изменить переменную, введите новое значение и нажмите клавишу «Enter».Чтобы оставить значение переменной по умолчанию, которое указано в квадратных скобках, нажмите клавишу «Enter».
        В случае установки  и  на один сервер отредактируйте следующие параметры из блока «переменные для ITMM»: порт для подключения к веб-интерфейсу — 8080;SSL порт для подключения к веб-интерфейсу — 8443.Если при запуске контейнеров  указать корректный IP-адрес syslog-сервера спустя некоторое время, то на корректный IP-адрес будут отправлены только те события, которые возникнут после установки нового значения переменной SIEM_SYSLOG_HOST.
        Если IP-адрес подсети контейнеров уже используется в вашей инфраструктуре, его нужно
            изменить. Подробнее см. в разделе   .
    В директории /opt/itm-vm появится файл .env с
                        настроенными переменными и файл .itmm_password_secret_key c
                        ключом для шифрования и дешифрования паролей, хранящихся в базе
                        данных.
                    Для более подробной настройки .env-файла или для правки ранее введенных
                        переменных:
                            Откройте для редактирования файл
                                .env:vi .env
                            Настройте переменные. Рекомендуемые и возможные значения
                                    переменных приведены в разделе .
                            Сохраните изменения и закройте файл::wq
                Скрипт env_prod_generator.sh предназначен только для создания
                    нового файла .env, не для редактирования существующего.
|*|*|*|
            Отредактируйте файл iptables: 
                    Откройте файл для редактирования с помощью команды:
                        vi /etc/sysconfig/iptables
                    Закройте доступ из неиспользуемых подсетей, применяемых в
                        docker-контейнерах других компонентов. Для этого закомментируйте строки
                        -A INPUT -s 172.15.0.0/24 -j ACCEPT (номер 15) и
                        -A INPUT -s 172.16.240.0/24 -j ACCEPT (номер 21).
                        Включить отображение номеров строк в файле можно с помощью следующих
                            действий: 
                                Нажмите клавишу «Esc», чтобы перейти в командный режим. 
                                Введите :set number или :set
                                    nu и нажмите «Enter».
                                Нажмите клавишу «i», чтобы перевести редактор в режим ввода
                                    текста.
                                После закрытия файла нумерация строк отключится автоматически.
                                    Чтобы отключить абсолютные номера строк на время редактирования
                                    файла, перейдите в командный режим и выполните команду
                                    :set nonumber или :set
                                        nonu.
                        Если требуется мониторинг сервера с помощью  или по протоколу , раскомментируйте строки #-A INPUT -p tcp -m tcp --dport
                                10050 -j ACCEPT (номер 51) и #-A INPUT -p udp -m
                                udp --dport 161 -j ACCEPT (номер 48) соответственно.
                    Сохраните файл и выйдите из режима редактирования:
                        :wq
|*|*|*|
            Убедитесь, что значения переменных файла .srv.env соответствуют
                проектному решению для вашей системы. Значение переменных по умолчанию указаны в
                таблице . При
                необходимости изменения переменных выполните следующие шаги:
                    перейдите в режим редактирования файла .srv.env:
                        vi /opt/itm-k/env/.srv.env
                    при необходимости изменения раскомментируйте переменные, убрав символ «#» в
                        начале строки, и отредактируйте их значения; 
|*|*|*|
                        измените настройки ограничений на подключение локальных и удаленных пользователей к базам данных. 
                            Для этого добавьте в раздел #IPv4 local connections строки в следующем формате: 
                            host all [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]
host all [имя пользователя БД] [IP-адрес подсети docker0/маска в формате CIDR] [метод аутентификации] Где:
                                all — значение, позволяющее подключиться к
                                    нескольким БД;Если необходимо не указывать значение
                                            all, перечислите все имена баз данных
                                        через запятую без использования пробела —
                                            itmm, user_service,
                                            notifier_service и
                                            event_sender.
                                [имя пользователя БД] — ранее созданный пользователь БД,
                                    которому разрешен доступ к БД;
                                [IP-адрес docker-сети/маска в формате CIDR] — IP-адрес для
                                    удаленного подключения, зависит от переменной  в файле
                                        /opt/itm-vm/.env;
                                [IP-адрес подсети docker0/маска в формате CIDR] — IP-адрес
                                    подсети docker0 для удаленного подключения, по умолчанию имеет
                                    значение 172.17.0.1/24.
                            Отступ между колонками в одной строке выполняется клавишей
                                «Tab». Для применения настроек к базам данных itmm, user_service, notifier_service, event_sender, пользователю БД itmm_user, IP-адресу подсети контейнера сервера визуализации и управления по умолчанию 172.15.0.1/24, IP-адресу подсети docker0 по умолчанию 172.17.0.1/24 и методу аутентификации md5 строки будут выглядеть следующим образом:host itmm,user_service,notifier_service,event_sender itmm_user 172.15.0.1/24 md5
                            host all itmm_user 172.17.0.1/24 md5 Содержимое файла pg_hba.conf 
|*|*|*|
                Выполните более детальную настройку SNMP агента. Для этого: 
                        Нажмите правой кнопкой мыши на «Служба SNMP» и выберите «Свойства».
                        Откроется окно «Служба SNMP».
                        В открывшемся окне откройте вкладку «Безопасность».
                        Нажмите на кнопку «Добавить» в разделе «Приемлемые имена сообществ».
                        Откроется окно «Настройка службы SNMP».
                        В открывшемся окне: 
                            выберите права сообщества;Рекомендуемое значение — READ ONLY.
                            введите имя сообщества;
                            нажмите на кнопку «Добавить».
                                Настройка службы SNMP
                        Нажмите на кнопку «ОК» в окне «Служба SNMP».
|*|*|*|
            Отредактируйте файл iptables: 
                    Откройте файл для редактирования с помощью команды:
                        vi /etc/sysconfig/iptables
                    Закройте доступ из неиспользуемых подсетей, применяемых в
                        docker-контейнерах других компонентов. Для этого закомментируйте строки
                        -A INPUT -s 172.16.239.0/24 -j ACCEPT (номер 18) и
                        -A INPUT -s 172.16.240.0/24 -j ACCEPT (номер 21).
                        Включить отображение номеров строк в файле можно
                            с помощью следующих действий: 
                                Нажмите клавишу «Esc», чтобы перейти в командный режим. 
                                Введите :set number или :set
                                    nu и нажмите «Enter».
                                Нажмите клавишу «i», чтобы перевести редактор в режим ввода
                                    текста.
                                После закрытия файла нумерация строк отключится автоматически.
                                    Чтобы отключить абсолютные номера строк на время редактирования
                                    файла, перейдите в командный режим и выполните команду
                                    :set nonumber или :set
                                        nonu.
                        При установке  и
                                 на одну
                            машину откройте дополнительные порты web-интерфейса. Для этого
                            раскомментируйте строки #-A INPUT -p tcp -m tcp --dport 8080 -j
                                ACCEPT (номер 38) и #-A INPUT -p tcp -m tcp --dport
                                8443 -j ACCEPT (номер 39).
                    Закомментируйте строки -A INPUT -p tcp -m tcp --dport 10051 -j
                        ACCEPT (номер 42) и -A INPUT -p udp -m udp --dport 162
                            -j ACCEPT (номер 45) (порты для приема zabbix-соединений и 
                        traps).
                        Если требуется мониторинг сервера с помощью  или по протоколу , раскомментируйте строки #-A INPUT -p tcp -m tcp --dport
                                10050 -j ACCEPT (номер 51) и #-A INPUT -p udp -m
                                udp --dport 161 -j ACCEPT (номер 48) соответственно.
                    Сохраните файл и выйдите из режима редактирования:
                        :wq
|*|*|*|
                Измените настройки OpenLDAP, если ранее проводили настройку  в операционной системе сервера . Для этого: 
                        Откройте файл с настройками OpenLDAP:
                            vi /etc/openldap/ldap.conf
                        Удалите в конце файла строку TLS_REQCERT never,
                            которая отключает проверку сертификатов.
                        Сохраните изменения и закройте файл:
                            :wq
|*|*|*|
    centos_del_home
                Если в открывшемся окне «Разметка вручную» нет раздела /home/,
                    пропустите этот шаг. Если в этом окне есть раздел /home/,
                    удалите его. Для этого:
                        Выделите раздел /home/. 
                        Нажмите на кнопку «-» в нижней части области выбора раздела.
                        Подтвердите удаление раздела /home/ в появившемся
                            окне.
                    Раздел /home/ появляется при автоматической разметке
                        дисков с размером более 50 ГБ. 
|*|*|*|
            Если вы не вносили дополнительные изменения в правила iptables (сверх рекомендованных при установке), данный пункт можно пропустить. Если изменения были, нужно перенести их в файл iptables. Для этого:Сохраните в файл правила iptables, примененные в системе. Для этого выполните команду:iptables-save > iptables.bkpВсе правила будут сохранены в файл iptables.bkp в текущей директории.
                Найдите добавленные вами правила и перенесите их из файла
                    iptables.bkp в файл iptables из
                    комплекта поставки. Учитывайте, что нестандартные правила должны добавляться
                    в соответствующую цепочку iptables и находиться в соответствующей позиции. 
                Если ранее было добавлено нестандартное правило -A INPUT -p tcp -m
                                tcp --dport 25 -j ACCEPT, открывающее порт для пересылки
                            сообщений по протоколу , то такое правило должно находиться между строчками -A INPUT
                                -m state --state RELATED,ESTABLISHED -j ACCEPT и -A
                                INPUT -p tcp -j REJECT --reject-with tcp-reset.
|*|*|*|
            Отредактируйте файл iptables: 
                        Откройте файл для редактирования с помощью команды:
                            vi /etc/sysconfig/iptables
                        Закройте доступ из неиспользуемых подсетей, применяемых в
                            docker-контейнерах других компонентов. Для этого закомментируйте строки
                                -A INPUT -s 172.15.0.0/24 -j ACCEPT (номер 15) и
                                -A INPUT -s 172.16.239.0/24 -j ACCEPT (номер
                            18).
                            Включить отображение номеров строк в файле можно с помощью
                                следующих действий: 
                                    Нажмите клавишу «Esc», чтобы перейти в командный режим. 
                                    Введите :set number или :set
                                            nu и нажмите «Enter».
                                    Нажмите клавишу «i», чтобы перевести редактор в режим ввода
                                        текста.
                                    После закрытия файла нумерация строк отключится
                                        автоматически. Чтобы отключить абсолютные номера строк на
                                        время редактирования файла, перейдите в командный режим и
                                        выполните команду :set nonumber или
                                            :set nonu.
                Закройте порты web-интерфейса. Для этого закомментируйте строки -A
                    INPUT -p tcp -m tcp --dport 80 -j ACCEPT (номер 34) и
                    -A INPUT -p tcp -m tcp --dport 443 -j ACCEPT (номер
                    35). 
                        Если требуется мониторинг сервера с помощью  или по протоколу , раскомментируйте строки #-A INPUT -p tcp -m tcp --dport
                                10050 -j ACCEPT (номер 51) и #-A INPUT -p udp -m
                                udp --dport 161 -j ACCEPT (номер 48) соответственно.
                        Сохраните файл и выйдите из режима редактирования:
                            :wq
|*|*|*|
            Создайте env-файлы и настройте значения переменных. Для этого:
                Назначьте скрипту env_generator.sh полные права доступа:
                chmod +x env_generator.sh
                Запустите скрипт:
                ./env_generator.sh
                Откроется всплывающее окно для настройки переменных.
                Выполните настройку переменных:
                        Чтобы изменить переменную, введите новое значение и нажмите клавишу
                                    «Enter».
                        Чтобы оставить значение переменной по умолчанию, которое указано в
                                    квадратных скобках, нажмите клавишу «Enter».
                        Чтобы ответить на вопрос «да», нажмите клавишу «y».
                        Чтобы ответить на вопрос «нет», нажмите клавишу «n».
                                    Если IP-адрес подсети контейнеров уже используется в вашей
                                        инфраструктуре, его нужно изменить. Подробнее см. в разделе
                                        .
                                    При установке  и
                                             на один сервер
                                        для  рекомендуется
                                        указать порт для подключения к веб-интерфейсу 8080 и SSL
                                        порт для подключения к веб-интерфейсу 8443.
                В директории /opt/itm-vm появятся файлы
                                .env и .itmm_password_secret_key с
                            настроенными переменными.
                Для более подробной настройки переменных .env-файла или для правки ранее введенных переменных:
                Откройте для редактирования файл .env:vi .envНастройте переменные.Рекомендуемые и возможные значения переменных приведены в разделе .Сохраните изменения и закройте файл::wq
|*|*|*|
            Создайте env-файлы и настройте значения переменных. Для этого:
                        Перейдите в директорию /opt/itm-k:
                            cd /opt/itm-k
                    Назначьте скрипту env_generator.sh полные права доступа:chmod +x env_generator.shЗапустите скрипт:./env_generator.shОткроется всплывающее окно для настройки переменных.Выполните настройку переменных:Чтобы изменить переменную, введите новое значение и нажмите клавишу «Enter».Чтобы оставить значение переменной по умолчанию, которое указано в квадратных скобках, нажмите
                                    клавишу «Enter».
                Чтобы ответить на вопрос «да», нажмите клавишу «y».
                Чтобы ответить на вопрос «нет», нажмите клавишу «n».
                Если IP-адрес подсети контейнеров уже используется в вашей
                    инфраструктуре, его нужно изменить. Подробнее см. в разделе 
                    .
                В директории /opt/itm-k появится файл
                                .env и каталог env с настроенными
                            переменными.
                    Для более подробной настройки переменных .env-файла или для правки ранее
                        введенных переменных:
                            Откройте для редактирования файл
                                .env:vi .env
                            Настройте переменные.Рекомендуемые и возможные значения
                                переменных приведены в разделе .
                            Сохраните изменения и закройте файл::wq
                    Скрипт env_generator.sh предназначен только для создания
                        новых env-файлов, не для редактирования существующих.
|*|*|*|
        Установите СУБД Jatoba по инструкции от производителя.Перейдите в режим командной строки операционной системы, на которой будет установлен сервер агентов. Создайте директорию для установки :mkdir /opt/itm-aСкопируйте следующие файлы в директорию opt/itm-a:env_generator.sh;docker-compose.release.yaml;datapk_itm-a_[номер версии].tar.gz.Перейдите в директорию /opt/itm-a/: cd /opt/itm-a/Загрузите образы в операционную систему:docker load -i datapk_itm-a_[номер версии].tar.gzИзмените пароль пользователя postgres в базе данных:ALTER USER postgres WITH PASSWORD '[пароль]'; При настройке парольной политики средствами СУБД Jatoba после перезагрузки сервера СУБД или перезапуска службы jatoba-* необходимо повторно инициализировать модуль парольной политики «securityprofile» из-под учетной записи супер-администратора (postgres). В противном случае пользователи с правами ниже супер-администратора не смогут пройти авторизацию. Подробнее см. в разделе  и в документации Jatoba.Создайте пользователя с именем itma_user и необходимым паролем:CREATE USER itma_user WITH PASSWORD '[пароль служебного пользователя]';Создайте базу данных itma_db, в качестве владельца которой указан пользователь itma_user:CREATE DATABASE itma_db WITH OWNER 'itma_user' ENCODING 'UTF8' LC_COLLATE = 'ru_RU.UTF-8' LC_CTYPE = 'ru_RU.UTF-8' TEMPLATE template0;Убедитесь, что база данных itma_db создана:\lСписок созданных БДИсправьте значения переменных, чтобы они соответствовали представленным ниже:listen_addresses = '127.0.0.1,172.17.0.1'
port = 10265                          Где: 127.0.0.1 — локальный IP-адрес сервера ;172.17.0.1 — IP-адрес подсети docker0.IP-адреса должны быть перечислены через запятую без пробелов. Если IP-адрес подсети docker0 уже используется в вашей инфраструктуре, его нужно изменить. Подробнее см. в разделе .Скрипт env_generator.sh предназначен только для создания новых env-файлов, не для редактирования существующих.Создайте env-файлы и настройте значения переменных. Для этого:Перейдите в директорию /opt/itm-a:cd /opt/itm-aНазначьте скрипту env_generator.sh полные права доступа:chmod +x env_generator.shЗапустите скрипт:./env_generator.shОткроется всплывающее окно для настройки переменных.Выполните настройку переменных:Чтобы изменить переменную, введите новое значение и нажмите «Enter».Чтобы оставить значение переменной по умолчанию, нажмите «Enter».Рекомендуемые и возможные значения переменных приведены в разделе .Будут созданы файл .env, директория env с файлами .db.env, .proxy.env и директория env/wmi_cred c файлом wmi.pw.Настройте разрешения по подключению docker-контейнера и пользователей к базам данных. Для этого:Войдите в режим редактирования файла pg_hba.conf с помощью команды:vi /var/lib/jatoba/[версия jatoba]/data/pg_hba.confВ этой команде [версия jatoba] — первая цифра в версии Jatoba.При необходимости измените настройки ограничений на подключение локальных и удаленных пользователей к базам данных: Добавьте следующую строку в раздел «# IPv4 local connections:»host [имя БД] [имя пользователя БД] [IP-адрес docker-сети/маска в формате CIDR] [метод аутентификации]для базы данных itma_db, пользователя БД itma_user, IP-адреса подсети контейнера сервера консолидации по умолчанию 172.16.240.0/24 и метода аутентификации md5 строка будет выглядеть следующим образом: host itma_db itma_user 172.16.240.0/24 md5Закомментируйте строки во всех разделах, кроме «# IPv4 local connections:» и измените ident на md5 в строке host all all 127.0.0.1/32 ident.Настройте запуск службы СУБД после службы docker. Для этого:Перейдите в режим редактирования службы СУБД:systemctl edit jatoba-*.serviceДобавьте блок [Unit]:[Unit]
After=docker.service
BindsTo=docker.service
ReloadPropagatedFrom=docker.service
    Для применения изменений в настройках службы СУБД выполните команду: 
        systemctl daemon-reload
    Запустите контейнеры: 
        docker-compose up -d
            Для настройки подключения сервера агентов к серверу консолидации:
                    Откройте веб-интерфейс сервера консолидации.
                    Перейдите в меню «Администрирование» → «Прокси». 
                    В правом верхнем углу нажмите на кнопку «Создать прокси».
                    В появившемся окне заполните поля:
                        Имя прокси — введите имя сервера агентов.Режим прокси — выберите «Пассивный».
                            Интерфейс — укажите IP-адрес, оставьте значения «Подключаться через IP» и «Порт 10051».
                    Нажмите на кнопку «Добавить».
|*|*|*|
                Проверьте владельца файла и права доступа командой: 
                    ls -l /etc/sysconfig/iptables
                    Владелец и права должны совпадать с указанными на скриншоте: 
                        Владелец и права файла iptables
                    В противном случае выполните команду: 
                    chown root:root /etc/sysconfig/iptables && chmod 600 /etc/sysconfig/iptables
                    Проверьте, что владелец и права теперь соответствуют указанным на скриншоте. 
|*|*|*|
                Запустите установку deb-пакета агента::
                        Для агента версии 1:
                            dpkg -i agent_deb_[номер версии агента].[номер версии Debian]_[разрядность].deb
                        Для агента версии 2:
                            dpkg -i itm-agent2_[номер версии агента].[номер версии Debian]_[разрядность].deb
|*|*|*|
                Запустите установку rpm-пакета агента:
                        Для агента версии 1:
                            rpm -Uvh itm-agent_[номер версии агента].el[номер версии CentOS].x86_64.rpm
                        Для агента версии 2:
                            rpm -Uvh itm-agent2_[номер версии агента].el[номер версии CentOS].x86_64.rpm
|*|*|*|
    Перенаправьте репозитории /etc/yum.repos.d/ на http://vault.centos.org вместо http://mirror.centos.org.Установите docker и docker-compose: dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo
dnf install docker-ce
curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
ln -s /usr/local/bin/docker-compose /usr/bin/docker-composeДобавьте службу docker в автозагрузку:systemctl enable --now docker
                Установите пакеты для сбора данных по протоколу :
                    dnf install net-snmp net-snmp-utils
                Перейдите в директорию /opt:
                    cd /opt
                Скачайте файл fping для обработки данных по протоколу
                    ICMP:
                    curl -L "https://dl.fedoraproject.org/pub/epel/8/Everything/x86_64/Packages/f/fping-4.2-2.el8.x86_64.rpm" -o /opt/fping-4.2-2.el8.x86_64.rpm
            Установите fping в каталоге /opt:
                    dnf install fping-4.2-2.el8.x86_64.rpm
|*|*|*|
    Установите docker и docker-compose:yum install docker-ce docker-compose
                Установите пакеты для сбора данных по протоколу  и обработки данных по протоколу :
                    yum install net-snmp net-snmp-utils fping
|*|*|*|
                    Установите список разрешений в разделе «Доступ к API» → «Методы API»:
                        Выберите опцию «Список разрешений».Добавьте в список следующие методы: 
                                        *.get;
                                        host.create;
                                        host.update;
                                        hostinterface.update;
                                        hostinterface.create.
                            Добавление методов API
|*|*|*|
                Установите патч-файл для корректной синхронизации метаданных. Для этого: 
                        Скопируйте на сервер файл path-1.6.0.1.sh.
                        Выполните патч-файл командой:
                            bash path-1.6.0.1.sh
                        Перезапустите сервис:
                            docker-compose down && docker-compose up -d
|*|*|*|
    Добавлен столбец «Версия ПО» в таблицу на странице .
|*|*|*|
            Добавлены шаблоны Общий ПЛК.yaml, APC
                    Smart-UPS.yaml, ИБП Парус Электро.yaml,
                    Postgresql (Jatoba).yaml.Добавлено описание шаблона
                Eltex MES SNMPv2.yaml. Изменены следующие шаблоны:
                    Windows агентный сбор.yaml — добавлены дополнительные
                        прототипы элементов данных для сбора метрик с физических дисков.
                    Linux агентный сбор.yaml — добавлен присоединенный шаблон
                        «Linux агент 2. Службы systemd», собирающий информацию о службах,
                        запускаемых с помощью systemd. Для сбора информации о службах требуется
                        агент версии 2.
                    Сетевое универсальное устройство SNMP — улучшены описания
                        элементов данных, настроено отбрасывание повторяющихся значений у редко
                        собирающихся элементов данных.
                    Windows SNMP — добавлено обнаружение интерфейсов и служб
                        для Windows 2000 и Windows XP.
                    Linux SNMP.yaml — добавлены элементы данных
                        «Входящая/Исходящая нагрузка в %».
                    Сервер консолидации ITM-K.yaml — изменено имя комплексного
                        экрана.
|*|*|*|
    Набор шаблонов для мониторинга по умолчанию
        В комплект поставки  входит набор русскоязычных шаблонов для мониторинга:
                Агент.yaml — для сбора данных о сетевой доступности
                        .
                Windows агентный сбор.yaml — для агентного сбора с
                         Windows.
                Linux агентный сбор.yaml — для агентного сбора с
                         Linux. Для сбора информации о службах
                    требуется агент версии 2.
                Windows WMI.yaml — для безагентного сбора с  Windows по протоколу .
                Сетевое универсальное устройство SNMP.yaml — для сбора основных
                    показателей, таких как общие инвентарные данные, данные с сетевых интерфейсов и
                    контроль дуплекса, по протоколу  с активных сетевых устройств. Для успешного импорта шаблона на используемый
                    сервер установите все чекбоксы в столбце «Удалить отсутствующее». При импорте
                    шаблона на пустой сервер устанавливать чекбоксы не обязательно.
                Cisco IOS SNMP.yaml — для сбора данных об оперативной памяти,
                    процессоре и основных показателей по протоколу  с устройств Cisco.
                Windows SNMP.yaml — для сбора основных показателей с
                         Windows по протоколу .
                Linux SNMP.yaml — для сбора основных показателей с
                         Linux по протоколу .
                Сервер консолидации ITM-K.yaml — для сбора внутренних данных с
                    сервера мониторингаконсолидацииконсолидации.
                Сервер агентов ITM-A.yaml — для сбора внутренних данных с
                    сервера удаленного мониторингаагентовагентов.
                Docker минимальный.yaml — для мониторинга службы Docker и
                    развернутых контейнеров. В шаблоне отключен сбор избыточных метрик. 
                Datapk.yaml — для мониторинга сервера DATAPK. Для сбора
                    информации требуется агент версии 2 и наличие шаблонов Linux агентный
                        сбор.yaml и Docker минимальный.yaml. После
                    установки агента необходимо добавить пользователя zabbix в
                    группу docker с помощью команды usermod -aG docker
                        zabbix.
                Общий ПЛК.yaml — для безагентного сбора данных с помощью
                    простых проверок.
                APC Smart-UPS.yaml — для безагентного сбора данных с ИБП серии
                    APC SMART.
                ИБП Парус Электро.yaml — для сбора диагностической информации
                    для ИБП «Парус Электро» с помощью . 
                Eltex MES Общий.yaml — для сбора диагностической информации для
                    коммутатора «Eltex MES» с помощью .
                Eltex MES5448.yaml  — шаблон для сбора диагностической
                    информации для коммутатора «Eltex MES5448» с помощью .
                Postgresql (Jatoba).yaml — для мониторинга СУБД PostgreSQL или
                    Jatoba. 
                MySQL.yaml — для мониторинга СУБД MySQL. 
                Температура ЦПУ Linux.yaml — для мониторинга температуры ЦПУ в
                    системах Linux. Требуется установка дополнительного ПО, подробнее см. в
                    одноименном каталоге.
                Сервер Huawei RH5885H V3 (iBMC).yaml — шаблон для мониторинга
                    данных от iBMC с помощью SNMP.
                Управляемый блок розеток Rem-MC.yaml — шаблон для сбора
                    информации с управляемых розеток Rem-MC производителя REMER, с помощью . 
                Коммутатор MOXA серии EDS.yaml — универсальный шаблон для
                    коммутаторов MOXA EDS.
            Рекомендуется выгружать шаблоны с сервера  в формате
                    yaml для корректного отображения кириллицы.
|*|*|*|
    Глоссарий
|*|*|*|
    Профиль пользователя
    Страница, где можно изменить настройки для текущего пользователя , такие как пароль, язык, часовой пояс, использование авто-входа
        и авто-выхода, отправка оповещений на почту и сообщений в веб-интерфейсе. Страница
        открывается при нажатии на кнопку «Поддержка» в нижней части главного меню. 
            Страница «Профиль пользователя»
                Страница «Настройки пользователя»
                Страница «Настройки пользователя»
                Страница «Настройки пользователя»
|*|*|*|
    Узлы сети
    Инвентарные данные узла сетиСтраница, на которой отображается список
        всех узлов сети, содержащих инвентарные данные. 
            Страница «Инвентарные данные узла сети»
                    Страница «Узлы сети»
                    Страница «Узлы сети»
                    Страница «Узлы сети»
|*|*|*|
    Группы узлов сети
    Подраздел настройки для создания и редактирования групп узлов сети. Содержит список
        групп узлов сети с подробной информацией о них.
            Страница «Группы узлов сети»
                Страница «Группы узлов сети»
                Страница «Группы узлов сети»
                Страница «Группы узлов сети»
|*|*|*|
    Настройка
    Пункт главного меню, который содержит разделы 
        ,
        ,
        ,
        ,
        ,
        ,
        ,
        ,
        ,
        .
|*|*|*|
    Прокси
     Подраздел администрирования для настройки подключения через сервер удаленного мониторинга
        агентов
        агентов. 
            Страница «Прокси»
                Страница «Прокси»
                Страница «Прокси»
                Страница «Прокси»
|*|*|*|
    Детали события
    Страница, которая содержит детальную информацию о сработавшем триггере, событии,
        которое было создано при срабатывании этого триггера, а также о таких действиях, как
        создание или решение проблемы. Для просмотра страницы с деталями события:
                Перейдите на страницу  → .
                Найдите в списке проблему, для которой нужно посмотреть детальную
                    информацию.
                В строке с проблемой нажмите на ссылку в столбце «Время».
            Страница «Детали события»
|*|*|*|
    Очередь
    Подраздел администрирования, где отображаются элементы, которые ожидают обновления.
        Содержит страницы ,  и
            .
            Страница «Очередь»
                Страница «Очередь»
                Страница «Очередь»
                Страница «Очередь»
|*|*|*|
    Обзор
    Обзор инвентарных данных узла сетиСтраница для группировки и просмотра
        данных по различным полям инвентаризации.
            Страница «Обзор инвентарных данных узла сети»
                    Страница «Обзор»
                    Страница «Обзор»
                    Страница «Обзор»
|*|*|*|
    Комплексные экраны
    Подраздел мониторинга, который содержит список существующих комплексных экранов —
        таблиц, позволяющих группировать информацию из различных источников для быстрого обзора
        данных на одном экране. 
            Страница «Комплексные экраны»
|*|*|*|
    Способы оповещений
    Подраздел администрирования для создания и настройки способов оповещения.
            Страница «Способы оповещений»
                Страница «Способы оповещений»
                Страница «Способы оповещений»
                Страница «Способы оповещений»
|*|*|*|
    100 наиболее активных триггеров
    Подраздел отчетов для просмотра триггеров, которые изменили свои состояния в течение
        выбранного периода времени. Триггеры отсортированы по количеству изменений состояния от
        большего к меньшему. 
            Страница «100 наиболее активных триггеров»
                Страница «100 наиболее активных триггеров»
                Страница «100 наиболее активных триггеров»
                Страница «100 наиболее активных триггеров»
|*|*|*|
    Общие
    Подраздел администрирования, который содержит страницы для изменения настроек
        веб-интерфейса : Веб-интерфейс, Авторегистрация, Очистка истории, Изображения, Соответствия иконок, Регулярные
            выражения, Макросы, Преобразование
            значений, Опции отображения триггеров, Модули, Прочие. 
            Страница «Общие»
                Страница «Общие»
                Страница «Общие»
                Страница «Общие»
|*|*|*|
    Отчет о доступности
    Подраздел отчетов для определения доступности различных элементов системы.
        Содержит таблицу со столбцами:
            Узел сети — указывает, к какому узлу сети принадлежит триггер.
            Имя — название триггера.
            Проблемы — показывает, сколько процентов времени триггер находился в состоянии «Проблема» за указанный промежуток времени.
            Ok — показывает, сколько процентов времени триггер находился в состоянии «ОК» за указанный промежуток времени.
            График — при нажатии на кнопку «Показать» открывает график с информацией о доступности триггера за текущий год.
        Триггеры можно фильтровать по следующим параметрам:
            название узла сети или группы узлов сети;
            дата или время.
            Страница «Отчет о доступности»
                Страница «Отчет о доступности»
                Страница «Отчет о доступности»
                Страница «Отчет о доступности»
|*|*|*|
    Перечень испытаний для приемки комплекса
                        №
                        Содержание проверки
                        Выполняемые действия
                        Критерии выполнения требований
                         1
                        Проверка возможности добавления и регистрации объектов мониторинга в базу данных
                            (БД)  :
                                Ручное добавление и регистрация путем ввода данных об объекте
                                    мониторинга в соответствующие поля ввода информации.
                            Войти в интерфейс  с помощью интернет-обозревателя.
                                Перейти на вкладку «Настройка» →
                                    «Узлы сети». Нажать на
                                кнопку «Создать узел сети». Ввести данные:
                                Имя узла сети;
                                Видимое имя;
                                Группу;
                                Реквизиты доступа к узлу сети;
                                Статус активности узла сети.
                            Нажать на кнопку «Добавить».
                             позволяет добавлять и регистрировать объекты мониторинга со
                                следующими атрибутами:
                                Наименование объекта
                                        мониторинга;
                                Принадлежность объекта
                                        мониторинга к группе;
                                Сетевой интерфейс объекта
                                        мониторинга;
                                Описание объекта
                                        мониторинга;
                                Состояние объекта
                                        мониторинга.
                        Ручное добавление и регистрация путем импорта данных об объекте мониторинга из
                            файла.
                            Перейти на вкладку «Настройка» →
                                    «Узлы сети». Выбрать
                                произвольный узел и нажать кнопку «Экспорт». Открыть
                                экспортированный файл и внести в него изменения:
                                Поле Host;
                                Поле Name;
                                Поле IP.
                            Импортировать файл.
                        Файл со сведениями об объекте
                                мониторинга импортирован в .
                        Автоматическое добавление и регистрация объектов мониторинга, активное
                            сканирование заданных IP-адресов, либо диапазонов IP адресов.
                        Перейти на вкладку «Настройка» →
                                «Обнаружение». Нажать
                            на кнопку «Создать правило обнаружения» и определить диапазон IP адресов
                            для обнаружения агентов, а также периодичность опроса сети.
                         реализует автоматическое добавление и регистрацию
                            объектов мониторинга активное сканирование заданных IP-адресов, либо
                            диапазонов IP адресов.
                         2
                        Проверка возможности описания сервисов.
                        Войти в интерфейс  с помощью интернет-обозревателя.
                            Перейти на вкладку «Настройка» →
                                «Услуги». Раскрыть
                            описание сервиса.
                            В описании сервиса отображается:
                                Название;
                                Алгоритм вычисления статуса;
                                Показатель ;
                                , сигнализирующие о состоянии
                                    сервиса.
                         3
                        Проверка сбора данных о производительности с АРМ и серверов под
                            управлением операционных систем (ОС) семейства Microsoft Windows, ОС
                            семейства Linux, ОС UNIX.
                        Войти в интерфейс  с помощью интернет-обозревателя.
                            Перейти на вкладку «Мониторинг» → «Последние данные». Убедиться в наличии
                            собираемых показателей производительности.
                            Отображение показателей производительности:
                                нагрузка на центральный процессор (Central Processor Unit,
                                    CPU);
                                объем занятой оперативной памяти;
                                свободное место на дисках;
                                скорость работы дисков (Input-Output Operations Per Second,
                                    IOPS); 
                                нагруз|*|*|*|ка на сетевые интерфейсы;
                                идентификационная информация об объекте мониторинга;
                                статус служб объекта
                                        мониторинга;
                                статус доступности объекта
                                        мониторинга.
                         4
                        Проверка сбора данных о производительности с активного сетевого
                            оборудования по протоколу .
                        Войти в интерфейс  с помощью интернет-обозревателя.
                            Перейти на вкладку «Мониторинг» → «Последние данные». Убедиться в наличии
                            собираемых показателей производительности.
                            Отображение показателей производительности:
                                показатели исходящего и входящего трафика;
                                состояние сетевых интерфейсов;
                                информация о возникающих ошибках;
                                статус доступности объекта
                                        мониторинга.
                         5
                            Проверка возможности создания и настройки триггеров (условий) для контролируемых данных,
                                получаемых с объектов
                                    мониторинга.
                            Проверка возможности указания допустимых значений в триггерах (условиях), собираемых данных
                                с объектов мониторинга.
                            Проверка реализации действий при выполнении условий триггеров.
                        Войти в интерфейс  с помощью интернет-обозревателя.
                            Перейти на вкладку «Настройки» →
                                «Узлы сети». Выбрать
                            произвольный объект мониторинга
                            и нажать на кнопку «Триггеры». Выбрать произвольный триггер.
                            Наличие у триггера допустимого
                                значения параметра в виде логического выражения.
                            Наличие у триггера режима генерации
                                событий «Проблема».
                         6
                            Проверка визуализации данных:
                                визуализация данных с использованием встроенных и настраиваемых
                                    графиков;
                                создание отчетов.
                        Войти в интерфейс  с помощью интернет-обозревателя.
                            Перейти на вкладку «Мониторинг» →«Графики», выбрать
                            произвольный график.
                        Осуществляется визуализация данных с использованием встроенных и
                            настраиваемых графиков.
                        Перейти на вкладку «Отчеты».
                        На вкладке «Отчеты» присутствуют отчеты о доступности объектов
                            мониторинга, о наиболее активных триггерах и другие отчеты.
                         7
                        Проверка отображения карты сети с указанием на ней объектов
                            мониторинга.
                        Войти в интерфейс  с помощью интернет-обозревателя.
                            Перейти на вкладку «Мониторинг»,
                            выбрать карту сети.
                        На карте сети отображаются объекты мониторинга, а также выявленные
                            проблемы функционирования.
                         8
                        Проверка отображения перечня проблем в табличном виде.
                        Войти в интерфейс  с помощью интернет-обозревателя.
                            Перейти на вкладку «Мониторинг»,
                            выбрать таблицу с отображением проблем.
                            Отображение перечня проблем в табличном виде с возможностью
                                фильтрации по:
                                объекту мониторинга или
                                    группе объектов
                                        мониторинга;
                                условиям (триггерам) и
                                    проблемам.
                         9
                            Выполнить проверку функций каждой АСУ ТП, в состав которых входят
                                    объекты мониторинга:
                                АРМ №1.
                                АРМ №2
                                ...
                            Проверить функций каждой АСУ ТП, в состав которых входят объекты мониторинга:
                                АРМ №1.
                                АРМ №2
                                ...
                        АСУ ТП функционирует в штатном режиме, функции АСУ ТП
                            выполняются.
|*|*|*|
    Роли пользователей и интерфейсы, доступные каждой роли
                                                Роль
                                                Список доступных для роли интерфейсов
                                                Список доступных страниц
                                                Пользователь
                                                Интерфейс авторизации
                                                  Интерфейс управления
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                Администратор
                                                Интерфейс авторизации
                                                  Интерфейс управления
                                                  Все страницы, доступные роли «Пользователь»
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                Супер Администратор
                                                Интерфейс авторизации
                                                  Интерфейс управления
                                                  Все страницы, доступные роли
                                                  «Администратор»
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
                                                   → 
|*|*|*|
    Рекомендации по использованию переменных файла .web.env
                Рекомендации по использованию переменных файла .env_web
                            Переменная
                            Рекомендации по использованию
|*|*|*|
    Рекомендации по использованию переменных файла .db.env
                Рекомендации по использованию переменных файла .db.env
                            Переменная
                            Рекомендации по использованию
|*|*|*|
    Рекомендации по использованию переменных файла .agent.env
                Рекомендации по использованию переменных файла .agent.env
                            Переменные
                            Рекомендации по использованию
|*|*|*|
    Переменные файла .db.env
        Переменные для настройки взаимодействия сервера мониторингаконсолидацииконсолидации с базой данных .
            Переменные файла .db.env
                        Название
                        Описание
                        Значение по умолчанию (жирным), либо пример
                        Допустимые значения
                        host.docker.internal
                        —
                        10265
                        —
                        itmk_user
                        —
                        P@ssw0rd
                        —
                        itmk_db
                        —
|*|*|*|
    Переменные файла .env
            Переменные для корректной работы 
                        Название
                        Описание
                        Значение по умолчанию (жирным), либо пример
                        Допустимые значения
                        docker-compose.release.yaml
                        —
                Переменные для настройки DATAPK
                            Название
                            Описание
                            Значение по умолчанию (жирным), либо пример
                            Допустимые значения
                            https://127.0.0.1
                            —
                            443
                            —
                            17
                            16, 17, 18, 19, 19_fstec
                            datapk
                            —
                            datapk
                            —
                Переменные для настройки ZABBIX
                            Название
                            Описание
                            Значение по умолчанию (жирным), либо пример
                            Допустимые значения
                            datapkitm
                            —
                            datapkitm
                            —
                Переменные для настройки синхронизации
                            Название
                            Описание
                            Значение по умолчанию (жирным), либо пример
                            Допустимые значения
                            true
                            true, false
                            3600
                            —
                Переменные для настройки сети DOCKER
                            Название
                            Описание
                            Значение по умолчанию (жирным), либо пример
                            Допустимые значения
                            172.16.239.0/24
                            —
|*|*|*|
    Переменные файла zabbix_agentd.conf
            Переменные файла zabbix_agentd.conf
                        Параметр
                        Описание
                        Значение по умолчанию (жирным), либо пример
                        Допустимые значения
                        =cpu.util:system.cpu.util
                            позволяет использовать запись cpu.util вместо
                                system.cpu.util для получения утилизации CPU в
                            процентах с параметрами по умолчанию.
                        —
                        Разрешение агенту запускаться под «root». Если отключено и агент
                            запускается из-под «root», то агент попытается переключиться на
                            пользователя «zabbix». Не имеет смысла, если агент запускается под
                            обычным пользователем.
                        0
                                0 — не разрешать;
                                1 — разрешать.
                        5
                        1-3600
                        100
                        2-65535
                        3
                        0-5
                        0
                                0 — не разрешены;
                                1 — разрешены.
                        —
                        Строка длиной 0-255 символов
                        —
                        Строка длиной 0-255 символов
                        Уникальное, регистрозависимое имя хоста. Требуется для активных
                            проверок и должно совпадать с именем узла сети, указанным на
                            сервере.
                        itm_hostname
                        Буквы, цифры, «.», « », «_» и «-». Максимальная длина: 64
                            system.hostname
                        —
                        /files/conf/*.conf.
                        —
                        0.0.0.0
                        —
                        Порт, который слушает траппер.
                        10051
                        1024-32767
                        Модули, которые загружаются во время старта и используются для
                            расширения возможностей сервера. Формат:
                                Loadmodule=<module.so>. Модули должны находиться
                            в папке указанной в параметре LoadModulePath. Допускается добавлять
                            несколько параметров LoadModule.
                        dummy1.so, dummy2.so, dummy10.so
                        —
                        Абсолютный путь к каталогу с серверными модулями. По умолчанию
                            зависит от опций компиляции.
                        /files/modules
                        —
                        logfilename
                        —
                        1
                        0-1024
                        file
                                file — запись журнала в файл, указанный в параметре ;
                                system — запись журнала в syslog;
                                console — запись журнала в стандартный вывод.
                        0
                        0, 1
                        20
                        1-1000
                        /tmp/zabbix_server.pid
                        —
                        120
                        60-3600
                        IP-адрес сервера , если наблюдение
                            осуществляется на уровне филиала, или IP-адрес сервера , если наблюдение осуществляется на уровне
                            ТО. Входящие соединения будут приниматься только с хостов, указанных в
                            этом списке.
                        1.1.1.1
                        —
                            IP-адрес сервера , если наблюдение осуществляется на уровне филиала, или
                                IP-адрес сервера , если наблюдение осуществляется на уровне ТО. Используется,
                                если агент в активном режиме.
                        1.1.1.1
                        —
                        —
                        —
                        StartAgents
                        3
                        0-100
                        3
                        1-30
                        unencrypted
                        —
                        TLSCAFile
                        /home/itm/itm_ca_file
                        —
                        /home/itm/itm_server.crt
                        —
                        cert
                        —
                        /home/itm/itm_crl_file
                        —
                        /home/itm/itm_server.key
                        —
                        /home/itm/itm_agentd.psk
                        —
                        PSK 001
                        —
                        CN=Signing CA,OU=Development group,O=itm
                                SIA,DC=itm,DC=com
                        —
                        CN=itm server,OU=Development group,O=itm
                                SIA,DC=zabbix,DC=com
                        —
                        0
                        0, 1
                        zabbix
                        —
                                Пользовательский параметр для мониторинга. Можно указать
                                    нескольких пользовательских параметров.
                                Формат: UserParameter=<ключ>,<shell
                                        команда>
                                Обратите внимание, что команда не должна возвращать только пустую
                                    строку или EOL.
                        UserParameter=system.test,who|wc -l
                        —
|*|*|*|
    Параметры файлов конфигурации
        Параметры файлов конфигурации для запуска и работы сервера консолидацииконсолидациимониторинга
            .
        В данном разделе:
|*|*|*|
    Переменные файла .srv.env
        Переменные для настройки работы контейнера сервера .
                Переменные файлa .srv.env
                            Название
                            Описание
                            Значение по умолчанию (жирным), либо пример
                            Допустимые значения
                            #
                            0.0.0.0 
                            —
                            #
                            10051
                            —
                            #
                            —
                            #
                            uint,dbl,str,log,text
                            uint,dbl,str,log,text
                            #
                            required
                                В MySQL с версии 5.7.11 и PostgreSQL: 
                                        required — подключиться с помощью
                                            TLS;
                                        verify_ca — подключиться по TLS и
                                            проверить сертификат;
                                            verify_full — подключиться с помощью
                                            TLS, проверить сертификат и убедиться, что идентификатор
                                            базы данных, указанный DBHost, соответствует его
                                            сертификату.
                                В MariaDB с версии 10.2.6: 
                                        required;
                                            verify_full.
                            #
                            no, yes
                            #
                             —
                            #
                             —
                            #
                            TLS-ECDHE-RSA-WITH-AES-128-GCM-SHA256
                             —
                            #
                            TLS_AES_256_GCM_SHA384
                             —
                            #
                            3
                            15
                            0-1000
                            #
                            0
                            0-1000
                            #
                            3
                            1-1000
                            10
                            0-1000
                            #
                            5
                            0-1000
                            5
                            0-1000
                            #
                            1
                            0-250
                            #
                            1
                            0-1000
                            #
                            1
                            1-1000
                            #
                            1
                            1-100
                            #
                            3
                            1-100
                            #
                            true
                            true или false
                            #
                            zabbix-java-gateway
                            —
                            #
                            10052
                            1024-32767
                            #
                            5
                            0-1000
                                #
                            0
                            0-250
                            #
                            60
                            10-86400
                            #
                            60
                            10-86400
                            #
                            8M
                            0,128К - 64G
                            #
                            10
                            1-300
                            true
                            true или false
                            #
                            —
                            —
                                #
                            1
                            0-24
                                #
                            5000
                            0-1000000
                            #
                            30
                            5-3600
                            #
                            8M
                            128K-8G
                                #
                            60
                            1-3600
                            #
                            4
                            1-100
                            #
                            16M
                            128K-2G
                                #
                            4M
                            128K-2G
                            #
                            4M
                            128K-2G
                            #
                            8M
                            0,128К - 64G
                            20
                            1-30
                            #
                            300
                            1-300
                            45
                            1-3600
                            #
                            60
                            1-3600
                            #
                            15
                            1-3600
                            #
                            3000
                            0-3600000
                            #
                             1M
                            1M-1G
                            5
                            0-250
                            900
                            1-604800
                            60
                            1-3600
                            #
                            "dummy1.so, dummy2.so, dummy10.so"
                            —
                            #
                            /home/zabbix/zabbix_ca_file
                            —
                            #
                            /home/zabbix/zabbix_crl_file
                            —
                            #
                            /home/zabbix/zabbix_server.crt
                            —
                            #
                            /home/zabbix/zabbix_server.key
                            —
                            #
                                secret/zabbix/database
                             —
                            #
                            —
                            #
                                    s
                            s.H39hfS7eHSbb1GpkdzOQLTlz
                             —
|*|*|*|
    Рекомендации по использованию переменных файла .env
                Рекомендации по использованию переменных файла .env
                            Переменные
                            Рекомендации по использованию
                            При пусконаладке для ускорения синхронизации рекомендуется использовать команду, которая одноразово запускает
                                синхронизацию:docker-compose run synchronizer python3 -m synchronizer.synchronization
                            При смене пароля пользователя в веб-интерфейсе необходимо
                                обновить его в файле конфигурации.
                            Уточнить значение можно в веб-интерфейсе DATAPK в разделе
                                Настройка и мониторинг → Основные, в поле «Информация об
                                изготовителе». 
|*|*|*|
    Рекомендации по использованию переменных файла .srv.env
                Рекомендации по использованию переменных файла .srv.env
                            Переменные
                            Рекомендации по использованию
                                Требуется ненулевое значение для работы внутренних, агрегированных и вычисляемых элементов данных
|*|*|*|
    Переменные файла .web.env
        Переменные для настройки контейнера веб-сервера ПК .
            Переменные файла .web.env
                        Название
                        Описание
                        Значение по умолчанию (жирным), либо пример
                        Допустимые значения
                        #
                        zabbix-server
                        —
                        #
                        10051
                        —
                        #
                        true
                        true, false
                        #
                        —
                        #
                        —
                        #
                        —
                        #
                        false
                        true, false
                        #
                        TLS-ECDHE-RSA-WITH-AES-128-GCM-SHA256
                         —
                        #
                            secret/zabbix/database
                         —
                        #
                        —
                        #
                        s.H39hfS7eHSbb1GpkdzOQLTmz
                         —
                        #
                        —
                        #
                        ['uint', 'dbl', 'str', 'text', 'log']
                        uint,dbl,str,log,text
                        #
                        true
                         —
                        #
                        600
                        —
                        #
                        128M
                        —
                        #
                        16M
                        —
                        #
                        2M
                        —
                        #
                        300
                        —
                        #
                        zbx_sessionid
                        —
                        Asia/Yekaterinburg
                        —
                        #
                        false
                        true, false
                        #
                        ['127.0.0.1']
                         —
                        #
                        Zabbix is under maintenance.
                         —
|*|*|*|