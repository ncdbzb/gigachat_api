<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="ReusableComponent_rz2_315_fyb">
    <title></title>
    <body><section id="section_vz2_315_fyb"><title>Способ 2: развертывание резервной копии с текстовым форматом</title><p>Способ подходит для резервных копий, которые были созданы с помощью команды <codeph>pg_dump</codeph> без использования дополнительных ключей.<ol id="ol_z3z_lh4_fyb"><li>Создайте базу, в которую будут скопированы данные из резервной копии:<ol id="ol_yz2_qh4_fyb"><li>Войдите в интерактивный терминал для работы с postgresql под пользователем <codeph>postgres</codeph>:<codeblock>sudo -u postgres psql</codeblock></li><li>Создайте базу данных для восстановления данных из резервной копии, в качестве распорядителя которой указан пользователь <codeph>db_user</codeph>:<codeblock>CREATE DATABASE [db_name] WITH OWNER '[db_user]';</codeblock>В этой команде:<ul id="ul_zlc_f34_fyb"><li><codeph>db_name</codeph> — наименование базы данных;</li><li><codeph>db_user</codeph> — имя пользователя.</li></ul></li><li>Убедитесь, что база данных [db_name] создана:<codeblock>\l</codeblock></li><li>Покиньте терминал:<codeblock>\q</codeblock></li></ol></li><li>Восстановите базу данных Jatoba из файла архива с текстовым форматом, созданного командой <codeph>pg_dump</codeph>:<codeblock>psql -h [host] -p [port] -U [db_user] [db_name] &lt; [dir]/[db_archive].dump</codeblock>В этой команде:<ul id="ul_ndg_lj4_fyb"><li>host — имя или IP-адрес компьютера, на котором работает сервер;</li><li>port — порт подключения;</li><li>db_user — имя пользователя;</li><li>db_name — наименование базы данных;</li><li>dir — директория для сохранения архива базы данных;</li><li>db_archive — наименование архива базы данных.</li></ul><note>В качестве пользователя для развертывания рекомендуется указать пользователя с правами супер-администратора. Права на базу будут соответствовать пользователю, от чьего имени база была создана, либо пользователю, который был указан в значении ключа WITH OWNER.</note><p> <b>Пример:</b> Команда для выгрузки БД <codeph>datapkitm</codeph> с пользователем <codeph>postgres</codeph>, IP-адресом сервера 127.0.0.1 и портом 10265 в архив с именем <codeph>datapkitm</codeph> в директории <codeph>/opt</codeph> будет выглядеть следующим образом:<codeblock>psql -h 127.0.0.1 -p 10265 -U postgres datapkitm &lt; /opt/datapkitm.dump </codeblock></p></li><li>Введите пароль пользователя для доступа к базе данных.<p><b>Результат шага:</b> После успешного ввода пароля начнется создание файла с базой данных.</p></li></ol></p></section></body>
</topic>
